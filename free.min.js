void
function() {
    function Tt(t) {
        function n(o, n, u, d) {
            if ("undefined" != typeof e.app_url_vars) {
                for (var p in e.app_url_vars) delete e.app_url_vars[p];
                c(e.app_url_vars, o)
            }
            var t = s(o, {
                record_undefined_values: !1
            });
            "undefined" != typeof n && ("undefined" != typeof n.title && (e.title = n.title), "undefined" != typeof n.url && (e.url = n.url), "undefined" != typeof n.callback && (e.callback = n.callback), "undefined" == typeof e.url && (e.url = location.protocol + "//" + location.host + location.pathname + e.base_filename, e.url += t)), 1 == u ? (r[t] = {}, r[t].title = e.title, r[t].url = e.url, r[t].callback = e.callback) : e[i] = o[i];
            var h = r[t].title,
                _ = r[t].url,
                l = r[t].callback;
            delete e.url, delete e.callback, document.title = "undefined" != typeof h ? h : "", (1 == u || d) && history[(a ? "replace" : "push") + "State"](o, h, _), e.current_state = o, 1 == a && (a = !1), d || ("undefined" != typeof e.onstatechange ? e.onstatechange(o, function() {
                "undefined" != typeof l && l()
            }) : "undefined" != typeof l && l())
        }

        function s(i, t) {
            "undefined" == typeof t && (t = {}), "undefined" == typeof t.record_undefined_values && (t.record_undefined_values = !0);
            var e = "";
            for (var r in i)("undefined" != typeof i[r] || 1 == t.record_undefined_values) && (e += "&" + r + "=" + i[r]);
            return "" != e && (e = "?" + e.slice(1, e.length)), e
        }

        function l(e) {
            if ("object" != typeof e || null == e) var e = {};
            for (var r = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"), n = r.length, t = 0; n > t; t++) {
                var i = r[t].split("=");
                "undefined" != typeof i[1] && (e[i[0]] = decodeURIComponent(i[1]))
            }
            return e
        }

        function c(e, t) {
            if ("undefined" == typeof t) return e;
            for (var i in t) e[i] = t[i];
            return e
        }

        function o(e) {
            if ("object" != typeof e || null == e) return e;
            var i = e instanceof Array ? [] : {};
            for (var r in e) {
                var t = e[r];
                i[r] = "object" == typeof t && t instanceof Array ? t.slice() : t
            }
            return i
        }
        var e = this;
        "undefined" == typeof t && (t = {}), e.overwrite_first_state = "undefined" != typeof t.overwrite_first_state && 0 == t.overwrite_first_state ? !1 : !0;
        var i = "undefined" != typeof t.var_name ? t.var_name : "page";
        e.base_filename = "undefined" != typeof t.base_filename ? t.base_filename : "", e.onbeforestatechange = t.onbeforestatechange, e.onstatechange = t.onstatechange, e.initial_page = t.initial_page, e.app_url_vars = t.app_url_vars, e.can_do_popstate = t.can_do_popstate, e.current_state = {};
        var r = {},
            a = !0;
        window.addEventListener("popstate", function(t) {
            return "undefined" == typeof e.can_do_popstate || e.can_do_popstate(t.state) ? void(null != t.state && n(t.state, void 0, !1)) : void n(e.current_state, void 0, !1, !0)
        }), e.load_page = function(t, r) {
            "undefined" == typeof t && (t = {}), "undefined" == typeof r && (r = {}), t = o(t), r = o(r), 1 == a && 1 == e.overwrite_first_state && (l(t), "undefined" == typeof e[i] && (e[i] = e.initial_page)), "undefined" == typeof t[i] && (t[i] = e[i]), "undefined" != typeof e.onbeforestatechange ? e.onbeforestatechange(t, r, function() {
                n(t, r, !0)
            }) : n(t, r, !0)
        }
    }

    function N(e) {
        return e.which ? 3 == e.which : e.button ? 2 == e.button : !1
    }

    function wt(e) {
        return e.detail ? -1 * e.detail : e.wheelDelta / 40
    }

    function R(e) {
        function r(t) {
            0 != i && "undefined" != typeof e.end_effect && e.end_effect(t)
        }

        function n(r) {
            if (r.touches.length < 2) return void(i = !1);
            if ("touchmove" == r.type) {
                if (0 == i) return;
                var p = i
            } else if ("undefined" != typeof e.start_condition && e.start_condition(r) === !1) return;
            var u = s(r.touches[0], t),
                n = u[0],
                l = u[1],
                d = s(r.touches[1], t),
                c = d[0],
                h = d[1];
            return (e.always_recalculate_zoom_target === !0 || 0 == i) && (a = (n + c) / 2, o = (l + h) / 2), i = Math.sqrt(Math.pow(Math.abs(n - c), 2) + Math.pow(Math.abs(l - h), 2)), "touchstart" == r.type ? void("undefined" != typeof e.start_effect && e.start_effect(r, n, l, c, h)) : (e.result_function(i / p, a, o), void("undefined" != typeof e.move_effect && e.move_effect(r)))
        }
        if ("undefined" == typeof this || this === window) return new R(e);
        var t = e.target,
            i = !1,
            a = void 0,
            o = void 0;
        t.addEventListener("touchend", r), t.addEventListener("touchcancel", r), t.addEventListener("touchleave", r), t.addEventListener("touchstart", n), t.addEventListener("touchmove", n)
    }

    function n(e) {
        if ("object" != typeof e || null == e) return e;
        var t = e instanceof Array ? [] : {};
        for (var i in e) t[i] = e[i];
        return t
    }

    function g(t) {
        if ("object" != typeof t || null == t) return t;
        var i = t instanceof Array ? [] : {};
        for (var r in t) {
            var e = t[r];
            if ("object" == typeof e)
                if (e instanceof Array) {
                    i[r] = [];
                    for (var n = 0, a = e.length; a > n; n++) i[r].push("object" == typeof e[n] ? g(e[n]) : e[n])
                } else i[r] = g(e);
            else i[r] = e
        }
        return i
    }

    function s(e, t) {
        "undefined" == typeof t && (t = e.target);
        var i = t.getBoundingClientRect();
        return [e.clientX - i.left, e.clientY - i.top]
    }

    function i(e) {
        function r() {
            var r = i.responseText;
            if (200 != i.status && 0 == e.ignore_request_status) r = {
                error: !0,
                errormessage: r
            };
            else if (1 != n && "" != r) try {
                r = JSON.parse(r)
            } catch (a) {
                return r = {
                    error: !0,
                    errormessage: r
                }, 0 == t ? r : void(e.error && e.error(r))
            } {
                if ("" == r || 1 != r.error) return 0 == t ? r : void("undefined" != typeof e.success && e.success(r));
                if ("undefined" != typeof e.error) return 0 == t ? r : e.error(r)
            }
        }
        var n = e.send_data_as_plaintext || e.plaintext || !1,
            t = !0;
        "undefined" != typeof e.is_asynchronous && (t = e.is_asynchronous), "undefined" != typeof e.async && (t = e.async);
        var a = "undefined" != typeof e.charset ? e.charset : "",
            o = ("undefined" != typeof e.data ? e.data : "", "undefined" != typeof e.ignore_request_status ? e.ignore_request_status : !1, yt(e.file, e.data, n, a, t, void 0, void 0, e.request_method)),
            i = o.http_request;
        return 0 == t ? r() : void(i.onreadystatechange = function() {
            4 == i.readyState && r()
        })
    }

    function yt(o, t, r, i, n, s, l, a) {
        ("undefined" == typeof r || r !== !0) && (r = !1), ("undefined" == typeof n || 0 != n) && (n = !0), i = "undefined" == typeof i ? "" : "; charset=" + i;
        var e = new XMLHttpRequest;
        if (e || alert("Cannot create an XMLHTTP instance for some reason. Please try reloading the page."), "undefined" == typeof a) var a = null === t ? "GET" : "POST";
        return "GET" == a && (o += "undefined" != typeof t ? "?" + t : "", t = null), e.open(a, o, n), "undefined" != typeof s && (e.responseType = s), r === !0 ? (e.setRequestHeader("Content-type", "application/x-www-form-urlencoded" + i), "undefined" != typeof e.overrideMimeType && e.overrideMimeType("text/plain; charset=x-user-defined")) : e.setRequestHeader("Content-type", "application/x-www-form-urlencoded" + i), e.send(t), {
            http_request: e
        }
    }

    function vt() {
        var e = document.createElement("input");
        document.body.appendChild(e), e.focus(), document.body.removeChild(e), e = null
    }

    function j(i, t) {
        var e = window.getComputedStyle(i),
            n = "" != e.boxSizing ? e.boxSizing : e.mozBoxSizing;
        if ("border-box" != n) var r = 0;
        else var r = parseFloat(e.paddingLeft) + parseFloat(e.paddingRight);
        return "undefined" != typeof t && "undefined" != typeof t.margin && 1 == t.margin && (r += parseFloat(e.marginLeft) + parseFloat(e.marginRight)), i.clientWidth + r + parseFloat(e.borderLeftWidth) + parseFloat(e.borderRightWidth)
    }

    function o(i, t) {
        var e = window.getComputedStyle(i),
            n = "" != e.boxSizing ? e.boxSizing : e.mozBoxSizing;
        if ("border-box" != n) var r = 0;
        else var r = parseFloat(e.paddingTop) + parseFloat(e.paddingBottom);
        return "undefined" != typeof t && "undefined" != typeof t.margin && 1 == t.margin && (r += parseFloat(e.marginTop) + parseFloat(e.marginBottom)), i.clientHeight + r + parseFloat(e.borderTopWidth) + parseFloat(e.borderBottomWidth)
    }

    function S(i, e) {
        if ("undefined" == typeof i) var e = e.primary,
            i = e.secondary;
        var r = {};
        for (var t in i) r[t] = i[t];
        for (var t in e) r[t] = e[t];
        return r
    }

    function r(e) {
        e.setAttribute("unselectable", "on"), e.style.WebkitTapHighlightColor = "rgba(255, 255, 255, 0)", e.style.WebkitHighlightColor = "transparent", e.style.MozUserSelect = "none", e.style.OUserSelect = "none", e.style.KhtmlUserSelect = "none", e.style.WebkitUserSelect = "none", e.style.MsUserSelect = "none", e.style.userSelect = "none"
    }

    function l(e) {
        e.setAttribute("unselectable", "off"), e.style.WebkitTapHighlightColor = "", e.style.WebkitHighlightColor = "", e.style.MozUserSelect = "text", e.style.OUserSelect = "text", e.style.KhtmlUserSelect = "text", e.style.WebkitUserSelect = "text", e.style.MsUserSelect = "text", e.style.userSelect = "text"
    }

    function h(e) {
        ("object" != typeof e || null == e) && (e = {});
        for (var r = window.location.href.slice(window.location.href.indexOf("?") + 1).split("&"), n = r.length, t = 0; n > t; t++) {
            var i = r[t].split("=");
            "undefined" != typeof i[1] && (e[i[0]] = decodeURIComponent(i[1]))
        }
        return e
    }

    function gt(i, t) {
        "undefined" == typeof t && (t = {}), "undefined" == typeof t.record_undefined_values && (t.record_undefined_values = !0);
        var e = "";
        for (var r in i)("undefined" != typeof i[r] || 1 == t.record_undefined_values) && (e += "&" + r + "=" + i[r]);
        return "" != e && (e = "?" + e.slice(1, e.length)), e
    }

    function mt(e) {
        var t = e.indexOf("://");
        if (-1 == t) return e;
        t = -1 == t ? 0 : t + 3;
        var i = e.indexOf("/", t) + 1;
        return 0 == i ? e : e.substring(i)
    }

    function ft(e) {
        var o = /^https?:\/\/[a-z\:0-9.]+/,
            n = "",
            a = o.exec(e);
        null != a && (n = a[0]), n.length > 0 && (e = e.replace(n, "").substr(1));
        var i = document.getElementsByTagName("head");
        if (i = i[i.length - 1], null != i) {
            var t = document.getElementsByTagName("base");
            if (t = t[t.length - 1], null != t) {
                var r = t.getAttribute("href");
                r = r.substr(r.indexOf("/") + 1) + "/", e = e.replace(r, "")
            }
        }
        return e
    }

    function m(i, t) {
        if ("undefined" == typeof t && (t = {}), t.play_howl) return new B(i, t);
        if ("undefined" != typeof t.container && "undefined" != typeof t.container[i] && !t.force_refresh) {
            var e = t.container[i];
            return e.loop = t.loop || !1, e.volume = t.volume || 1, e.start = "undefined" != typeof t.start ? t.start : !0, e.stopped = !1, 1 == e.start ? (e.audio.play(), 1 == e.loop && e.addEventListener("ended", e.play)) : 1 == e.loop && (e.audio.loop = !0), e
        }
        if ("undefined" == typeof this || this == window) return new m(i, t);
        var e = this;
        if ("undefined" != typeof t.container && (t.container[i] = e), Object.defineProperty(e, "duration", {
                get: function() {
                    return e.audio.duration
                }
            }), Object.defineProperty(e, "currentTime", {
                get: function() {
                    return e.audio.currentTime
                },
                set: function(t) {
                    function i() {
                        e.audio.removeEventListener("loadedmetadata", i), e.audio.currentTime = t
                    }
                    return 0 != e.audio.readyState ? void(e.audio.currentTime = t) : void e.audio.addEventListener("loadedmetadata", i)
                }
            }), Object.defineProperty(e, "volume", {
                get: function() {
                    return e.audio.volume
                },
                set: function(t) {
                    e.audio.volume = t
                }
            }), Object.defineProperty(e, "paused", {
                get: function() {
                    return e.audio.paused
                }
            }), e.addEventListener = function() {
                return e.audio.addEventListener(arguments[0], arguments[1], !1 || arguments[2])
            }, e.removeEventListener = function() {
                return e.audio.removeEventListener(arguments[0], arguments[1], !1 || arguments[2])
            }, e.play = e.play_track = function() {
                e.audio.play()
            }, e.stop = function() {
                e.stopped = !0, e.audio.pause(), 0 != e.audio.readyState && (e.audio.currentTime = 0), e.removeEventListener("ended", e.play_track)
            }, e.pause = function() {
                e.stopped = !0, e.audio.pause(), e.removeEventListener("ended", e.play)
            }, e.play = function() {
                e.resume()
            }, e.resume = function() {
                1 == e.stopped ? (e.stopped = !1, e.play()) : e.audio.play(), 1 == e.loop && (e.audio.loop = !0, e.audio.addEventListener("ended", e.play))
            }, e.set_loop = function(t) {
                1 == t ? (e.loop = !0, e.audio.loop = !0, e.addEventListener("ended", e.play)) : (e.loop = !1, e.audio.loop = !1, e.removeEventListener("ended", e.play))
            }, e.restart = function() {
                e.play()
            }, e.set_volume = function(t) {
                e.volume = t
            }, e.loop = t.loop, "undefined" == typeof e.loop && (e.loop = !1), e.start = t.start, "undefined" == typeof e.start && (e.start = !0), e.loaded = !0, e.filename = i, e.stopped = !1, e.audio = new Audio, "undefined" != typeof t.no_source_tags && 1 == t.no_source_tags || ".ogg" != n && ".mp3" != n && ".wav" != n) e.audio.src = e.filename;
        else {
            var n = e.filename.slice(-4),
                r = document.createElement("source");
            switch (n) {
                case ".ogg":
                    r.type = "audio/ogg";
                    break;
                case ".mp3":
                    r.type = "audio/mpeg";
                    break;
                case ".wav":
                    r.type = "audio/wav"
            }
            r.src = e.filename, e.audio.appendChild(r)
        }
        return e.volume = t.volume || 1, 1 == e.start ? (e.audio.play(), 1 == e.loop && e.addEventListener("ended", e.play)) : 1 == e.loop && (e.audio.loop = !0), e
    }

    function B(r, t) {
        if ("undefined" == typeof t && (t = {}), "undefined" != typeof t.container && "undefined" != typeof t.container[r] && !t.force_refresh) {
            var e = t.container[r];
            return e.volume = t.volume || 1, ("undefined" == typeof t.start || 1 == t.start) && e.play(), e
        }
        if ("undefined" == typeof this || this == window) return new B(r, t);
        var e = this;
        "undefined" != typeof t.container && (t.container[r] = e), Object.defineProperty(e, "duration", {
            get: function() {
                return e.audio.duration
            }
        }), Object.defineProperty(e, "currentTime", {
            get: function() {
                return e.audio.position
            },
            set: function(t) {
                function i() {
                    e.audio.position = t, e.removeEventListener("load", i)
                }
                return e.loaded ? void(e.audio.position = t) : void e.addEventListener("load", i)
            }
        }), Object.defineProperty(e, "volume", {
            get: function() {
                return e.audio.volume
            },
            set: function(t) {
                e.audio.volume = t
            }
        }), e.pause = function() {
            e.audio.pause(), e.paused = !0
        }, e.play = function() {
            e.audio.play(), e.paused = !1
        }, e.stop = function() {
            e.audio.pause(), e.paused = !0, e.currentTime = 0
        }, e.loaded = !1, e.src = r, e.paused = !0;
        var i = [];
        return e.addEventListener = function() {
            i.push([arguments[0], arguments[1], arguments[2] || !1])
        }, e.removeEventListener = function() {
            var e = arguments,
                t = i.findIndex(function(t) {
                    return t[0] !== e[0] ? !1 : t[1] !== e[1] ? !1 : t[2] !== (e[2] || !1) ? !1 : !0
                }); - 1 != t && i.splice(t, 1)
        }, e.audio = new Howl({
            src: e.src,
            buffersize: t.preload_buffer_size,
            bufferfile: t.preload_buffer_file,
            autoplay: "undefined" == typeof t.start || 1 == t.start,
            onend: function() {
                e.paused = !0, i.forEach(function(e) {
                    "ended" == e[0] && e[1]()
                })
            },
            onload: function() {
                e.loaded = !0, i.forEach(function(e) {
                    "load" == e[0] && e[1]()
                })
            },
            onloaderror: function() {
                e.paused = !0, i.forEach(function(e) {
                    "loaderror" == e[0] && e[1]()
                })
            },
            onpause: function() {
                e.paused = !0, i.forEach(function(e) {
                    "pause" == e[0] && e[1]()
                })
            },
            onplay: function() {
                e.paused = !1, i.forEach(function(e) {
                    "play" == e[0] && e[1]()
                })
            }
        }), e.volume = t.volume || 1, e
    }

    function w(t, i) {
        var r = window.getComputedStyle(t).textShadow,
            e = r.split("rgb");
        e.shift(), e.forEach(function(e, t, r) {
            var n = e.slice(0, e.length - 2).split(") ")[1];
            r[t] = i + " " + n
        }), t.style.textShadow = e
    }

    function f(l) {
        var e = l.element,
            o = e.innerHTML,
            i = l.size,
            r = l.color;
        "string" == typeof i && (i = [i]), "string" == typeof r && (r = [r]);
        var c = window.getComputedStyle(e).lineHeight;
        if ("normal" == c) var d = 0;
        else {
            var s = parseInt(c);
            Number.isNaN(s) && (s = 0);
            var t = document.createElement("div");
            t.style.whiteSpace = "nowrap", t.style.fontSize = "100px", t.innerHTML = e.innerHTML, document.body.appendChild(t), t.style.fontFamily = window.getComputedStyle(e).fontFamily;
            var h = e.style.lineHeight;
            e.style.lineHeight = t.getBoundingClientRect().height / 100, document.body.removeChild(t);
            var d = (parseFloat(window.getComputedStyle(e).lineHeight) - s) / 2;
            e.style.lineHeight = h
        }
        e.innerHTML = "";
        for (var a = 0, u = o.length; u > a; a++) {
            var n = document.createElement("span");
            n.style.position = "relative", e.appendChild(n), n.innerHTML = '<span style="position:relative; z-index:' + i.length + '"/>' + o[a] + "</span>", i.forEach(function(t, s) {
                var l = t.substr(t.match(/([A-Z])/i).index, t.length),
                    e = document.createElement("div");
                e.style.position = "absolute", e.style.left = 0, e.style.top = d + "px", e.style.zIndex = i.length - s - 1, e.style.color = r[s], e.style.WebkitTextStrokeColor = r[s], e.style.WebkitTextStrokeWidth = 2 * parseFloat(t) + l, e.innerHTML = o[a], n.appendChild(e)
            })
        }
    }

    function C(e) {
        function n(e, i) {
            function t() {
                if ("undefined" != typeof e.naturalWidth && 0 != e.complete && 0 != e.naturalWidth) e.width = e.naturalWidth, e.height = e.naturalHeight, i();
                else {
                    setTimeout(t, 20)
                }
            }
            t()
        }

        function i() {
            var i = document.createElement("canvas"),
                o = i.getContext("2d");
            if (e.image instanceof HTMLImageElement && e.fix_ie_bug ? (i.width = t.naturalWidth, i.height = t.naturalHeight) : (i.width = t.width, i.height = t.height), o.fillStyle = e.color, o.fillRect(0, 0, i.width, i.height), "undefined" == typeof e.image || e.image instanceof HTMLImageElement || "undefined" != typeof e.create_new && 1 == e.create_new) {
                var n = document.createElement("canvas"),
                    a = n.getContext("2d");
                e.image instanceof HTMLImageElement && e.fix_ie_bug ? (n.width = t.naturalWidth, n.height = t.naturalHeight) : (n.width = t.width, n.height = t.height), a.globalCompositeOperation = "source-over", a.drawImage(t, 0, 0)
            }
            if (e.image instanceof HTMLCanvasElement && ("undefined" == typeof e.create_new || 1 != e.create_new)) var n = e.image,
                a = n.getContext("2d");
            return a.globalCompositeOperation = "source-in", a.drawImage(i, 0, 0), "undefined" != typeof e.callback && e.callback(n), 1 == r ? n : void 0
        }
        var r = "undefined" != typeof e.return_result && 1 == e.return_result ? !0 : !1;
        if ("undefined" == typeof e.image) {
            var t = new Image;
            if (t.src = e.image_src, 1 == r) return i();
            e.fix_ie_bug ? n(t, i) : t.addEventListener("load", i)
        } else {
            var t = e.image;
            if (e.image instanceof HTMLImageElement) {
                if ("undefined" != typeof e.image_src && (t.src = e.image_src), 1 == r) return i();
                e.fix_ie_bug ? n(t, i) : t.addEventListener("load", i)
            }
            if (e.image instanceof HTMLCanvasElement) {
                if (1 == r) return i();
                i()
            }
        }
    }

    function _(e) {
        function i(a, o) {
            var i = o.getContext("2d");
            "undefined" != typeof e.lineWidth && (i.lineWidth = e.lineWidth), "undefined" != typeof e.strokeStyle && (i.strokeStyle = e.strokeStyle), "undefined" != typeof e.lineJoin && (i.lineJoin = e.lineJoin), "undefined" != typeof e.lineCap && (i.lineCap = e.lineCap), i.beginPath(), i.translate(e.x * t, e.y * t);
            for (var n = 0; n < a.length; n++) {
                var s = a[n].command,
                    r = a[n].points;
                switch (s) {
                    case "L":
                        i.lineTo(r[0], r[1]);
                        break;
                    case "M":
                        i.moveTo(r[0], r[1]);
                        break;
                    case "C":
                        i.bezierCurveTo(r[0], r[1], r[2], r[3], r[4], r[5]);
                        break;
                    case "z":
                        i.closePath()
                }
            }
            if (("undefined" == typeof e.lineWidth || 0 != e.lineWidth) && i.stroke(), "undefined" != typeof e.fillPatternImage || "undefined" != typeof e.fillStyle) {
                if ("undefined" != typeof e.fillPatternImage) {
                    var l = i.createPattern(e.fillPatternImage, "no-repeat");
                    "undefined" != typeof e.fillPatternOffset && (i.save(), i.translate(-e.fillPatternOffset[0] * t, 0), i.translate(0, -e.fillPatternOffset[1] * t)), i.fillStyle = l
                } else i.fillStyle = e.fillStyle;
                i.fill()
            }
            "undefined" != typeof e.fillPatternOffset && i.restore()
        }

        function r(_) {
            var o = _,
                u = ["M", "L", "C"];
            o = o.replace(new RegExp(" ", "g"), ",");
            for (var r = 0; r < u.length; r++) o = o.replace(new RegExp(u[r], "g"), "|" + u[r]);
            var d = o.split("|"),
                h = [],
                a = 0,
                n = 0;
            for (r = 1; r < d.length; r++) {
                var i = d[r],
                    s = i.charAt(0);
                i = i.slice(1), i = i.replace(new RegExp(",-", "g"), "-"), i = i.replace(new RegExp("-", "g"), ",-"), i = i.replace(new RegExp("e,-", "g"), "e-");
                var e = i.split(",");
                e.length > 0 && "" === e[0] && e.shift();
                for (var c = 0; c < e.length; c++) e[c] = parseFloat(e[c]) * t;
                for (; e.length > 0 && !isNaN(e[0]);) {
                    var p = null,
                        l = [],
                        f = a,
                        m = n;
                    switch (s) {
                        case "L":
                            a = e.shift(), n = e.shift(), l.push(a, n);
                            break;
                        case "M":
                            a = e.shift(), n = e.shift(), p = "M", l.push(a, n), s = "L";
                            break;
                        case "C":
                            l.push(e.shift(), e.shift(), e.shift(), e.shift()), a = e.shift(), n = e.shift(), l.push(a, n)
                    }
                    h.push({
                        command: p || s,
                        points: l,
                        start: {
                            x: f,
                            y: m
                        }
                    })
                }("z" === s || "Z" === s) && h.push({
                    command: "z",
                    points: [],
                    start: void 0
                })
            }
            return h
        }
        var t = (e.x || 0, e.y || 0, e.scale || 1),
            n = e.data,
            a = e.canvas,
            o = r(n);
        i(o, a)
    }

    function _t(t) {
        function i(s, n, i) {
            function a() {
                o.forEach(function(e) {
                    e.classList[i](r)
                })
            }
            for (var t = s.target, l = "*" + ("add" == i ? ":hover" : "." + r), c = Array.prototype.slice.call(document.body.querySelectorAll(l)), o = [];;) {
                if (null == t || t == document.documentElement) break; - 1 != c.indexOf(t) && o.push(t), t = t.parentNode
            }
            e[n] && e[n][i] ? setTimeout(a, e[n][i]) : a()
        }
        var t = t || {},
            n = t.handle_touch_events || !0,
            a = t.handle_mouse_events || !0,
            r = t.hover_class || "hover",
            e = t.delay_preferences || {};
        a && (document.body.addEventListener("mouseover", function(e) {
            i(e, "mouse", "add")
        }), document.body.addEventListener("mouseout", function(e) {
            i(e, "mouse", "remove")
        })), n && (document.body.addEventListener("touchstart", function(e) {
            i(e, "touch", "add")
        }), document.body.addEventListener("touchend", function(e) {
            i(e, "touch", "remove")
        }), document.body.addEventListener("touchmove", function(i) {
            function a(r, n) {
                for (var t = [], i = [];;) {
                    var e = document.elementFromPoint(r, n);
                    if (null == e || e == document.documentElement) break;
                    t.push(e), i.push(e.style.pointerEvents), e.style.pointerEvents = "none"
                }
                return t.forEach(function(e, t) {
                    e.style.pointerEvents = i[t]
                }), t
            }
            var t = i.target,
                o = Array.prototype.slice.call(document.body.querySelectorAll("*.hover")),
                n = null;
            i = i.changedTouches[0];
            for (var s = a(i.pageX, i.pageY);;) {
                if (null == t || t == document.documentElement) break; - 1 != o.indexOf(t) && -1 == s.indexOf(t) && (n = t), t = t.parentNode
            }
            null != n && (e.touch && e.touch.remove ? setTimeout(function() {
                n.classList.remove(r)
            }, e.touch.remove) : n.classList.remove(r))
        }))
    }

    function pt(e) {
        var t = navigator.userAgent.toLowerCase();
        e.is_iphone = null != t.match(/iphone/i), e.is_ipad = null != t.match(/ipad/i), e.is_idevice = e.is_iphone || e.is_ipad, e.is_android = null != t.match(/android/i), e.is_chromium = null != t.match(/chrome/i), e.is_windows_phone = null != t.match(/Windows Phone/i), e.is_phone_or_tablet = "ontouchstart" in window || e.is_idevice || e.is_android || e.is_windows_phone
    }

    function dt(t, r) {
        function n() {
            return o < t.length ? void(s = setTimeout(n, 30)) : void r()
        }

        function a(e) {
            if (e.offsetWidth != e.original_width) o += 1, e.parentNode.removeChild(e), e = null;
            else {
                setTimeout(function() {
                    a(e)
                }, 30)
            }
        }
        for (var o = 0, i = 0; i < t.length; i++) {
            var e = document.createElement("span");
            e.innerHTML = "giItT1WQy@!-/#", e.style.fontFamily = "sans-serif", e.style.position = "absolute", e.style.left = "-10000px", e.style.top = "-10000px", e.style.fontSize = "300px", e.style.fontVariant = "normal", e.style.fontWeight = "normal", e.style.letterSpacing = "0", document.body.appendChild(e), e.original_width = e.getBoundingClientRect().width, e.style.fontFamily = t[i], a(e)
        }
        if ("undefined" != typeof r) {
            var s = null;
            n()
        }
    }

    function M(t, e, i) {
        function r(o, c, h) {
            var e = +((c + o) / 2).toFixed(2);
            t.style.fontSize = e + a;
            var n = t.getBoundingClientRect(),
                u = t.scrollHeight + (parseInt(n.height / i) - n.height / i),
                d = t.scrollWidth + (parseInt(n.width / i) - n.width / i);
            return o === e || c === e ? h : u > s || d > l ? r(o, e, h) : s >= u && l >= d ? r(e, c, e) : h
        }
        "undefined" == typeof e && (e = {});
        var a = "undefined" != typeof e.unit_type ? e.unit_type : "px",
            i = "undefined" != typeof e.transform_scale ? e.transform_scale : 1,
            o = t.parentNode.getBoundingClientRect(),
            s = o.height / i,
            l = o.width / i,
            n = r("undefined" != typeof e.min_size ? e.min_size : 0, "undefined" != typeof e.max_size ? e.max_size : 120, "undefined" != typeof e.best_size ? e.best_size : 0);
        "undefined" != typeof e.min_size && n < e.min_size && (n = e.min_size), t.style.fontSize = n + a
    }

    function ot(o) {
        function u() {
            if (1 == a.first_run && a.load_player_data_from_server(), e.ambient_music.load_ambient_music(t.ambient_music, t.ambient_music_start), "undefined" != typeof t.intro_audio && "" != t.intro_audio) {
                var h = document.createElement("div");
                h.style.display = "none", n.appendChild(h);
                var p = e.get_set_directory(l) + "/" + t.intro_audio + ".ogg";
                e.playAudio(p, {
                    element: h,
                    audio_type: "music",
                    restart: !0
                })
            }
            n.innerHTML = c, n.children.forEach(function(e) {
                r(e)
            }), "undefined" != typeof t.intro_audio && "" != t.intro_audio && n.appendChild(h);
            var i = n.querySelector("span"),
                o = n.querySelector(".jt-game-header");
            if (null != o && (i.style.display = "none", C({
                    image: o,
                    fix_ie_bug: !0,
                    color: "#edd9a7",
                    callback: function(e) {
                        o.parentNode.appendChild(e), o.parentNode.removeChild(o), o = e, e.style.height = "100%", i.style.display = "block"
                    }
                })), void
                function() {
                    function t(t) {
                        return "/" == t[0] ? e.get_root_directory() + t : e.get_set_directory(l) + "/gui/front/" + t
                    }
                    var n = i.querySelectorAll("*"),
                        r = Array.prototype.slice.call(n);
                    r.push(i), r.forEach(function(i) {
                        var r = i.getAttribute("src");
                        null != r && "" != r && i.setAttribute("src", t(r));
                        var e = mt(window.getComputedStyle(i).backgroundImage);
                        "" != e && "none" != e && (e = e.replace('url("', "").replace('")', ""), e = e.replace("url('", "").replace("')", ""), e = e.replace("url(", "").replace(")", ""), e = e.substr(e.lastIndexOf("/") + 1), i.style.backgroundImage = 'url("' + t(e) + '")')
                    })
                }(), i.classList.add("jt-select_mode_screen-container"), "undefined" != typeof t.mixnmatch) {
                var u = document.createElement("div");
                u.className = "jt-select_mode_screen-mixnmatch jt-button", u.innerHTML = "Play Mix N' Match", i.appendChild(u), u.addEventListener(e.events.POINT, function() {
                    s("mixnmatch")
                })
            }
            if ("undefined" != typeof t.jigsaw) {
                var d = document.createElement("div");
                d.className = "jt-select_mode_screen-jigsaw jt-button", d.innerHTML = "Play Jigsaw", i.appendChild(d), d.addEventListener(e.events.POINT, function() {
                    s("select_jigsaw")
                }), setTimeout(function() {
                    s("select_jigsaw")
                }, 2500)
            }
        }

        function s(t) {
            function i(i) {
                if (e.ambient_music_on_question_asked) i();
                else {
                    var t = smoke.confirm('Keep ambient music on? (you can change this later by toggling "Audio Settings" > "Play Ambient Music".', function(t) {
                        e.ambient_music_on_question_asked = !0, e.ambient_music_on = t, i()
                    });
                    t.buttons.ok.innerHTML = "Keep ambient music on.", t.buttons.cancel.innerHTML = "Turn ambient music off.", r(t.buttons)
                }
            }

            function n() {
                a.history_control.load_page({
                    page: t
                })
            }
            h || (h = !0, i(n))
        }
        var n = o.content_div,
            a = o.mr_jigtato,
            t = a.game_data,
            l = a.set_name,
            e = o.global_settings;
        i({
            success: function(e) {
                c = e, u()
            },
            error: e.errormessage,
            file: e.get_set_directory(l) + "/gui/front/front.htm",
            plaintext: !0,
            request_method: "GET",
            ignore_request_status: e.IS_WEBVIEW
        });
        var c = "",
            h = !1
    }

    function at(a) {
        function h() {
            function C() {
                var t = "undefined" == typeof e.account.gem_amount ? "--" : e.account.gem_amount;
                y.innerHTML = '<span style="position:relative; margin-left: 18px; top: -6px; line-height: 0; font-family:lato; font-size: 60px; vertical-align: middle">' + t + '</span><span style="position:relative; top: -3px; line-height: 0; font-family: flyingsoft-icons; font-size: 106px; vertical-align: middle">g</span>', h.setTimeout(C, 250)
            }

            function A() {
                var t = smoke.alert('With gems, you can acquire extra puzzle packs / puzzles. If you would like to acquire gems, please use the "Challenge a Friend" feature to invite another user to play the game. If they install the game and use the code sent to them, both you and they will get 9 gems. N.B.: I will add in-app purchases for gems in the next update.'),
                    e = t.dialog.text;
                e.style.textAlign = "left", e.style.textIndent = "1em"
            }

            function x(o) {
                o.selection_tab_container.children.forEach(function(e) {
                    if (e.tab_index == o.page) var t = "add";
                    else var t = "remove";
                    e.classList[t]("jt-button-lit")
                }), _.innerHTML = "";
                var m = e.select_menu_current_page[i] = o.page;
                e.select_menu_current_page = e.select_menu_current_page;
                var u = o.level_array,
                    l = o.items_per_page,
                    g = m * l,
                    c = (m + 1) * l - 1;
                u.length - 1 < c && (c = u.length - 1);
                for (var f = 0, h = g; c >= h; h++) {
                    var v = u[h],
                        t = document.createElement("div");
                    t.className = "jt-select_screen-selection-item", f % (l / 2) == 0 && (t.style.marginLeft = 0), f % (l / 2) == 1 && (t.style.marginRight = 0), f += 1;
                    var p = t.level_id = v.level_id;
                    t.addEventListener(e.events.POINT, d), t.select_screen = n, _.appendChild(t), r(t), t.image_wrapper = document.createElement("div"), t.image_wrapper.className = "jt-select_screen-selection-item-image_wrapper", t.appendChild(t.image_wrapper), t.image = document.createElement("img"), t.image.className = "jt-select_screen-selection-item-image-" + ("undefined" == typeof s[p].crop_margin ? "centered" : "cropped"), "undefined" != typeof s[p].crop_margin && (t.image.style.marginLeft = -s[p].crop_margin + "%"), t.image_wrapper.appendChild(t.image);
                    var a = t.rewards_container = {};
                    a.top = document.createElement("div"), a.top.className = "jt-select_screen-selection-item-rewards-container-top", t.image_wrapper.appendChild(a.top), a.bottom = document.createElement("div"), a.bottom.className = "jt-select_screen-selection-item-rewards-container-bottom", t.appendChild(a.bottom)
                }
                j(_)
            }

            function j(n) {
                {
                    var r = t.player_data;
                    r.selected_difficulty
                }
                n.children.forEach(function(a) {
                    var _ = a.rewards_container.top;
                    _.innerHTML = "";
                    var m = a.rewards_container.bottom;
                    m.innerHTML = "";
                    var o = a.level_id,
                        f = u.entry_list[o];
                    if (f.reward_container) var y = f.reward_container;
                    else var y = o;
                    var s = [],
                        w = !1;
                    Array.prototype.slice.call([0, 1, 2, 3]).forEach(function(e) {
                        s[e] = r.jigsaw.trophies.find(function(t) {
                            return t == y + "|" + e
                        }), "undefined" != typeof s[e] && (w = !0)
                    });
                    var h = r.jigsaw.ranks[o],
                        c = "undefined" != typeof h;
                    if (e["gray-filter_incomplete_images"] && (a.classList[c ? "remove" : "add"]("jt-select_screen-selection-item-greyed_out"), a.image_wrapper.classList[c ? "add" : "remove"]("jt-select_screen-selection-item-image_wrapper-greyed_out"), e.get_image(a.image, i, o, "mini" + (c ? "" : "-grey"))), c || "undefined" != typeof s)
                        for (var n = 0; 4 > n; n++) {
                            if ("undefined" != typeof s && "undefined" != typeof s[n]) {
                                var T = v({
                                    mr_jigtato: t,
                                    gs: e,
                                    set_name: i,
                                    level_id: o,
                                    difficulty_level: n,
                                    trophy_class: "jt-select_screen-selection-item-rewards-trophy"
                                });
                                m.appendChild(T)
                            }
                            if ("undefined" != typeof h && "undefined" != typeof h[n]) {
                                var p = document.createElement("div");
                                p.className = "jt-select_screen-selection-item-rewards-rank_token_wrapper", _.appendChild(p);
                                for (var b = h[n], x = l.rank[l.difficulty_levels[n].name], g = 0; b > g; g++) {
                                    var d = document.createElement("div");
                                    d.className = "jt-select_screen-selection-item-rewards-rank_token", p.appendChild(d), d.style.backgroundImage = 'url("' + e.get_set_directory(i) + "/gui/" + x.filename + '")'
                                }
                            }
                        }
                })
            }
            var n = {};
            o.innerHTML = "";
            var h = n.header = document.createElement("div");
            h.className = "jt-select_screen-header", o.appendChild(h), r(h);
            var m = n.body = document.createElement("div");
            m.className = "jt-select_screen-body", o.appendChild(m), h.icon_list = document.createElement("div"), h.icon_list.className = "jt-select_screen-header-icon_list", h.appendChild(h.icon_list);
            var R = [t.menu.generic.about, t.menu.generic.ogle_trophies, t.menu.jigsaw.toggle_categories, t.menu.jigsaw.open_misc_config_menu, t.menu.jigsaw.open_visual_settings_menu, t.menu.generic.open_audio_settings_menu],
                L = F({
                    gs: e,
                    parent: o,
                    menu_item_list: R,
                    column_size: 3,
                    show_hint_image_options: !0,
                    select_screen: n,
                    init: a
                }),
                p = (T({
                    parent: h.icon_list,
                    target: L,
                    menu_class: ["jt-select_screen-menu_button"],
                    init: a
                }), []);
            "undefined" == typeof e.select_menu_sort_index[i] && (e.select_menu_sort_index[i] = 0), "undefined" == typeof e.select_menu_sort_direction[i] && (e.select_menu_sort_direction[i] = 0);
            var w = n.sort_button = nt({
                    parent: h.icon_list,
                    menu_class: "jt-common-menu_button jt-select_screen-sort_button",
                    sort_attributes: t.game_data.sort_attributes,
                    entry_list: s,
                    level_array: p,
                    level_id: "level_id",
                    sort_index: e.select_menu_sort_index,
                    sort_direction: e.select_menu_sort_direction,
                    set_name: t.set_name,
                    gs: e
                }),
                b = t.player_data,
                f = n.difficulty_level_button = document.createElement("div");
            f.className = "jt-select_screen-header-difficulty_level jt-select_screen-header-size-1 jt-button hoverable", h.appendChild(f), f.update_text = function() {
                this.innerHTML = l.difficulty_levels[b.selected_difficulty].name.capitalize()
            }, f.update_text(), f.addEventListener(e.events.POINT, function() {
                var e = l.difficulty_levels.length;
                b.selected_difficulty = (b.selected_difficulty + 1) % e, localStorage.player_data = JSON.stringify(t.player_data), f.update_text()
            });
            var k = n.challenge_a_friend_button = ut({
                select_screen: n,
                content_div: o,
                mr_jigtato: t,
                gs: e
            });
            h.appendChild(k);
            var M = n.my_packs_button = et({
                select_screen: n,
                content_div: o,
                mr_jigtato: t,
                gs: e
            });
            h.appendChild(M);
            var y = n.gem_purchase_button = document.createElement("div");
            y.className = "jt-select_screen-header-show_hint_image jt-select_screen-header-size-1 jt-button hoverable", y.addEventListener(e.events.POINT, A), h.appendChild(y), C();
            var g = 12,
                P = n.create_puzzle_selection_array = function() {
                    p = [];
                    for (var t in s) {
                        var e = s[t];
                        e.level_id = t, e.is_only_template || (e.enabled || 0 != !!e.predownloaded) && p.push(e)
                    }
                };
            P();
            var _ = n.selection_container = document.createElement("div");
            _.className = "jt-select_screen-selection-container", m.appendChild(_);
            var z = n.create_tab_container = function(t) {
                    function s(e) {
                        t.select_function({
                            page: e.currentTarget.tab_index,
                            selection_tab_container: n
                        })
                    }
                    var l = t.selection_container,
                        n = document.createElement("div");
                    n.className = "jt-select_screen-selection-tab_container", t.parent.appendChild(n);
                    var a = Math.ceil(t.item_list.length / t.items_per_page);
                    1 == a && (a = 0);
                    for (var o = 0; a > o; o++) {
                        var i = document.createElement("div");
                        i.className = "jt-button", r(i), n.appendChild(i), i.innerHTML = o + 1, i.tab_index = o, t.select_function && i.addEventListener(e.events.POINT, s)
                    }
                    return 0 == a && l.classList.add("jt-select_screen-selection-container-center"), n
                },
                O = n.create_selection_tab_container = function() {
                    n.selection_tab_container = z({
                        parent: m,
                        selection_container: _,
                        item_list: p,
                        items_per_page: g,
                        select_function: function(e) {
                            x(S(e, {
                                level_array: p,
                                items_per_page: g
                            }))
                        }
                    })
                };
            O(), "undefined" == typeof e.select_menu_current_page[i] && (e.select_menu_current_page[i] = 0), w.onsort = function() {
                x({
                    page: e.select_menu_current_page[i],
                    level_array: p,
                    items_per_page: g,
                    selection_tab_container: n.selection_tab_container
                })
            }, w.sort_levels();
            n.refresh_puzzle_list = function() {
                x({
                    page: 0,
                    level_array: p,
                    items_per_page: g,
                    selection_tab_container: n.selection_tab_container
                })
            };
            if ("undefined" != typeof e.pending_message) {
                var E = smoke.alert(e.pending_message);
                E.dialog.text.style.textIndent = "1em", E.dialog.text.style.textAlign = "left", delete e.pending_message
            }
            c && c()
        }

        function d(i) {
            function a() {
                e.try_requesting_fullscreen && !e.IS_WEBVIEW && e.is_phone_or_tablet && z(document.documentElement);
                var r = i.currentTarget.level_id;
                t.history_control.load_page({
                    page: "jigsaw",
                    level: r
                })
            }
            i.stopPropagation(), i.preventDefault();
            var i = n(i),
                r = i.currentTarget.select_screen;
            return r.challenge_a_friend_button.is_active ? void r.challenge_a_friend_button.select_puzzle(i.currentTarget) : void a()
        }
        var o = a.content_div,
            t = a.mr_jigtato,
            e = a.global_settings,
            u = t.game_data,
            s = t.game_data.entry_list,
            l = t.game_data.jigsaw,
            i = t.set_name;
        if ("undefined" != typeof a.callback) {
            var c = a.callback;
            delete a.callback
        }
        e.game_type = "jigsaw", e.ambient_music.load_ambient_music(t.game_data.ambient_music, t.game_data.ambient_music_start), (new Image).setAttribute("src", t.background_image_url), (new Image).setAttribute("src", e.get_set_directory(t.set_name) + "/gui/gui-loading.png"), h()
    }

    function et(l) {
        function p() {
            n.selection_container.style.display = "none", n.selection_tab_container.style.display = "none", a.initialized || (a.initialized = !0, d()), a.selection_container.style.display = "", a.selection_tab_container.style.display = ""
        }

        function _() {
            n.selection_container.style.display = "", n.selection_tab_container.style.display = "", a.selection_container.style.display = "none", a.selection_tab_container.style.display = "none"
        }

        function d() {
            function u(a) {
                var C = a.selection_container,
                    A = a.selection_tab_container;
                A.children.forEach(function(e) {
                    if (e.tab_index == a.page) var t = "add";
                    else var t = "remove";
                    e.classList[t]("jt-button-lit")
                }), C.innerHTML = "";
                var m = o.game_data.entry_list,
                    S = e.select_packs_menu_current_page[s] = a.page;
                e.select_packs_menu_current_page = e.select_packs_menu_current_page;
                var v = a.item_array,
                    d = a.items_per_page,
                    E = S * d,
                    x = (S + 1) * d - 1;
                v.length - 1 < x && (x = v.length - 1);
                for (var g = 0, T = E; x >= T; T++) {
                    var i = v[T],
                        t = document.createElement("div");
                    t.className = "jt-select_screen-selection-item jt-select_packs_screen-selection-item", g % (d / 2) == 0 && (t.style.marginLeft = 0), g % (d / 2) == 1 && (t.style.marginRight = 0), g += 1;
                    var u = "undefined" != typeof e.account.users_to_puzzle_packs[i.puzzle_pack_id] || 0 == i.gem_cost,
                        p = t.level_id = i.image_url;
                    t.addEventListener(e.events.POINT, function(t) {
                        var i = t.currentTarget.pack,
                            r = "undefined" != typeof e.account.users_to_puzzle_packs[i.puzzle_pack_id] || 0 == i.gem_cost;
                        r ? smoke.alert("You've already acquired this pack.") : _(t)
                    }), t.pack = i, t.select_screen = n, C.appendChild(t), r(t), t.image_wrapper = document.createElement("div"), t.image_wrapper.className = "jt-select_screen-selection-item-image_wrapper jt-select_packs_screen-selection-item-image_wrapper", t.appendChild(t.image_wrapper), t.image = document.createElement("img"), t.image.className = "jt-select_screen-selection-item-image-" + ("undefined" == typeof m[p].crop_margin ? "centered" : "cropped"), "undefined" != typeof m[p].crop_margin && (t.image.style.marginLeft = -m[p].crop_margin + "%"), t.image_wrapper.appendChild(t.image), e["gray-filter_incomplete_images"] && (t.classList[u ? "remove" : "add"]("jt-select_screen-selection-item-greyed_out"), t.image_wrapper.classList[u ? "add" : "remove"]("jt-select_screen-selection-item-image_wrapper-greyed_out"), e.get_image(t.image, s, p, "mini" + (u ? "" : "-grey")));
                    var l = document.createElement("div");
                    l.className = "jt-select_packs_screen-selection-item-info-container", t.appendChild(l);
                    var w = document.createElement("div");
                    w.className = "jt-button jt-select_packs_screen-selection-item-info-title", l.appendChild(w), w.innerHTML = i.name.capitalize();
                    var b = document.createElement("div");
                    b.className = "jt-select_packs_screen-selection-item-info-description", b.innerHTML = i.description, l.appendChild(b);
                    var h = document.createElement("div");
                    h.className = "jt-button jt-select_packs_screen-selection-item-info-preview_button", h.innerHTML = "Preview", h.addEventListener(e.events.POINT, f), h.pack = i, l.appendChild(h);
                    var y = document.createElement("div");
                    y.className = "jt-select_screen-selection-item-rewards-container-bottom", t.appendChild(y);
                    var c = document.createElement("div");
                    c.className = "jt-button jt-select_packs_screen-selection-item-purchase-container-inner", y.appendChild(c), u ? c.innerHTML = "Acquired" : (c.classList.add("jt-select_packs_screen-selection-item-purchase-container-inner-gem_cost"), c.innerHTML = '<span style="position:relative; margin-left: 18px; top: -6px; line-height: 0; font-family:lato; font-size: 60px; vertical-align: middle">' + i.gem_cost + '</span><span style="position:relative; top: -3px; line-height: 0; font-family: flyingsoft-icons; font-size: 106px; vertical-align: middle">g</span>')
                }
            }

            function _(e) {
                d(e.currentTarget.pack)
            }

            function d(r) {
                i({
                    file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (e.DEBUG ? "-beta" : "") + ".php?action=puzzle_pack_purchase&user_id=" + e.account.user_id + "&internal_access_token=" + e.account.internal_access_token + "&puzzle_pack_id=" + r.puzzle_pack_id,
                    error: e.errormessage,
                    request_method: "POST",
                    async: !0,
                    success: function(i) {
                        e.account.gem_amount = i.gem_amount, e.account.users_to_puzzle_packs[r.puzzle_pack_id] = r.puzzle_pack_id;
                        var h = o.game_data.entry_list,
                            a = i.puzzle_list;
                        a.forEach(function(t) {
                            e.paid_puzzles.push(t)
                        }), a.forEach(function(e) {
                            h[e].enabled = !0
                        }), n.create_puzzle_selection_array(), n.refresh_puzzle_list(), n.create_selection_tab_container(), n.sort_button.sort_levels(), u({
                            page: e.select_packs_menu_current_page[s],
                            item_array: l,
                            items_per_page: c,
                            selection_container: t,
                            selection_tab_container: p
                        });
                        smoke.alert('Thank you for purchasing "' + r.name.capitalize() + '"!')
                    }
                })
            }

            function f(e) {
                e.stopPropagation(), m(e.currentTarget.pack)
            }

            function m(t) {
                function r(l) {
                    var c = l.puzzle_list,
                        i = smoke.confirm("", function(e) {
                            a || 1 != e || d(t)
                        }),
                        r = i.dialog.text;
                    r.parentNode.classList.add("jt-pack_preview_screen-dialog"), r.classList.add("jt-pack_preview_screen-text");
                    var n = o.game_data.entry_list;
                    c.forEach(function(t) {
                        var a = document.createElement("div");
                        a.className = "jt-select_screen-selection-item jt-pack_preview_screen-selection-item", r.appendChild(a);
                        var o = document.createElement("div");
                        o.className = "jt-select_screen-selection-item-image_wrapper jt-select_packs_screen-selection-item-image_wrapper", a.appendChild(o);
                        var i = document.createElement("img");
                        i.className = "jt-select_screen-selection-item-image-" + ("undefined" == typeof n[t].crop_margin ? "centered" : "cropped"), "undefined" != typeof n[t].crop_margin && (i.style.marginLeft = -n[t].crop_margin + "%"), e.get_image(i, s, t, "mini"), o.appendChild(i)
                    });
                    var a = "undefined" != typeof e.account.users_to_puzzle_packs[t.puzzle_pack_id] || 0 == t.gem_cost;
                    a ? i.dialog.buttons.removeChild(i.dialog.buttons.cancel) : i.dialog.buttons.ok.innerHTML = "Purchase with " + t.gem_cost + " gems."
                }
                i({
                    file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (e.DEBUG ? "-beta" : "") + ".php?action=get_puzzle_pack_data&user_id=" + e.account.user_id + "&internal_access_token=" + e.account.internal_access_token + "&puzzle_pack_id=" + t.puzzle_pack_id,
                    error: e.errormessage,
                    request_method: "POST",
                    async: !0,
                    success: r
                })
            }
            var t = a.selection_container = document.createElement("div");
            t.className = "jt-select_screen-selection-container", h.appendChild(t);
            var l = [];
            for (var g in e.puzzle_pack_list) l.push(e.puzzle_pack_list[g]);
            l.sort(function(t, i) {
                var r = "undefined" != typeof e.account.users_to_puzzle_packs[t.puzzle_pack_id] || 0 == t.gem_cost,
                    n = "undefined" != typeof e.account.users_to_puzzle_packs[i.puzzle_pack_id] || 0 == i.gem_cost;
                return n > r ? -1 : r > n ? 1 : 0
            });
            var c = 4,
                p = a.selection_tab_container = n.create_tab_container({
                    parent: h,
                    selection_container: t,
                    item_list: l,
                    items_per_page: c,
                    select_function: function(e) {
                        u(S(e, {
                            item_array: l,
                            items_per_page: c,
                            selection_container: t
                        }))
                    }
                });
            "undefined" == typeof e.select_packs_menu_current_page[s] && (e.select_packs_menu_current_page[s] = 0), u({
                page: e.select_packs_menu_current_page[s],
                item_array: l,
                items_per_page: c,
                selection_container: t,
                selection_tab_container: p
            })
        }
        var n = l.select_screen,
            o = (l.content_div, l.mr_jigtato),
            e = l.gs,
            s = (o.game_data, o.game_data.jigsaw, o.player_data, o.set_name),
            h = n.body,
            u = n.header,
            t = document.createElement("div");
        t.className = "jt-select_screen-header-show_hint_image jt-select_screen-header-size-1 jt-button hoverable", t.innerHTML = "My Packs", t.addEventListener(e.events.POINT, function() {
            t.toggle()
        }), t.toggle = function() {
            t.is_active ? t.deactivate() : t.activate()
        };
        var a = {};
        return t.activate = function() {
            c({
                gs: e,
                error: function() {
                    smoke.alert("You must log in to Google Play to use this feature!")
                },
                success: function() {
                    t.is_active = !0, u.querySelectorAll(".jt-button").forEach(function(e) {
                        e != t && e != n.gem_purchase_button && (e.style.display = "none")
                    }), t.classList.remove("jt-select_screen-header-size-1"), t.classList.add("jt-select_screen-header-size-4"), p()
                }
            })
        }, t.deactivate = function() {
            t.is_active = !1, u.querySelectorAll(".jt-button").forEach(function(e) {
                e != t && e != n.gem_purchase_button && (e.style.display = "")
            }), t.classList.add("jt-select_screen-header-size-1"), t.classList.remove("jt-select_screen-header-size-4"), _()
        }, t
    }

    function y() {
        function l() {
            var e = this;
            this.DEBUG = !1, "undefined" != typeof IS_DEBUG_MODE && (this.DEBUG = IS_DEBUG_MODE), this.errormessage = function(e, i, t) {
                "undefined" == typeof t && (t = {}), i = i || t.callback || function() {}, "string" != typeof e && (e = e.errormessage), smoke.alert(e, i, t)
            }, pt(this), this.contact_info = "info@flyingsoftgames.com", this.is_kiosk = "true" == h().is_kiosk ? !0 : !1, this.use_mini_images = "false" == h().use_mini_images ? !0 : !0, this.events = {}, this.IS_COCOONJS = !!window.CocoonJS, this.IS_CORDOVA = !!a, this.IS_WEBVIEW = !!window.CocoonJS || !!a, this["/"] = e.IS_WEBVIEW ? "" : "/", this.events.POINT = this.is_phone_or_tablet ? "touchstart" : "click", this.events.POINT_START = this.is_phone_or_tablet ? "touchstart" : "mousedown", this.events.POINT_MOVE = this.is_phone_or_tablet ? "touchmove" : "mousemove", this.events.POINT_END = this.is_phone_or_tablet ? "touchend" : "mouseup", this.collision_scale = .5, this.audio_dir = e["/"] + "audio", this.ad_removal_price = 27, this.service_name = "google_play", this.free_url = "details?id=com.flyingsoft.safari.jigsaw.free", this.free_url = e.IS_CORDOVA ? "market://" + this.free_url : "http://play.google.com/store/apps/" + this.free_url, e.IS_CORDOVA && "undefined" != typeof window.plugins.AppVersion && window.plugins.AppVersion.getVersionCode({
                success: function(t) {
                    e.version_code = t
                }
            }), this.android = {}, this.account = {}, this.open_url = function(t) {
                return e.IS_COCOONJS ? void CocoonJS.App.openURL(t) : e.IS_CORDOVA ? void window.open(t, "_system") : void(window.location.href = t)
            }, e.jigsaw_get_scaled_piece_margin = function() {
                return e.jigsaw_piece_margin
            };
            var i = {};
            i.jigsaw_colored_borders = function(t, i) {
                switch (e.jigsaw_piece_margin = 8, e.jigsaw_piece_margin_style = t ? "rgba(0,0,127,1)" : void 0, i) {
                    case "margin":
                        return e.jigsaw_piece_margin;
                    case "margin_style":
                        return e.jigsaw_piece_margin_style
                }
            }, i.music_on = function() {
                e.ambient_music && e.ambient_music[e.music_on && e.ambient_music_on ? "play" : "pause"]()
            }, i.ambient_music_on = function() {
                e.ambient_music && e.ambient_music[e.music_on && e.ambient_music_on ? "play" : "pause"]()
            }, void
            function() {
                function t(e, i, r) {
                    for (var n in e) {
                        var t = e[n];
                        t[i] && (t.volume = r / 10)
                    }
                }
                i.sound_effects_volume = function(i) {
                    t(e.audio_container, "is_sound_effect", i)
                }, i.music_volume = function(i) {
                    t(e.audio_container, "is_music", i)
                }, i.ambient_music_volume = function(i) {
                    t(e.audio_container, "is_ambient_music", i)
                }
            }();
            var o = [{
                name: "IS_PREMIUM",
                "default": !1,
                resettable: !1
            }, {
                name: "challenge_code_processed",
                "default": !1,
                resettable: !1
            }, {
                name: "game_type",
                "default": ""
            }, {
                name: "gem_amount",
                "default": 0
            }, {
                name: "run_audio_in_background",
                "default": !1
            }, {
                name: "sound_effects_on",
                "default": !0
            }, {
                name: "music_on",
                "default": !0
            }, {
                name: "ambient_music_on",
                "default": !0
            }, {
                name: "ambient_music_playlist_name",
                "default": void 0
            }, {
                name: "sound_effects_volume",
                "default": 10
            }, {
                name: "music_volume",
                "default": 10
            }, {
                name: "ambient_music_volume",
                "default": 10
            }, {
                name: "ambient_music_on_question_asked",
                "default": !1
            }, {
                name: "jigsaw_colored_borders_question_asked",
                "default": !1
            }, {
                name: "jigsaw_use_3d_effect_question_asked",
                "default": !1
            }, {
                name: "challenge_code_request_asked",
                "default": !1
            }, {
                name: "thank_you_screen_mentioned",
                "default": !1
            }, {
                name: "use_categories",
                "default": !1
            }, {
                name: "freestyle_mode",
                "default": !0
            }, {
                name: "show_timer",
                "default": !0
            }, {
                name: "show_ad_counter",
                "default": -1,
                resettable: !1
            }, {
                name: "own_ad_shown",
                "default": !1,
                resettable: !1
            }, {
                name: "account.game_was_rated",
                "default": !1,
                resettable: !1
            }, {
                name: "select_menu_sort_index",
                "default": {}
            }, {
                name: "select_menu_sort_direction",
                "default": {}
            }, {
                name: "select_menu_current_page",
                "default": {}
            }, {
                name: "select_packs_menu_current_page",
                "default": {}
            }, {
                name: "gray-filter_incomplete_images",
                "default": !0
            }, {
                name: "gray-filter_unacquired_packs",
                "default": !0
            }, {
                name: "jigsaw_center_piece_on_move",
                "default": !1
            }, {
                name: "jigsaw_arrange_pieces_on_entire_area",
                "default": 2
            }, {
                name: "jigsaw_use_large_square_images",
                "default": !0
            }, {
                name: "jigsaw_show_hint_image",
                "default": !0
            }, {
                name: "jigsaw_show_hint_rect",
                "default": !0
            }, {
                name: "jigsaw_minimal_ui",
                "default": !0
            }, {
                name: "jigsaw_image_size_type",
                "default": 1
            }, {
                name: "jigsaw_piece_scale_to_actual_index",
                "default": 0
            }, {
                name: "jigsaw_piece_scale_to_actual",
                "default": .75
            }, {
                name: "jigsaw_required_precision",
                "default": 5
            }, {
                name: "jigsaw_use_3d_effect",
                "default": !0
            }, {
                name: "jigsaw_combine_pieces",
                "default": !0
            }, {
                name: "jigsaw_colored_borders",
                "default": !0
            }, {
                name: "jigsaw_piece_margin",
                "default": function() {
                    return i.jigsaw_colored_borders(e.jigsaw_colored_borders, "margin")
                }
            }, {
                name: "jigsaw_piece_margin_style",
                "default": function() {
                    return i.jigsaw_colored_borders(e.jigsaw_colored_borders, "margin_style")
                }
            }, {
                name: "jigsaw_animate_piece_placement",
                "default": !0
            }, {
                name: "jigsaw_heat_seeking_color_index",
                "default": 1
            }, {
                name: "jigsaw_reduce_texture_size",
                "default": 0
            }, {
                name: "show_trophy_ribbon",
                "default": !0
            }];
            if (e.jigsaw_piece_scale_to_actual_options = [.5, .6, .75, 1], e.jigsaw_heat_seeking_color_options = [void 0, "cyan", "red"], o.forEach(function(n) {
                    var t = n.name,
                        r = t.indexOf(".");
                    if (-1 != r) var o = t.substr(0, r),
                        s = t.substr(r + 1);
                    if ("undefined" != typeof localStorage["settings." + t] && "undefined" != localStorage["settings." + t]) var a = e[t] = JSON.parse(localStorage["settings." + t]);
                    else if (e[t] in e || (e[t] = "function" == typeof n.default ? n.default() : n.default), -1 != r) var a = e[o][s];
                    else var a = e[t];
                    Object.defineProperty(e, t, {
                        get: function() {
                            return a
                        },
                        set: function(e) {
                            a = e, i[t] && i[t](e), localStorage["settings." + t] = JSON.stringify(e)
                        }
                    }), -1 != r ? e[o][s] = a : e[t] = a
                }), e.reset_default_settings = function() {
                    o.forEach(function(t) {
                        if (!t.resettable || 0 != t.resettable) {
                            var i = t.name,
                                r = i.indexOf(".");
                            if (-1 != r) {
                                var n = i.substr(0, r),
                                    a = i.substr(r + 1);
                                e[n][a] = "function" == typeof t.default ? t.default() : t.default
                            } else e[i] = "function" == typeof t.default ? t.default() : t.default
                        }
                    })
                }, this.try_requesting_fullscreen = !1, this.use_jpeg_if_available = !0, this.image_ext = this.use_jpeg_if_available ? "jpg" : "png", "undefined" != typeof smoke && (smoke.point_event = this.events.POINT, smoke.autofocus = !0), this.use_social_media_buttons = !1, this.skip_set_selection_screen = !0, this.get_root_directory = function() {
                    return a ? "/android_asset/www" : ""
                }, this.get_set_directory = function(t) {
                    return (d ? "content://" + P + ".free.expansion/" : e["/"]) + "sets/" + t
                }, this.get_trophy_directory = function(t) {
                    return e.get_set_directory(t) + "/puzzle/trophies"
                }, this.get_image_url_from_server = function(r, i, t) {
                    return "http://www.flyingsoftgames.com/mr_jigtato/resources/puzzle/" + i + ("mini" == t ? "-mini.jpg" : "mini-grey" == t ? "-mini-grey.png" : ".jpg") + "?" + ("undefined" != typeof e.account.user_id ? "&user_id=" + e.account.user_id : "") + ("undefined" != typeof e.account.internal_access_token ? "&internal_access_token=" + e.account.internal_access_token : "")
                }, this.get_image_url_from_local = function(r, t, n) {
                    var i = (d ? "content://" + P + ".free.expansion/" : e["/"]) + "sets/" + r;
                    switch (n) {
                        case "mini":
                            return i + "/puzzle/mini/" + t + "-mini.jpg";
                        case "mini-grey":
                            return i + "/puzzle/mini-grey/" + t + "-mini.png";
                        default:
                            return i + "/puzzle/" + t + ".jpg"
                    }
                }, "undefined" == typeof localStorage.puzzle_image_is_not_local_cache && (localStorage.puzzle_image_is_not_local_cache = JSON.stringify({})), this.get_image = function(i, r, t, n) {
                    var a = JSON.parse(localStorage.puzzle_image_is_not_local_cache);
                    return a[t] ? void(i.src = e.get_image_url_from_server(r, t, n)) : (i.src = e.get_image_url_from_local(r, t, n), void i.addEventListener("error", function() {
                        var a = JSON.parse(localStorage.puzzle_image_is_not_local_cache);
                        a[t] = !0, localStorage.puzzle_image_is_not_local_cache = JSON.stringify(a), i.src = e.get_image_url_from_server(r, t, n)
                    }))
                }, e.jigsaw_piece_margin = 8, this.audio_container = {}, this.select_mode_visited_count = 0, e.ambient_music = function() {
                    var i = {};
                    return i.load_ambient_music = function(r, l) {
                        var n = l.split(","),
                            a = n[0].trim().toLowerCase(),
                            o = n[1].trim().toLowerCase();
                        if (!i.loaded) {
                            if (i.loaded = !0, i.playlist_list = r, "undefined" != typeof e.ambient_music_playlist_name) var s = r.find(function(t) {
                                return t.name.toLowerCase() == e.ambient_music_playlist_name.toLowerCase()
                            });
                            else {
                                if ("{random}" == a) var s = r[Math.floor(Math.random() * t.length)];
                                else var s = r[r.findIndex(function(e) {
                                    return e.name.trim().toLowerCase() == a
                                }) || 0];
                                e.ambient_music_playlist_name = s.name
                            }
                            var t = s.list;
                            i.playlist = t, i.current_track_index = "{random}" == o ? Math.floor(Math.random() * t.length) : t.findIndex(function(e) {
                                return e.title.trim().toLowerCase() == o
                            }) || 0, i.current_track_index = (i.current_track_index + t.length - 1) % t.length, i.play_next_track()
                        }
                    }, i.play_next_track = function() {
                        i.pause(), i.current_track = null, i.current_track && i.playlist.length > 1 && i.release && i.release();
                        var r = i.playlist;
                        i.current_track_index = (i.current_track_index + 1) % r.length, i.current_track = e.playAudio(e.get_set_directory(t.set_name) + "/audio/" + r[i.current_track_index].file, {
                            audio_type: "ambient_music",
                            restart: !0,
                            blocking: !1
                        }), i.current_track && (i.current_track.addEventListener("ended", i.play_next_track), e.music_on && e.ambient_music_on || i.pause(), "undefined" != typeof e.set_audio_menu_title && e.set_audio_menu_title())
                    }, i.play_next_playlist = function() {
                        i.pause(), i.current_track && i.release && i.release();
                        var t = i.playlist_list,
                            a = t.findIndex(function(t) {
                                return t.name.toLowerCase() == e.ambient_music_playlist_name.toLowerCase()
                            }),
                            n = t[(a + 1) % t.length];
                        e.ambient_music_playlist_name = n.name;
                        var r = i.playlist = n.list;
                        i.current_track_index = Math.floor(Math.random() * r.length), i.current_track_index = (i.current_track_index + r.length - 1) % r.length, i.play_next_track()
                    }, i.play = function() {
                        return i.current_track ? void i.current_track.play() : (i.current_track_index = (i.current_track_index + i.playlist.length - 1) % i.playlist.length, void i.play_next_track())
                    }, i.pause = function() {
                        i.current_track && i.current_track.pause()
                    }, i
                }(), e.playAudio = function(r, t) {
                    function o() {
                        i.paused || i.pause(), c && clearInterval(c), i.removeEventListener("ended", o), e.music_on && e.ambient_music_on && e.ambient_music && e.ambient_music.current_track && e.ambient_music.current_track.play()
                    }
                    var t = n(t || {});
                    t.container = e.audio_container;
                    var a = t.audio_type || "sound_effect",
                        s = e[a + ("sound_effect" == a ? "s" : "") + "_on"];
                    if (t.play_howl = !1, t.play_howl && "ambient_music" == a && (t.preload_buffer_file = r.substr(0, r.length - 4) + "-preview" + r.substr(-4)), s || "undefined" != typeof t.start && 0 == t.start)
                        if (t.element) var l = t.element,
                            i = l.playAudio(r, t);
                        else var i = m(r, t);
                    if (!s) return i;
                    switch (t.restart && (i.currentTime = 0), a) {
                        case "sound_effect":
                            i.volume = e.sound_effects_volume / 10;
                            break;
                        case "music":
                            i.volume = e.music_volume / 10;
                            break;
                        case "ambient_music":
                            i.volume = e.ambient_music_volume / 10
                    }
                    if (i["is_" + a] = !0, "undefined" == typeof t.blocking || 1 == t.blocking) {
                        var c = void 0;
                        if (e.music_on && e.ambient_music_on && e.ambient_music && e.ambient_music.current_track && e.ambient_music.current_track.pause(), i.addEventListener("ended", o), t.element) var l = t.element,
                            c = setInterval(function() {
                                l.isAttached() || o()
                            }, 200)
                    }
                    return i
                }, void
                function(r, n) {
                    function t(i) {
                        if (!n()) {
                            var a = e;
                            if (e = !("blur" == i.type) && "visible" == document.visibilityState, a != e)
                                for (var o in r) {
                                    var t = r[o];
                                    0 == e ? (t.stored_paused_state = t.paused, t.stored_paused_state || t.pause()) : t.stored_paused_state || t.play()
                                }
                        }
                    }
                    var i;
                    ["", "moz", "ms", "webkit"].some(function(e) {
                        return "undefined" != typeof document["" == e ? "hidden" : e + "Hidden"] ? (i = e + "visibilitychange", !0) : void 0
                    }), "undefined" != typeof i && document.addEventListener(i, t), window.addEventListener("blur", t), window.addEventListener("focus", t);
                    var e = !0
                }(e.audio_container, function() {
                    return e.run_audio_in_background
                }), e.is_phone_or_tablet || _t({
                    handle_mouse_events: !0,
                    handle_touch_events: !1
                }), !e.IS_WEBVIEW) {
                var r = document.getElementsByTagName("head")[0].querySelector("base");
                if (null == r) {
                    var r = document.createElement("base");
                    r.href = "/", document.getElementsByTagName("head")[0].appendChild(r)
                }
            }
            if (e.is_phone_or_tablet && (document.body.addEventListener("touchstart", function(e) {
                    e.target.classList.contains("hoverable") && e.target.classList.add("hover")
                }), document.body.addEventListener("touchend", function(e) {
                    e.target.classList.contains("hoverable") && e.target.classList.remove("hover")
                }), document.body.addEventListener("touchleave", function(e) {
                    e.target.classList.contains("hoverable") && e.target.classList.remove("hover")
                }), document.body.addEventListener("touchcancel", function(e) {
                    e.target.classList.contains("hoverable") && e.target.classList.remove("hover")
                })), void
                function() {
                    function e() {
                        t.save_player_data_to_server(), setTimeout(e, i)
                    }
                    var i = 72e5;
                    setTimeout(e, i)
                }(), (e.IS_COCOONJS || e.IS_CORDOVA) && document.addEventListener(e.events.POINT, function(i) {
                    var t = i.target;
                    if ("a" == t.tagName.toLowerCase() || "a" == t.parentNode.tagName.toLowerCase()) {
                        i.preventDefault();
                        var r = t.href || t.parentNode.href;
                        return r && e.open_url(r), !1
                    }
                }), e.IS_CORDOVA) {
                !e.account.IS_PREMIUM && e.IS_WEBVIEW && "undefined" != typeof p && (e.ad_control = p(), e.ad_control.gs = e, e.ad_control.init(), void
                    function() {
                        e.ad_control.disabled_ad_timeout = {}, e.ad_control.onrun = function() {
                            e.ad_control.disabled_ad_timeout.ad_wait && (clearTimeout(e.ad_control.disabled_ad_timeout.ad_wait), delete e.ad_control.disabled_ad_timeout.ad_wait), e.ad_control.disabled_ad_timeout.ad_wait = setTimeout(function() {
                                Q({
                                    gs: e,
                                    mr_jigtato: t
                                })
                            }, 8e3)
                        }, e.ad_control.ondisplay = function() {
                            clearTimeout(e.ad_control.disabled_ad_timeout.ad_wait), delete e.ad_control.disabled_ad_timeout.ad_wait
                        }
                    }());
                var s = window.plugins.GooglePlayQuery;
                s.getURI({
                    success: function(t) {
                        e.android.INSTALL_REFERRER = t
                    }
                })
            }
            return e.IS_CORDOVA && (e.smoke_window_list = [], smoke.window_opened = function(t) {
                e.smoke_window_list.push(t)
            }, smoke.window_closed = function(t) {
                e.smoke_window_list.splice(e.smoke_window_list.indexOf(t), 1)
            }), e.IS_CORDOVA || (e.gps = {}, e.gps.initialize = function(e) {
                var e = e || function() {};
                hello.init({
                    google: "694160809438-53in4hb7cbnp732jei4g4lm5omgl2jgm.apps.googleusercontent.com"
                }), hello("google").login({
                    display: "popup",
                    scope: "email"
                }).then(e.success, e.error)
            }, e.gps.getPlayerId = function(e) {
                hello("google").api("userinfo/v2/me").then(function(t) {
                    e.success(t.id)
                }, e.error)
            }, e.gps.getAccessToken = function(e) {
                var t = hello("google").getAuthResponse();
                e.success(t.access_token)
            }), e.get_google_play_access_token = function(t) {
                function r() {
                    i(e.google_play_access_token)
                }
                var t = t || function() {},
                    i = "undefined" != typeof t.callback ? t.callback : function() {};
                if ("undefined" != typeof e.google_play_access_token) return void i(e.google_play_access_token);
                if (e.IS_CORDOVA) var n = window.plugins.GooglePlayToken || window.plugins.GooglePlayServices;
                else var n = e.gps;
                n.getAccessToken({
                    error: r,
                    success: function(t) {
                        e.google_play_access_token = t, i(e.google_play_access_token)
                    }
                })
            }, this
        }

        function u(i, e) {
            function t(e) {
                return e.charAt(0).toUpperCase() + e.slice(1)
            }
            return document.original_title + ("undefined" == typeof e.title ? "" : ": " + t(e.title))
        }
        window.onerror = function(t, n, a, o) {
            var e = "undefined" != typeof window.device ? window.device : e;
            "undefined" == typeof e.model && (e.model = ""), "undefined" == typeof e.uuid && (e.uuid = ""), i({
                file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (r.DEBUG ? "-beta" : "") + ".php?action=send_javascript_error&errormessage=" + t + "&url=" + n + "&line_number=" + a + "&column_number=" + o + "&device_model=" + e.model + "&device_uuid=" + e.uuid,
                success: function() {},
                error: function() {},
                request_method: "GET"
            })
        }, "undefined" == typeof a && (a = !1), "undefined" == typeof d && (d = !1), "undefined" == typeof window.device && (window.device = {
            version: "",
            uuid: "",
            model: ""
        }), a && st();
        var t = {};
        t.load_game_data = function(l) {
            function o(e) {
                "undefined" == typeof e && (e = 1), s -= 1, 0 == s && c()
            }

            function c() {
                if (t.game_data = n, t.game_data.trophy_list = a, void
                    function() {
                        var t = n.entry_list,
                            a = 0;
                        for (var i in t) {
                            var e = t[i];
                            if ("undefined" == typeof e.puzzle_position && (e.puzzle_position = a), a += 1, "undefined" != typeof e.template) {
                                var o = t[e.template];
                                for (var r in o) "undefined" == typeof e[r] && (e[r] = g(o[r]));
                                delete e.is_only_template
                            }
                        }
                        for (var i in t) t[i].is_only_template && delete t[i]
                    }(), "undefined" != typeof n.web_font_list) {
                    var i = [];
                    n.web_font_list.forEach(function(t) {
                        i.push(r.get_set_directory(e) + "/" + t)
                    }), dt(i)
                }
                t.update_game_data_from_server(l)
            }
            var e = "undefined" != typeof E ? E : "default";
            localStorage.set_name = t.set_name = e;
            var s = 2,
                a = void 0;
            i({
                success: function(t) {
                    a = t.trophy_list;
                    for (var e in a) a[e].filename = e;
                    o()
                },
                error: r.errormessage,
                file: r.get_set_directory(e) + "/" + e + "-trophies.json",
                request_method: "GET"
            });
            var n = void 0;
            i({
                file: r.get_set_directory(e) + "/" + e + ".json",
                request_method: "GET",
                async: !0,
                ignore_request_status: r.IS_WEBVIEW,
                error: r.errormessage,
                success: function(e) {
                    n = e, o()
                }
            })
        }, t.update_game_data_from_server = function(n) {
            function e(e) {
                "undefined" == typeof e && (e = 1), a -= 1, 0 == a && o()
            }

            function o() {
                var i = t.game_data.entry_list,
                    e = [];
                "undefined" != typeof r.free_puzzles && e.push(r.free_puzzles), "undefined" != typeof r.paid_puzzles && e.push(r.paid_puzzles), e.forEach(function(e) {
                    "undefined" != typeof e && e.forEach(function(e) {
                        i[e].enabled = !0
                    })
                }), l()
            }
            var n = n || {},
                s = n.new_state_page || "",
                l = n.callback || function() {},
                a = 3;
            i({
                file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (r.DEBUG ? "-beta" : "") + ".php?action=get_global_data",
                error: e,
                request_method: "POST",
                async: !0,
                success: function(t) {
                    return null == t ? void e() : ("undefined" != typeof t.ad_removal_price && (r.ad_removal_price = t.ad_removal_price), "undefined" != typeof t.puzzle_pack_list && (r.puzzle_pack_list = t.puzzle_pack_list), r.free_puzzles = t.free_puzzles, void e())
                }
            }), "jigsaw" == s ? e() : c({
                gs: r,
                success: e,
                error: e
            });
            t.load_set_css(e)
        }, t.reset_player_data = function() {
            if ("undefined" != typeof t.player_data) var e = t.player_data;
            else var e = {};
            e.selected_difficulty = 0, e.jigsaw = {}, e.jigsaw.trophies = [], e.jigsaw.ranks = {}, e.jigsaw.best_times = [{}, {}], t.player_data = e, localStorage.player_data = JSON.stringify(t.player_data);
            var i = localStorage["puzzle_states.$keys"];
            if ("undefined" != typeof i) {
                i = JSON.parse(i);
                for (var r in i) localStorage.removeItem("puzzle_states." + r)
            }
            localStorage["puzzle_states.$keys"] = JSON.stringify({})
        }, t.save_player_data_to_server = function(n) {
            {
                var n = n || {};
                n.error || function() {}, n.success || function() {}
            }
            if ("undefined" != typeof r.account.internal_access_token) {
                var a = {};
                a.player_data = t.player_data;
                var s = localStorage["puzzle_states.$keys"],
                    l = a.puzzle_states = {};
                if ("undefined" != typeof s) {
                    var c = a.puzzle_states_keys = JSON.parse(s);
                    for (var o in c) "undefined" != typeof localStorage["puzzle_states." + o] && (l[o] = JSON.parse(localStorage["puzzle_states." + o]))
                }
                i({
                    file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (r.DEBUG ? "-beta" : "") + ".php?action=save_player_data&user_id=" + r.account.user_id + "&internal_access_token=" + r.account.internal_access_token,
                    data: "&player_data=" + e.compressToBase64(JSON.stringify(a)),
                    error: r.errormessage,
                    request_method: "POST",
                    async: !0,
                    success: n.success
                })
            }
        }, t.load_player_data_from_server = function(n) {
            function o(s) {
                t.reset_player_data();
                var i = JSON.parse(e.decompressFromBase64(s.replace(/ /g, "+")));
                if (null == i) return void a();
                t.player_data = i.player_data, localStorage.player_data = JSON.stringify(t.player_data);
                var r = i.puzzle_states_keys,
                    l = i.puzzle_states;
                if ("undefined" != typeof r && (localStorage["puzzle_states.$keys"] = JSON.stringify(r)), "undefined" != typeof r)
                    for (var n in r) {
                        var o = JSON.stringify(l[n]);
                        "undefined" != typeof o && (localStorage["puzzle_states." + n] = o)
                    }
                a()
            }
            var n = n || {},
                a = ("function" == typeof n.error ? n.error : function() {}, "function" == typeof n.success ? n.success : function() {});
            "undefined" != typeof r.account.internal_access_token && i({
                file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (r.DEBUG ? "-beta" : "") + ".php?action=load_player_data&user_id=" + r.account.user_id + "&internal_access_token=" + r.account.internal_access_token,
                error: r.errormessage,
                request_method: "POST",
                async: !0,
                success: o
            })
        }; {
            var s = 90; + localStorage.game_version
        } + localStorage.game_version != s && (localStorage.game_version = s), "undefined" != typeof localStorage.player_data && "true" != h().force_reset && "true" != h().hard_reset ? t.player_data = JSON.parse(localStorage.player_data) : ("undefined" == typeof localStorage.player_data && (t.first_run = !0), t.reset_player_data()), t.set_name = localStorage.set_name;
        var r = t.gs = new l;
        t.parent = document.body, document.original_title = document.title, document.original_title = document.original_title.substring(0, document.original_title.indexOf(":")), r.url_vars = {};
        var _ = t.history_control = new Tt({
                onbeforestatechange: function(e, i, n) {
                    r.try_requesting_fullscreen && !r.IS_WEBVIEW && r.is_phone_or_tablet && z(document.documentElement), "jigsaw" == e.page && "undefined" == typeof e.level && (e.page = "select_jigsaw"), "undefined" == typeof localStorage.set_name && (e.page = "select_mode"), ("" == e.page || "index.php" == e.page || "index.html" == e.page.substr(e.page.lastIndexOf("/") + 1)) && (e.page = "select_mode"), "jigsaw" != e.page && "undefined" != typeof e.level && delete e.level, "undefined" == typeof i.url && (i.url = e.page);
                    var a = 1 == r.is_kiosk ? !0 : void 0;
                    switch (i.url = e.page + gt({
                        is_kiosk: a,
                        level: e.level,
                        use_mini_images: e.use_mini_images
                    }, {
                        record_undefined_values: !1
                    }), e.page) {
                        case "select_mode":
                            i.title = "Select Mode";
                            break;
                        case "select_jigsaw":
                            i.title = "Select Jigsaw";
                            break;
                        case "jigsaw":
                            i.title = "Jigsaw";
                            break;
                        case "mixnmatch":
                            i.title = "Mix N' Match"
                    }
                    i.title = u(e, i), "undefined" != typeof t.game_data ? n() : t.load_game_data({
                        new_state_page: e.page,
                        callback: n
                    })
                },
                can_do_popstate: function() {
                    if ("undefined" == typeof r || !r.IS_CORDOVA) return !0;
                    if (0 == r.smoke_window_list.length) return !0;
                    var e = r.smoke_window_list[r.smoke_window_list.length - 1];
                    return e.close ? e.close() : e.cancel ? e.cancel() : e.ok && e.ok(), !1
                },
                onstatechange: function(e, i) {
                    if (r.IS_CORDOVA || ("undefined" == typeof window.has_save_to_server_unload_event && (window.has_save_to_server_unload_event = {}), window.has_save_to_server_unload_event[e.page] || (window.has_save_to_server_unload_event[e.page] = !0, window.addEventListener("beforeunload", t.save_player_data_to_server))), o.cleanup) {
                        o.cleanup()
                    }
                    switch (e.page) {
                        case "select_mode":
                            if (r.IS_CORDOVA && (r.select_mode_visited_count += 1, r.select_mode_visited_count > 1 && r.is_android)) return r.ad_control.destroy(), void t.save_player_data_to_server({
                                success: navigator.app.exitApp,
                                error: navigator.app.exitApp
                            });
                            ot({
                                content_div: o,
                                mr_jigtato: t,
                                global_settings: r
                            });
                            break;
                        case "select_jigsaw":
                            at({
                                content_div: o,
                                mr_jigtato: t,
                                global_settings: r,
                                callback: function() {}
                            });
                            break;
                        case "jigsaw":
                            ct({
                                content_div: o,
                                mr_jigtato: t,
                                global_settings: r,
                                level_id: e.level
                            }), !r.account.IS_PREMIUM && r.IS_WEBVIEW && "undefined" != typeof p && $({
                                gs: r,
                                mr_jigtato: t
                            });
                            break;
                        case "mixnmatch":
                            play_mixnmatch_screen({
                                content_div: o,
                                mr_jigtato: t,
                                global_settings: r,
                                level_id: e.level
                            })
                    }
                    i()
                },
                initial_page: function() {
                    var e = ft(window.location.href);
                    return "/" == e[e.length - 1] && (e = e.substr(1, e.length - 1)), -1 != e.indexOf("?") && (e = e.substr(0, e.indexOf("?"))), e
                }(),
                var_name: "page",
                app_url_vars: r.url_vars
            }),
            o = document.createElement("div");
        if (o.className = "jt-content_div", t.parent = document.body, t.parent.appendChild(o), smoke.parent = o, r.is_phone_or_tablet) {
            smoke.custom_css = {
                "buttons.ok": "hoverable"
            };
            var f = smoke.prompt;
            smoke.prompt = function(t, i, r) {
                var e = f(t, i, r);
                return e.dialog.classList.add("smoke-dialog-at_the_top"), e
            }
        }
        return J({
            content_div: o,
            is_mobile: r.is_phone_or_tablet
        }), vt(), t.play_intro_audio = function(a) {
            var h = a.level_id,
                o = a.count,
                i = t.game_data,
                s = i.entry_list[h],
                e = "undefined" != typeof s.audio_template ? i.audio_template_list[s.audio_template] : s.audio;
            if ("undefined" != typeof e) {
                if ("object" != typeof e) var n = e;
                else if ("undefined" == typeof o) var n = Math.weightedSample(e);
                else {
                    var l = 0;
                    for (var u in e) l += 1;
                    o %= l;
                    var c = 0;
                    for (var u in e) {
                        if (c == o) break;
                        c += 1
                    }
                    var n = u
                }
                if ("undefined" == typeof i.entry_audio_directory) var n = r.get_set_directory(t.set_name) + "/audio/" + n + ".ogg";
                else var n = r.get_set_directory(t.set_name) + "/" + i.entry_audio_directory + "/" + n + ".ogg";
                r.sound_effects_on && (t.last_intro_audio = n, r.playAudio(n, {
                    element: a.parent,
                    restart: !0
                }))
            }
        }, t.load_set_css = function(n) {
            function o(i) {
                var o = r.get_set_directory(a) + "/";
                i = i.replace(/url\('/g, "url('" + o), i = i.replace(/url\(\"/g, 'url("' + o), e.innerHTML = i, e.charset = "utf-8", e.media = "screen", e.type = "text/css", e.rel = "stylesheet", s.insertBefore(e, s.lastChild), t.unload_set_css(), t.custom_css_div = e, n && n(e)
            }
            var a = localStorage.set_name;
            if (t.custom_css_div) return n && n(t.custom_css_div), t.custom_css_div;
            var s = document.getElementsByTagName("head")[0],
                l = i({
                    success: o,
                    error: function(e) {
                        r.errormessage(e, init.callback)
                    },
                    file: r.get_set_directory(a) + "/" + a + ".css",
                    charset: "utf-8",
                    plaintext: !0,
                    request_method: "GET",
                    async: "undefined" != typeof n,
                    ignore_request_status: r.IS_WEBVIEW
                }),
                e = document.createElement("style");
            return "undefined" == typeof n && o(l), e
        }, t.unload_set_css = function() {
            if ("undefined" != typeof t.custom_css_div) {
                var e = t.custom_css_div;
                e.disabled = "disabled", e.parentNode.removeChild(e), delete t.custom_css_div
            }
        }, Object.defineProperty(t, "background_image_url", {
            get: function() {
                for (var e in t.game_data.background_list) {
                    var i = t.game_data.background_list[e];
                    break
                }
                return r.get_set_directory(t.set_name) + "/" + i
            }
        }), t.get_trophy_item = function(e) {
            var i = e.game_type,
                r = e.level_id,
                n = e.difficulty_level;
            switch (i) {
                case "jigsaw":
                default:
                    var a = t.game_data.entry_list[r].trophies[n]
            }
            return t.game_data.trophy_list[a]
        }, t.menu = {}, t.menu.generic = {}, t.menu.generic.about = {
            text: "About & Credit List",
            action: function(i, e) {
                q({
                    mr_jigtato: t,
                    gs: t.gs,
                    callback: e
                })
            }
        }, t.menu.generic.ogle_trophies = {
            text: "Ogle Trophies",
            action: function(i, e) {
                I({
                    mr_jigtato: t,
                    gs: t.gs,
                    callback: e
                })
            }
        }, t.menu.generic.share = {
            text: "Share",
            action: function(i, e) {
                K({
                    mr_jigtato: t,
                    gs: t.gs,
                    callback: e
                })
            }
        }, t.menu.generic.open_audio_settings_menu = {
            text: "Audio Settings",
            action: tt
        }, t.menu.jigsaw = {}, t.menu.jigsaw.open_visual_settings_menu = {
            text: "Visual Settings",
            action: it
        }, t.menu.jigsaw.toggle_freestyle_mode = {
            text: function() {
                return "Freestyle Mode " + (t.gs.freestyle_mode ? "On" : "Off")
            },
            action: function(i, r) {
                var e = i.currentTarget;
                t.gs.freestyle_mode = !t.gs.freestyle_mode, e.innerHTML = e.text(), r()
            }
        }, t.menu.jigsaw.toggle_categories = {
            text: function() {
                return "Categories " + (t.gs.use_categories ? "Enabled" : "Disabled")
            },
            action: function(r, n, a) {
                var e = r.currentTarget;
                t.gs.use_categories = !t.gs.use_categories, e.innerHTML = e.text();
                var i = a.init.current_game;
                i && i.game_title.autoshow_title({
                    duration: 500
                }), n()
            }
        }, t.menu.jigsaw.open_misc_config_menu = {
            text: "Misc. Config",
            action: rt
        }, t.menu.jigsaw.show_mini_hint_image = {
            text: "Show Hint Image",
            action: D
        }, _.load_page(), t
    }

    function $(n) {
        function s() {
            e.own_ad_shown = !0, e.ad_control.running = !0;
            var a = "<p> Like this game?</p>";
            a += "<p>This game is an independent developer production -- made by 1 developer. If you like this game, please rate it. The more good ratings this game has, the easier it will be for others to find! You can also email me with questions or comments at: " + e.contact_info + ".</p>";
            var t = smoke.confirm(a, function(t) {
                    e.ad_control.running = !1, 0 != t && ("undefined" != typeof e.google_play_access_token && i({
                        file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new.php?action=set_game_was_rated&internal_access_token=" + e.account.internal_access_token + "&user_id=" + e.account.user_id + "service_name=" + e.service_name
                    }), e.account.game_was_rated = !1, e.open_url(e.free_url))
                }),
                n = t.dialog.text.childNodes[1];
            t.dialog.text.childNodes[0].classList.add("jt-common-instruction_text-title"), n.classList.add("jt-common-instruction_text"), n.style.fontSize = "55px", n.style.lineHeight = "150%", n.style.height = "auto", t.dialog.text.style.height = window.getComputedStyle(t.dialog.text).maxHeight, t.buttons.ok.innerHTML = "Rate it.", t.buttons.cancel.innerHTML = "Don't rate it.", r(t.buttons), t.buttons.ok.classList.add("hoverable"), t.buttons.cancel.classList.add("hoverable")
        }

        function l() {
            return
        }
        var e = n.gs,
            a = n.mr_jigtato,
            o = a.game_data.jigsaw.difficulty_levels[a.player_data.selected_difficulty],
            c = o.tile_x,
            h = o.tile_y,
            u = e.show_ad_counter,
            t = Math.sqrt(c * h) / 3;
        return t > 1 && (t = 1), e.show_ad_counter += t, -1 != u && 0 == !!e.own_ad_shown ? void l() : void(e.show_ad_counter >= 1 && (e.show_ad_counter = e.show_ad_counter - parseInt(e.show_ad_counter), Math.random() > .1 ? e.ad_control.run() : 0 == e.account.game_was_rated ? s() : e.ad_control.run()))
    }

    function Q(r) {
        {
            var i = r.gs;
            r.mr_jigtato
        }
        i.own_ad_shown = !0, i.ad_control.running = !0;
        var n = "<p> Like this game?</p>";
        n += "<p>This game is an independent developer production -- made by 1 developer. It is supported by ads, puzzle pack purchases, and an ad removal purchase. Please consider purchasing some gems or upgrades to feed Tiny Tim. This window will self-destruct in 12 seconds.";
        var e = smoke.alert(n, function() {});
        e.buttons.ok.parentNode.removeChild(e.buttons.ok);
        var t = e.dialog.text.childNodes[1];
        e.dialog.text.childNodes[0].classList.add("jt-common-instruction_text-title"), t.classList.add("jt-common-instruction_text"), t.style.fontSize = "55px", t.style.lineHeight = "150%", t.style.height = t.style.maxHeight = "862px", e.dialog.text.style.height = window.getComputedStyle(e.dialog.text).maxHeight, setTimeout(function() {
            i.ad_control.running = !1, null != e.parentNode && e.parentNode.removeChild(e)
        }, 12e3)
    }

    function J(r) {
        var e = r.content_div,
            t = r.is_mobile;
        if (e.original_width = e.clientWidth, e.original_height = e.clientHeight, e.desired_scale = 1, e.set_scale = function(t) {
                "undefined" == typeof t && (t = e.content_scale);
                var i = e;
                i.style.WebkitTransform = i.style.MSTransform = i.style.transform = "scale(" + t + ", " + t + ") rotate(360deg)";
                var r = j(e),
                    n = o(e);
                e.style.marginLeft = Math.round((window.innerWidth - r) / 2) + "px", e.style.marginTop = Math.round((window.innerHeight - n) / 2) + "px", e.content_scale = t, e.draw_area && e.draw_area.reposition_and_resize(), window.scrollTo(window.scrollX, 0)
            }, e.resize_to_page = function(r) {
                if ("undefined" == typeof r && (r = {}), "undefined" == typeof r.evt && (r.evt = {}), null == e.parentNode) return void clearInterval(l);
                if (t && h())
                    if (Math.abs(window.orientation) != Math.abs(c)) var p = s,
                        _ = a - i * !n;
                    else var p = a,
                        _ = s - i * n;
                var g = e.original_width,
                    f = e.original_height,
                    v = "undefined" != typeof p ? p : window.innerWidth,
                    m = "undefined" != typeof _ ? _ : window.innerHeight,
                    o = v / g,
                    u = m / f,
                    d = o;
                d * f > m && (d = u), (e.desired_scale_x != o || e.desired_scale_y != u) && (e.desired_scale_x = o, e.desired_scale_y = u, e.desired_scale = d, e.set_scale(e.desired_scale))
            }, !t) var l = setInterval(function() {
            e.resize_to_page()
        }, 50);
        if (t) {
            var i = Math.abs(window.innerWidth / window.outerWidth * (window.outerHeight - window.screen.availHeight)),
                n = window.innerWidth > window.innerHeight,
                c = window.orientation,
                a = window.innerWidth,
                s = window.innerHeight + i,
                h = function() {
                    return !!document.querySelector(".smoke-base > .smoke-dialog_wrapper > .smoke-dialog > .smoke-prompt")
                };
            window.addEventListener("resize", function(t) {
                e.resize_to_page({
                    evt: t
                })
            })
        }
        e.resize_to_page(), window.scrollTo(0, 0)
    }

    function H(r) {
        function i(t) {
            e.isAttached() || e.destroy(), n = !("blur" == t.type) && "visible" == document.visibilityState
        }
        var a = r.parent,
            e = document.createElement("div");
        e.direction = "undefined" != typeof r.direction ? r.direction : 1, e.counter = "undefined" != typeof r.counter ? r.counter : 0, e.do_stop_on_next_tick = !1, e.className = "jt-play-timer", e.style.visibility = "hidden", a.appendChild(e), e.progress = function(t) {
            if (!t) {
                if (1 == e.do_stop_on_next_tick) return e.do_stop_on_next_tick = !1, void e.stop();
                n && (e.counter += e.direction)
            }
            e.display(), e.interval = setTimeout(e.progress, 1e3)
        }, e.stop = function() {
            0 != e.interval && (clearTimeout(e.interval), e.interval = 0), e.display()
        }, e.stop_on_next_tick = function() {
            e.do_stop_on_next_tick = !0
        }, e.start = function() {
            0 != e.interval && (clearTimeout(e.interval), e.interval = 0), e.counter = 0, e.resume()
        }, e.resume = function() {
            e.display(), 0 == e.interval && e.progress(!0)
        }, e.display = function() {
            e.style.visibility = "visible";
            var t = Math.floor(e.counter / 60);
            9 >= t && (t = "0" + t);
            var i = e.counter % 60;
            9 >= i && (i = "0" + i), e.innerHTML = t + ":" + i, e.setAttribute("current_text", e.innerHTML)
        }, e.destroy = function() {
            document.removeEventListener(t, i), window.removeEventListener("blur", i), window.removeEventListener("focus", i)
        }, e.interval = 0;
        var t;
        "undefined" != typeof document.hidden ? t = "visibilitychange" : "undefined" != typeof document.mozHidden ? t = "mozvisibilitychange" : "undefined" != typeof document.msHidden ? t = "msvisibilitychange" : "undefined" != typeof document.webkitHidden && (t = "webkitvisibilitychange"), "undefined" != typeof t && window.addEventListener(t, i), window.addEventListener("blur", i), window.addEventListener("focus", i);
        var n = !0;
        return e
    }

    function nt(t) {
        var u = t.parent,
            p = t.menu_class,
            a = t.sort_attributes,
            c = t.entry_list,
            d = t.level_array,
            h = t.level_id,
            o = t.set_name,
            s = t.gs,
            i = t.sort_index[o],
            n = t.sort_direction[o],
            l = a[i].attribute_name,
            e = document.createElement("div");
        return e.className = p, e.classList.add("hoverable"), u.appendChild(e), r(e), e.refresh_text = function() {
            var t = a[i];
            e.innerHTML = 0 == n ? t.up : t.down
        }, e.advance_sort_mode = function() {
            a[i];
            0 == n ? n = 1 : (n = 0, i = (i + 1) % a.length, l = a[i].attribute_name), t.sort_direction[o] = n, t.sort_index[o] = i, s.select_menu_sort_direction = s.select_menu_sort_direction, s.select_menu_sort_index = s.select_menu_sort_index, e.refresh_text(), e.sort_levels()
        }, e.sort_levels = function() {
            var i = a[t.sort_index[o]].default_sort_direction;
            d.sort(function(r, a) {
                var e = c[r[h]][l],
                    t = c[a[h]][l];
                return i - n == 0 ? e > t ? 1 : t > e ? -1 : 0 : t > e ? 1 : e > t ? -1 : 0
            }), e.onsort && e.onsort()
        }, e.refresh_text(), e.addEventListener(s.events.POINT, e.advance_sort_mode), e
    }

    function T(t) {
        for (var r in t.init) t[r] = t.init[r];
        var a = t.parent,
            n = t.global_settings,
            i = t.menu_class,
            e = document.createElement("div");
        return e.classList.add("hoverable"), "string" == typeof i && (i = [i]), i.forEach(function(t) {
            e.classList.add(t)
        }), a.appendChild(e), ("undefined" == typeof t.use_menu_button || 1 == t.use_menu_button) && (e.morph_to_menu_button = function() {
            e.is_menu = !0, e.classList.remove("jt-common-back_button"), e.classList.add("jt-common-menu_button"), e.innerHTML = "M", e.setAttribute("current_text", "M")
        }), ("undefined" == typeof t.use_back_button || 1 == t.use_back_button) && (e.morph_to_back_button = function() {
            e.is_menu = !1, e.classList.add("jt-common-back_button"), e.classList.remove("jt-common-menu_button"), e.innerHTML = "B", e.setAttribute("current_text", "B")
        }), "undefined" == typeof t.start_with_back_button || 0 == t.start_with_back_button ? e.morph_to_menu_button() : e.morph_to_back_button(), e.addEventListener(n.events.POINT, function() {
            t.current_game;
            return 1 == e.is_menu ? void t.target.open() : void(n.IS_WEBVIEW ? window.history.back() : t.mr_jigtato.history_control.load_page({
                page: "undefined" != typeof t.back_button_page ? t.back_button_page : "select_jigsaw"
            }))
        }), e
    }

    function u(t) {
        var e = document.createElement("div");
        e.className = "smoke-base";
        for (var l in t.init) l in t || (t[l] = t.init[l]);
        var u = t.parent,
            n = t.global_settings,
            a = t.current_game,
            h = t.menu_item_list;
        e.init = t, u.appendChild(e), e.style.display = "none";
        var s = document.createElement("div");
        s.className = "smoke-dialog_wrapper", e.appendChild(s);
        var o = document.createElement("div");
        o.className = "smoke-dialog jt-play-settings_menu", s.appendChild(o), "undefined" != typeof t.title && (e.title_div = document.createElement("div"), e.title_div.className = "jt-button jt-play-settings_menu-title", o.appendChild(e.title_div), e.title_div.innerHTML = t.title);
        var i = document.createElement("div");
        i.className = "jt-play-settings_menu-grid", o.appendChild(i), e.settings_div_grid = i, "undefined" != typeof h && h.forEach(function(t) {
            var r = document.createElement("div");
            r.text = t.text, r.innerHTML = "function" == typeof t.text ? t.text() : t.text, i.appendChild(r), r.addEventListener(n.events.POINT, function(i) {
                e.style.display = "none", t.action(i, function() {
                    e.style.display = ""
                }, e)
            })
        }), e.refresh = function() {
            i.children.forEach(function(e) {
                e.children.forEach(function(e) {
                    "undefined" != typeof e.text && (e.innerHTML = "function" == typeof e.text ? e.text() : e.text)
                })
            })
        };
        var c = e.back_button = document.createElement("div");
        return c.innerHTML = "Back", i.appendChild(c), c.addEventListener(n.events.POINT, function() {
            e.close({
                callback: t.callback
            })
        }), e.open = function() {
            n.IS_CORDOVA && n.smoke_window_list.push(e), a && a.timer_obj && a.timer_obj.stop_on_next_tick(), e.style.display = "", i.style.height = "auto", i.style.bottom = "-100%", TweenMax.to(i, 0, {
                ease: Linear.ease,
                css: {
                    bottom: "0"
                }
            })
        }, e.close = function(t) {
            n.IS_CORDOVA && void
            function() {
                var t = n.smoke_window_list.indexOf(e); - 1 != t && n.smoke_window_list.splice(t, 1)
            }(), TweenMax.to(i, 0, {
                ease: Linear.ease,
                css: {
                    bottom: "-100%"
                }
            }), setTimeout(function() {
                a && !e.parent_menu && a.timer_obj && a.timer_obj.resume(), e.style.display = "none", "undefined" != typeof t && "undefined" != typeof t.callback && t.callback(e)
            }, 0)
        }, e.position_buttons = function() {
            var n = Math.ceil(i.children.length / t.column_size),
                e = 0,
                a = 0,
                r = null;
            i.children.forEach(function(o) {
                0 == e && (r = document.createElement("div"), t.column_width && (r.style.width = t.column_width), i.appendChild(r)), e += 1, e == n && (e = 0, a += 1), o.classList.add("jt-button"), o.classList.add("hoverable"), r.appendChild(o)
            })
        }, r(e), e
    }

    function G(t) {
        function o() {
            switch (e.game_type) {
                case "jigsaw":
                    i.push(r.menu.jigsaw.toggle_freestyle_mode), i.push({
                        text: function() {
                            return "Center On Move " + (e.jigsaw_center_piece_on_move ? "On" : "Off")
                        },
                        action: function(i, r) {
                            var t = i.currentTarget;
                            e.jigsaw_center_piece_on_move = !e.jigsaw_center_piece_on_move, t.innerHTML = t.text(), r()
                        }
                    }), i.push({
                        text: function() {
                            return '"Arrange Pieces" Places Pieces ' + (1 == e.jigsaw_arrange_pieces_on_entire_area ? "On Entire Area" : 0 == e.jigsaw_arrange_pieces_on_entire_area ? "On Either Side" : "Using Best Fit")
                        },
                        action: function(i, r) {
                            var t = i.currentTarget;
                            e.jigsaw_arrange_pieces_on_entire_area = (e.jigsaw_arrange_pieces_on_entire_area + 1) % 3, t.innerHTML = t.text(), n && (2 != e.jigsaw_arrange_pieces_on_entire_area && (n.game_instance.jigsaw_arrange_pieces_on_entire_area = e.jigsaw_arrange_pieces_on_entire_area), n.refresh_gui_display()), r()
                        }
                    }), i.push({
                        text: function() {
                            return "Reduce Texture Size " + (4 == e.jigsaw_reduce_texture_size ? "Off" : ">= Difficulty " + (1 + e.jigsaw_reduce_texture_size))
                        },
                        action: function(i, r) {
                            var t = i.currentTarget;
                            e.jigsaw_reduce_texture_size = (e.jigsaw_reduce_texture_size + 1) % 5, t.innerHTML = t.text(), r()
                        }
                    })
            }
            i.push({
                text: "Reset Default Settings",
                action: function(t, e) {
                    V({
                        current_game: n,
                        mr_jigtato: r,
                        callback: e
                    })
                }
            }), i.push({
                text: "Load Player Data From Server",
                action: function() {
                    smoke.confirm('<span style="color:red; weight:bold">Warning</span>: this will overwrite you current local data with data from the server. Proceed?', function(i) {
                        0 != i && r.load_player_data_from_server({
                            error: e.errormessage,
                            success: function() {
                                if ("undefined" != typeof t.select_screen) {
                                    var e = t.select_screen;
                                    e.create_puzzle_selection_array(), e.refresh_puzzle_list(), e.create_selection_tab_container(), e.sort_button.sort_levels()
                                }
                            }
                        })
                    })
                }
            }), i.push({
                text: "Save Player Data to Server",
                action: function() {
                    r.save_player_data_to_server({
                        error: e.errormessage,
                        success: function() {
                            smoke.alert("Player data saved to server.")
                        }
                    })
                }
            }), i.push({
                text: "Reset Player Data",
                action: function(i, e) {
                    Y({
                        current_game: n,
                        select_screen: t.select_screen,
                        mr_jigtato: r,
                        callback: e
                    })
                }
            })
        }
        var r = t.mr_jigtato,
            e = t.gs,
            n = t.current_game;
        "undefined" == typeof t.menu_item_list && (t.menu_item_list = []);
        var i = t.menu_item_list;
        o(); {
            var a = new u(t);
            a.settings_div_grid
        }
        return a.position_buttons(), a
    }

    function U(r) {
        function a() {
            i.push({
                text: function() {
                    return "Timer " + (e.show_timer ? "Visible" : "Hidden")
                },
                action: function(r, n, a) {
                    var t = r.currentTarget;
                    e.show_timer = !e.show_timer, t.innerHTML = t.text();
                    var i = a.init.current_game;
                    i && (i.timer_obj.style.display = e.show_timer ? "" : "none"), n()
                }
            }), r.show_hint_image_options && i.push({
                text: function() {
                    return "Hint Image " + (e.jigsaw_show_hint_rect ? e.jigsaw_show_hint_image ? "Transparent" : "Blank" : "Off")
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    e.jigsaw_show_hint_rect ? e.jigsaw_show_hint_image ? e.jigsaw_show_hint_image = !1 : e.jigsaw_show_hint_rect = !1 : (e.jigsaw_show_hint_rect = !0, e.jigsaw_show_hint_image = !0), i.innerHTML = i.text(), t && (t.game_instance.jigsaw_show_hint_image = e.jigsaw_show_hint_image, t.game_instance.jigsaw_show_hint_rect = e.jigsaw_show_hint_rect, t.refresh_gui_display(), t.save_puzzle_state()), n()
                }
            }), i.push({
                text: function() {
                    return "(Normal UI) Trophy Ribbon " + (e.show_trophy_ribbon ? "Visible" : "Hidden")
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    e.show_trophy_ribbon = !e.show_trophy_ribbon, i.innerHTML = i.text(), t && t.refresh_gui_display(), n()
                }
            }), i.push({
                text: function() {
                    return "Minimal UI " + (e.jigsaw_minimal_ui ? "On" : "Off")
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    if (e.jigsaw_minimal_ui = !e.jigsaw_minimal_ui, i.innerHTML = i.text(), n(), t) {
                        var a = t.main_image.base_image.width;
                        t.set_base_image_size();
                        var o = t.main_image.base_image.width;
                        t.refresh_gui_display(), t.redraw_main_image_and_pieces({
                            piece_rescale: o / a,
                            callback: function() {
                                t.refresh_gui_display(), t.save_puzzle_state()
                            }
                        })
                    }
                }
            }), i.push({
                text: function() {
                    return "(Minimal UI) " + (0 == e.jigsaw_image_size_type ? "Compact" : 1 == e.jigsaw_image_size_type ? "Large" : "Larger") + " Images "
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    if (e.jigsaw_image_size_type = (e.jigsaw_image_size_type + 1) % 3, i.innerHTML = i.text(), n(), t) {
                        var a = t.main_image.base_image.width;
                        t.set_base_image_size();
                        var o = t.main_image.base_image.width;
                        t.refresh_gui_display(), t.redraw_main_image_and_pieces({
                            piece_rescale: o / a,
                            callback: function() {
                                t.refresh_gui_display(), t.save_puzzle_state()
                            }
                        })
                    }
                }
            }), i.push({
                text: function() {
                    return "Piece scale at: " + parseInt(100 * +e.jigsaw_piece_scale_to_actual) + "%"
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    e.jigsaw_piece_scale_to_actual_index = (e.jigsaw_piece_scale_to_actual_index + 1) % e.jigsaw_piece_scale_to_actual_options.length, e.jigsaw_piece_scale_to_actual = e.jigsaw_piece_scale_to_actual_options[e.jigsaw_piece_scale_to_actual_index], i.innerHTML = i.text(), t && (t.category_deck.container.children.forEach(function(e) {
                        t.size_pieces(e.piece_container.children)
                    }), t.screen_refresh()), n()
                }
            }), i.push({
                text: function() {
                    return "2.5D Pieces " + (e.jigsaw_use_3d_effect ? "On" : "Off")
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    e.jigsaw_use_3d_effect = !e.jigsaw_use_3d_effect, i.innerHTML = i.text(), n(), t && (t.game_instance.piece_margin = e.jigsaw_get_scaled_piece_margin(t.game_instance), t.game_instance.piece_margin_style = e.jigsaw_piece_margin_style, t.redraw_main_image_and_pieces())
                }
            }), i.push({
                text: function() {
                    return "Combine Pieces " + (e.jigsaw_combine_pieces ? "On" : "Off")
                },
                action: function(r, n) {
                    n();
                    var i = r.currentTarget;
                    e.jigsaw_combine_pieces = !e.jigsaw_combine_pieces, i.innerHTML = i.text(), t && t.redraw_main_image_and_pieces()
                }
            }), i.push({
                text: function() {
                    return "Colored Borders " + (e.jigsaw_colored_borders ? "On" : "Off")
                },
                action: function(r, n) {
                    var i = r.currentTarget;
                    e.jigsaw_colored_borders = !e.jigsaw_colored_borders, i.innerHTML = i.text(), n(), t && (t.game_instance.piece_margin = e.jigsaw_get_scaled_piece_margin(t.game_instance), t.game_instance.piece_margin_style = e.jigsaw_piece_margin_style, t.redraw_main_image_and_pieces())
                }
            }), i.push({
                text: function() {
                    return "Animate Placement " + (e.jigsaw_animate_piece_placement ? "On" : "Off")
                },
                action: function(i, r) {
                    var t = i.currentTarget;
                    e.jigsaw_animate_piece_placement = !e.jigsaw_animate_piece_placement, t.innerHTML = t.text(), r()
                }
            }), i.push({
                text: function() {
                    var t = e.jigsaw_heat_seeking_color_options[e.jigsaw_heat_seeking_color_index];
                    return "Heat Seeking Color " + ("undefined" == typeof t ? "Off" : t.capitalize())
                },
                action: function(i, r) {
                    var t = i.currentTarget;
                    e.jigsaw_do_heat_seeking = !e.jigsaw_do_heat_seeking, e.jigsaw_heat_seeking_color_index = (e.jigsaw_heat_seeking_color_index + 1) % e.jigsaw_heat_seeking_color_options.length, t.innerHTML = t.text(), r()
                }
            })
        }
        var e = r.gs,
            t = r.current_game;
        "undefined" == typeof r.menu_item_list && (r.menu_item_list = []);
        var i = r.menu_item_list;
        a(); {
            var n = new u(r);
            n.settings_div_grid
        }
        return n.position_buttons(), n
    }

    function W(i) {
        function a() {
            t.push({
                text: function() {
                    return "Sound FX " + (e.sound_effects_on ? "Enabled" : "Disabled")
                },
                action: function(i, r) {
                    var t = i.currentTarget;
                    e.sound_effects_on = !e.sound_effects_on, t.innerHTML = t.text(), r()
                }
            }), t.push({
                text: function() {
                    return "Music " + (e.music_on ? "Enabled" : "Disabled")
                },
                action: function(i, r) {
                    var t = i.currentTarget;
                    e.music_on = !e.music_on, t.innerHTML = t.text(), r()
                }
            }), t.push({
                text: function() {
                    return "Ambient Music " + (e.ambient_music_on ? "Enabled" : "Disabled")
                },
                action: function(r, t) {
                    var i = r.currentTarget;
                    e.ambient_music_on = !e.ambient_music_on, i.innerHTML = i.text(), e.ambient_music_on ? smoke.alert('Note: ambient music won\'t play if the "music" setting is set to "disabled."', t) : t()
                }
            }), t.push({
                text: "Play Next Music Track",
                action: function(i, t) {
                    e.ambient_music.play_next_track(), n(), t()
                }
            }), t.push({
                text: function() {
                    return (e.run_audio_in_background ? "Do" : "Don't") + " Run Audio In Background"
                },
                action: function(i, r) {
                    var t = i.currentTarget;
                    e.run_audio_in_background = !e.run_audio_in_background, t.innerHTML = t.text(), r()
                }
            }), t.push({
                text: function() {
                    return "Sound Volume: " + e.sound_effects_volume
                },
                action: function(r, t) {
                    var i = r.currentTarget;
                    e.sound_effects_volume = (e.sound_effects_volume + 1) % 11 + (10 == e.sound_effects_volume), i.innerHTML = i.text(), t(), t()
                }
            }), t.push({
                text: function() {
                    return "Music Volume: " + e.music_volume
                },
                action: function(r, t) {
                    var i = r.currentTarget;
                    e.music_volume = (e.music_volume + 1) % 11 + (10 == e.music_volume), i.innerHTML = i.text(), t(), t()
                }
            }), t.push({
                text: function() {
                    return "Ambient Music Volume: " + e.ambient_music_volume
                },
                action: function(i, r) {
                    var t = i.currentTarget;
                    e.ambient_music_volume = (e.ambient_music_volume + 1) % 11 + (10 == e.ambient_music_volume), t.innerHTML = t.text(), r()
                }
            }), t.push({
                text: function() {
                    return "Current Playlist: " + e.ambient_music_playlist_name
                },
                action: function(r, t) {
                    var i = r.currentTarget;
                    t(), e.ambient_music.play_next_playlist(), i.innerHTML = i.text(), t()
                }
            })
        } {
            var e = i.gs;
            i.current_game
        }
        "undefined" == typeof i.menu_item_list && (i.menu_item_list = []);
        var t = i.menu_item_list;
        a();
        var r = new u(i),
            n = (r.settings_div_grid, e.set_audio_menu_title = function() {
                var t = e.ambient_music.playlist,
                    i = e.ambient_music.current_track_index;
                r.title_div.innerHTML = '"' + t[i].title + '", by ' + t[i].author
            });
        return n(), r.position_buttons(), r
    }

    function F(t) {
        var e = (t.parent, t.gs),
            s = t.current_game,
            o = t.menu_item_list;
        o.push({
            text: function() {
                return "Music " + (e.music_on ? "Enabled" : "Disabled")
            },
            action: function(i, r) {
                var t = i.currentTarget;
                e.music_on = !e.music_on, t.innerHTML = t.text(), r()
            }
        }), e.challenge_code_processed || o.push({
            text: "Challenge Code",
            action: function(t, i) {
                var r = t.currentTarget;
                c({
                    gs: e,
                    error: function() {
                        smoke.alert("You must log in to Google Play to use this feature!")
                    },
                    success: function() {
                        k({
                            gs: e,
                            callback: function() {
                                e.challenge_code_processed && (r.style.display = "none"), i()
                            }
                        })
                    }
                })
            }
        });
        var i = new u(t),
            n = i.settings_div_grid,
            r = document.createElement("div");
        if (r.innerHTML = "How to Play", r.addEventListener(e.events.POINT, function() {
                function s() {
                    r.back.style.visibility = 0 == n ? "hidden" : "visible", r.next.style.visibility = n == a.length - 1 ? "hidden" : "visible", o.text.innerHTML = a[n], o.text.classList.add("jt-common-instruction_text")
                }
                var a = t.mr_jigtato.game_data.jigsaw.instructions;
                i.style.display = "none";
                var n = 0,
                    o = smoke.alert("", function() {
                        i.style.display = ""
                    }),
                    r = o.buttons;
                r.back = o.buttons.ok.cloneNode(!0), r.back.style.cssFloat = "left", r.back.innerHTML = "< Back", r.appendChild(r.back), r.next = o.buttons.ok.cloneNode(!0), r.next.style.cssFloat = "right", r.next.innerHTML = "Next >", r.appendChild(r.next), r.back.addEventListener(e.events.POINT, function() {
                    n = (n + a.length - 1) % a.length, s(n)
                }), r.next.addEventListener(e.events.POINT, function() {
                    n = (n + a.length + 1) % a.length, s(n)
                }), s(n), l(o)
            }), !e.is_kiosk && e.use_social_media_buttons) {
            var a = document.createElement("div");
            a.innerHTML = (1 == t.social_media_hidden ? "Show" : "Hide") + " Social Buttons", n.insertBefore(r, i.back_button), a.addEventListener(e.events.POINT, function() {
                t.social_media_hidden = !t.social_media_hidden, s.social_sharing_button_container.style.display = t.social_media_hidden ? "none" : "", a.innerHTML = (1 == t.social_media_hidden ? "Show" : "Hide") + " Social Buttons"
            })
        }
        return n.insertBefore(r, n.childNodes[0]), i.position_buttons(), i
    }

    function X(e) {
        e.audio_list.forEach(function(t) {
            e.parent.playAudio(e.dir + t, {
                start: !1,
                volume: e.volume || 1,
                audio_type: e.type
            })
        })
    }

    function Y(e) {
        "undefined" == typeof e.callback && (e.callback = function() {});
        var t = smoke.confirm('<span style="color: #cc0000; font-weight: bold">Warning:</span> This will clear/reset all player data: progress, trophies, trophies, best times, etc. Continue?', function(t) {
            return 0 == t ? void e.callback() : (e.mr_jigtato.reset_player_data(), e.current_game && e.current_game.trophy_ribbon && e.current_game.trophy_ribbon.update(), e.select_screen && e.select_screen.refresh_puzzle_list(), void smoke.alert("All player data has been reset.", e.callback))
        });
        l(t)
    }

    function V(e) {
        function t() {
            e.mr_jigtato.gs.reset_default_settings(), smoke.alert("Settings have been reset to default.", i)
        }
        "undefined" == typeof e.callback && (e.callback = function() {});
        var i = e.callback;
        if ("undefined" != typeof e.current_game) {
            i = function() {
                e.mr_jigtato.gs.IS_WEBVIEW ? window.history.back() : e.mr_jigtato.history_control.load_page({
                    page: "select_jigsaw"
                }), e.callback()
            };
            var r = !1;
            r ? smoke.alert("Resetting will send you back to the puzzle selection screen.", t) : t()
        } else t()
    }

    function q(n) {
        function s() {
            e.back.style.visibility = 0 == r ? "hidden" : "visible", e.next.style.visibility = r == a.length - 1 ? "hidden" : "visible", o.text.innerHTML = a[r], o.text.parentNode.classList[1 == r ? "add" : "remove"]("jt-play-show_credits-dialog")
        }
        "undefined" == typeof n.callback && (n.callback = function() {});
        var t = n.gs,
            c = n.mr_jigtato.set_name,
            a = [];
        n.gs.is_kiosk || (t.contact_info = '<a href="mailto:' + t.contact_info + '">' + t.contact_info + "</a>"), a[0] = n.mr_jigtato.game_data.about_text + t.contact_info + ". </p>", n.callback, a[1] = "Loading...", i({
            success: function(e) {
                a[1] = e
            },
            error: function(e) {
                t.errormessage(e, n.callback)
            },
            file: t.get_set_directory(c) + "/" + c + "-credits.txt",
            charset: "utf-8",
            plaintext: !0,
            request_method: "GET",
            ignore_request_status: t.IS_WEBVIEW
        });
        var o = smoke.alert(n.mr_jigtato.game_data.about_text + t.contact_info + ". </p>", n.callback),
            e = o.buttons;
        e.back = o.buttons.ok.cloneNode(!0), e.back.style.cssFloat = "left", e.back.innerHTML = "< Back", e.appendChild(e.back), e.next = o.buttons.ok.cloneNode(!0), e.next.style.cssFloat = "right", e.next.innerHTML = "Next >", e.appendChild(e.next), e.back.addEventListener(t.events.POINT, function() {
            r = (r + a.length - 1) % a.length, s(r)
        }), e.next.addEventListener(t.events.POINT, function() {
            r = (r + a.length + 1) % a.length, s(r)
        });
        var r = 0;
        s(r), l(o), t.is_phone_or_tablet && (o.dialog.text.style.backgroundColor = "transparent")
    }

    function I(a) {
        function s(l) {
            var s = l.currentTarget,
                a = s.trophy_item,
                o = i.game_data.entry_list[s.level_id];
            t.innerHTML = "";
            var e = document.createElement("span");
            e.className = "jt-play-trophy_room-item_name", e.style.color = a.text_color, e.innerHTML = a.display_name.capitalizeFirstLetter(), t.appendChild(e), r.is_chromium || r.is_android ? (e.style.textShadow = "none", e.style.WebkitTextStrokeColor = a.text_outline_color, f({
                element: e,
                size: "3px",
                color: ""
            })) : w(e, a.text_outline_color || "black");
            var c = document.createTextNode(".. earned for completing the puzzle ");
            t.appendChild(c);
            var n = document.createElement("span");
            n.className = "jt-play-trophy_room-puzzle_name", n.style.color = o.title_color, n.innerHTML = '"' + o.name + '"', t.appendChild(n), r.is_chromium || r.is_android ? (n.style.textShadow = "none", n.style.WebkitTextStrokeColor = o.border_color, f({
                element: n,
                size: "3px",
                color: ""
            })) : w(n, o.border_color || "black");
            var h = document.createTextNode(' on difficulty level "' + i.game_data.jigsaw.difficulty_levels[s.trophy_index].name + '".');
            t.appendChild(h)
        }
        var r = a.gs;
        "undefined" == typeof a.callback && (a.callback = function() {});
        var d = smoke.alert("", a.callback);
        l(d);
        var e = d.childNodes[0].childNodes[0].childNodes[0],
            u = e.nextSibling;
        e.parentNode.classList.add("jt-play-trophy_room-dialog");
        var n = document.createElement("div");
        n.className = "smoke-dialog-text jt-play-trophy_room-title", e.parentNode.insertBefore(n, e);
        var c = document.createElement("div");
        c.className = "jt-play-trophy_room-title-image", n.appendChild(c);
        var o = document.createElement("div");
        o.className = "jt-play-trophy_room-title-text", o.innerHTML = "Trophy Room", n.appendChild(o);
        var h = document.createElement("div");
        h.className = "jt-play-trophy_room-title-image", n.appendChild(h), u.classList.add("jt-play-trophy_room-dialog-buttons"), n.appendChild(u);
        var t = document.createElement("div");
        t.className = "smoke-dialog-text jt-play-trophy_room-description", e.parentNode.insertBefore(t, e.nextSibling), t.innerHTML = "Touch, click, or hover over a trophy to see details!", e.classList.add("jt-play-trophy_room-container");
        var i = a.mr_jigtato,
            p = (i.game_data.jigsaw, i.player_data),
            _ = p.jigsaw.trophies,
            m = i.set_name;
        return _.forEach(function(o) {
            var n = o.split("|")[0],
                a = o.split("|")[1],
                l = i.get_trophy_item({
                    game_type: "jigsaw",
                    level_id: n,
                    difficulty_level: a
                }),
                t = v({
                    mr_jigtato: i,
                    gs: r,
                    set_name: m,
                    level_id: n,
                    difficulty_level: a,
                    trophy_class: "jt-play-main_image_border_width"
                });
            e.appendChild(t), t.trophy_item = l, t.level_id = n, t.trophy_index = a, t.addEventListener(r.events.POINT, s), t.addEventListener("mouseover", s)
        }), e
    }

    function K(e) {
        "undefined" == typeof e.callback && (e.callback = function() {});
        var t = smoke.alert("<p>If you liked this game, share it!</p>", e.callback).text;
        O({
            parent: t,
            button_class: "jt-social_button"
        })
    }

    function O(r) {
        var e = window.location.toString(),
            n = e.indexOf("//") + 1,
            n = e.indexOf("/", n + 1) + 1,
            e = e.substr(0, n),
            o = {},
            a = {
                twitter: '<a count="none" href="https://twitter.com/share" class="twitter-share-button" data-url="' + e + '" data-size="large" data-count="none"></a>',
                facebook: '<div style="left:0; top:0; width:20px; height:20px" class="fb-share-button" data-href="' + e + '" data-width="100" data-type="icon"></div>',
                googleplus: '<g:plusone count="false" style="width:80px; height: 80px" data-size="tall" expandTo="top" data-href="' + e + '"></g:plusone>'
            };
        for (var i in a) {
            var t = document.createElement("div");
            t.className = r.button_class + " jt-social_button-" + i, t.button_name = i, o[i] = t, t.innerHTML = a[i], r.parent.appendChild(t)
        }
        "undefined" != typeof twttr && twttr.widgets.load(), "undefined" != typeof FB && FB.XFBML.parse(document.getElementsByClassName("fb-share-button")[0].parentNode), "undefined" != typeof gapi && gapi.plusone.go()
    }

    function z(e) {
        e.requestFullscreen ? e.requestFullscreen() : e.msRequestFullscreen ? e.msRequestFullscreen() : e.mozRequestFullScreen ? e.mozRequestFullScreen() : e.webkitRequestFullscreen && e.webkitRequestFullscreen()
    }

    function Z() {
        var e = "true" == h().is_kiosk ? !0 : !1;
        e || void
        function(e, r) {
            var t, n = e.getElementsByTagName(r)[0],
                a = e.createDocumentFragment(),
                i = function(n, i) {
                    e.getElementById(i) || (t = e.createElement(r), t.src = n, i && (t.id = i), a.appendChild(t))
                };
            i("http://apis.google.com/js/plusone.js"), i("//platform.twitter.com/widgets.js"), i("//connect.facebook.net/en_US/all.js#xfbml=1&appId=1484397078438785"), n.parentNode.insertBefore(a, n)
        }(document, "script")
    }

    function v(t) {
        var r = t.gs,
            o = t.set_name,
            n = t.level_id,
            a = t.mr_jigtato,
            s = ("undefined" != typeof t.game_type ? t.game_type : "jigsaw", a.game_data.jigsaw),
            i = a.get_trophy_item({
                game_type: s,
                level_id: n,
                difficulty_level: t.difficulty_level
            }),
            e = document.createElement("img");
        e.className = t.trophy_class;
        var l = "undefined" != typeof t.parent ? t.parent : document.body;
        e.style.backgroundColor = i.background_color, "undefined" != typeof i.link && (e.style.cursor = "pointer", e.a = document.createElement("a"), e.a.target = "_blank", e.a.href = i.link, e.addEventListener(r.events.POINT, function() {
            e.a[r.events.POINT]()
        })), l.appendChild(e);
        var c = e.getBoundingClientRect().width;
        return "undefined" != typeof i.trophy_image_padding && (e.style.padding = parseFloat(i.trophy_image_padding) * c / 356 + "px"), "undefined" != typeof i.trophy_image_border_color && (e.style.borderColor = i.trophy_image_border_color), e.src = r.get_trophy_directory(o, n) + "/" + i.filename + ".png", e
    }

    function tt(a, o, i) {
        var e = i.init.parent;
        if ("undefined" == typeof e.audio_settings_menu || null == e.audio_settings_menu.parentNode) {
            var t = n(i.init);
            delete t.menu_item_list, e.audio_settings_menu = W({
                callback: function(e) {
                    e.style.display = "none", e.parent_menu.style.display = "", e.parent_menu.refresh()
                },
                parent: e,
                mr_jigtato: t.mr_jigtato,
                gs: t.gs,
                current_game: t.current_game,
                column_size: 2,
                title: "",
                column_width: "760px",
                init: t
            })
        }
        var r = e.audio_settings_menu;
        r.refresh(), i.style.display = "none", r.style.display = "", r.parent_menu = i
    }

    function it(a, o, i) {
        var t = i.init.parent;
        if ("undefined" == typeof t.visual_settings_menu || null == t.visual_settings_menu.parentNode) {
            var e = n(i.init);
            delete e.menu_item_list, t.visual_settings_menu = U({
                callback: function(e) {
                    e.style.display = "none", e.parent_menu.style.display = "", e.parent_menu.refresh()
                },
                parent: t,
                mr_jigtato: e.mr_jigtato,
                gs: e.gs,
                current_game: e.current_game,
                show_hint_image_options: e.show_hint_image_options,
                column_size: 2,
                init: e
            })
        }
        var r = t.visual_settings_menu;
        r.refresh(), i.style.display = "none", r.style.display = "", r.parent_menu = i
    }

    function rt(a, o, t) {
        var i = t.init.parent;
        if ("undefined" == typeof i.misc_config_menu || null == i.misc_config_menu.parentNode) {
            var e = n(t.init);
            delete e.menu_item_list, i.misc_config_menu = G({
                callback: function(e) {
                    e.style.display = "none", e.parent_menu.style.display = "", e.parent_menu.refresh()
                },
                mr_jigtato: e.mr_jigtato,
                gs: e.gs,
                current_game: e.current_game,
                column_size: 2,
                show_hint_image_options: e.show_hint_image_options,
                init: e
            })
        }
        var r = i.misc_config_menu;
        r.refresh(), t.style.display = "none", r.style.display = "", r.parent_menu = t
    }

    function D(p, h, t) {
        t.style.display = "none";
        var i = (t.init.current_game.main_image.base_image.src, smoke.alert("", function() {}));
        i.innerHTML = "";
        var d = t.init.mr_jigtato.gs,
            s = t.init.content_div,
            e = document.createElement("img"),
            o = t.init.current_game.main_image;
        e.style.position = "absolute", e.style.padding = 0, e.src = o.base_image.src, e.className = "smoke-dialog", i.appendChild(e);
        var u = o.width / o.height,
            a = 1e3 * u,
            n = 1e3,
            l = (parseFloat(window.getComputedStyle(s).width) - a) / 2,
            c = (parseFloat(window.getComputedStyle(s).height) - n) / 2,
            r = parseFloat(window.getComputedStyle(e).borderLeftWidth);
        e.style.cursor = "pointer", e.style.left = l - r + .1 * a + "px", e.style.top = c - r + .1 * n + "px", e.style.width = .8 * a + "px", e.style.height = .8 * n + "px", TweenMax.to(e, .5, {
            ease: Linear.easeIn,
            css: {
                left: l - r + "px",
                top: c - r + "px",
                width: a + "px",
                height: n + "px"
            }
        }), i.addEventListener(d.events.POINT, function() {
            i.parentNode.removeChild(i), t.style.display = "", h()
        })
    }

    function c(t) {
        var e = t.gs;
        if ("undefined" != typeof e.account.internal_access_token) return void t.success();
        if (e.IS_CORDOVA) var i = window.plugins.GooglePlayToken || window.plugins.GooglePlayServices;
        else var i = e.gps;
        i.initialize({
            error: t.error,
            success: function(i) {
                e.IS_CORDOVA ? (e.google_play_access_token = i, L(t)) : e.get_google_play_access_token({
                    callback: function() {
                        L(t)
                    }
                })
            }
        })
    }

    function L(t) {
        var e = t.gs;
        return "undefined" == typeof e.google_play_access_token ? void("undefined" != typeof t.error && t.error()) : void i({
            file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (e.DEBUG ? "-beta" : "") + ".php?action=login&access_token=" + e.google_play_access_token + "&service_name=" + e.service_name + "&device_model=" + device.model + "&device_uuid=" + device.uuid,
            error: t.error,
            request_method: "POST",
            async: !0,
            success: function(r) {
                if (null == r) return void t.error();
                if ("undefined" != typeof r.user_data) {
                    var i = r.user_data;
                    "undefined" != typeof i.game_was_rated && (e.account.game_was_rated = i.game_was_rated), "undefined" != typeof i.user_id && (e.account.user_id = i.user_id), "undefined" != typeof i.gem_amount && (e.account.gem_amount = i.gem_amount), "undefined" != typeof i.internal_access_token && (e.account.internal_access_token = i.internal_access_token), "undefined" != typeof i.email_address && (e.account.email_address = i.email_address), "undefined" != typeof i.users_to_puzzle_packs && (e.account.users_to_puzzle_packs = i.users_to_puzzle_packs), "undefined" != typeof i.has_premium && (e.account.IS_PREMIUM = 1 == i.has_premium), e.IS_CORDOVA && e.account.IS_PREMIUM && e.ad_control && (e.ad_control.destroy(), delete e.ad_control)
                }
                void
                function() {
                    function t() {
                        e.get_google_play_access_token(), setTimeout(t, i)
                    }
                    var i = 27e5;
                    setTimeout(t, i)
                }(), e.paid_puzzles = r.paid_puzzles, "undefined" != typeof r.message && (e.pending_message = r.message), t.success()
            }
        })
    }

    function st() {
        var e = window.plugins.pushNotification;
        "undefined" != typeof e && (document.addEventListener("push-notification", function(e) {
            e.notification.title, e.notification.userdata
        }), e.onDeviceReady({
            projectid: "694160809438",
            appid: "D2CCB-D24E6"
        }), e.registerDevice(function() {}, function() {}))
    }

    function lt() {
        setTimeout(function() {
            var e = document.createElement("input");
            e.setAttribute("type", "text"), e.setAttribute("style", "position:absolute; top: 0px; opacity: 0; -webkit-user-modify: read-write-plaintext-only; left:0px;"), document.body.appendChild(e), e.onfocus = function() {
                setTimeout(function() {
                    e.setAttribute("style", "display:none;"), setTimeout(function() {
                        document.body.removeChild(e), document.body.focus()
                    }, 14)
                }, 200)
            }, e.focus()
        }, 50)
    }

    function ct(V) {
        function Vt() {
            if ("undefined" == typeof a.account.internal_access_token) return void(e.log_query_processed = !0);
            var t = localStorage.app_version_date;
            i({
                file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (a.DEBUG ? "-beta" : "") + ".php?action=log_play_start&build_version=" + t + "&user_id=" + a.account.user_id + "&internal_access_token=" + a.account.internal_access_token + "&device_version=" + device.version + "&device_model=" + device.model + "&device_uuid=" + device.uuid + "&device_version=" + device.version + "&screen_name=jigsaw&puzzle_name=" + E + "&difficulty_level=" + e.difficulty_level,
                success: function(t) {
                    null != e && (e.log_query_processed = !0, null != t && "undefined" != typeof t.message && null != t.message && "" != t.message && ("undefined" != typeof t.gem_amount && (a.account.gem_amount = t.gem_amount), "undefined" != typeof t.message && (e.pending_message = t.message, e.pending_message_audio_pre = t.message_audio_pre, e.pending_message_audio_post = t.message_audio_post, e.pending_message_ok_text = t.message_ok_text)))
                },
                error: function() {
                    e.log_query_processed = !0
                },
                request_method: "POST",
                async: !0
            })
        }

        function pt() {
            e.force_screen_refresh += 1
        }

        function Ct() {
            e.force_screen_refresh -= 1
        }

        function li() {
            e.do_screen_refresh_run = !0, e.show_pieces_deferred = window.requestAnimationFrame(it)
        }

        function si() {
            e.do_screen_refresh_run = !1, window.cancelAnimationFrame(e.show_pieces_deferred)
        }

        function it(g, d) {
            function l() {
                d || (e.show_pieces_deferred = window.requestAnimationFrame(it))
            }
            if (e.do_screen_refresh_run) {
                if (!e.do_screen_refresh && (e.force_screen_refresh <= 0 || !t.background_image_drawn)) return void l();
                if (t.first_render_complete && document.body.appendChild(t), t.first_render_complete = !0, e.do_screen_refresh = !1, void
                    function() {
                        if (t.cached_width || t.cached_height) {
                            if (t.cached_width) {
                                var e = t.cached_width;
                                delete t.cached_width
                            } else var e = t.width;
                            if (t.cached_height) {
                                var i = t.cached_height;
                                delete t.cached_height
                            } else var i = t.height;
                            t.renderer.resize(e, i)
                        }
                    }(), t.cached_width) {
                    var m = t.cached_width;
                    delete t.cached_width
                } else var m = t.width;
                if (t.cached_height) {
                    var p = t.cached_height;
                    delete t.cached_height
                } else var p = t.height;
                if (!t.background_image_drawn && !D.initial_background_is_transparent) {
                    var i = t.getContext("2d");
                    if (i) i.fillStyle = "rgba(255,255,255,255)", i.fillRect(0, 0, m, p);
                    else {
                        var i = t.getContext("webgl");
                        if (null == i) var i = t.getContext("experimental-webgl");
                        i.clearColor(1, 1, 1, 1), i.clear(i.COLOR_BUFFER_BIT)
                    }
                }
                var i = t.stage;
                t.load_opacity_transition < 1 ? (t.load_opacity_transition += .1, e.do_screen_refresh = !0, t.load_opacity_transition > 1 && (t.load_opacity_transition = 1)) : t.initial_alpha_sequence_complete = !0;
                var n = e.zoom.scale,
                    c = e.zoom.offset_x,
                    u = e.zoom.offset_y;
                i.x = c, i.y = u, n && (i.scale.x = n, i.scale.y = n), i.alpha = 1;
                var s = e.piece_margin,
                    o = 2 * e.piece_margin;
                if (t.piece_container && (0 == !!t.piece_sprite_container.is_cached || 1 == !!t.refresh_piece_styling)) {
                    t.piece_sprite_container.is_cached = !0, t.refresh_piece_styling = !1; {
                        var _ = -c / n,
                            f = -u / n;
                        _ + t.width / n, f + t.height / n
                    }
                    t.piece_container.children.forEach(function(e) {
                        e.sprite.x = Math.round(e.left - s), e.sprite.y = Math.round(e.top - s), e.sprite.width = Math.round(e.calc_width + o), e.sprite.height = Math.round(e.calc_height + o)
                    }), D.cache_jigsaw_pieces_into_giant_texture && (t.piece_sprite_container.renderer = t.renderer, t.initial_alpha_sequence_complete && (t.piece_sprite_container.do_cacheAsBitmap ? (t.piece_sprite_container._destroyCachedSprite(), t.piece_sprite_container._generateCachedSprite(1 / e.piece_logical_scale)) : (t.piece_sprite_container._bounds.x = 0, t.piece_sprite_container._bounds.y = 0, t.piece_sprite_container._bounds.width = t.renderer.width / e.piece_logical_scale, t.piece_sprite_container._bounds.height = t.renderer.height / e.piece_logical_scale, t.piece_sprite_container.do_cacheAsBitmap = !0, t.piece_sprite_container._generateCachedSprite(1 / e.piece_logical_scale))))
                }
                if (null != h && "visible" == h.visibility) {
                    var a = h.sprite;
                    a.x = Math.round(h.left - s), a.y = Math.round(h.top - s), a.width = Math.round(h.calc_width + o), a.height = Math.round(h.calc_height + o)
                }
                if (t.loading_animation.display) {
                    var r = t.loading_animation;
                    "undefined" == typeof r.rotation_base1 && (r.rotation_base1 = 0), r.rotation_base1 = (r.rotation_base1 + .0025) % 1, r.outer.sprite.rotation = -r.rotation_base1 * Math.PI * 2, r.stage.alpha < 1 && (r.stage.alpha = r.stage.alpha + .01)
                }
                t.renderer.render(t.real_stage), l()
            }
        }

        function Pt(e) {
            return "undefined" == typeof e && (e = {}), A.stop(), 4 == c.container.childNodes.length ? void smoke.alert("No more than 4 categories can be used at one time.", function() {
                A.resume()
            }) : void smoke.prompt("Please enter the name of the new category.", function(t) {
                if ("" === t) return void smoke.alert("You can't set a blank name!", function() {
                    A.resume()
                });
                if (A.resume(), "undefined" == typeof e.complete && (e.complete = function() {}), t === !1) return void("undefined" != typeof e.error && (e.complete(), e.error()));
                var i = c.add_category(t);
                "undefined" != typeof e.success && (e.complete(), e.success(i)), W()
            })
        }

        function Ft() {
            var s = !a.jigsaw_minimal_ui && a.show_trophy_ribbon ? o(yt) : 0,
                l = o(d);
            if ("undefined" != typeof e.area) {
                {
                    "undefined" != typeof e.area[0].margin_top ? e.area[0].margin_top : 0
                }
                if (e.jigsaw_arrange_pieces_on_entire_area) {
                    var i = parseFloat(window.getComputedStyle(g).width) / 2;
                    e.area[0].width = e.area[1].width = i, e.area[0].left = 0, e.area[1].left = i
                } else {
                    var i = (parseFloat(window.getComputedStyle(g).width) - x.width) / 2;
                    e.area[0].width = e.area[1].width = i, e.area[0].left = 0, e.area[1].left = i + x.width
                }
            }
            var n = s + (a.jigsaw_minimal_ui ? 0 : o(p)),
                h = a.jigsaw_minimal_ui || null == Y.parentNode ? 0 : o(Y);
            if (d.style.height = "", a.jigsaw_minimal_ui) {
                e.area && e.area.forEach(function(e) {
                    e.margin_top = 128
                });
                var r = o(d.parentNode)
            } else {
                e.area && e.area.forEach(function(e) {
                    e.margin_top = 0
                });
                var r = o(d.parentNode) - n - h
            }
            d.style.top = n + "px", d.style.height = r + "px", Y.style.top = parseFloat(d.style.top) + parseFloat(d.style.height) + "px", t.reposition_and_resize(), k(), "undefined" != typeof x && x.naturalHeight && (e.area && e.area.forEach(function(e) {
                e.height = r * e.height_ratio
            }), u.top = (r - x.height + (x.height - x.height)) / 2), $(), c.container.children.forEach(function(t) {
                t.piece_container.children.forEach(function(t) {
                    e.area[t.area];
                    t.top = t.top * (r / l)
                }), y.size_pieces(t.piece_container.children)
            })
        }

        function $() {
            if (!t.bg.image.complete) return void t.setTimeout($, 50);
            if (0 == !!t.bg.refresh_bg && (t.bg.refresh_bg = !0, t.bg.width = "undefined" != typeof t.cached_width ? t.cached_width : t.width, t.bg.height = "undefined" != typeof t.cached_height ? t.cached_height : t.height, t.bg.getContext("2d").drawImage(t.bg.image, 0, 0, t.bg.image.naturalWidth, t.bg.image.naturalHeight, 0, 0, t.bg.width, t.bg.height), G({
                    parent: t.stage,
                    logical_parent: t.bg,
                    canvas: t.bg,
                    position: 0
                }), k()), t.background_image_drawn = !0, "undefined" == typeof u) return void t.setTimeout($, 50);
            if ("undefined" == typeof u.left) return void t.setTimeout($, 50);
            if (!u.base_image.complete) return void t.setTimeout($, 50);
            t.bg.refresh_bg = !0;
            var i = t.bg.getContext("2d");
            t.bg.width = "undefined" != typeof t.cached_width ? t.cached_width : t.width, t.bg.height = "undefined" != typeof t.cached_height ? t.cached_height : t.height, i.drawImage(t.bg.image, 0, 0, t.bg.image.naturalWidth, t.bg.image.naturalHeight, 0, 0, t.bg.width, t.bg.height);
            var n = u.left,
                a = u.top,
                o = u.width,
                s = u.height,
                r = (e.piece_margin, u.base_image);
            (1 == r.style.opacity || e.jigsaw_show_hint_rect) && (1 == r.style.opacity || e.jigsaw_show_hint_image ? (i.globalAlpha = r.style.opacity, i.drawImage(r, n, a, o, s), i.globalAlpha = 1) : (i.fillStyle = "white", i.fillRect(n, a, o, s))), G({
                parent: t.stage,
                logical_parent: t.bg,
                canvas: t.bg,
                position: 0
            })
        }

        function oi() {
            var e = u.base_image;
            e.style.zIndex = 1, e.style.position = "absolute", e.style.left = 0, e.style.top = 0, e.style.opacity = .2
        }

        function ai(e) {
            var e = e || {},
                o = "undefined" != typeof e.jigsaw_minimal_ui ? e.jigsaw_minimal_ui : a.jigsaw_minimal_ui,
                s = "undefined" != typeof e.jigsaw_use_large_square_images ? e.jigsaw_use_large_square_images : a.jigsaw_use_large_square_images,
                n = "undefined" != typeof e.jigsaw_image_size_type ? e.jigsaw_image_size_type : a.jigsaw_image_size_type,
                t = e.base_image || x,
                i = {};
            if (n > 0 && o) {
                if (1 == n) var r = 1e3;
                if (2 == n) var r = 1080
            } else var r = 880;
            return i.width = Math.round(r / 1.33333), t.naturalHeight == t.naturalWidth ? s && (i.width = r, i.height = r) : t.naturalHeight < t.naturalWidth && (i.width = n > 0 && o ? r * t.naturalWidth / t.naturalHeight : r), i.height = parseFloat(i.width * t.naturalHeight / t.naturalWidth), i
        }

        function Gt() {
            function r() {
                return 0 == !!t.first_render_complete || a.ad_control && !a.ad_control.ignore && a.ad_control.running || 0 == !!e.log_query_processed ? void d.inner.setTimeout(r, 50) : void ni()
            }
            e.jigsaw_initial_show_hint_image = a.jigsaw_show_hint_image, e.jigsaw_show_hint_rect = a.jigsaw_show_hint_rect, e.jigsaw_show_hint_image = a.jigsaw_show_hint_image, e.piece_margin = a.jigsaw_get_scaled_piece_margin(e), e.piece_margin_style = a.jigsaw_piece_margin_style, d.inner.appendChild(S);
            var i = u.composite_image = document.createElement("canvas");
            if (i.set_size = function() {
                    i.width = (x.width + 2 * e.piece_margin) / e.piece_logical_scale, i.height = (x.height + 2 * e.piece_margin) / e.piece_logical_scale, i.cached_sprite_data = {
                        width: u.width + 2 * e.piece_margin,
                        height: u.height + 2 * e.piece_margin,
                        x: u.left - e.piece_margin,
                        y: u.top - e.piece_margin
                    }
                }, oi(), "undefined" == typeof localStorage["puzzle_states." + Q + "." + E + "." + B.selected_difficulty]) {
                _t();
                var n = Math.round(1e6 * Math.random());
                Math.seedrandom(n), c.add_category("General"), Jt({
                    source_image: x,
                    width: x.width,
                    height: x.height,
                    size_x: e.tile_x,
                    size_y: e.tile_y,
                    draw_settings: D,
                    callback: function(t) {
                        z = t, ri(z, c.current_category.piece_container), L = Array.prototype.slice.call(c.current_category.piece_container.children), gt(L), rt(c.current_category.piece_container), e.pieces_in_position_count = 0, r()
                    }
                })
            } else Ut({
                callback: r
            })
        }

        function ni() {
            function r() {
                a.jigsaw_minimal_ui ? p.show_title_animation({
                    callback: A.resume
                }) : p.setTimeout(function() {
                    p.autoshow_title({
                        callback: A.resume
                    })
                }, 1e3), y.event_listeners_loaded || (y.event_listeners_loaded = !0, S.addEventListener(a.events.POINT_START, Kt), document.addEventListener(a.events.POINT_MOVE, Bt), a.is_phone_or_tablet ? (R({
                    target: d.inner,
                    result_function: Lt,
                    start_effect: function() {
                        S.drag_active = !1, S.pinch_active = !0
                    },
                    end_effect: function() {
                        S.pinch_active = !1
                    }
                }), S.addEventListener("touchend", q), S.addEventListener("touchcancel", q), S.addEventListener("touchleave", q), g.addEventListener("touchend", q)) : (document.addEventListener("mouseup", q), window.addEventListener("blur", st), window.addEventListener("mouseout", jt), d.inner.addEventListener("mousewheel", Mt), d.inner.addEventListener("DOMMouseScroll", Mt))), p.setTimeout(function() {
                    "undefined" != typeof a.ambient_music.last_on_state && (1 == a.ambient_music.last_on_state && (a.ambient_music_on = !0), delete a.ambient_music.last_on_state), w.play_intro_audio({
                        level_id: V.level_id,
                        parent: d.inner
                    })
                }, 400)
            }
            if (t.loading_animation.stop(), "undefined" == typeof e.pending_message) r();
            else {
                var i = smoke.alert(e.pending_message, function() {
                    e.pending_message_audio_post && (a.playAudio(a.audio_dir + "/" + e.pending_message_audio_post + ".ogg", {
                        audio_type: "sound_effect",
                        blocking: !1
                    }), delete e.pending_message_audio_post), delete e.pending_message, r()
                });
                e.pending_message_audio_pre && (a.playAudio(a.audio_dir + "/" + e.pending_message_audio_pre + ".ogg", {
                    audio_type: "sound_effect",
                    blocking: !1
                }), delete e.pending_message_audio_pre), "undefined" != typeof e.pending_ok_text && (i.dialog.input.ok.innerHTML = e.pending_ok_text, delete e.pending_ok_text), i.dialog.text.style.textIndent = "1em", i.dialog.text.style.textAlign = "left"
            }
        }

        function ri(l, c) {
            for (var n = [], r = e.tile_x * e.tile_y, i = new Array(r), t = 0; r > t; t++) i[t] = t;
            for (var t = 0; r > t; t++) {
                var s = Math.randInt(0, r - 1),
                    h = i[s];
                i[s] = i[t], i[t] = h
            }
            for (var t = 0, a = 0; a < e.tile_x; a++)
                for (var o = 0; o < e.tile_y; o++) n[i[t]] = l[a][o], t += 1;
            return n.forEach(function(e) {
                c.appendChild(e)
            }), n
        }

        function rt(h, o) {
            k();
            var s = "undefined" != typeof o;
            "undefined" == typeof h && (h = c.current_category.piece_container), "undefined" == typeof o && (o = h.children);
            var o = Array.prototype.slice.call(o);
            1 != s && (h.piece_matrix = []);
            var l = h.piece_matrix;
            if (0 != o.length)
                for (var u = 0, i = 0, g = e.area.length; g > i; i++) {
                    var n = e.area[i],
                        d = n.piece_row_max,
                        p = n.piece_column_max,
                        _ = n.width / p;
                    if (B.selected_difficulty <= 1) var f = 0,
                        m = n.height / d;
                    else var f = n.margin_top,
                        m = (n.height - 2 * f) / d;
                    1 != s && (l[i] = []);
                    for (var r = 0; d > r; r++) {
                        1 != s && (l[i][r] = []);
                        for (var a = 0; p > a; a++) {
                            var t = l[i][r][a] = o[u];
                            if ((1 == s || "undefined" != typeof l[i][r][a]) && !(1 == s && "undefined" != typeof l[i][r][a] || t.puzzle_width.length > 1 || (t.area = i, t.row = r, t.column = a, t.left = _ / 2 + a * _ + n.left - t.calc_width / 2, t.top = f + m / 2 + r * m + n.top - t.calc_height / 2, t.piece_matrix = l, u += 1, 1 != s || o.length != u))) return
                        }
                    }
                }
        }

        function ii() {
            var e = document.createElement("div");
            return e.className = "jt-play-trophy_ribbon", e.addEventListener(a.events.POINT, function() {
                I({
                    mr_jigtato: w,
                    gs: a,
                    callback: function() {}
                })
            }), e.update = function() {
                e.innerHTML = "";
                var i = B.jigsaw.trophies,
                    h = w.set_name,
                    r = 37,
                    o = i.length <= r ? i.length : r;
                o == r && e.classList.add("jt-play-trophy_ribbon-max_trophies");
                for (var n = 0; o > n; n++) {
                    var s = i[n],
                        l = s.split("|")[0],
                        u = s.split("|")[1],
                        c = w.get_trophy_item({
                            game_type: a.game_type,
                            level_id: l,
                            difficulty_level: u
                        }),
                        t = document.createElement("img");
                    t.className = "jt-play-main_image_border_width", t.src = a.get_trophy_directory(h, l) + "/" + c.filename + ".png", t.style.backgroundColor = c.background_color, e.appendChild(t)
                }
            }, e.update(), g.appendChild(e), e
        }

        function ti() {
            if (nt.reward_container) var t = nt.reward_container;
            else var t = E;
            var i = t + "|" + e.difficulty_level,
                r = w.get_trophy_item({
                    game_type: a.game_type,
                    level_id: t,
                    difficulty_level: e.difficulty_level
                }),
                n = B.jigsaw.trophies;
            return -1 != n.indexOf(i) ? {
                trophy_item: r,
                trophy_already_exists: !0
            } : (n.push(i), {
                trophy_item: r,
                trophy_already_exists: !1
            })
        }

        function ci(l) {
            var r = B.jigsaw.best_times[+e.jigsaw_initial_show_hint_image];
            "undefined" == typeof r[E] && (r[E] = {});
            var t = r[E][e.difficulty_level];
            "undefined" == typeof t && (t = 86400), t > l && (t = r[E][e.difficulty_level] = l);
            for (var n = tt.difficulty_levels[e.difficulty_level][e.jigsaw_initial_show_hint_image ? "point_cutoffs_visible" : "point_cutoffs_hidden"], a = n.length; a >= 0; a--) {
                var c = Math.round(n[a] * e.get_piece_count());
                if (c >= l) break
            }
            var i = a + 1,
                h = i == n.length ? -1 : Math.round(n[i] * e.get_piece_count()),
                o = B.jigsaw.ranks;
            "undefined" == typeof o[E] && (o[E] = {});
            var s = o[E][e.difficulty_level];
            return "undefined" == typeof s && (s = -1), i > s && (s = o[E][e.difficulty_level] = i), {
                best_time: t,
                rank_count: i,
                next_rank_point: h
            }
        }

        function zt() {
            return e.pieces_in_position_count == e.tile_x * e.tile_y
        }

        function Zt() {
            A.style.visibility = "hidden", A.counter = 0, e.zoom = {
                scale: 1,
                offset_x: 0,
                offset_y: 0
            }, Gt()
        }

        function $t(i) {
            var i = i || {};
            a.playAudio(a.audio_dir + "/answer-give up.ogg", {
                audio_type: "sound_effect",
                blocking: !1
            }), c.select_category(c.original_category), Array.prototype.slice.call(c.container.childNodes).forEach(function(e) {
                e != c.container.childNodes[0] && c.remove_category(e)
            }), e.zoom = {
                scale: 1,
                offset_x: 0,
                offset_y: 0
            }, t.piece_container = u;
            var r = (e.piece_margin, c.current_category.piece_container.children);
            r.forEach(function(e) {
                u.appendChild(e), e.left = Math.randInt(0, u.base_image.width) - e.width_float + u.left, e.top = Math.randInt(0, u.base_image.height) - e.height_float + u.top;
                var t = e.puzzle_left_min + u.left,
                    i = e.puzzle_top_min + u.top;
                e.calc_width = e.width_float, e.calc_height = e.height_float, TweenMax.to(e, .8, {
                    parseTransform: !0,
                    ease: Linear.ease,
                    left: t,
                    top: i,
                    width: e.calc_width,
                    height: e.calc_height
                })
            }), pt(), d.inner.setTimeout(Ct, 800), d.inner.setTimeout(function() {
                Wt({
                    callback: i.callback
                })
            }, 1e3), d.inner.setTimeout(function() {
                ot({
                    user_gave_up: !0
                }), 850
            })
        }

        function ot(o) {
            function h() {
                Wt({
                    hide_controls: !0
                }), y()
            }

            function y() {
                yt.update();
                var t = smoke.alert("", p);
                l(t);
                var o = t.dialog.text;
                o.classList.add("jt-play-trophy_reward-parent");
                var s = document.createElement("p");
                s.className = "jt-play-trophy_reward-text", s.innerHTML = _ ? "This level gave you the following trophy:" : "You've acquired a trophy on this level and difficulty:", o.appendChild(s);
                var r = document.createElement("p");
                r.className = "jt-play-trophy_reward-trophy_name", r.style.color = "undefined" != typeof i.text_color ? i.text_color : i.background_color, o.appendChild(r);
                var u = i.display_name.substr(i.display_name.length - 1);
                if (r.innerHTML = i.display_name.capitalizeFirstLetter() + ("!" == u || "." == u ? "" : "."), "undefined" != typeof i.text_outline_color) {
                    var n = i.text_outline_color;
                    a.is_chromium || a.is_android ? (r.style.textShadow = "none", r.style.WebkitTextStrokeColor = n, f({
                        element: r,
                        size: "4px",
                        color: ""
                    })) : r.style.textShadow = "4px 4px " + n + ", 4px 0 " + n + ", 0 4px " + n + ", -4px 0 " + n + ", 0 -4px " + n + ", -4px 4px " + n + ", 4px -4px " + n + ", -4px -4px " + n
                }
                if ("undefined" != typeof i.subtitle) {
                    var c = document.createElement("div");
                    c.className = "jt-play-trophy_reward-text", c.innerHTML = i.subtitle, o.appendChild(c)
                }
                var m = "jt-play-main_image_border_width jt-play-trophy_reward-trophy_image",
                    g = a.is_phone_or_tablet ? "" : "jt-play-trophy_reward-trophy_image-expanded",
                    h = v({
                        mr_jigtato: w,
                        gs: a,
                        set_name: K,
                        level_id: E,
                        difficulty_level: e.difficulty_level,
                        trophy_class: m + " " + g
                    });
                o.appendChild(h), t.text.appendChild(t.buttons), s.style.opacity = r.style.opacity = c.style.opacity = t.buttons.ok.style.opacity = 0, t.text.style.maxHeight = "100%", t.text.style.marginBottom = 0, t.text.style.height = "862px", t.buttons.style.marginTop = "426px", t.buttons.style.visibility = "hidden", h.style.visibility = "hidden", h.style.opacity = 0, TweenMax.to(s, .5, {
                    delay: 0,
                    parseTransform: !0,
                    ease: Linear.ease,
                    opacity: 1
                }), d.inner.setTimeout(function() {
                    h.style.visibility = "visible"
                }, 600), TweenMax.to(h, .8, {
                    delay: .6,
                    parseTransform: !0,
                    ease: Linear.ease,
                    opacity: 1,
                    className: m
                }), TweenMax.to(r, 1.1, {
                    delay: .5,
                    parseTransform: !0,
                    ease: Cubic.easeIn,
                    opacity: 1
                }), TweenMax.to(c, .8, {
                    delay: 1.8,
                    parseTransform: !0,
                    ease: Cubic.easeIn,
                    opacity: 1
                }), d.inner.setTimeout(function() {
                    t.buttons.style.visibility = "visible"
                }, 2e3), TweenMax.to(t.buttons.ok, .2, {
                    delay: 2.7,
                    parseTransform: !0,
                    ease: Cubic.easeIn,
                    opacity: 1
                })
            }

            function p() {
                var e = tt.rank[tt.difficulty_levels[B.selected_difficulty].name];
                a.playAudio(a.get_set_directory(K) + "/audio/" + e.rank_audio[r] + ".m4a", {
                    audio_type: "music",
                    element: d.inner,
                    restart: !0
                });
                var o = smoke.alert("");
                l(o), o.dialog.buttons.ok.addEventListener(a.events.POINT, function() {
                    t.fireworks = new ht({
                        gs: a,
                        draw_area: t
                    })
                });
                var i = o.dialog.text;
                i.classList.add("jt-play-show_rank-parent");
                var u = 1 == r ? e.name : e.plural;
                i.innerHTML = '<p> You completed the puzzle in <span class="jt-play-show_rank-text-bright">' + A.counter + '</span> seconds.</p><p> Your personal best is <span class="jt-play-show_rank-text-bright">' + m + "</span> seconds.</p>", i.innerHTML += 0 == r ? '<p> No <span class="jt-play-show_rank-text-bright">' + u + "</span> won this round!</p>" : '<p> Your reward: <span class="jt-play-show_rank-text-bright">' + b[r] + "</span> " + u + ".</p>";
                var s = document.createElement("div");
                s.className = "jt-play-show_rank-image-container";
                for (var h = 0; r > h; h++) {
                    var n = document.createElement("div");
                    n.className = "jt-play-show_rank-image-item", s.appendChild(n), n.style.opacity = .01, n.style.backgroundImage = 'url("' + a.get_set_directory(K) + "/gui/" + e.filename + '")', void
                    function(t, i) {
                        d.inner.setTimeout(function() {
                            TweenMax.to(t, 2, {
                                parseTransform: !0,
                                ease: Linear.ease,
                                css: {
                                    opacity: 1
                                }
                            }), d.inner.setTimeout(function() {
                                t.addEventListener(a.events.POINT, function() {
                                    "undefined" != typeof e.click_audio && a.playAudio(a.get_set_directory(K) + "/audio/" + e.click_audio + ".ogg", {
                                        element: d.inner,
                                        audio_type: "music"
                                    })
                                })
                            }, 2e3)
                        }, i)
                    }(n, 500 * h)
                }
                if (i.appendChild(s), 0 == r) var _ = 'Complete the puzzle in <span class="jt-play-show_rank-text-bright">' + c + "</span> seconds or less to gain a " + e.name + "!";
                else if (-1 != c) var _ = 'Complete the puzzle in <span class="jt-play-show_rank-text-bright">' + c + "</span> seconds or less to gain more " + e.plural + "!";
                else var _ = "You've achieved the highest rank for this puzzle and level!";
                var p = document.createElement("p");
                p.innerHTML = _, i.appendChild(p)
            }
            var o = o || {};
            localStorage.removeItem("puzzle_states." + Q + "." + E + "." + B.selected_difficulty);
            var s = o.user_gave_up || !1;
            a.ambient_music.last_on_state = a.ambient_music_on, a.ambient_music_on = !1;
            var u = mt[Math.floor(Math.random() * mt.length)];
            if (0 == s) {
                a.playAudio(a.audio_dir + "/" + u, {
                    audio_type: "sound_effect",
                    blocking: !1
                })
            }
            if (A.stop(), g.style.overflow = "hidden", e.zoom = {
                    scale: 1,
                    offset_x: 0,
                    offset_y: 0
                }, 1 != s) {
                var n = ti(),
                    i = n.trophy_item,
                    _ = n.trophy_already_exists,
                    n = ci(A.counter),
                    m = n.best_time,
                    r = n.rank_count,
                    c = n.next_rank_point,
                    b = ["zero", "one", "two", "three"];
                localStorage.player_data = JSON.stringify(B), 0 == s ? d.inner.setTimeout(h, o.show_trophy_delay || 550) : d.inner.setTimeout(h, o.show_trophy_delay || 550)
            }
        }

        function Wt(e) {
            var e = e || {};
            if (k(), u.children.forEach(function(e) {
                    e.side_set && (u.removeChild(e), P(e))
                }), c.container.children.forEach(function(e) {
                    c.remove_category(e)
                }), u.base_image.style.opacity = 1, P(u.composite_image), $(), e.hide_controls) {
                var t = a.use_categories;
                a.use_categories = !1, p.autoshow_title(), a.use_categories = t, Ot.morph_to_back_button()
            }
            e.callback && e.callback()
        }

        function Et(t, r) {
            c.item_under_mouse = null;
            var n = s(r, d.inner),
                l = n[0],
                h = n[1];
            t.left = (l / g.desired_scale - e.zoom.offset_x) / e.zoom.scale + (a.jigsaw_center_piece_on_move ? -t.calc_width / 2 : -t.initial_offset_left - t.calc_width / 2), t.top = (h / g.desired_scale - e.zoom.offset_y) / e.zoom.scale + (a.jigsaw_center_piece_on_move ? -t.calc_height / 2 : -t.initial_offset_top - t.calc_height / 2), k();
            var i = document.elementFromPoint(r.clientX, r.clientY);
            null != i && (i.is_category_deck_item && (c.item_under_mouse = i), i.parentNode.is_category_deck_item && (c.item_under_mouse = i.parentNode));
            var o = a.jigsaw_heat_seeking_color_options[a.jigsaw_heat_seeking_color_index];
            "undefined" != typeof o && At(o)
        }

        function At(i, n) {
            if (null != h && (!n || h.last_border_color_x != h.left || h.last_border_color_y != h.top) && (h.last_border_color_x = h.left, h.last_border_color_y = h.top, d.inner.setTimeout(function() {
                    At(i, n)
                }, 500), h.border_adjust_count = "undefined" == typeof h.border_adjust_count ? 0 : h.border_adjust_count + 1, 10 == h.border_adjust_count && (h.border_adjust_count = 0), 0 == h.border_adjust_count)) {
                h.border_adjust_count = 0;
                var o = h.left - u.left,
                    s = h.top - u.top,
                    e = Math.abs(o - h.puzzle_left_min) / t.width + Math.abs(s - h.puzzle_top_min) / t.height;
                e > 1 && (e = 1), e = Math.pow(e, .5);
                var r = parseInt(255 * e),
                    a = parseInt(127 * e);
                if ("red" == i) var l = "rgba(" + (255 - r) + ", 0," + a + ", 1)";
                if ("cyan" == i) {
                    b = 255 - r + a, b > 255 && (b = 255);
                    var l = "rgba(0, " + (255 - r) + "," + b + ", 1)"
                }
                ct(h.canvas, l), Rt(h)
            }
        }

        function Mt(e) {
            function r(i) {
                var t = i.wheelDelta,
                    e = i.detail;
                return e ? t ? t / e / 40 * e > 0 ? 1 : -1 : -e / 3 : t / 120
            }
            e.preventDefault();
            var t = s(e, d),
                n = t[0],
                a = t[1],
                i = 1 + Math.abs(r(e)) / 4.5,
                o = wt(e) > 0 ? i : 1 / i;
            Lt(o, n, a)
        }

        function Lt(n, i, r) {
            var a = e.zoom.scale;
            i /= g.content_scale, r /= g.content_scale;
            var t = a * n;
            n > 1 ? t > e.zoom.scalemax && (t = e.zoom.scalemax) : t < e.zoom.scalemin && (t = e.zoom.scalemin);
            var o = (e.zoom.offset_x - i) * (t / e.zoom.scale) + i,
                s = (e.zoom.offset_y - r) * (t / e.zoom.scale) + r;
            e.zoom.scale = t, e.zoom.offset_x = o, e.zoom.offset_y = s
        }

        function Kt(n) {
            if (null == h) {
                var r = n.target;
                if (n.preventDefault(), "undefined" != typeof n.targetTouches) {
                    if (n.touches.length > 1) return;
                    n = n.targetTouches[0]
                }
                if (!N(n)) {
                    var u = s(n, d.inner),
                        _ = (u[0] / g.desired_scale - e.zoom.offset_x) / e.zoom.scale,
                        p = (u[1] / g.desired_scale - e.zoom.offset_y) / e.zoom.scale,
                        l = [],
                        v = c.current_category;
                    if (v)
                        for (var f = v.piece_container, o = 0, m = f.children.length; m > o; o++) {
                            var i = f.children[o];
                            if (!i.placed && !(_ < i.left || p < i.top || _ > i.left + i.calc_width || p > i.top + i.calc_height)) {
                                var x = ((_ - i.left) / a.jigsaw_piece_scale_to_actual + e.piece_margin) / e.piece_logical_scale,
                                    w = ((p - i.top) / a.jigsaw_piece_scale_to_actual + e.piece_margin) / e.piece_logical_scale,
                                    T = i.dummy_canvas.getContext("2d").isPointInPath(i.path, x, w);
                                T && l.push(i)
                            }
                        }
                    if (0 == l.length) return void(r == S && S.drag_start(n));
                    for (var r = l[0], y = +l[0].sprite.index, o = 1, m = l.length; m > o; o++) {
                        var i = l[o]; + i.zIndex <= y || (y = +i.zIndex, r = i)
                    }
                    k(), a.playAudio(a.audio_dir + "/global-pick up.ogg", {
                        audio_type: "sound_effect",
                        blocking: !1
                    });
                    var b = c.basket_button;
                    if (b.is_selected) return void b.toggle_piece(r);
                    if (P(r), G({
                            logical_parent: r,
                            canvas: r.canvas,
                            is_2d: !0
                        }), h = r, h.calc_width = h.width_float, h.calc_height = h.height_float, t.piece_sprite_container.removeChild(r.sprite), t.stage.addChild(r.sprite), 0 == a.jigsaw_center_piece_on_move) {
                        var u = s(n, d.inner),
                            _ = u[0],
                            p = u[1];
                        h.initial_offset_left = (_ / g.desired_scale - e.zoom.offset_x) / e.zoom.scale - r.virtual_left, h.initial_offset_top = (p / g.desired_scale - e.zoom.offset_y) / e.zoom.scale - r.virtual_top
                    }
                    document.body.style.cursor = "pointer", r.visibility = "hidden", h.visibility = "visible", Et(h, n)
                }
            }
        }

        function jt(e) {
            "undefined" != typeof e.changedTouches && (e = e.changedTouches[0]);
            var r = e.pageX,
                n = e.pageY,
                t = window.scrollX;
            "undefined" == typeof t && (t = document.body.scrollLeft);
            var i = window.scrollY;
            "undefined" == typeof i && (i = document.body.scrollTop), n >= 0 && n <= window.innerHeight + i && r >= 0 && r <= window.innerWidth + t || q(e)
        }

        function q(g) {
            if (null != S && (S.drag_end(), null != h)) {
                "undefined" != typeof g.changedTouches && (g = g.changedTouches[0]);
                var y = !0,
                    A = !1;
                if (null != c.item_under_mouse) {
                    var M = c.current_category;
                    if (M != c.item_under_mouse) {
                        y = !1, A = !0;
                        var x = c.item_under_mouse.piece_container;
                        x.appendChild(h), rt(x, [h])
                    }
                }
                var j = c.current_category.piece_container.children,
                    r = h,
                    o = a.jigsaw_piece_scale_to_actual,
                    b = 2 * a.jigsaw_required_precision,
                    n = [],
                    R = h.left + (1 - o) / 2 * r.width_float - r.puzzle_left_min * o,
                    k = h.top + (1 - o) / 2 * r.height_float - r.puzzle_top_min * o;
                if (j.forEach(function(e) {
                        if (e != r)
                            for (var h = e.virtual_left - e.width_float * o / 2 - e.puzzle_left_min * o, d = e.virtual_top - e.height_float * o / 2 - e.puzzle_top_min * o, a = Math.abs(h - R), s = Math.abs(d - k), t = 0, c = r.puzzle_width.length; c > t; t++)
                                for (var g = r.puzzle_width[t], u = r.puzzle_height[t], i = 0, p = e.puzzle_width.length; p > i; i++)
                                    if (!e.placed) {
                                        var _ = e.puzzle_width[i],
                                            f = e.puzzle_height[i],
                                            m = (g + _) / b,
                                            l = (u + f) / b;
                                        if (!(a > m || s > l || Math.abs(e.x[i] - r.x[t]) + Math.abs(e.y[i] - r.y[t]) != 1)) {
                                            -1 == n.indexOf(e) && n.push(e);
                                            break
                                        }
                                    }
                    }), n.length > 0) {
                    var r = h,
                        n = n.concat([r]),
                        p = u.composite_image.width - 2 * e.piece_margin / e.piece_logical_scale,
                        f = 0,
                        l = u.composite_image.height - 2 * e.piece_margin / e.piece_logical_scale,
                        m = 0;
                    n.forEach(function(e) {
                        p > e.puzzle_left_min && (p = e.puzzle_left_min), l > e.puzzle_top_min && (l = e.puzzle_top_min), f < e.puzzle_left_min + e.width_float && (f = e.puzzle_left_min + e.width_float), m < e.puzzle_top_min + e.height_float && (m = e.puzzle_top_min + e.height_float)
                    });
                    var i = xt();
                    return i.className = "jt-jigsaw-piece_deck-piece", i.piece_id = r.piece_id, i.x = [], i.y = [], i.puzzle_width = [], i.puzzle_height = [], i.puzzle_left = [], i.puzzle_top = [], i.puzzle_left_min = p, i.puzzle_top_min = l, i.side_set = ft(n), i.shape_string = J(i.side_set, [-p, -l]), i.dummy_canvas = document.createElement("canvas"), i.path = new Path2D(i.shape_string), L.push(i), r.parentNode.appendChild(i), i.width_float = Math.round(1e3 * (f - p)) / 1e3, i.height_float = Math.round(1e3 * (m - l)) / 1e3, i.width = Math.ceil((i.width_float + 2 * e.piece_margin) / e.piece_logical_scale), i.height = Math.ceil((i.height_float + 2 * e.piece_margin) / e.piece_logical_scale), n.forEach(function(e) {
                        e.parentNode.removeChild(e)
                    }), n.forEach(function(e) {
                        P(e), L.splice(L.indexOf(e), 1), e.x.forEach(function(r, t) {
                            z[e.x[t]][e.y[t]] = i
                        }), i.x = i.x.concat(e.x), i.y = i.y.concat(e.y), i.puzzle_width = i.puzzle_width.concat(e.puzzle_width), i.puzzle_height = i.puzzle_height.concat(e.puzzle_height), i.puzzle_left = i.puzzle_left.concat(e.puzzle_left), i.puzzle_top = i.puzzle_top.concat(e.puzzle_top)
                    }), i.calc_width = i.width_float * a.jigsaw_piece_scale_to_actual, i.calc_height = i.height_float * a.jigsaw_piece_scale_to_actual, i.left = (i.puzzle_left_min - n[0].puzzle_left_min) * a.jigsaw_piece_scale_to_actual + n[0].left, i.top = (i.puzzle_top_min - n[0].puzzle_top_min) * a.jigsaw_piece_scale_to_actual + n[0].top, i.x.length == e.tile_x * e.tile_y && (u.appendChild(i), t.piece_container = u, TweenMax.to(i, .8, {
                        parseTransform: !0,
                        ease: Cubic.easeInOut,
                        calc_width: i.width_float,
                        calc_height: i.height_float,
                        left: u.left,
                        top: u.top,
                        onComplete: function() {
                            Ct(), d.inner.setTimeout(function() {
                                ot({
                                    show_trophy_delay: 750
                                })
                            }, 100)
                        }
                    }), pt()), ut(i), P(h), h = null, Tt(), t.refresh_piece_styling = !0, void W()
                }
                if (y)
                    for (var _ = h, v = !1, w = h.calc_width / a.jigsaw_required_precision, T = h.calc_height / a.jigsaw_required_precision, C = h.left - u.left, E = h.top - u.top;;) {
                        if (C + w < _.puzzle_left_min) break;
                        if (C - w > _.puzzle_left_min) break;
                        if (E + T < _.puzzle_top_min) break;
                        if (E - T > _.puzzle_top_min) break;
                        v = !0;
                        break
                    }
                if (a.playAudio(a.audio_dir + "/global-put down.ogg", {
                        audio_type: "sound_effect",
                        blocking: !1
                    }), !v) return void st({
                    is_transferred_to_different_category: A
                });
                if (ut(h), G({
                        logical_parent: h,
                        canvas: h.canvas
                    }), a.jigsaw_animate_piece_placement) {
                    var s = h;
                    t.piece_sprite_container.addChildAt(s.sprite, 0), h = null;
                    var O = s.puzzle_left_min + u.left,
                        I = s.puzzle_top_min + u.top;
                    pt(), s.placed = !0, TweenMax.to(s, .35, {
                        parseTransform: !0,
                        ease: Linear.ease,
                        left: O,
                        top: I,
                        onComplete: function() {
                            Ct(), It(s)
                        }
                    })
                } else It(h)
            }
        }

        function It(r) {
            e.pieces_in_position_count += r.x.length, r.parentNode.removeChild(r), document.body.style.cursor = "", r.placed = !0;
            for (var T = [], x = [], S = [
                    [0, 0, !0],
                    [-1, 0, !0],
                    [0, -1, !0],
                    [1, 0, !0],
                    [0, 1, !0],
                    [1, 1, !1],
                    [-1, -1, !1],
                    [1, -1, !1],
                    [-1, 1, !1],
                    [-2, 0, !1],
                    [0, -2, !1],
                    [2, 0, !1],
                    [0, 2, !1],
                    [2, 1, !1],
                    [-2, -1, !1],
                    [2, -1, !1],
                    [-2, 1, !1],
                    [1, 2, !1],
                    [-1, -2, !1],
                    [1, -2, !1],
                    [-1, 2, !1],
                    [2, 2, !1],
                    [-2, -2, !1],
                    [2, -2, !1],
                    [-2, 2, !1]
                ], d = {}, w = r.x, s = u.composite_image.width - 2 * e.piece_margin / e.piece_logical_scale, f = 0, l = u.composite_image.height - 2 * e.piece_margin / e.piece_logical_scale, m = 0, n = 0; n < w.length; n++) {
                var g = r.x[n],
                    v = r.y[n];
                z[g][v] = kt(r)
            }
            for (var n = 0; n < w.length; n++) {
                var g = r.x[n],
                    v = r.y[n];
                S.forEach(function(t) {
                    var i = g + t[0];
                    if ("undefined" != typeof z[i]) {
                        var n = v + t[1],
                            e = z[i][n];
                        if ("undefined" != typeof e && e.placed) {
                            var r = !1;
                            "undefined" == typeof d[e.piece_id] && (r = !0, d[e.piece_id] = t[2], T.push(e)), 1 == t[2] && (1 == r || 0 == d[e.piece_id]) && (d[e.piece_id] = !0, x.push(e), s > e.puzzle_left_min && (s = e.puzzle_left_min), l > e.puzzle_top_min && (l = e.puzzle_top_min), f < e.puzzle_left_min + e.width_float && (f = e.puzzle_left_min + e.width_float), m < e.puzzle_top_min + e.height_float && (m = e.puzzle_top_min + e.height_float))
                        }
                    }
                })
            }
            var C = ft(T),
                b = J(C, [-Math.floor(s), -Math.floor(l)]),
                i = document.createElement("canvas");
            i.width_float = Math.round(1e3 * (f - s)) / 1e3, i.height_float = Math.round(1e3 * (m - l)) / 1e3, i.width = Math.ceil((i.width_float + 2 * e.piece_margin) / e.piece_logical_scale), i.height = Math.ceil((i.height_float + 2 * e.piece_margin) / e.piece_logical_scale);
            var o = i.getContext("2d");
            o.save(), _({
                x: e.piece_margin,
                y: e.piece_margin,
                scale: 1 / e.piece_logical_scale,
                data: b,
                strokeStyle: "rgba(63,63,63,1)",
                lineWidth: 0,
                canvas: i
            }), o.clip();
            var p = (u.composite_image.width - 2 * e.piece_margin / e.piece_logical_scale) * e.piece_logical_scale / u.base_image.naturalWidth;
            x.forEach(function(t) {
                o.drawImage(u.base_image, t.puzzle_left_min / p, t.puzzle_top_min / p, t.width * e.piece_logical_scale / p, t.height * e.piece_logical_scale / p, (t.puzzle_left_min - s) / e.piece_logical_scale, (t.puzzle_top_min - l) / e.piece_logical_scale, t.width, t.height)
            }), o.restore(), o.save(), o.translate(e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale), a.jigsaw_use_3d_effect && lt({
                canvas: i,
                stroke_width: D.stroke_width,
                cut_multiplier: D.cut_multiplier,
                shape_string: b,
                scale: 1 / e.piece_logical_scale,
                clear_stroke: "undefined" == typeof e.piece_margin_style
            }), ct(i), o.restore();
            var y = u.composite_image.getContext("2d");
            y.globalCompositeOperation = "source-over", y.drawImage(i, s / e.piece_logical_scale, l / e.piece_logical_scale, i.width, i.height), i.width = 0, i.height = 0;
            var c = u.composite_image;
            c.texture ? Rt(c) : G({
                parent: t.stage,
                canvas: c,
                position: 1,
                is_2d: !0
            }), c.sprite.x = u.left - e.piece_margin, c.sprite.y = u.top - e.piece_margin, P(r), r == h && (h = null), Tt(), W(), zt() && ot()
        }

        function st(i) {
            if (null != h) {
                k(), "undefined" == typeof i && (i = {}), document.body.style.cursor = "";
                var e = h;
                if (i.is_transferred_to_different_category || t.piece_sprite_container.addChild(e.sprite), e.visibility = "visible", a.freestyle_mode && !i.is_transferred_to_different_category) {
                    if (e.left = h.left + (h.calc_width - e.calc_width) / 2, e.top = h.top + (h.calc_height - e.calc_height) / 2, e.virtual_left - .25 * h.calc_width < 0) e.virtual_left = .25 * h.calc_width;
                    else {
                        var r = parseFloat(window.getComputedStyle(d.inner).width);
                        e.virtual_left + .25 * h.calc_width > r && (e.virtual_left = r - .25 * h.calc_width)
                    }
                    if (e.virtual_top - .25 * h.calc_height < 0) e.virtual_top = .25 * h.calc_height;
                    else {
                        var n = parseFloat(window.getComputedStyle(d.inner).height);
                        e.virtual_top + .25 * h.calc_height > n && (e.virtual_top = n - .25 * h.calc_height)
                    }
                }
                delete h.border_adjust_count, ut(h), G({
                    logical_parent: h,
                    canvas: h.canvas
                }), h.calc_width = h.width_float * a.jigsaw_piece_scale_to_actual, h.calc_height = h.height_float * a.jigsaw_piece_scale_to_actual, h = null, c.item_under_mouse = null, Tt(), W()
            }
        }

        function Bt(e) {
            "touchcancel" == e.type && e.preventDefault();
            e.target;
            if ("undefined" != typeof e.targetTouches) {
                if (e.touches.length > 1) return void st();
                e = e.targetTouches[0]
            }
            S.drag_active && S.drag_update(e), null != h && Et(h, e)
        }

        function Jt(f) {
            function K(n, o, l, c, p, f, _, g) {
                for (var s = new Array, i = [new Array, new Array], d = 0; 2 > d; d++) {
                    if (0 == d) var r = 6 * n - 12 * l + 6 * p,
                        u = -3 * n + 9 * l - 9 * p + 3 * _,
                        T = 3 * l - 3 * n;
                    else var r = 6 * o - 12 * c + 6 * f,
                        u = -3 * o + 9 * c - 9 * f + 3 * g,
                        T = 3 * c - 3 * o;
                    if (Math.abs(u) < 1e-12) {
                        if (Math.abs(r) < 1e-12) continue;
                        var e = -T / r;
                        e > 0 && 1 > e && s.push(e)
                    } else {
                        var w = r * r - 4 * T * u,
                            y = Math.sqrt(w);
                        if (!(0 > w)) {
                            var v = (-r + y) / (2 * u);
                            v > 0 && 1 > v && s.push(v);
                            var m = (-r - y) / (2 * u);
                            m > 0 && 1 > m && s.push(m)
                        }
                    }
                }
                for (var b, x, t, a = s.length, h = a; a--;) {
                    var e = s[a];
                    t = 1 - e, b = t * t * t * n + 3 * t * t * e * l + 3 * t * e * e * p + e * e * e * _, i[0][a] = b, x = t * t * t * o + 3 * t * t * e * c + 3 * t * e * e * f + e * e * e * g, i[1][a] = x
                }
                return i[0][h] = n, i[1][h] = o, i[0][h + 1] = _, i[1][h + 1] = g, {
                    x0: Math.min.apply(null, i[0]),
                    y0: Math.min.apply(null, i[1]),
                    x1: Math.max.apply(null, i[0]),
                    y1: Math.max.apply(null, i[1])
                }
            }
            for (var h = (f.success || function() {}, f.source_image), w = f.size_x, T = f.size_y, j = f.width, P = f.height, N = f.draw_settings, m = [], X = 100 / w, W = 100 / T, r = 0; w >= r; r++) {
                m[r] = [];
                for (var o = 0; T >= o; o++) {
                    var V = 0 == r || r == w ? 0 : .25 * Math.randBMT(),
                        J = 0 == o || o == T ? 0 : .25 * Math.randBMT();
                    m[r][o] = [(r + V) * X, (o + J) * W]
                }
            }
            for (var H = [
                    [
                        [450, -150],
                        [226, -59], void 0, void 0, 2
                    ],
                    [
                        [330, -180],
                        [155, -120], void 0, void 0, 3
                    ],
                    [
                        [333, 58],
                        [120, -50], void 0, void 0, 4
                    ],
                    [
                        [312, 15],
                        [75, 54], void 0, void 0, 4
                    ],
                    [
                        [275, 65],
                        [17, 7], void 0, void 0, 8
                    ],
                    [
                        [260, 0],
                        [40, 0], void 0, void 0, 9
                    ],
                    [
                        [312, 15],
                        [95, -33], void 0, void 0, 9
                    ],
                    [
                        [280, -80],
                        [108, -124], void 0, void 0, 9
                    ],
                    [
                        [220, 0],
                        [80, 0], void 0, void 0, 20
                    ],
                    [
                        [223, -19],
                        [80, 0],
                        [35, 265], 110, 24
                    ]
                ], R = [], i = 0; i < H.length; i++)
                for (var E = H[i], v = 0; v < E[4]; v++) R.push([E[0], E[1], E[2], E[3]]);
            var x = [];
            for (vh = 0; 2 > vh; vh++) {
                x[vh] = [];
                for (var r = 0; w + vh > r; r++) {
                    x[vh][r] = [];
                    for (var o = 0; T + (1 - vh) > o; o++) {
                        var t = [
                            [0, 0],
                            [220, 0],
                            [60, 80],
                            [150, 80],
                            [240, 80],
                            [80, 0],
                            [300, 0]
                        ];
                        if ((0 == o || o == T + 1 - vh - 1) && 0 == vh || (0 == r || r == w + vh - 1) && 1 == vh) t = [t[0], t[t.length - 1]];
                        else {
                            var Y = Math.randInt(0, R.length - 1),
                                p = R[Y];
                            t[1] = [p[0][0] - 10 + 20 * Math.randBMT(), p[0][1] - 10 + 20 * Math.randBMT()], t[5] = [p[1][0] - 10 + 20 * Math.randBMT(), p[1][1] - 10 + 20 * Math.randBMT()], "undefined" != typeof p[2] && (t[2][0] = p[2][0], t[4][0] = p[2][1]);
                            var q = Math.randInt(0, 1);
                            if (1 == q) {
                                var U = t[1][0];
                                t[1][0] = 300 - t[5][0], t[5][0] = 300 - U
                            }
                            if ("undefined" != typeof p[3]) var et = p[3] - 5 + 10 * Math.randBMT();
                            else if (0 != Math.randInt(0, 4)) var et = 70 + 20 * Math.randBMT();
                            else var et = 60 + 40 * Math.randBMT();
                            t[2][1] = t[3][1] = t[4][1] = et;
                            var Q = Math.randInt(0, 1);
                            if (1 == Q)
                                for (var i = 1, c = t.length; c - 1 > i; i++) t[i][1] = -t[i][1]
                        }
                        for (var i = 0, c = t.length; c > i; i++) {
                            if (1 == vh) {
                                var U = t[i][0];
                                t[i][0] = t[i][1], t[i][1] = U
                            }
                            t[i][0] = t[i][0] / 300 * X + m[r][o][0], t[i][1] = t[i][1] / 300 * W + m[r][o][1]
                        }
                        var c = t.length;
                        t[c - 1] = 0 == vh ? [m[r + 1][o][0], m[r + 1][o][1]] : [m[r][o + 1][0], m[r][o + 1][1]];
                        for (var i = 0; c > i; i++) t[i][0] = t[i][0].toFixed(4), t[i][1] = t[i][1].toFixed(4);
                        for (var F = new Array(c), i = 0; c > i; i++) F[i] = [t[i][0] / 100 * j, t[i][1] / 100 * P];
                        x[vh][r][o] = F
                    }
                }
            }
            for (var z = [], B = "", G = 0, r = 0; w > r; r++) {
                z[r] = [];
                for (var o = 0; T > o; o++) {
                    for (var y = [], b = [], g = "", C = "", s = {
                            x0: j,
                            y0: P,
                            x1: 0,
                            y1: 0
                        }, u = (x[0][r][o][0][0], x[0][r][o][0][1], []), d = 0; 4 > d; d++) {
                        var L = 0,
                            t = x[d % 2 == 0 ? 1 : 0][r + (2 == d ? 1 : 0)][o + (3 == d ? 1 : 0)],
                            c = t.length;
                        if (2 >= c) var s = {
                            x0: t[0][0] < s.x0 ? t[0][0] : s.x0,
                            y0: t[0][1] < s.y0 ? t[0][1] : s.y0,
                            x1: t[1][0] > s.x1 ? t[1][0] : s.x1,
                            y1: t[1][1] > s.y1 ? t[1][1] : s.y1
                        };
                        else
                            for (var i = 0; 4 > i; i += 3) var _ = K(t[0 + i][0], t[0 + i][1], t[1 + i][0], t[1 + i][1], t[2 + i][0], t[2 + i][1], t[3 + i][0], t[3 + i][1]),
                                s = {
                                    x0: _.x0 < s.x0 ? _.x0 : s.x0,
                                    y0: _.y0 < s.y0 ? _.y0 : s.y0,
                                    x1: _.x1 > s.x1 ? _.x1 : s.x1,
                                    y1: _.y1 > s.y1 ? _.y1 : s.y1
                                };
                        var k = 0 == d && c > 2 ? " M " : " L ";
                        c > 2 && 0 != d && (k = ""), C += k, "" != k && (b.length > 0 && ("M" != g && u.push({
                            type: g,
                            points: b
                        }), b = [], 0 == L && u.length > 0 && (y.push({
                            x: r,
                            y: o,
                            s: y.length,
                            p: u
                        }), u = []), L += 1), g = k.trim());
                        for (var i = d % 3 == 0 ? c - 1 : 0, v = 0; c > v; v++)(0 == d || 2 >= c || 0 != v) && (v % 3 == 1 && c > 2 && ("M" != g && u.push({
                            type: g,
                            points: b
                        }), b = [], 0 == L && u.length > 0 && (y.push({
                            x: r,
                            y: o,
                            s: y.length,
                            p: u
                        }), u = []), L += 1, g = "C", C += " C "), C += t[i][0].toFixed(4) + "," + t[i][1].toFixed(4), b.push([parseFloat(t[i][0].toFixed(4)), parseFloat(t[i][1].toFixed(4))]), v != c - 1 && (C += " ")), d % 3 == 0 ? i-- : i++
                    }
                    u.push({
                        type: g,
                        points: b
                    }), y.push({
                        x: r,
                        y: o,
                        s: y.length,
                        p: u
                    }), C += "z", B += C + " ";
                    var D = n(s),
                        s = {
                            x0: Math.round(1e3 * s.x0) / 1e3,
                            y0: Math.round(1e3 * s.y0) / 1e3,
                            x1: Math.round(1e3 * s.x1) / 1e3,
                            y1: Math.round(1e3 * s.y1) / 1e3
                        },
                        O = Math.round(1e3 * (s.x1 - s.x0)) / 1e3,
                        I = Math.round(1e3 * (s.y1 - s.y0)) / 1e3,
                        l = xt();
                    l.x = [r], l.y = [o], l.piece_id = G, l.width = Math.ceil(O + 2 * e.piece_margin) / e.piece_logical_scale, l.height = Math.ceil(I + 2 * e.piece_margin) / e.piece_logical_scale, l.width_float = O, l.height_float = I, l.puzzle_width = [O], l.puzzle_height = [I], l.puzzle_left_min = D.x0, l.puzzle_top_min = D.y0, l.puzzle_left = [s.x0], l.puzzle_top = [s.y0], l.side_set = [y], l.placed = !1, z[r][o] = l, G += 1
                }
            }
            var S = document.createElement("canvas"),
                A = S.getContext("2d");
            S.width = (j + 2 * e.piece_margin) / e.piece_logical_scale, S.height = (P + 2 * e.piece_margin) / e.piece_logical_scale;
            var M = h.naturalWidth / h.width,
                Z = M * h.width <= h.naturalWidth ? M * h.width : h.naturalWidth,
                $ = M * h.height <= h.naturalHeight ? M * h.height : h.naturalHeight;
            A.drawImage(h, 0, 0, Z, $, e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale, h.width / e.piece_logical_scale, h.height / e.piece_logical_scale), A.save(), A.translate(e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale), a.jigsaw_use_3d_effect && lt({
                canvas: S,
                stroke_width: N.stroke_width,
                cut_multiplier: N.cut_multiplier,
                shape_string: B,
                scale: 1 / e.piece_logical_scale,
                clear_stroke: "undefined" == typeof e.piece_margin_style
            }), Nt({
                piece_grid: z,
                big_canvas: S,
                grid_is_new: !0,
                callback: function(e) {
                    A.restore(), f.callback(e)
                }
            })
        }

        function Nt(i) {
            function u() {
                for (var i = 0; f > i; i++) {
                    var e = o[c][r];
                    if (1 == a || !e.placed) {
                        var m = !1;
                        0 == a && e.sprite && (m = !0, P(e)), e.shape_string = J(e.side_set, [-e.puzzle_left_min, -e.puzzle_top_min]), bt(e, p), G({
                            canvas: e.canvas,
                            logical_parent: e
                        }), 0 == m && t.piece_sprite_container.removeChild(e.sprite), 1 == a && (e.zIndex = l)
                    }
                    if (l += 1, r += 1, r == s && (r = 0, c += 1), c == h) break
                }
                l != h * s ? (t.refresh_piece_styling = !0, timeout = d.inner.setTimeout(u, 20)) : (dt = void 0, void
                    function() {
                        for (var r = {}, l = 0; h > l; l++)
                            for (var c = 0; s > c; c++) {
                                var e = o[l][c];
                                0 == a && e.placed || (e.parentNode == t.piece_container || null == e.parentNode) && (r[e.zIndex] = e)
                            }
                        for (var u = n(t.piece_sprite_container.children), i = 0, d = u.length; d > i; i++) t.piece_sprite_container.removeChild(u[i]);
                        for (var i in r) t.piece_sprite_container.addChild(r[i].sprite);
                        t.piece_sprite_container.is_cached = !1, _(o)
                    }())
            }
            var o = i.piece_grid,
                p = i.big_canvas,
                a = i.grid_is_new,
                _ = i.callback,
                h = e.tile_x,
                s = e.tile_y,
                f = 20,
                l = 0,
                c = 0,
                r = 0;
            "undefined" != typeof dt && clearTimeout(dt), dt = void 0, u()
        }

        function Tt() {
            for (var i = t.piece_sprite_container.children, e = 0, r = i.length; r > e; e++) {
                var n = i[e].logical_parent;
                n.zIndex = e
            }
            t.piece_sprite_container.is_cached = !1
        }

        function J(r, e, t) {
            function n(r) {
                var n = "",
                    i = "";
                return r.forEach(function(a) {
                    a.p.forEach(function(o) {
                        if (n += " " + o.type + " ", "" == i) {
                            var s = r[r.length - 1].p,
                                l = s[s.length - 1],
                                a = l.points;
                            switch (l.type) {
                                case "L":
                                    i = "M " + (a[1][0] * t + e[0]).toFixed(4) + "," + (a[1][1] * t + e[1]).toFixed(4) + " ";
                                    break;
                                case "C":
                                    i = "M " + (a[2][0] * t + e[0]).toFixed(4) + "," + (a[2][1] * t + e[1]).toFixed(4) + " "
                            }
                        }
                        o.points.forEach(function(i) {
                            n += (i[0] * t + e[0]).toFixed(4) + "," + (i[1] * t + e[1]).toFixed(4) + " "
                        })
                    })
                }), i + n + "z"
            }
            var t = "undefined" != typeof t ? t : 1,
                e = "undefined" == typeof e ? [0, 0] : e;
            e[0] *= t, e[1] *= t;
            var a = r,
                i = [];
            return a.forEach(function(e) {
                i.push(n(e))
            }), "".concat.apply(i)
        }

        function lt(i) {
            {
                var n = i.canvas,
                    a = i.stroke_width / e.jigsaw_scale_low_power_sizer,
                    p = i.cut_multiplier,
                    d = i.shape_string,
                    u = i.scale,
                    c = i.outline_style || "transparent";
                i.clear_stroke
            }
            if (i.outline_width) var h = i.outline_width;
            else if (e.piece_margin_style && 0 != e.piece_margin) var h = e.piece_margin >= 5 ? 10 : 6;
            else var h = 10;
            var h = 8;
            h /= e.jigsaw_scale_low_power_sizer;
            var o = n.getContext("2d"),
                r = document.createElement("canvas");
            r.width = n.width, r.height = n.height;
            var t = r.getContext("2d");
            _({
                x: 0,
                y: 0,
                scale: u,
                data: d,
                strokeStyle: "rgba(63,63,63,1)",
                lineJoin: "round",
                lineCap: "round",
                lineWidth: 4 / e.jigsaw_scale_low_power_sizer,
                canvas: r
            }), t.shadowBlur = 16 * a, t.shadowColor = "rgba(0,0,0,1)", t.shadowOffsetX = 3 * -a, t.shadowOffsetY = 3 * -a, t.stroke(), t.shadowColor = "rgba(255,255,255,.6)", t.shadowOffsetX = 3 * a, t.shadowOffsetY = 3 * a, t.stroke();
            var s = document.createElement("canvas");
            s.width = n.width, s.height = n.height;
            var l = s.getContext("2d");
            l.drawImage(r, 0, 0), l.drawImage(r, 0, 0), l.drawImage(r, 0, 0), o.globalCompositeOperation = "source-atop", o.drawImage(s, 0, 0), t.clearRect(0, 0, n.width, n.height), t.lineWidth = h * a * p * e.jigsaw_scale_low_power_sizer / 2, t.shadowBlur = 0, "transparent" != c && (t.strokeStyle = c), t.shadowColor = "rgba(0,0,0,0)", t.shadowOffsetX = 0, t.shadowOffsetY = 0, t.stroke(), i.clear_stroke && (o.globalCompositeOperation = "transparent" == c ? "destination-out" : "source-atop", o.drawImage(r, 0, 0)), o.globalCompositeOperation = "source-over"
        }

        function ct(n, i, a) {
            var r = "undefined" != typeof i ? i : e.piece_margin_style;
            if ("undefined" != typeof r) {
                var t = n.getContext("2d");
                t.lineJoin = "round", t.lineCap = "round", t.lineWidth = e.piece_margin / e.jigsaw_scale_low_power_sizer, "clear" == i ? (t.strokeStyle = "rgba(0,0,0,1)", t.globalCompositeOperation = "destination-out", t.stroke(), t.globalCompositeOperation = "source-in") : (t.strokeStyle = r, t.stroke())
            }
        }

        function ft(w) {
            if (!a.jigsaw_combine_pieces) {
                var p = [];
                w.forEach(function(e) {
                    e.side_set.forEach(function(e) {
                        p.push(e)
                    })
                });
                var T = [].concat.apply(p);
                return T
            }
            for (var x = [
                    [-1, 0],
                    [0, -1],
                    [1, 0],
                    [0, 1]
                ], h = [], c = [], i = -1; i < e.tile_x + 2; i++) {
                c[i] = [];
                for (var o = -1; o < e.tile_y + 2; o++) c[i][o] = [0, 0, 0, 0]
            }
            for (var i = -1; i < e.tile_x + 1; i++) {
                h[i] = [];
                for (var o = -1; o < e.tile_y + 1; o++) h[i][o] = void 0
            }
            w.forEach(function(e) {
                e.x.forEach(function(i, t) {
                    h[e.x[t]][e.y[t]] = e
                })
            });
            for (var b = [], i = 0; i < e.tile_x; i++)
                for (var o = 0; o < e.tile_y; o++)
                    if (h[i][o])
                        for (var f = 0; 4 > f; f++)
                            if (!c[i][o][f]) {
                                for (var v = [], t = f, g = 0, y = !1, n = i, r = o;;) {
                                    var l = n + x[t][0],
                                        s = r + x[t][1];
                                    if (c[n][r][t] = 1, c[l][s][(t + 2) % 4] = 1, h[l][s]) {
                                        if (3 == g) break;
                                        g += 1, t = (t + 3) % 4, n = l, r = s
                                    } else {
                                        if (0 == y) {
                                            y = !0;
                                            var d = n,
                                                u = r;
                                            l > n && (d += 1, 2 == t && (u += 1)), s > r && (u += 1, 1 == t && (d += 1)), n > l && 2 == t && (u += 1), r > s && 1 == t && (d += 1);
                                            var _ = d,
                                                m = u
                                        } else {
                                            var _ = n,
                                                m = r;
                                            if (l > n && (_ += 1, 2 == t && (m += 1)), s > r && (m += 1, 1 == t && (_ += 1)), n > l && 2 == t && (m += 1), r > s && 1 == t && (_ += 1), d == _ && u == m) break
                                        }
                                        v.push([n, r, t]), c[n][r][t] = 1, c[l][s][(t + 2) % 4] = 1, t = (t + 1) % 4, g = 0
                                    }
                                }
                                v.length > 0 && b.push(v)
                            }
            var p = [];
            return b.forEach(function(t) {
                var e = [];
                t.forEach(function(i) {
                    var o = i[0],
                        l = i[1],
                        c = i[2],
                        a = h[o][l];
                    e: for (var n = 0, u = a.side_set.length; u > n; n++)
                        for (var s = a.side_set[n], r = 0, d = s.length; d > r; r++) {
                            var t = s[r];
                            if (o == t.x && l == t.y && c == t.s) break e
                        }
                    e.push(t)
                }), p.push(e)
            }), p
        }

        function kt(e) {
            return {
                placed: e.placed,
                puzzle_left: e.puzzle_left,
                puzzle_top: e.puzzle_top,
                puzzle_left_min: e.puzzle_left_min,
                puzzle_top_min: e.puzzle_top_min,
                width: e.width,
                height: e.height,
                width_float: e.width_float,
                height_float: e.height_float,
                puzzle_width: e.puzzle_width,
                puzzle_height: e.puzzle_height,
                x: e.x,
                y: e.y,
                zIndex: e.zIndex,
                virtual_left: e.virtual_left,
                virtual_top: e.virtual_top,
                piece_id: e.piece_id,
                side_set: e.side_set
            }
        }

        function G(i) {
            if (i instanceof HTMLCanvasElement || i instanceof HTMLImageElement) var r = i,
                e = i,
                n = t.piece_sprite_container,
                s = n.children.length;
            else var e = "undefined" != typeof i.logical_parent ? i.logical_parent : i.canvas,
                r = i.canvas,
                n = "undefined" != typeof i.parent ? i.parent : t.piece_sprite_container,
                s = "undefined" != typeof i.position ? i.position : n.children.length;
            var a = i.invalidate,
                c = i.is_2d;
            "undefined" == typeof a && (a = !1);
            var o = e.cached_sprite_data;
            if (e.sprite && "undefined" == typeof i.position && -1 != n.children.indexOf(e.sprite) && (s -= 1), (e.canvas || e == r) && P(e), c && r != e ? (r.texture = new PIXI.Texture.fromCanvas(r), e.texture = r.texture, delete r.texture) : e.texture = new PIXI.Texture.fromCanvas(r), e.sprite = new PIXI.Sprite(e.texture), e.sprite.logical_parent = e, e.canvas = e.texture.baseTexture.source, "undefined" != typeof o)
                for (var l in o) e.sprite[l] = o[l];
            return n.addChildAt(e.sprite, s), k(), "undefined" != typeof n && n == t.piece_sprite_container && 1 == a && (n.is_cached = !1), e
        }

        function P(e, r) {
            if ("undefined" == typeof r && (r = !1), "undefined" != typeof e && e.texture) {
                var i = e.sprite.parent;
                "undefined" != typeof i && e.sprite.parent.removeChild(e.sprite), e.texture.destroy(!0), e.texture = null, e.sprite = null, "undefined" != typeof i && i == t.piece_sprite_container && 1 == r && (i.is_cached = !1), k()
            }
        }

        function Rt(e) {
            PIXI.updateWebGLTexture(e.texture.baseTexture, t.renderer.gl)
        }

        function qt(e, t) {
            return e.forEach(function(e) {
                e.forEach(function(e) {
                    e.p.forEach(function(e) {
                        e.points.forEach(function(e) {
                            e.forEach(function(r, i) {
                                e[i] = e[i] * t
                            })
                        })
                    })
                })
            }), e
        }

        function xt() {
            var e = {};
            e.is_jigsaw_piece = !0, e.canvas = document.createElement("canvas");
            var l = null;
            Object.defineProperty(e, "parentNode", {
                get: function() {
                    return l
                },
                set: function(e) {
                    l = e
                }
            });
            var i, r;
            Object.defineProperty(e, "left", {
                get: function() {
                    return i
                },
                set: function(r) {
                    i = r, n = i + o / 2, e != h && (t.refresh_piece_styling = !0, t.refresh_piece_styling = !0)
                }
            }), Object.defineProperty(e, "top", {
                get: function() {
                    return r
                },
                set: function(i) {
                    r = i, a = r + s / 2, e != h && (t.refresh_piece_styling = !0, t.refresh_piece_styling = !0)
                }
            });
            var n, a;
            Object.defineProperty(e, "virtual_left", {
                get: function() {
                    return n
                },
                set: function(r) {
                    n = r, i = n - o / 2, e != h && (t.refresh_piece_styling = !0)
                }
            }), Object.defineProperty(e, "virtual_top", {
                get: function() {
                    return a
                },
                set: function(i) {
                    a = i, r = a - s / 2, e != h && (t.refresh_piece_styling = !0)
                }
            });
            var o, s;
            return Object.defineProperty(e, "calc_width", {
                get: function() {
                    return o
                },
                set: function(r) {
                    o = r, i = n - o / 2, e != h && (t.refresh_piece_styling = !0)
                }
            }), Object.defineProperty(e, "calc_height", {
                get: function() {
                    return s
                },
                set: function(i) {
                    s = i, r = a - s / 2, e != h && (t.refresh_piece_styling = !0)
                }
            }), e
        }

        function Xt(e) {
            var t = [];
            Object.defineProperty(e, "children", {
                get: function() {
                    return t
                },
                set: function(e) {
                    t = e
                }
            }), Object.defineProperty(e, "childNodes", {
                get: function() {
                    return t
                },
                set: function(e) {
                    t = e
                }
            }), e.appendChild = function(t) {
                t.parentNode && t.parentNode.removeChild(t), t.parentNode = e, e.children.push(t), k()
            }, e.removeChild = function(t) {
                e.children.splice(e.children.indexOf(t), 1), k()
            }, Array.prototype.slice.call(["forEach"]).forEach(function(t) {
                e.children[t] = function(i, r) {
                    return Array.prototype.slice.call(e.children)[t](i, r)
                }
            })
        }

        function bt(t, c, r) {
            if ("undefined" != typeof t.element) var r = t,
                t = r.element,
                c = r.parent,
                d = r.stroke_style;
            var i = t.canvas;
            i.width = t.width, i.height = t.height, r || (r = {});
            var h = "undefined" == typeof r.render_stroke ? !0 : r.render_stroke,
                f = "undefined" == typeof r.use_3d_effect ? !1 : r.use_3d_effect,
                l = r.margin || 0,
                o = e.piece_logical_scale,
                a = e.piece_margin,
                n = i.getContext("2d");
            n.save(), _({
                x: a + l,
                y: a + l,
                scale: 1 / o,
                data: t.shape_string,
                strokeStyle: "rgba(63,63,63,1)",
                lineWidth: 0,
                canvas: i
            }), n.clip(), t.dummy_canvas = document.createElement("canvas");
            var p = J(t.side_set, [-t.puzzle_left_min + a + l, -t.puzzle_top_min + a + l], 1 / o);
            if (t.path = new Path2D(p), c instanceof HTMLImageElement) {
                var s = (u.composite_image.width - 2 * e.piece_margin / e.piece_logical_scale) * e.piece_logical_scale / u.base_image.naturalWidth;
                n.drawImage(c, t.puzzle_left_min / s, t.puzzle_top_min / s, i.width * o / s, i.height * o / s, 0, 0, i.width, i.height)
            } else n.drawImage(c, (t.puzzle_left_min + a) / o, (t.puzzle_top_min + a) / o, i.width, i.height, 0, 0, i.width, i.height);
            n.restore(), f && (n.save(), n.translate(e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale), lt({
                canvas: i,
                stroke_width: D.stroke_width,
                cut_multiplier: D.cut_multiplier,
                shape_string: t.shape_string,
                scale: 1 / e.piece_logical_scale,
                clear_stroke: !h
            }), n.restore()), h && (n.save(), ct(i, d), n.restore())
        }

        function ut(t) {
            P(t), t.canvas = document.createElement("canvas"), bt({
                element: t,
                parent: u.base_image,
                use_3d_effect: a.jigsaw_use_3d_effect,
                render_stroke: "undefined" != typeof e.piece_margin_style
            }), G({
                logical_parent: t,
                canvas: t.canvas,
                invalidate: !0
            })
        }
        var g = V.content_div,
            w = V.mr_jigtato,
            a = V.global_settings,
            E = V.level_id;
        g.innerHTML = "";
        var tt = w.game_data.jigsaw,
            ei = w.game_data.trophy_list,
            B = w.player_data,
            nt = w.game_data.entry_list[E],
            K = w.set_name,
            Q = a.game_type,
            y = {},
            D = {},
            e = y.game_instance = {},
            et = tt.difficulty_levels[B.selected_difficulty];
        e.difficulty_level = B.selected_difficulty, e.get_piece_count = function() {
            return e.tile_x * e.tile_y
        }, e.intro_audio_count = 0, !a.is_kiosk && a.use_social_media_buttons && Z();
        var mt = ["answer-correct-10865990.ogg", "answer-correct-23303730.ogg", "answer-correct-25513672.ogg", "answer-correct-25513693.ogg", "answer-correct-37240671.ogg", "answer-correct-37240686.ogg", "answer-correct-37241588.ogg", "answer-correct-37241627.ogg"],
            Yt = ["global-pick up.ogg", "global-put down.ogg", "answer-give up.ogg", "fireworks-1.ogg", "fireworks-2.ogg", "fireworks-3.ogg", "fireworks-4.ogg"].concat(mt);
        X({
            parent: a,
            dir: a.audio_dir + "/",
            audio_list: Yt,
            type: "is_sound_effect"
        }), a.ambient_music.last_on_state = a.ambient_music_on, a.ambient_music_on = !1, a.ambient_music.load_ambient_music(w.game_data.ambient_music, w.game_data.ambient_music_start), Vt();
        var k = (performance.now(), y.screen_refresh = function() {
            e.do_screen_refresh = !0
        });
        if (e.force_screen_refresh = 0, li(), void
            function() {
                var i, t = {},
                    r = void 0,
                    n = void 0;
                Object.defineProperty(t, "scalemin", {
                    value: 1,
                    enumerable: !1,
                    writable: !0
                }), Object.defineProperty(t, "scalemax", {
                    value: 4,
                    enumerable: !1,
                    writable: !0
                }), Object.defineProperty(t, "scale", {
                    enumerable: !0,
                    get: function() {
                        return i
                    },
                    set: function(e) {
                        i = e, k()
                    }
                }), Object.defineProperty(t, "offset_x", {
                    enumerable: !0,
                    get: function() {
                        return r
                    },
                    set: function(e) {
                        if ("undefined" != typeof d) {
                            if (e > 0) e = 0;
                            else {
                                var n = parseFloat(window.getComputedStyle(d).width),
                                    t = (1 - i) * n;
                                t > e && (e = t)
                            }
                            e = Math.round(1e4 * e) / 1e4, r = e, k()
                        }
                    }
                }), Object.defineProperty(t, "offset_y", {
                    enumerable: !0,
                    get: function() {
                        return n
                    },
                    set: function(e) {
                        if ("undefined" != typeof d) {
                            if (e > 0) e = 0;
                            else {
                                var r = parseFloat(window.getComputedStyle(d).height),
                                    t = (1 - i) * r;
                                t > e && (e = t)
                            }
                            e = Math.round(1e4 * e) / 1e4, n = e, k()
                        }
                    }
                }), Object.defineProperty(e, "zoom", {
                    enumerable: !0,
                    get: function() {
                        return t
                    },
                    set: function(e) {
                        t.scale = e.scale, t.offset_x = e.offset_x, t.offset_y = e.offset_y
                    }
                })
            }(), g.style.overflow = "hidden", r(g), y.menu_item_list = [w.menu.generic.about, w.menu.generic.ogle_trophies, {
                text: "Restart",
                action: function(r, e, t) {
                    var i = smoke.confirm('<span style="color: #cc0000; font-weight: bold">Warning:</span> this will reset the puzzle piece positions and generate new puzzle pieces. Continue?', function(i) {
                        return 0 == i ? void e() : void t.init.current_game.help_menu_obj.close({
                            callback: function() {
                                $t({
                                    callback: function() {
                                        d.inner.setTimeout(Zt, 1e3)
                                    }
                                })
                            }
                        })
                    });
                    l(i)
                }
            }, {
                text: "Back to Main Menu",
                action: function(i, r, t) {
                    {
                        var e = t.init;
                        e.current_game
                    }
                    a.IS_WEBVIEW ? window.history.back() : e.mr_jigtato.history_control.load_page({
                        page: "select_jigsaw"
                    })
                }
            }, {
                text: "Rearrange Jigsaw Pieces",
                action: function() {
                    rt(c.current_category.piece_container), W(), y.help_menu_obj.close()
                }
            }, w.menu.jigsaw.toggle_categories, w.menu.jigsaw.open_misc_config_menu, w.menu.jigsaw.show_mini_hint_image, {
                text: "undefined" == typeof w.game_data.play_intro_audio_text ? "Play Puzzle Intro Audio" : w.game_data.play_intro_audio_text,
                action: function(i, t) {
                    e.intro_audio_count += 1, w.play_intro_audio({
                        level_id: V.level_id,
                        count: e.intro_audio_count,
                        parent: d.inner
                    }), t()
                }
            }, w.menu.jigsaw.open_visual_settings_menu, w.menu.generic.open_audio_settings_menu], !a.is_kiosk && a.use_social_media_buttons) {
            var vt = y.social_sharing_button_container = document.createElement("div");
            vt.className = "jt-play-social_sharing_button_container", g.appendChild(vt), O({
                parent: vt,
                button_class: "jt-social_button_small"
            })
        }
        var yt = y.trophy_ribbon = ii({
                parent: g
            }),
            p = y.game_title = document.createElement("div");
        p.className = "jt-play-title", p.hidden_top_value = "-155%", r(p);
        var Y = y.bottom_bar = document.createElement("div");
        Y.className = "jt-play-bottom_bar jt-play-main_image_border_width", r(Y), g.appendChild(p), p.hide_title = function(e) {
            var e = e || {};
            "undefined" == typeof e.callback && (e.callback = function() {}), "undefined" == typeof e.duration && (e.duration = 500), a.jigsaw_minimal_ui && (e.duration = 0), c.style.display = "", 0 == e.duration ? (p.inner.style.top = p.hidden_top_value, c.style.top = 0, p.inner.style.display = "none", e.callback()) : (TweenMax.to(c, e.duration / 1e3, {
                parseTransform: !0,
                ease: Linear.ease,
                css: {
                    top: 0
                }
            }), TweenMax.to(p.inner, e.duration / 1e3, {
                parseTransform: !0,
                ease: Linear.ease,
                css: {
                    top: p.hidden_top_value,
                    display: "none"
                }
            }), d.inner.setTimeout(e.callback, e.duration))
        }, p.show_title = function(e) {
            var e = e || {};
            "undefined" == typeof e.callback && (e.callback = function() {}), "undefined" == typeof e.duration && (e.duration = 500), a.jigsaw_minimal_ui && (e.duration = 0), p.inner.style.display = "", 0 == e.duration ? (c.style.top = p.hidden_top_value, p.inner.style.top = 0, c.style.display = "none", e.callback()) : (TweenMax.to(p.inner, e.duration / 1e3, {
                parseTransform: !0,
                ease: Linear.ease,
                css: {
                    top: 0
                }
            }), TweenMax.to(c, e.duration / 1e3, {
                parseTransform: !0,
                ease: Linear.ease,
                css: {
                    top: p.hidden_top_value,
                    display: "none"
                }
            }), d.inner.setTimeout(e.callback, e.duration))
        }, p.autoshow_title = function(e) {
            p[a.use_categories ? "hide_title" : "show_title"](e)
        }, p.show_title_animation = function(i) {
            function n() {
                setTimeout(function() {
                    g.appendChild(e)
                }, 0);
                var o = e.childNodes[0],
                    n = new SplitText(o, {
                        type: "chars, words"
                    }).chars,
                    u = Math.floor(n.length / 2),
                    a = new TimelineLite,
                    s = function() {
                        (null == t || null == t.parentNode) && TweenLite.killTweensOf(r)
                    },
                    c = !0;
                if (c)
                    for (var i = 0; i < n.length; i++) {
                        for (var h = n[i].children, l = 0; l < h.length; l++) h[l].style.opacity = 0;
                        a.from(n[i], 1.8, {
                            onUpdate: s,
                            x: 40 * (i - u),
                            opacity: 0,
                            ease: Power2.easeOut
                        }, .05 * i * 18 / n.length)
                    }
                return a.fromTo(o, 3 + 1 * c, {
                    onUpdate: s,
                    z: 250,
                    y: 74,
                    visibility: "visible"
                }, {
                    z: -200,
                    ease: SlowMo.ease.config(.1, .9)
                }, 0), a.to(o, 1.5, {
                    onUpdate: s,
                    rotationX: -720,
                    autoAlpha: 0,
                    scale: .3,
                    ease: Power2.easeInOut
                }, "-=1.5"), a
            }
            "undefined" == typeof i.callback && (i.callback = function() {});
            var e = p.inner.cloneNode(!0);
            e.className = "jt-select_screen-title-center-inner", e.style.display = "", e.style.top = "", p.autoshow_title({
                duration: 0
            });
            var r = new TimelineMax;
            r.eventCallback("onComplete", function() {
                e.parentNode && (g.removeChild(e), i.callback())
            }), setTimeout(function() {
                r.add(n())
            }, 0), TweenLite.set(e, {
                perspective: 700,
                visibility: "visible"
            })
        };
        var c = y.category_deck = document.createElement("div");
        c.className = "jt-jigsaw-category_deck", c.item_under_mouse = null, p.appendChild(c), c.edit_button = document.createElement("img"), c.edit_button.className = "jt-op_button jt-op_button-edit" + (a.is_phone_or_tablet ? " hoverable jt-op_button-edit-colored" : ""), c.edit_button.src = a["/"] + "images/gui/gui-item_edit.png", c.appendChild(c.edit_button), c.add_button = document.createElement("img"), c.add_button.className = "jt-op_button jt-op_button-add" + (a.is_phone_or_tablet ? " hoverable jt-op_button-add-colored" : ""), c.add_button.src = a["/"] + "images/gui/gui-item_expand_or_add.png", c.appendChild(c.add_button), c.basket_button = document.createElement("img"), c.basket_button.className = "jt-op_button jt-op_button-basket" + (a.is_phone_or_tablet ? " hoverable jt-op_button-basket-colored" : ""), c.basket_button.piece_list = [], c.basket_button.is_selected = !1, c.basket_button.src = a["/"] + "images/gui/gui-basket.png", c.appendChild(c.basket_button), c.remove_button = document.createElement("img"), c.remove_button.className = "jt-op_button jt-op_button-remove" + (a.is_phone_or_tablet ? " hoverable jt-op_button-remove-colored" : ""), c.remove_button.src = a["/"] + "images/gui/gui-item_remove.png", c.appendChild(c.remove_button), c.container = document.createElement("div"), c.container.className = "jt-jigsaw-category_deck-container", c.appendChild(c.container), c.add_category = function(o) {
            var t = document.createElement("div");
            t.className = "jt-jigsaw-category_deck-category jt-play-main_image_border_width jt-button_generic hoverable", c.container.appendChild(t), t.inner = document.createElement("div"), t.appendChild(t.inner), c.set_category_name(t, o);
            var i = t.piece_container = document.createElement("div");
            i.className = "jt-jigsaw-piece_container", Xt(i);
            tt.difficulty_levels[e.difficulty_level];
            i.piece_matrix = [];
            for (var r = 0, s = e.area.length; s > r; r++) {
                var l = e.area[r];
                i.piece_matrix[r] = [];
                for (var n = 0; n < l.piece_row_max; n++) i.piece_matrix[r][n] = []
            }
            return "undefined" == typeof c.current_category && (c.select_category(t), c.original_category = t), t.addEventListener(a.events.POINT, function(e) {
                c.select_category(e.currentTarget), W()
            }), t.is_category_deck_item = !0, t
        }, c.set_category_name = function(e, t) {
            var i = p.style.display;
            p.style.display = "block", e.inner.innerHTML = t, e.style.padding = 0, e.style.border = "none", M(e.inner, {
                unit_type: "px",
                transform_scale: g.content_scale
            }), e.style.padding = "", e.style.border = "", p.style.display = i
        }, c.remove_category = function(e) {
            var t = e.piece_container,
                i = t.children;
            if (c.original_category && e != c.original_category) {
                var r = c.original_category.piece_container;
                i.forEach(function(e) {
                    r.appendChild(e)
                })
            } else i.forEach(function(t) {
                e.piece_container.removeChild(t)
            });
            t.parentNode && t.parentNode.removeChild(t), c.original_category && (e != c.original_category ? rt(c.original_category.piece_container, i) : delete c.original_category), 1 == c.container.children.length && delete c.current_category, c.container.removeChild(e)
        }, c.select_category = function(i) {
            c.current_category = i, t.piece_container = i.piece_container, k();
            var r = L;
            if ("undefined" != typeof r)
                for (var n = 0, o = r.length; o > n; n++) {
                    var a = r[n],
                        e = a.sprite;
                    if ("undefined" != typeof e && null != e)
                        if (a.parentNode != c.current_category.piece_container) {
                            if ("undefined" == typeof e.parent) continue;
                            t.piece_sprite_container.removeChild(e)
                        } else {
                            if ("undefined" != typeof e.parent) continue;
                            t.piece_sprite_container.addChild(e)
                        }
                }
            c.container.children.forEach(function(e) {
                if (e == i) var t = "add";
                else var t = "remove";
                e.classList[t]("jt-button_generic-lit")
            }), t.piece_sprite_container.is_cached = !1
        }, c.edit_button.addEventListener(a.events.POINT, function() {
            var e = c.current_category;
            A.stop(), smoke.prompt('Please enter a new name for category "' + e.inner.innerHTML + '".', function(t) {
                return "" === t ? void smoke.alert("You can't set a blank name!", function() {
                    A.resume()
                }) : (A.resume(), void(t !== !1 && (c.set_category_name(e, t), W())))
            })
        }), c.add_button.addEventListener(a.events.POINT, Pt);
        var U = c.basket_button;
        U.addEventListener(a.events.POINT, function(i) {
            var e = i.currentTarget,
                r = 0 == e.piece_list.length;
            e.classList[e.is_selected ? "remove" : "add"]("jt-op_button-basket" + (a.is_phone_or_tablet ? "-colored" : "") + "-selected"), e.is_selected && !r && Pt({
                error: function() {
                    e.piece_list = []
                },
                complete: function() {
                    e.piece_list.forEach(function(t) {
                        e.remove_piece(t, {
                            modify_array: !1
                        })
                    })
                },
                success: function(i) {
                    e.piece_list.forEach(function(e) {
                        i.piece_container.appendChild(e)
                    }), e.piece_list.forEach(function(e) {
                        "undefined" != typeof e.sprite.parent && t.piece_sprite_container.removeChild(e.sprite)
                    }), rt(i.piece_container), e.piece_list = [], W()
                }
            }), e.is_selected = !e.is_selected
        }), U.toggle_piece = function(e, t) {
            -1 != U.piece_list.indexOf(e) ? U.remove_piece(e, t) : U.add_piece(e, t)
        }, U.remove_piece = function(t, e) {
            "undefined" == typeof e && (e = {});
            var r = "undefined" == typeof e.modify_array ? !0 : e.modify_array;
            if (r) {
                var i = U.piece_list.indexOf(t); - 1 != i && U.piece_list.splice(i, 1)
            }
            ut(t)
        }, U.add_piece = function(e, t) {
            "undefined" == typeof t && (t = {});
            var i = "undefined" == typeof t.modify_array ? !0 : t.modify_array;
            P(e), e.canvas = document.createElement("canvas"), bt({
                element: e,
                parent: u.base_image,
                use_3d_effect: a.jigsaw_use_3d_effect,
                render_stroke: !0,
                stroke_style: "#e0b270"
            }), G({
                logical_parent: e,
                canvas: e.canvas,
                invalidate: !0
            }), i && U.piece_list.push(e)
        }, c.remove_button.addEventListener(a.events.POINT, function() {
            function t(t) {
                A.resume(), 0 != t && (c.remove_category(e), c.select_category(c.original_category), W())
            }
            A.stop();
            var e = c.current_category;
            return e == c.original_category ? void smoke.alert("You can't remove the initial category!", function() {
                A.resume()
            }) : void(0 == e.piece_container.children.length ? t(!0) : smoke.confirm('Are you sure you want to remove the category "' + e.inner.innerHTML + '"? Its pieces will be added to the first category.', t, {
                ok: "Proceed"
            }))
        });
        var A = y.timer_obj = H({
            parent: p
        });
        y.timer_obj.style.display = a.show_timer ? "" : "none", r(A), y.refresh_gui_display = function() {
            var e = y.trophy_ribbon;
            e.style.display = !a.jigsaw_minimal_ui && a.show_trophy_ribbon ? "" : "none", a.jigsaw_minimal_ui ? (d.style.borderWidth = 0, p.classList.add("minimal_ui"), p.classList.add("jt-play-title-minimal_ui"), p.inner.classList.add("jt-play-title-inner-minimal_ui"), g.classList.add("jt-play-action_area-minimal_ui"), y.menu_button_obj.classList.add("jt-play-menu_button-minimal_ui"), y.timer_obj.classList.add("jt-play-timer-minimal_ui"), y.menu_button_obj.setAttribute("current_text", "M"), g.appendChild(y.timer_obj), g.appendChild(y.menu_button_obj), g.appendChild(p), Y.parentNode == g && g.removeChild(Y)) : (d.style.borderWidth = "", p.classList.remove("jt-play-title-minimal_ui"), p.inner.classList.remove("jt-play-title-inner-minimal_ui"), d.classList.remove("jt-play-action_area-minimal_ui"), y.menu_button_obj.classList.remove("jt-play-menu_button-minimal_ui"), y.timer_obj.classList.remove("jt-play-timer-minimal_ui"), g.insertBefore(p, d), g.insertBefore(Y, d.nextSibling), p.insertBefore(y.timer_obj, p.childNodes[0]), p.appendChild(y.menu_button_obj)), Ft()
        };
        var Ht = y.help_menu_obj = F({
                gs: a,
                parent: g,
                current_game: y,
                menu_item_list: y.menu_item_list,
                column_size: 3,
                show_hint_image_options: !0,
                init: V
            }),
            Ot = y.menu_button_obj = T({
                parent: p,
                target: Ht,
                current_game: y,
                menu_class: "jt-play-menu_button",
                back_button_page: "select_jigsaw",
                init: V
            });
        nt.use_image_title ? C({
            image_src: a.get_set_directory(K) + "/puzzle/" + E + "-title.png",
            fix_ie_bug: !0,
            color: "#edd9a7",
            callback: function(e) {
                p.inner = e, p.inner.className = "jt-play-title-inner", p.inner.style.position = "relative", p.inner.style.width = p.inner.width + "px", p.inner.style.height = p.inner.height + "px", p.inner.style.left = 0, p.appendChild(p.inner)
            }
        }) : (p.inner = document.createElement("div"), p.inner.className = "jt-play-title-inner", p.appendChild(p.inner), p.inner.text = document.createElement("p"), p.inner.text.innerHTML = nt.name, p.inner.appendChild(p.inner.text), M(p.inner.text, {
            unit_type: "px",
            transform_scale: g.content_scale
        }));
        var d = document.createElement("div");
        d.className = "jt-play-action_area", d.style.overflow = "hidden", g.appendChild(d), a.is_phone_or_tablet || d.addEventListener("mousedown", function(e) {
            e.preventDefault()
        }), d.inner = document.createElement("div"), d.inner.style.position = "absolute", d.inner.style.width = "100%", d.inner.style.height = "100%", d.inner.style.transformOrigin = "0 0", d.appendChild(d.inner), e.zoom = {
            scale: 1,
            offset_x: 0,
            offset_y: 0
        };
        var at = new PIXI.Stage,
            St = new PIXI.DisplayObjectContainer,
            Dt = new PIXI.DisplayObjectContainer,
            t = g.draw_area = document.createElement("canvas");
        t.className = "jt-draw_area", a.is_webgl = function() {
            var e = document.createElement("canvas"),
                t = e.getContext("webgl");
            if (null != t) return a.canvas_context = "webgl", !0;
            var t = e.getContext("experimental-webgl");
            return null != t ? (a.canvas_context = "experimental-webgl", !0) : (a.canvas_context = "2d", !1)
        }();
        var Qt = new PIXI[1 == a.is_webgl ? "WebGLRenderer" : "CanvasRenderer"](1, 1, {
            transparent: !0,
            clearBeforeRender: !1,
            view: t
        });
        t.renderer = Qt, t.stage = St, t.piece_sprite_container = Dt, t.real_stage = at, at.addChild(St), St.addChild(Dt), t.load_opacity_transition = .5, t.style.pointerEvents = "none", t.bg = document.createElement("canvas"), t.bg.image = new Image, t.bg.image.src = w.background_image_url, t.reposition_and_resize = function() {
            var i = j(g),
                r = o(g),
                e = g.content_scale,
                n = parseFloat(getComputedStyle(d).top),
                l = a.jigsaw_minimal_ui ? 0 : o(Y);
            t.style.left = Math.round((window.innerWidth - i * e) / 2) + "px", t.style.top = Math.round((window.innerHeight - r * e) / 2 + n * e) + "px", t.style.width = i * e + "px", t.style.height = (r - n - l) * e + "px", t.fireworks && t.fireworks.update_size();
            var s = window.getComputedStyle(d);
            t.cached_width = Math.round(parseFloat(s.width)), t.cached_height = Math.round(parseFloat(s.height))
        }, t.reposition_and_resize(), void
        function() {
            switch (e.jigsaw_scale_low_power_sizer = e.difficulty_level >= a.jigsaw_reduce_texture_size ? 2 : 1, e.difficulty_level) {
                case 0:
                    D.cut_multiplier = 1, e.piece_logical_scale = 1 * e.jigsaw_scale_low_power_sizer, e.zoom.scalemax = 2;
                    break;
                case 1:
                    D.cut_multiplier = 1, e.piece_logical_scale = .75 * e.jigsaw_scale_low_power_sizer, e.zoom.scalemax = 2.666;
                    break;
                case 2:
                    D.cut_multiplier = 1, e.piece_logical_scale = .5 * e.jigsaw_scale_low_power_sizer, e.zoom.scalemax = 4;
                    break;
                case 3:
                    D.cut_multiplier = 1, e.piece_logical_scale = .5 * e.jigsaw_scale_low_power_sizer, e.zoom.scalemax = 6
            }
            D.stroke_width = e.piece_logical_scale / e.jigsaw_scale_low_power_sizer
        }();
        var u = y.main_image = document.createElement("div");
        u.className = "jt-play-main_image jt-jigsaw-main_image", r(u), Xt(u), u.classList.add("jt-jigsaw-main_image-active");
        var x = u.base_image = document.createElement("img"),
            S = document.createElement("div");
        S.className = "jt-jigsaw-piece_deck";
        var z, L, h = null;
        x.crossOrigin = "Anonymous", a.get_image(x, K, E, "default"), x.addEventListener("load", function() {
            d.inner.setTimeout(Gt, 30)
        });
        var m = new Image;
        m.src = a.get_set_directory(w.set_name) + "/gui/gui-loading.png", m.logical_parent = t, t.loading_animation = m, m.defer_start = function(e) {
            d.inner.setTimeout(function() {
                m && !m.game_initialized && (m.start(), it(void 0, !0))
            }, e)
        }, m.start = function() {
            1 != !!m.game_initialized && (m.stage.alpha = 1, m.display = !0, at.addChild(m.stage), k())
        }, m.stop = function() {
            m.stage && (m.stage.alpha = 1), m.game_initialized = !0, m.display && (m.display = !1, at.removeChild(m.stage)), k()
        }, m.addEventListener("load", function() {
            if (d.isAttached()) {
                var e = m.width / 2,
                    i = m.height,
                    a = (t.width - e) / 2,
                    o = (t.height - i) / 2;
                m.stage = new PIXI.DisplayObjectContainer;
                var r = document.createElement("canvas");
                r.width = e, r.height = i;
                var s = r.getContext("2d");
                s.drawImage(m, e, 0, e, i, 0, 0, e, i), m.outer = {}, G({
                    logical_parent: m.outer,
                    parent: m.stage,
                    canvas: r
                }), m.outer.sprite.x = a + e / 2, m.outer.sprite.y = o + i / 2, m.outer.sprite.width = e, m.outer.sprite.height = i, m.outer.sprite.pivot.x = e / 2, m.outer.sprite.pivot.y = i / 2;
                var n = document.createElement("canvas");
                n.width = e, n.height = i;
                var s = n.getContext("2d");
                s.drawImage(m, 0, 0), m.inner = {}, G({
                    logical_parent: m.inner,
                    parent: m.stage,
                    canvas: n
                }), m.inner.sprite.x = a, m.inner.sprite.y = o, m.inner.sprite.width = e, m.inner.sprite.height = i, m.start(), it(void 0, !0)
            }
        }), y.refresh_gui_display(), it(void 0, !0);
        var _t = y.set_base_image_size = function() {
                var t = ai();
                x.width = t.width, x.height = t.height, 2 == a.jigsaw_arrange_pieces_on_entire_area && a.jigsaw_image_size_type > 0 && a.jigsaw_minimal_ui && x.naturalHeight <= x.naturalWidth && (e.jigsaw_arrange_pieces_on_entire_area = !0), void
                function() {
                    var r = Math.round(x.naturalHeight / x.naturalWidth * 1e3) / 1e3;
                    switch (e.tile_x = et.tile_x, e.tile_y = et.tile_y, r) {
                        case 1:
                            e.tile_x = e.tile_y;
                            break;
                        case .75:
                            var t = e.tile_x;
                            e.tile_x = e.tile_y, e.tile_y = t;
                            break;
                        case .667:
                            var t = e.tile_y;
                            e.tile_x = e.tile_y, e.tile_y = .75 * t
                    }
                    var i = e.tile_x * e.tile_y / et.piece_column_max / 2;
                    e.area = [{
                        top: 0,
                        height_ratio: 1,
                        piece_row_max: i,
                        piece_column_max: et.piece_column_max
                    }, {
                        top: 0,
                        height_ratio: 1,
                        piece_row_max: i,
                        piece_column_max: et.piece_column_max
                    }]
                }(), Ft(), u.left = (parseFloat(window.getComputedStyle(g).width) - x.width) / 2, u.width = x.width, u.height = x.height;
                var i = u.composite_image;
                i.set_size()
            },
            gt = y.size_pieces = function(e) {
                e.forEach(function(e) {
                    e.calc_width = e.width_float * a.jigsaw_piece_scale_to_actual, e.calc_height = e.height_float * a.jigsaw_piece_scale_to_actual
                }), t.piece_sprite_container.is_cached = !1
            };
        g.cleanup = function() {
            if (a.IS_CORDOVA && a.audio_container[w.last_intro_audio] && (a.audio_container[w.last_intro_audio].src = "", delete a.audio_container[w.last_intro_audio], w.last_intro_audio = ""), t.fireworks && t.fireworks.destroy(), si(), null != t.parentNode && document.body.removeChild(t), A.destroy(), document.removeEventListener(a.events.POINT_MOVE, Bt), a.is_phone_or_tablet ? g.removeEventListener("touchend", q) : (document.removeEventListener("mouseup", q), window.addEventListener("blur", st), window.removeEventListener("mouseout", jt)), g.innerHTML = "", "undefined" != typeof a.ambient_music.last_on_state && (1 == a.ambient_music.last_on_state && (a.ambient_music_on = !0), delete a.ambient_music.last_on_state), "undefined" != typeof z)
                for (var i = 0; i < e.tile_x + 1; i++) {
                    z[i] = [];
                    for (var r = 0; r < e.tile_y + 1; r++) z[i][r] = void 0
                }
            t.piece_container && (t.piece_container.children.forEach(function(e) {
                L.splice(L.indexOf(e), 1);
                var t = e.piece_matrix;
                t && delete t[e.area][e.row][e.column], e.piece_matrix = null, e.width = 0, P(e), e = null
            }), t.piece_container.children = [], delete t.piece_container.piece_matrix, delete t.piece_container), P(u.base_image), P(t.bg), m.inner && P(m.inner), m.outer && P(m.outer), P(u.composite_image), t.stage.removeChild(t.piece_sprite_container), t.real_stage.removeChild(t.stage), t.real_stage.interactionManager.removeEvents(), t.renderer.destroy && t.renderer.destroy(), u.composite_image && (delete u.composite_image.set_size, delete u.composite_image), delete g.draw_area, delete m.logical_parent;
            for (var n in t) delete t[n];
            w = null, a = null, E = null, tt = null, ei = null, B = null, nt = null, K = null, Q = null, y = null, D = null, e = null, et = null, k = null, yt = null, p = null, c = null, U = null, A = null, Ht = null, Ot = null, d = null, t = null, u = null, x = null, S = null, h = null, z = null, L = null, m = null, _t = null, gt = null, W = null, Ut = null, delete g.cleanup
        }, S.drag_active = !1, S.drag_start = function(e) {
            S.drag_active = !0, S.drag_update(e, !0)
        }, S.drag_update = function(o, l) {
            if (0 != S.drag_active) {
                var t = s(o, d),
                    i = t[0] / g.content_scale,
                    r = t[1] / g.content_scale,
                    c = e.zoom.scale,
                    n = e.zoom.offset_x,
                    a = e.zoom.offset_y;
                l || (n += i - S.drag_initial_x, a += r - S.drag_initial_y), e.zoom.offset_x = n, e.zoom.offset_y = a, S.drag_initial_x = i, S.drag_initial_y = r, S.drag_initial_scale = c
            }
        }, S.drag_end = function() {
            S.drag_active = !1
        };
        var dt = void 0,
            W = y.save_puzzle_state = function() {
                var t = {};
                t.game_instance = {
                    jigsaw_initial_show_hint_image: e.jigsaw_initial_show_hint_image,
                    jigsaw_show_hint_image: e.jigsaw_show_hint_image,
                    jigsaw_show_hint_rect: e.jigsaw_show_hint_rect,
                    jigsaw_arrange_pieces_on_entire_area: e.jigsaw_arrange_pieces_on_entire_area,
                    action_area_height: parseFloat(window.getComputedStyle(d.inner).height),
                    base_image_width_to_naturalWidth: x.width / x.naturalWidth
                }, t.counter = y.timer_obj.counter, t.zoom = e.zoom, t.piece_list = [], L.forEach(function(e) {
                    var e = kt(e);
                    delete e.width, delete e.height, t.piece_list.push(e)
                }), t.category_deck = {};
                var r = t.category_deck.container = [];
                c.container.childNodes.forEach(function(t) {
                    var e = {};
                    e.innerHTML = t.childNodes[0].innerHTML, r.push(e);
                    var i = e.pieces = [];
                    t.piece_container.children.forEach(function(e) {
                        i.push({
                            piece_id: e.piece_id
                        })
                    })
                }), t.category_deck.current_category_name = c.current_category.childNodes[0].innerHTML;
                var i = JSON.parse(localStorage["puzzle_states.$keys"]);
                i[Q + "." + E + "." + B.selected_difficulty] = !0, localStorage["puzzle_states.$keys"] = JSON.stringify(i), localStorage["puzzle_states." + Q + "." + E + "." + B.selected_difficulty] = JSON.stringify(t)
            },
            Ut = y.load_puzzle_state = function(o) {
                function s() {
                    var e = {};
                    L.forEach(function(t) {
                        e[t.piece_id] = t
                    });
                    var i = t.category_deck.current_category_name,
                        r = t.category_deck.container;
                    r.forEach(function(t) {
                        var r = c.add_category(t.innerHTML),
                            n = t.pieces,
                            a = r.piece_container;
                        n.forEach(function(t) {
                            var i = e[t.piece_id];
                            a.appendChild(i)
                        }), t.innerHTML == i && c.select_category(r), gt(r.piece_container.children)
                    }), zt() && ot(), o.callback()
                }
                var t = JSON.parse(localStorage["puzzle_states." + Q + "." + E + "." + B.selected_difficulty]);
                e.jigsaw_initial_show_hint_image = t.game_instance.jigsaw_initial_show_hint_image, e.jigsaw_show_hint_image = a.jigsaw_show_hint_image, e.jigsaw_show_hint_rect = a.jigsaw_show_hint_rect, e.jigsaw_arrange_pieces_on_entire_area = t.game_instance.jigsaw_arrange_pieces_on_entire_area;
                var n = t.game_instance.action_area_height,
                    i = t.game_instance.base_image_width_to_naturalWidth;
                if ("undefined" == typeof i && (i = 1), "undefined" != typeof n) var l = parseFloat(window.getComputedStyle(d.inner).height) / n;
                y.timer_obj.counter = t.counter, _t();
                var h = x.width / x.naturalWidth / i;
                e.zoom = t.zoom, z = [];
                for (var r = 0; r < e.tile_x; r++) z[r] = [];
                L = t.piece_list, y.redraw_main_image_and_pieces({
                    piece_rescale: h,
                    top_rescale: l,
                    callback: s
                })
            };
        y.redraw_main_image_and_pieces = function(p) {
            function C() {
                f.restore();
                var i = s.getContext("2d");
                i.save(), _({
                    x: e.piece_margin,
                    y: e.piece_margin,
                    scale: 1 / e.piece_logical_scale,
                    data: v,
                    strokeStyle: "rgba(63,63,63,1)",
                    lineWidth: 0,
                    canvas: s
                }), i.clip(), i.drawImage(h, -e.piece_margin / e.piece_logical_scale, -e.piece_margin / e.piece_logical_scale), i.restore(), i.save(), i.translate(e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale), ct(s), i.restore(), G({
                    parent: t.stage,
                    canvas: s,
                    position: 1,
                    is_2d: !0
                }), s.sprite.x = u.left - e.piece_margin, s.sprite.y = u.top - e.piece_margin, "undefined" != typeof w && w()
            }
            "undefined" == typeof p && (p = {});
            var o = p.piece_rescale,
                S = p.top_rescale || 1,
                w = p.callback;
            e.pieces_in_position_count = 0;
            for (var b = [], m = [], d = 0; d < L.length; d++) {
                var i = L[d];
                if ("undefined" != typeof o && (i.width_float = Math.round(i.width_float * o * 1e3 / 1e3), i.height_float = Math.round(i.height_float * o * 1e3 / 1e3), i.puzzle_left_min = Math.round(i.puzzle_left_min * o * 1e3 / 1e3), i.puzzle_top_min = Math.round(i.puzzle_top_min * o * 1e3 / 1e3), i.width = Math.ceil(i.width_float / e.piece_logical_scale), i.height = Math.ceil(i.height_float / e.piece_logical_scale), i.puzzle_width.forEach(function(t, e) {
                        i.puzzle_width[e] = Math.round(i.puzzle_width[e] * o * 1e3 / 1e3), i.puzzle_height[e] = Math.round(i.puzzle_height[e] * o * 1e3 / 1e3), i.puzzle_left[e] = Math.round(i.puzzle_left[e] * o * 1e3 / 1e3), i.puzzle_top[e] = Math.round(i.puzzle_top[e] * o * 1e3 / 1e3)
                    }), i.side_set = qt(i.side_set, o)), i.width = Math.ceil((i.width_float + 2 * e.piece_margin) / e.piece_logical_scale), i.height = Math.ceil((i.height_float + 2 * e.piece_margin) / e.piece_logical_scale), i.placed) {
                    e.pieces_in_position_count += i.x.length, i.shape_string = J(i.side_set, [-i.puzzle_left_min, -i.puzzle_top_min]), b.push(i);
                    for (var l = 0, y = i.x.length; y > l; l++) z[i.x[l]][i.y[l]] = i
                } else {
                    if (m.push(i), L[d].canvas) var r = L[d];
                    else var r = xt();
                    r.x = n(i.x), r.y = n(i.y), r.zIndex = n(i.zIndex), r.piece_id = i.piece_id, r.width_float = i.width_float, r.height_float = i.height_float, r.width = i.width, r.height = i.height, r.virtual_left = i.virtual_left, r.virtual_top = i.virtual_top * S, r.puzzle_width = n(i.puzzle_width), r.puzzle_height = n(i.puzzle_height), r.puzzle_left_min = i.puzzle_left_min, r.puzzle_top_min = i.puzzle_top_min, r.puzzle_left = n(i.puzzle_left), r.puzzle_top = n(i.puzzle_top), r.side_set = n(i.side_set), r.placed = !1, L[d] = r;
                    for (var l = 0, y = r.x.length; y > l; l++) z[r.x[l]][r.y[l]] = r
                }
            }
            k();
            var E = ft(b),
                g = [];
            m.forEach(function(e) {
                e.side_set.forEach(function(e) {
                    g.push(e)
                })
            }); {
                var v = J(E, [0, 0]),
                    M = v + " " + J(g, [0, 0]),
                    c = x,
                    s = u.composite_image;
                c.naturalWidth / c.width
            }
            s.set_size();
            var h = document.createElement("canvas");
            h.width = s.width, h.height = s.height;
            var f = h.getContext("2d"),
                A = c.naturalWidth,
                T = c.naturalHeight;
            f.drawImage(c, 0, 0, A, T, e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale, c.width / e.piece_logical_scale, c.height / e.piece_logical_scale), f.save(), f.translate(e.piece_margin / e.piece_logical_scale, e.piece_margin / e.piece_logical_scale), a.jigsaw_use_3d_effect && lt({
                canvas: h,
                stroke_width: D.stroke_width,
                cut_multiplier: D.cut_multiplier,
                shape_string: M,
                scale: 1 / e.piece_logical_scale,
                clear_stroke: "undefined" == typeof e.piece_margin_style
            }), Nt({
                piece_grid: z,
                big_canvas: h,
                grid_is_new: !1,
                callback: C
            })
        }
    }

    function ht(i) {
        function a() {
            var t = e.canvas;
            t.style.position = "absolute", t.style.pointerEvents = "none", t.style.zIndex = 1e4, document.body.appendChild(t), o(), r()
        }

        function r() {
            "undefined" != typeof e.proton && (e.requestAnimationFrameID = requestAnimationFrame(r), e.proton.update())
        }

        function o() {
            var i = e.canvas,
                r = e.proton = new Proton,
                t = e.emitter = new Proton.Emitter;
            t.rate = new Proton.Rate(new Proton.Span(2, 2), 1), t.addInitialize(new Proton.Mass(1)), t.addInitialize(new Proton.Radius(1, 2)), t.addInitialize(new Proton.P(new Proton.LineZone(10, i.height, i.width, i.height))), t.addInitialize(new Proton.Life(.8, 1.75)), t.addInitialize(new Proton.V(new Proton.Span(.8, 1.65), new Proton.Span(0, 0, !0), "polar")), t.addBehavior(new Proton.Gravity(.1)), t.addBehavior(new Proton.Color("#ff0000", "random")), t.emit(), r.addEmitter(t);
            var a = e.renderer = new Proton.Renderer("canvas", r, i);
            a.onProtonUpdate = function() {
                var r = e.canvas.getContext("2d"),
                    t = e.canvas_temp.getContext("2d");
                e.canvas_temp.width = e.canvas_temp.width, t.globalAlpha = .9, t.drawImage(e.canvas, 0, 0, i.width, i.height), e.canvas.width = e.canvas.width, r.drawImage(e.canvas_temp, 0, 0, i.width, i.height)
            }, a.start(), t.addEventListener(Proton.PARTICLE_DEAD, function(e) {
                var t = Math.randInt(1, 4);
                n.playAudio(n.audio_dir + "/fireworks-" + t + ".ogg", {
                    audio_type: "sound_effect",
                    blocking: !1
                }), Math.random() < .7 ? s(e.particle) : l(e.particle)
            })
        }

        function s(i) {
            var r = e.proton,
                t = new Proton.Emitter;
            t.rate = new Proton.Rate(new Proton.Span(62, 75), 1), t.addInitialize(new Proton.Mass(1)), t.addInitialize(new Proton.Radius(1, 2)), t.addInitialize(new Proton.Life(.9, 2.5)), t.addInitialize(new Proton.V(new Proton.Span(.4, .8), new Proton.Span(0, 360), "polar")), t.addBehavior(new Proton.RandomDrift(1, 1, .005)), t.addBehavior(new Proton.Alpha(1, 0)), t.addBehavior(new Proton.Gravity(.3));
            var n = Math.random() > .3 ? Proton.MathUtils.randomColor() : "random";
            t.addBehavior(new Proton.Color(n)), t.p.x = i.p.x, t.p.y = i.p.y, t.emit("once", !0), r.addEmitter(t)
        }

        function l(i) {
            var r = e.proton,
                t = new Proton.Emitter;
            t.rate = new Proton.Rate(new Proton.Span(50, 60), 1), t.addInitialize(new Proton.Mass(1)), t.addInitialize(new Proton.Radius(4, 8)), t.addInitialize(new Proton.Life(1, 2)), t.addInitialize(new Proton.V([.2, .4], new Proton.Span(0, 360), "polar")), t.addBehavior(new Proton.Alpha(1, 0)), t.addBehavior(new Proton.Scale(1, .1)), t.addBehavior(new Proton.Gravity(.09));
            var n = Proton.MathUtils.randomColor();
            t.addBehavior(new Proton.Color(n)), t.p.x = i.p.x, t.p.y = i.p.y, t.emit("once", !0), r.addEmitter(t)
        }
        var n = i.gs,
            t = i.draw_area,
            e = this;
        return e.destroy = function() {
            null != e.canvas.parentNode && e.canvas.parentNode.removeChild(e.canvas), e.proton.destroy(), cancelAnimationFrame(e.requestAnimationFrameID)
        }, e.update_size = function() {
            if ("undefined" == typeof e.canvas || e.canvas.width_full != t.width || e.canvas.height_full != t.height) {
                "undefined" != typeof e.canvas && e.destroy();
                var i = e.canvas = document.createElement("canvas");
                i.width_full = t.width, i.height_full = t.height, i.width = t.width / 5, i.height = t.height / 5;
                var r = e.canvas_temp = document.createElement("canvas");
                r.width = t.width / 5, r.height = t.height / 5, a()
            }
            var i = e.canvas;
            i.style.width = t.style.width, i.style.height = t.style.height, i.style.left = t.style.left, i.style.top = t.style.top
        }, e.update_size(), this
    }

    function ut(r) {
        function a() {
            e.is_active || (e.title_index = (e.title_index + 1) % e.title_list.length, e.innerHTML = e.title_list[e.title_index]), e.setTimeout(a, 4e3)
        }
        var n = r.select_screen,
            o = (r.content_div, r.mr_jigtato),
            t = r.gs,
            s = n.header,
            e = document.createElement("div");
        return e.className = "jt-select_screen-header-show_hint_image jt-select_screen-header-size-2 jt-button hoverable", e.title_list = ["Challenge a friend!", "Earn extra puzzle packs!", "Get 9 gems per friend!"], e.title_index = e.title_list.length - 1, a(), e.addEventListener(t.events.POINT, function() {
            e.toggle()
        }), e.toggle = function() {
            e.is_active ? e.deactivate() : e.activate()
        }, e.activate = function() {
            c({
                gs: t,
                error: function() {
                    smoke.alert("You must log in to Google Play to use this feature!")
                },
                success: function() {
                    e.is_active = !0, s.querySelectorAll(".jt-button").forEach(function(t) {
                        t != e && t != n.difficulty_level_button && (t.style.display = "none")
                    }), e.classList.remove("jt-select_screen-header-size-2"), e.classList.add("jt-select_screen-header-size-4"), e.innerHTMLoriginal = e.innerHTML, e.innerHTML = "Pick a puzzle to create the challenge with!"
                }
            })
        }, e.deactivate = function() {
            e.is_active = !1, s.querySelectorAll(".jt-button").forEach(function(t) {
                t != e && t != n.difficulty_level_button && (t.style.display = "")
            }), e.classList.add("jt-select_screen-header-size-2"), e.classList.remove("jt-select_screen-header-size-4"), e.innerHTML = e.innerHTMLoriginal
        }, e.select_puzzle = function(g) {
            function _() {
                var n = smoke.prompt("Type in your frenemy's email(s) to send them your challenge!", function(n) {
                    return n === !1 ? void e.deactivate() : void c({
                        gs: t,
                        error: function() {
                            e.deactivate(), smoke.alert("You must log in to Google Play to use this feature!")
                        },
                        success: function() {
                            i({
                                file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (t.DEBUG ? "-beta" : "") + ".php?action=social_challenge_a_friend&user_id=" + t.account.user_id + "&internal_access_token=" + t.account.internal_access_token + "&puzzle_name=" + r + "&selected_difficulty=" + a + "&best_time=" + l + "&email_address_list=" + n,
                                error: function(i) {
                                    t.errormessage(i, e.deactivate)
                                },
                                request_method: "POST",
                                async: !0,
                                success: function() {
                                    e.deactivate();
                                    var t = smoke.alert("Your challenge has been sent! If your frenemy(ies) download the game and enter your unique code for the first time (specified in the email), they will receive access to the puzzle you shared, and both of you will receive 9 gems each!");
                                    t.dialog.text.style.textAlign = "left", t.dialog.text.style.textIndent = "1em", t.dialog.buttons.ok.innerHTML = "Excellent!"
                                }
                            })
                        }
                    })
                });
                n.dialog.buttons.ok.innerHTML = "Send!"
            }
            var r = g.level_id,
                h = o.player_data,
                a = h.selected_difficulty,
                d = o.game_data.jigsaw.difficulty_levels[a].name.capitalize(),
                n = t.jigsaw_show_hint_image,
                s = h.jigsaw.best_times[+n];
            if ("undefined" == typeof s[r] || "undefined" == typeof s[r][a]) {
                n = !n;
                var s = h.jigsaw.best_times[+n]
            }
            if ("undefined" == typeof s[r]) return void smoke.alert("You didn't finish this puzzle!");
            if ("undefined" == typeof s[r][a]) return void smoke.alert("You didn't finish the \"" + d + '" level for this puzzle! Select a different difficulty level.');
            var l = s[r][a],
                p = (l - l % 60) / 60,
                f = l % 60,
                m = (p > 0 ? p + " minutes, " : "") + f + " seconds",
                u = smoke.alert('Your best time on "' + r.capitalize().replace(/_/g, " ") + '" in ' + d + " mode is " + m + ", with the hint image " + (1 == n ? "ON" : "OFF") + ".", _);
            u.dialog.text.style.textAlign = "left", u.dialog.text.style.textIndent = "1em", u.dialog.buttons.ok.innerHTML = "Continue..."
        }, e
    }

    function k(e) {
        function i() {
            lt(), t.challenge_code_request_asked = !0;
            var i = smoke.confirm('If you received a CHALLENGE CODE from a friend, enter one to gain 9 "gems".' + e.extra_text, function(r) {
                    if (r === !1) return void e.callback();
                    var i = smoke.prompt("", function(i) {
                        A({
                            gs: t,
                            challenge_code: i,
                            error: function() {
                                k(e)
                            },
                            success: e.callback
                        })
                    });
                    i.dialog.text.parentNode.removeChild(i.dialog.text)
                }),
                n = (i.dialog, i.dialog.text);
            n.style.textAlign = "left", n.style.textIndent = "1em", i.buttons.ok.innerHTML = "Enter It", i.buttons.cancel.innerHTML = "No Challenge Code", r(i.buttons)
        }
        var t = e.gs;
        "undefined" == typeof e.callback && (e.callback = function() {}), "undefined" == typeof e.extra_text && (e.extra_text = ""), c({
            gs: t,
            error: e.callback,
            success: function() {
                if ("undefined" != typeof t.android.INSTALL_REFERRER || "undefined" != typeof t.account.email_address) {
                    var r = "";
                    "undefined" != typeof t.android.INSTALL_REFERRER && (r = function() {
                        var e = "";
                        return INSTALL_REFERRER.split(";").findIndex(function(i) {
                            var t = i.split("=");
                            if (1 != t.length && "S.referrer" == t[0]) {
                                var t = decodeURIComponent(t[1]).split("=");
                                if (1 != t.length) return e = t[1], !0
                            }
                        }), e
                    }());
                    var r = t.android.INSTALL_REFERRER;
                    A({
                        gs: t,
                        challenge_code: r,
                        error: i,
                        success: e.callback
                    })
                } else i()
            }
        })
    }

    function A(e) {
        var t = e.gs,
            r = "undefined" != typeof e.challenge_code ? e.challenge_code : "",
            n = (e.error, function(i) {
                if (t.challenge_code_processed = !0, "undefined" == typeof i || "undefined" == typeof i.gem_amount) return void e.success();
                smoke.alert("CHALLENGE code provided by your frenemy, " + i.challenger_name + ", " + auto_accept + 'accepted. You have received 9 gems and access to the "' + i.puzzle_name.capitalize() + '" puzzle!', e.success), "undefined" != typeof i.gem_amount && (t.account.gem_amount = i.gem_amount)
            });
        i({
            file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (t.DEBUG ? "-beta" : "") + ".php?action=social_accept_challenge&challenge_code=" + r + "&accepter_user_id=" + t.account.user_id + "&internal_access_token=" + t.account.internal_access_token,
            error: function(i) {
                return "" == r ? void n() : void t.errormessage(i, e.error)
            },
            request_method: "POST",
            async: !0,
            success: n
        })
    }
    var E = "safari",
        P = "com.flyingsoft.safari.jigsaw",
        a = !0,
        d = !0,
        e = {
            _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
            _f: String.fromCharCode,
            compressToBase64: function(t) {
                if (null == t) return "";
                var a, r, n, c, h, s, o, l = "",
                    i = 0;
                for (t = e.compress(t); i < 2 * t.length;) i % 2 == 0 ? (a = t.charCodeAt(i / 2) >> 8, r = 255 & t.charCodeAt(i / 2), n = i / 2 + 1 < t.length ? t.charCodeAt(i / 2 + 1) >> 8 : 0 / 0) : (a = 255 & t.charCodeAt((i - 1) / 2), (i + 1) / 2 < t.length ? (r = t.charCodeAt((i + 1) / 2) >> 8, n = 255 & t.charCodeAt((i + 1) / 2)) : r = n = 0 / 0), i += 3, c = a >> 2, h = (3 & a) << 4 | r >> 4, s = (15 & r) << 2 | n >> 6, o = 63 & n, isNaN(r) ? s = o = 64 : isNaN(n) && (o = 64), l = l + e._keyStr.charAt(c) + e._keyStr.charAt(h) + e._keyStr.charAt(s) + e._keyStr.charAt(o);
                return l
            },
            decompressFromBase64: function(t) {
                if (null == t) return "";
                var i, s, l, c, p, u, n, a, o = "",
                    d = 0,
                    r = 0,
                    h = e._f;
                for (t = t.replace(/[^A-Za-z0-9\+\/\=]/g, ""); r < t.length;) p = e._keyStr.indexOf(t.charAt(r++)), u = e._keyStr.indexOf(t.charAt(r++)), n = e._keyStr.indexOf(t.charAt(r++)), a = e._keyStr.indexOf(t.charAt(r++)), s = p << 2 | u >> 4, l = (15 & u) << 4 | n >> 2, c = (3 & n) << 6 | a, d % 2 == 0 ? (i = s << 8, 64 != n && (o += h(i | l)), 64 != a && (i = c << 8)) : (o += h(i | s), 64 != n && (i = l << 8), 64 != a && (o += h(i | c))), d += 3;
                return e.decompress(o)
            },
            compressToUTF16: function(a) {
                if (null == a) return "";
                var o, t, i, r = "",
                    s = 0,
                    n = e._f;
                for (a = e.compress(a), o = 0; o < a.length; o++) switch (t = a.charCodeAt(o), s++) {
                    case 0:
                        r += n((t >> 1) + 32), i = (1 & t) << 14;
                        break;
                    case 1:
                        r += n(i + (t >> 2) + 32), i = (3 & t) << 13;
                        break;
                    case 2:
                        r += n(i + (t >> 3) + 32), i = (7 & t) << 12;
                        break;
                    case 3:
                        r += n(i + (t >> 4) + 32), i = (15 & t) << 11;
                        break;
                    case 4:
                        r += n(i + (t >> 5) + 32), i = (31 & t) << 10;
                        break;
                    case 5:
                        r += n(i + (t >> 6) + 32), i = (63 & t) << 9;
                        break;
                    case 6:
                        r += n(i + (t >> 7) + 32), i = (127 & t) << 8;
                        break;
                    case 7:
                        r += n(i + (t >> 8) + 32), i = (255 & t) << 7;
                        break;
                    case 8:
                        r += n(i + (t >> 9) + 32), i = (511 & t) << 6;
                        break;
                    case 9:
                        r += n(i + (t >> 10) + 32), i = (1023 & t) << 5;
                        break;
                    case 10:
                        r += n(i + (t >> 11) + 32), i = (2047 & t) << 4;
                        break;
                    case 11:
                        r += n(i + (t >> 12) + 32), i = (4095 & t) << 3;
                        break;
                    case 12:
                        r += n(i + (t >> 13) + 32), i = (8191 & t) << 2;
                        break;
                    case 13:
                        r += n(i + (t >> 14) + 32), i = (16383 & t) << 1;
                        break;
                    case 14:
                        r += n(i + (t >> 15) + 32, (32767 & t) + 32), s = 0
                }
                return r + n(i + 32)
            },
            decompressFromUTF16: function(a) {
                if (null == a) return "";
                for (var i, t, r = "", s = 0, o = 0, n = e._f; o < a.length;) {
                    switch (t = a.charCodeAt(o) - 32, s++) {
                        case 0:
                            i = t << 1;
                            break;
                        case 1:
                            r += n(i | t >> 14), i = (16383 & t) << 2;
                            break;
                        case 2:
                            r += n(i | t >> 13), i = (8191 & t) << 3;
                            break;
                        case 3:
                            r += n(i | t >> 12), i = (4095 & t) << 4;
                            break;
                        case 4:
                            r += n(i | t >> 11), i = (2047 & t) << 5;
                            break;
                        case 5:
                            r += n(i | t >> 10), i = (1023 & t) << 6;
                            break;
                        case 6:
                            r += n(i | t >> 9), i = (511 & t) << 7;
                            break;
                        case 7:
                            r += n(i | t >> 8), i = (255 & t) << 8;
                            break;
                        case 8:
                            r += n(i | t >> 7), i = (127 & t) << 9;
                            break;
                        case 9:
                            r += n(i | t >> 6), i = (63 & t) << 10;
                            break;
                        case 10:
                            r += n(i | t >> 5), i = (31 & t) << 11;
                            break;
                        case 11:
                            r += n(i | t >> 4), i = (15 & t) << 12;
                            break;
                        case 12:
                            r += n(i | t >> 3), i = (7 & t) << 13;
                            break;
                        case 13:
                            r += n(i | t >> 2), i = (3 & t) << 14;
                            break;
                        case 14:
                            r += n(i | t >> 1), i = (1 & t) << 15;
                            break;
                        case 15:
                            r += n(i | t), s = 0
                    }
                    o++
                }
                return e.decompress(r)
            },
            compress: function(f) {
                if (null == f) return "";
                var r, n, _, u = {},
                    d = {},
                    h = "",
                    p = "",
                    a = "",
                    l = 2,
                    m = 3,
                    o = 2,
                    s = "",
                    t = 0,
                    i = 0,
                    c = e._f;
                for (_ = 0; _ < f.length; _ += 1)
                    if (h = f.charAt(_), Object.prototype.hasOwnProperty.call(u, h) || (u[h] = m++, d[h] = !0), p = a + h, Object.prototype.hasOwnProperty.call(u, p)) a = p;
                    else {
                        if (Object.prototype.hasOwnProperty.call(d, a)) {
                            if (a.charCodeAt(0) < 256) {
                                for (r = 0; o > r; r++) t <<= 1, 15 == i ? (i = 0, s += c(t), t = 0) : i++;
                                for (n = a.charCodeAt(0), r = 0; 8 > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1
                            } else {
                                for (n = 1, r = 0; o > r; r++) t = t << 1 | n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n = 0;
                                for (n = a.charCodeAt(0), r = 0; 16 > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1
                            }
                            l--, 0 == l && (l = Math.pow(2, o), o++), delete d[a]
                        } else
                            for (n = u[a], r = 0; o > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1;
                        l--, 0 == l && (l = Math.pow(2, o), o++), u[p] = m++, a = String(h)
                    }
                if ("" !== a) {
                    if (Object.prototype.hasOwnProperty.call(d, a)) {
                        if (a.charCodeAt(0) < 256) {
                            for (r = 0; o > r; r++) t <<= 1, 15 == i ? (i = 0, s += c(t), t = 0) : i++;
                            for (n = a.charCodeAt(0), r = 0; 8 > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1
                        } else {
                            for (n = 1, r = 0; o > r; r++) t = t << 1 | n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n = 0;
                            for (n = a.charCodeAt(0), r = 0; 16 > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1
                        }
                        l--, 0 == l && (l = Math.pow(2, o), o++), delete d[a]
                    } else
                        for (n = u[a], r = 0; o > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1;
                    l--, 0 == l && (l = Math.pow(2, o), o++)
                }
                for (n = 2, r = 0; o > r; r++) t = t << 1 | 1 & n, 15 == i ? (i = 0, s += c(t), t = 0) : i++, n >>= 1;
                for (;;) {
                    if (t <<= 1, 15 == i) {
                        s += c(t);
                        break
                    }
                    i++
                }
                return s
            },
            decompress: function(f) {
                if (null == f) return "";
                if ("" == f) return null;
                var g, d, h, r, a, n, i, o, s = [],
                    l = 4,
                    c = 4,
                    p = 3,
                    u = "",
                    m = "",
                    _ = e._f,
                    t = {
                        string: f,
                        val: f.charCodeAt(0),
                        position: 32768,
                        index: 1
                    };
                for (d = 0; 3 > d; d += 1) s[d] = d;
                for (r = 0, n = Math.pow(2, 2), i = 1; i != n;) a = t.val & t.position, t.position >>= 1, 0 == t.position && (t.position = 32768, t.val = t.string.charCodeAt(t.index++)), r |= (a > 0 ? 1 : 0) * i, i <<= 1;
                switch (g = r) {
                    case 0:
                        for (r = 0, n = Math.pow(2, 8), i = 1; i != n;) a = t.val & t.position, t.position >>= 1, 0 == t.position && (t.position = 32768, t.val = t.string.charCodeAt(t.index++)), r |= (a > 0 ? 1 : 0) * i, i <<= 1;
                        o = _(r);
                        break;
                    case 1:
                        for (r = 0, n = Math.pow(2, 16), i = 1; i != n;) a = t.val & t.position, t.position >>= 1, 0 == t.position && (t.position = 32768, t.val = t.string.charCodeAt(t.index++)), r |= (a > 0 ? 1 : 0) * i, i <<= 1;
                        o = _(r);
                        break;
                    case 2:
                        return ""
                }
                for (s[3] = o, h = m = o;;) {
                    if (t.index > t.string.length) return "";
                    for (r = 0, n = Math.pow(2, p), i = 1; i != n;) a = t.val & t.position, t.position >>= 1, 0 == t.position && (t.position = 32768, t.val = t.string.charCodeAt(t.index++)), r |= (a > 0 ? 1 : 0) * i, i <<= 1;
                    switch (o = r) {
                        case 0:
                            for (r = 0, n = Math.pow(2, 8), i = 1; i != n;) a = t.val & t.position, t.position >>= 1, 0 == t.position && (t.position = 32768, t.val = t.string.charCodeAt(t.index++)), r |= (a > 0 ? 1 : 0) * i, i <<= 1;
                            s[c++] = _(r), o = c - 1, l--;
                            break;
                        case 1:
                            for (r = 0, n = Math.pow(2, 16), i = 1; i != n;) a = t.val & t.position, t.position >>= 1, 0 == t.position && (t.position = 32768, t.val = t.string.charCodeAt(t.index++)), r |= (a > 0 ? 1 : 0) * i, i <<= 1;
                            s[c++] = _(r), o = c - 1, l--;
                            break;
                        case 2:
                            return m
                    }
                    if (0 == l && (l = Math.pow(2, p), p++), s[o]) u = s[o];
                    else {
                        if (o !== c) return null;
                        u = h + h.charAt(0)
                    }
                    m += u, s[c++] = h + u.charAt(0), l--, h = u, 0 == l && (l = Math.pow(2, p), p++)
                }
            }
        };
    "undefined" != typeof module && null != module && (module.exports = e), window.addEventListener("load", function() {
        function r(t) {
            var r = i;
            i = !("blur" == t.type) && "visible" == document.visibilityState, r != i && (0 == i ? (e.forEach(function(e) {
                n.push(e[1]), clearTimeout(e[0])
            }), e = []) : (n.forEach(function(e) {
                window.requestAnimationFrame(e)
            }), n = []))
        }
        var e = [],
            n = [];
        window.requestAnimationFrame = function(i) {
            var t = [void 0, i, 15],
                r = setTimeout(function() {
                    var n = performance.now();
                    e.splice(e.indexOf(t), 1), i();
                    var r = 15 - (performance.now() - n);
                    0 > r && (r = 15), t[2] = r
                }, t[2]);
            return t[0] = r, e.push(t), t
        }, window.cancelAnimationFrame = function(t) {
            e.splice(e.indexOf(t), 1), clearTimeout(t[0])
        };
        var t;
        "undefined" != typeof document.hidden ? t = "visibilitychange" : "undefined" != typeof document.mozHidden ? t = "mozvisibilitychange" : "undefined" != typeof document.msHidden ? t = "msvisibilitychange" : "undefined" != typeof document.webkitHidden && (t = "webkitvisibilitychange"), "undefined" != typeof t && window.addEventListener(t, r), window.addEventListener("blur", r), window.addEventListener("focus", r);
        var i = !0
    }), ! function() {
        var i = this,
            e = e || {};
        e.WEBGL_RENDERER = 0, e.CANVAS_RENDERER = 1, e.VERSION = "v1.6.1", e.blendModes = {
            NORMAL: 0,
            ADD: 1,
            MULTIPLY: 2,
            SCREEN: 3,
            OVERLAY: 4,
            DARKEN: 5,
            LIGHTEN: 6,
            COLOR_DODGE: 7,
            COLOR_BURN: 8,
            HARD_LIGHT: 9,
            SOFT_LIGHT: 10,
            DIFFERENCE: 11,
            EXCLUSION: 12,
            HUE: 13,
            SATURATION: 14,
            COLOR: 15,
            LUMINOSITY: 16
        }, e.scaleModes = {
            DEFAULT: 0,
            LINEAR: 0,
            NEAREST: 1
        }, e._UID = 0, "undefined" != typeof Float32Array ? (e.Float32Array = Float32Array, e.Uint16Array = Uint16Array) : (e.Float32Array = Array, e.Uint16Array = Array), e.INTERACTION_FREQUENCY = 30, e.AUTO_PREVENT_DEFAULT = !0, e.RAD_TO_DEG = 180 / Math.PI, e.DEG_TO_RAD = Math.PI / 180, e.RETINA_PREFIX = "@2x", e.dontSayHello = !0, e.defaultRenderOptions = {
            view: null,
            transparent: !1,
            antialias: !1,
            preserveDrawingBuffer: !1,
            resolution: 1,
            clearBeforeRender: !0
        }, e.sayHello = function(t) {
            if (!e.dontSayHello) {
                if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                    var i = ["%c %c %c Pixi.js " + e.VERSION + " - " + t + "  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ", "background: #ff66a5", "background: #ff66a5", "color: #ff66a5; background: #030307;", "background: #ff66a5", "background: #ffc3dc", "background: #ff66a5", "color: #ff2424; background: #fff", "color: #ff2424; background: #fff", "color: #ff2424; background: #fff"];
                    console.log.apply(console, i)
                } else window.console && console.log("Pixi.js " + e.VERSION + " - http://www.pixijs.com/");
                e.dontSayHello = !0
            }
        }, e.Point = function(e, t) {
            this.x = e || 0, this.y = t || 0
        }, e.Point.prototype.clone = function() {
            return new e.Point(this.x, this.y)
        }, e.Point.prototype.set = function(t, e) {
            this.x = t || 0, this.y = e || (0 !== e ? this.x : 0)
        }, e.Point.prototype.constructor = e.Point, e.Rectangle = function(e, t, i, r) {
            this.x = e || 0, this.y = t || 0, this.width = i || 0, this.height = r || 0
        }, e.Rectangle.prototype.clone = function() {
            return new e.Rectangle(this.x, this.y, this.width, this.height)
        }, e.Rectangle.prototype.contains = function(e, t) {
            if (this.width <= 0 || this.height <= 0) return !1;
            var i = this.x;
            if (e >= i && e <= i + this.width) {
                var r = this.y;
                if (t >= r && t <= r + this.height) return !0
            }
            return !1
        }, e.Rectangle.prototype.constructor = e.Rectangle, e.EmptyRectangle = new e.Rectangle(0, 0, 0, 0), e.Polygon = function(t) {
            if (t instanceof Array || (t = Array.prototype.slice.call(arguments)), "number" == typeof t[0]) {
                for (var r = [], i = 0, n = t.length; n > i; i += 2) r.push(new e.Point(t[i], t[i + 1]));
                t = r
            }
            this.points = t
        }, e.Polygon.prototype.clone = function() {
            for (var i = [], t = 0; t < this.points.length; t++) i.push(this.points[t].clone());
            return new e.Polygon(i)
        }, e.Polygon.prototype.contains = function(s, t) {
            for (var i = !1, e = 0, r = this.points.length - 1; e < this.points.length; r = e++) {
                var a = this.points[e].x,
                    n = this.points[e].y,
                    l = this.points[r].x,
                    o = this.points[r].y,
                    c = n > t != o > t && (l - a) * (t - n) / (o - n) + a > s;
                c && (i = !i)
            }
            return i
        }, e.Polygon.prototype.constructor = e.Polygon, e.Circle = function(e, t, i) {
            this.x = e || 0, this.y = t || 0, this.radius = i || 0
        }, e.Circle.prototype.clone = function() {
            return new e.Circle(this.x, this.y, this.radius)
        }, e.Circle.prototype.contains = function(i, r) {
            if (this.radius <= 0) return !1;
            var e = this.x - i,
                t = this.y - r,
                n = this.radius * this.radius;
            return e *= e, t *= t, n >= e + t
        }, e.Circle.prototype.getBounds = function() {
            return new e.Rectangle(this.x - this.radius, this.y - this.radius, 2 * this.radius, 2 * this.radius)
        }, e.Circle.prototype.constructor = e.Circle, e.Ellipse = function(e, t, i, r) {
            this.x = e || 0, this.y = t || 0, this.width = i || 0, this.height = r || 0
        }, e.Ellipse.prototype.clone = function() {
            return new e.Ellipse(this.x, this.y, this.width, this.height)
        }, e.Ellipse.prototype.contains = function(i, r) {
            if (this.width <= 0 || this.height <= 0) return !1;
            var e = (i - this.x) / this.width,
                t = (r - this.y) / this.height;
            return e *= e, t *= t, 1 >= e + t
        }, e.Ellipse.prototype.getBounds = function() {
            return new e.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height)
        }, e.Ellipse.prototype.constructor = e.Ellipse, e.Matrix = function() {
            this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0
        }, e.Matrix.prototype.fromArray = function(e) {
            this.a = e[0], this.b = e[1], this.c = e[3], this.d = e[4], this.tx = e[2], this.ty = e[5]
        }, e.Matrix.prototype.toArray = function(i) {
            this.array || (this.array = new e.Float32Array(9));
            var t = this.array;
            return i ? (t[0] = this.a, t[1] = this.c, t[2] = 0, t[3] = this.b, t[4] = this.d, t[5] = 0, t[6] = this.tx, t[7] = this.ty, t[8] = 1) : (t[0] = this.a, t[1] = this.b, t[2] = this.tx, t[3] = this.c, t[4] = this.d, t[5] = this.ty, t[6] = 0, t[7] = 0, t[8] = 1), t
        }, e.Matrix.prototype.apply = function(i, t) {
            return t = t || new e.Point, t.x = this.a * i.x + this.b * i.y + this.tx, t.y = this.c * i.x + this.d * i.y + this.ty, t
        }, e.Matrix.prototype.applyInverse = function(r, i) {
            i = i || new e.Point;
            var t = 1 / (this.a * this.d + this.b * -this.c);
            return i.x = this.d * t * r.x - this.b * t * r.y + (this.ty * this.b - this.tx * this.d) * t, i.y = this.a * t * r.y - this.c * t * r.x + (this.tx * this.c - this.ty * this.a) * t, i
        }, e.Matrix.prototype.translate = function(e, t) {
            return this.tx += e, this.ty += t, this
        }, e.Matrix.prototype.scale = function(e, t) {
            return this.a *= e, this.d *= t, this.c *= e, this.b *= t, this.tx *= e, this.ty *= t, this
        }, e.Matrix.prototype.rotate = function(i) {
            var e = Math.cos(i),
                t = Math.sin(i),
                r = this.a,
                n = this.c,
                a = this.tx;
            return this.a = r * e - this.b * t, this.b = r * t + this.b * e, this.c = n * e - this.d * t, this.d = n * t + this.d * e, this.tx = a * e - this.ty * t, this.ty = a * t + this.ty * e, this
        }, e.identityMatrix = new e.Matrix, e.determineMatrixArrayType = function() {
            return "undefined" != typeof Float32Array ? Float32Array : Array
        }, e.Matrix2 = e.determineMatrixArrayType(), e.DisplayObject = function() {
            this.position = new e.Point, this.scale = new e.Point(1, 1), this.pivot = new e.Point(0, 0), this.rotation = 0, this.alpha = 1, this.visible = !0, this.hitArea = null, this.buttonMode = !1, this.renderable = !1, this.parent = null, this.stage = null, this.worldAlpha = 1, this._interactive = !1, this.defaultCursor = "pointer", this.worldTransform = new e.Matrix, this.color = [], this.dynamic = !0, this._sr = 0, this._cr = 1, this.filterArea = null, this._bounds = new e.Rectangle(0, 0, 1, 1), this._currentBounds = null, this._mask = null, this._cacheAsBitmap = !1, this._cacheIsDirty = !1
        }, e.DisplayObject.prototype.constructor = e.DisplayObject, e.DisplayObject.prototype.setInteractive = function(e) {
            this.interactive = e
        }, Object.defineProperty(e.DisplayObject.prototype, "interactive", {
            get: function() {
                return this._interactive
            },
            set: function(e) {
                this._interactive = e, this.stage && (this.stage.dirty = !0)
            }
        }), Object.defineProperty(e.DisplayObject.prototype, "worldVisible", {
            get: function() {
                var e = this;
                do {
                    if (!e.visible) return !1;
                    e = e.parent
                } while (e);
                return !0
            }
        }), Object.defineProperty(e.DisplayObject.prototype, "mask", {
            get: function() {
                return this._mask
            },
            set: function(e) {
                this._mask && (this._mask.isMask = !1), this._mask = e, this._mask && (this._mask.isMask = !0)
            }
        }), Object.defineProperty(e.DisplayObject.prototype, "filters", {
            get: function() {
                return this._filters
            },
            set: function(e) {
                if (e) {
                    for (var r = [], t = 0; t < e.length; t++)
                        for (var n = e[t].passes, i = 0; i < n.length; i++) r.push(n[i]);
                    this._filterBlock = {
                        target: this,
                        filterPasses: r
                    }
                }
                this._filters = e
            }
        }), Object.defineProperty(e.DisplayObject.prototype, "cacheAsBitmap", {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(e) {
                this._cacheAsBitmap !== e && (e ? this._generateCachedSprite() : this._destroyCachedSprite(), this._cacheAsBitmap = e)
            }
        }), e.DisplayObject.prototype.updateTransform = function() {
            this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation));
            var e = this.parent.worldTransform,
                t = this.worldTransform,
                p = this.pivot.x,
                d = this.pivot.y,
                n = this._cr * this.scale.x,
                a = -this._sr * this.scale.y,
                o = this._sr * this.scale.x,
                c = this._cr * this.scale.y,
                u = this.position.x - n * p - d * a,
                h = this.position.y - c * d - p * o,
                l = e.a,
                r = e.b,
                i = e.c,
                s = e.d;
            t.a = l * n + r * o, t.b = l * a + r * c, t.tx = l * u + r * h + e.tx, t.c = i * n + s * o, t.d = i * a + s * c, t.ty = i * u + s * h + e.ty, this.worldAlpha = this.alpha * this.parent.worldAlpha
        }, e.DisplayObject.prototype.getBounds = function(t) {
            return t = t, e.EmptyRectangle
        }, e.DisplayObject.prototype.getLocalBounds = function() {
            return this.getBounds(e.identityMatrix)
        }, e.DisplayObject.prototype.setStageReference = function(e) {
            this.stage = e, this._interactive && (this.stage.dirty = !0)
        }, e.DisplayObject.prototype.generateTexture = function(r, n, a) {
            var t = this.getLocalBounds(),
                i = new e.RenderTexture(0 | t.width, 0 | t.height, a, n, r);
            return i.render(this, new e.Point(-t.x, -t.y)), i
        }, e.DisplayObject.prototype.updateCache = function() {
            this._generateCachedSprite()
        }, e.DisplayObject.prototype.toGlobal = function(e) {
            return this.updateTransform(), this.worldTransform.apply(e)
        }, e.DisplayObject.prototype.toLocal = function(e, t) {
            return t && (e = t.toGlobal(e)), this.updateTransform(), this.worldTransform.applyInverse(e)
        }, e.DisplayObject.prototype._renderCachedSprite = function(t) {
            this._cachedSprite.worldAlpha = this.worldAlpha, t.gl ? e.Sprite.prototype._renderWebGL.call(this._cachedSprite, t) : e.Sprite.prototype._renderCanvas.call(this._cachedSprite, t)
        }, e.getAncestorRenderer = function(t) {
            for (;;) {
                if (null == t || "object" != typeof t) return void 0;
                if (t.renderer instanceof e.WebGLRenderer || t.renderer instanceof e.CanvasRenderer) return t.renderer;
                t = t.parent
            }
        }, e.DisplayObject.prototype._generateCachedSprite = function(r) {
            this._cacheAsBitmap = !1;
            var t = this.getLocalBounds();
            if (this._cachedSprite) this._cachedSprite.texture.resize(0 | t.width, 0 | t.height);
            else {
                var n = new e.RenderTexture(0 | t.width, 0 | t.height, e.getAncestorRenderer(this), void 0, r);
                this._cachedSprite = new e.Sprite(n), this._cachedSprite.worldTransform = this.worldTransform
            }
            var i = this._filters;
            this._filters = null, this._cachedSprite.filters = i, this._cachedSprite.texture.render(this, new e.Point(-t.x, -t.y)), this._cachedSprite.anchor.x = -(t.x / t.width), this._cachedSprite.anchor.y = -(t.y / t.height), this._filters = i, this._cacheAsBitmap = !0
        }, e.DisplayObject.prototype._destroyCachedSprite = function() {
            this._cachedSprite && (this._cachedSprite.texture.destroy(!0), this._cachedSprite = null)
        }, e.DisplayObject.prototype._renderWebGL = function(e) {
            e = e
        }, e.DisplayObject.prototype._renderCanvas = function(e) {
            e = e
        }, Object.defineProperty(e.DisplayObject.prototype, "x", {
            get: function() {
                return this.position.x
            },
            set: function(e) {
                this.position.x = e
            }
        }), Object.defineProperty(e.DisplayObject.prototype, "y", {
            get: function() {
                return this.position.y
            },
            set: function(e) {
                this.position.y = e
            }
        }), e.DisplayObjectContainer = function() {
            e.DisplayObject.call(this), this.children = []
        }, e.DisplayObjectContainer.prototype = Object.create(e.DisplayObject.prototype), e.DisplayObjectContainer.prototype.constructor = e.DisplayObjectContainer, Object.defineProperty(e.DisplayObjectContainer.prototype, "width", {
            get: function() {
                return this.scale.x * this.getLocalBounds().width
            },
            set: function(e) {
                var t = this.getLocalBounds().width;
                this.scale.x = 0 !== t ? e / (t / this.scale.x) : 1, this._width = e
            }
        }), Object.defineProperty(e.DisplayObjectContainer.prototype, "height", {
            get: function() {
                return this.scale.y * this.getLocalBounds().height
            },
            set: function(e) {
                var t = this.getLocalBounds().height;
                this.scale.y = 0 !== t ? e / (t / this.scale.y) : 1, this._height = e
            }
        }), e.DisplayObjectContainer.prototype.addChild = function(e) {
            return this.addChildAt(e, this.children.length)
        }, e.DisplayObjectContainer.prototype.addChildAt = function(e, t) {
            if (t >= 0 && t <= this.children.length) return e.parent && e.parent.removeChild(e), e.parent = this, this.children.splice(t, 0, e), this.stage && e.setStageReference(this.stage), e;
            throw new Error(e + "addChildAt: The index " + t + " supplied is out of bounds " + this.children.length)
        }, e.DisplayObjectContainer.prototype.swapChildren = function(e, t) {
            if (e !== t) {
                var i = this.children.indexOf(e),
                    r = this.children.indexOf(t);
                if (0 > i || 0 > r) throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
                this.children[i] = t, this.children[r] = e
            }
        }, e.DisplayObjectContainer.prototype.getChildAt = function(e) {
            if (e >= 0 && e < this.children.length) return this.children[e];
            throw new Error("getChildAt: Supplied index " + e + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller")
        }, e.DisplayObjectContainer.prototype.removeChild = function(e) {
            return this.removeChildAt(this.children.indexOf(e))
        }, e.DisplayObjectContainer.prototype.removeChildAt = function(t) {
            var e = this.getChildAt(t);
            return this.stage && e.removeStageReference(), e.parent = void 0, this.children.splice(t, 1), e
        }, e.DisplayObjectContainer.prototype.removeChildren = function(s, r) {
            var n = s || 0,
                a = "number" == typeof r ? r : this.children.length,
                e = a - n;
            if (e > 0 && a >= e) {
                for (var t = this.children.splice(n, e), i = 0; i < t.length; i++) {
                    var o = t[i];
                    this.stage && o.removeStageReference(), o.parent = void 0
                }
                return t
            }
            if (0 === e && 0 === this.children.length) return [];
            throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")
        }, e.DisplayObjectContainer.prototype.updateTransform = function() {
            if (this.visible && (e.DisplayObject.prototype.updateTransform.call(this), !this._cacheAsBitmap))
                for (var t = 0, i = this.children.length; i > t; t++) this.children[t].updateTransform()
        }, e.DisplayObjectContainer.prototype.getBounds = function(h) {
            if (0 === this.children.length) return e.EmptyRectangle;
            if (h) {
                var d = this.worldTransform;
                this.worldTransform = h, this.updateTransform(), this.worldTransform = d
            }
            for (var t, c, l, r = 1 / 0, n = 1 / 0, o = -1 / 0, a = -1 / 0, u = !1, s = 0, p = this.children.length; p > s; s++) {
                var _ = this.children[s];
                _.visible && (u = !0, t = this.children[s].getBounds(h), r = r < t.x ? r : t.x, n = n < t.y ? n : t.y, c = t.width + t.x, l = t.height + t.y, o = o > c ? o : c, a = a > l ? a : l)
            }
            if (!u) return e.EmptyRectangle;
            var i = this._bounds;
            return i.x = r, i.y = n, i.width = o - r, i.height = a - n, i
        }, e.DisplayObjectContainer.prototype.getLocalBounds = function() {
            var i = this.worldTransform;
            this.worldTransform = e.identityMatrix;
            for (var t = 0, r = this.children.length; r > t; t++) this.children[t].updateTransform();
            var n = this.getBounds();
            return this.worldTransform = i, n
        }, e.DisplayObjectContainer.prototype.setStageReference = function(t) {
            this.stage = t, this._interactive && (this.stage.dirty = !0);
            for (var e = 0, i = this.children.length; i > e; e++) {
                var r = this.children[e];
                r.setStageReference(t)
            }
        }, e.DisplayObjectContainer.prototype.removeStageReference = function() {
            for (var e = 0, t = this.children.length; t > e; e++) {
                var i = this.children[e];
                i.removeStageReference()
            }
            this._interactive && (this.stage.dirty = !0), this.stage = null
        }, e.DisplayObjectContainer.prototype._renderWebGL = function(e) {
            if (this.visible && !(this.alpha <= 0)) {
                if (this._cacheAsBitmap) return void this._renderCachedSprite(e);
                var t, i;
                if (this._mask || this._filters) {
                    for (this._filters && (e.spriteBatch.flush(), e.filterManager.pushFilter(this._filterBlock)), this._mask && (e.spriteBatch.stop(), e.maskManager.pushMask(this.mask, e), e.spriteBatch.start()), t = 0, i = this.children.length; i > t; t++) this.children[t]._renderWebGL(e);
                    e.spriteBatch.stop(), this._mask && e.maskManager.popMask(this._mask, e), this._filters && e.filterManager.popFilter(), e.spriteBatch.start()
                } else
                    for (t = 0, i = this.children.length; i > t; t++) this.children[t]._renderWebGL(e)
            }
        }, e.DisplayObjectContainer.prototype._renderCanvas = function(e) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                if (this._cacheAsBitmap) return void this._renderCachedSprite(e);
                this._mask && e.maskManager.pushMask(this._mask, e);
                for (var t = 0, i = this.children.length; i > t; t++) {
                    var r = this.children[t];
                    r._renderCanvas(e)
                }
                this._mask && e.maskManager.popMask(e)
            }
        }, e.Sprite = function(t) {
            e.DisplayObjectContainer.call(this), this.anchor = new e.Point, this.texture = t, this._width = 0, this._height = 0, this.tint = 16777215, this.blendMode = e.blendModes.NORMAL, t.baseTexture.hasLoaded ? this.onTextureUpdate() : (this.onTextureUpdateBind = this.onTextureUpdate.bind(this), this.texture.addEventListener("update", this.onTextureUpdateBind)), this.renderable = !0
        }, e.Sprite.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Sprite.prototype.constructor = e.Sprite, Object.defineProperty(e.Sprite.prototype, "width", {
            get: function() {
                return this.scale.x * this.texture.frame.width
            },
            set: function(e) {
                this.scale.x = e / this.texture.frame.width, this._width = e
            }
        }), Object.defineProperty(e.Sprite.prototype, "height", {
            get: function() {
                return this.scale.y * this.texture.frame.height
            },
            set: function(e) {
                this.scale.y = e / this.texture.frame.height, this._height = e
            }
        }), e.Sprite.prototype.setTexture = function(e) {
            this.texture = e, this.cachedTint = 16777215
        }, e.Sprite.prototype.onTextureUpdate = function() {
            this._width && (this.scale.x = this._width / this.texture.frame.width), this._height && (this.scale.y = this._height / this.texture.frame.height)
        }, e.Sprite.prototype.getBounds = function(E) {
            var C = this.texture.frame.width,
                S = this.texture.frame.height,
                p = C * (1 - this.anchor.x),
                w = C * -this.anchor.x,
                T = S * (1 - this.anchor.y),
                o = S * -this.anchor.y,
                a = E || this.worldTransform,
                l = a.a,
                c = a.c,
                h = a.b,
                u = a.d,
                d = a.tx,
                s = a.ty,
                _ = l * w + h * o + d,
                f = u * o + c * w + s,
                m = l * p + h * o + d,
                g = u * o + c * p + s,
                v = l * p + h * T + d,
                y = u * T + c * p + s,
                b = l * w + h * T + d,
                x = u * T + c * w + s,
                i = -1 / 0,
                r = -1 / 0,
                t = 1 / 0,
                e = 1 / 0;
            t = t > _ ? _ : t, t = t > m ? m : t, t = t > v ? v : t, t = t > b ? b : t, e = e > f ? f : e, e = e > g ? g : e, e = e > y ? y : e, e = e > x ? x : e, i = _ > i ? _ : i, i = m > i ? m : i, i = v > i ? v : i, i = b > i ? b : i, r = f > r ? f : r, r = g > r ? g : r, r = y > r ? y : r, r = x > r ? x : r;
            var n = this._bounds;
            return n.x = t, n.width = i - t, n.y = e, n.height = r - e, this._currentBounds = n, n
        }, e.Sprite.prototype._renderWebGL = function(e) {
            if (this.visible && !(this.alpha <= 0)) {
                var t, r;
                if (this._mask || this._filters) {
                    var i = e.spriteBatch;
                    for (this._filters && (i.flush(), e.filterManager.pushFilter(this._filterBlock)), this._mask && (i.stop(), e.maskManager.pushMask(this.mask, e), i.start()), i.render(this), t = 0, r = this.children.length; r > t; t++) this.children[t]._renderWebGL(e);
                    i.stop(), this._mask && e.maskManager.popMask(this._mask, e), this._filters && e.filterManager.popFilter(), i.start()
                } else
                    for (e.spriteBatch.render(this), t = 0, r = this.children.length; r > t; t++) this.children[t]._renderWebGL(e)
            }
        }, e.Sprite.prototype._renderCanvas = function(t) {
            if (!(this.visible === !1 || 0 === this.alpha || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) {
                if (this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, t.context.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t), this.texture.valid) {
                    var i = this.texture.baseTexture.resolution / t.resolution;
                    t.context.globalAlpha = this.worldAlpha, t.roundPixels ? t.context.setTransform(this.worldTransform.a, this.worldTransform.c, this.worldTransform.b, this.worldTransform.d, 0 | this.worldTransform.tx, 0 | this.worldTransform.ty) : t.context.setTransform(this.worldTransform.a, this.worldTransform.c, this.worldTransform.b, this.worldTransform.d, this.worldTransform.tx * t.resolution, this.worldTransform.ty * t.resolution), t.smoothProperty && t.scaleMode !== this.texture.baseTexture.scaleMode && (t.scaleMode = this.texture.baseTexture.scaleMode, t.context[t.smoothProperty] = t.scaleMode === e.scaleModes.LINEAR);
                    var n = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width : this.anchor.x * -this.texture.frame.width,
                        a = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height : this.anchor.y * -this.texture.frame.height;
                    16777215 !== this.tint ? (this.cachedTint !== this.tint && (this.cachedTint = this.tint, this.tintedTexture = e.CanvasTinter.getTintedTexture(this, this.tint)), t.context.drawImage(this.tintedTexture, 0, 0, this.texture.crop.width, this.texture.crop.height, n / i, a / i, this.texture.crop.width / i, this.texture.crop.height / i)) : t.context.drawImage(this.texture.baseTexture.source, this.texture.crop.x, this.texture.crop.y, this.texture.crop.width, this.texture.crop.height, n / i, a / i, this.texture.crop.width / i, this.texture.crop.height / i)
                }
                for (var r = 0, o = this.children.length; o > r; r++) this.children[r]._renderCanvas(t);
                this._mask && t.maskManager.popMask(t)
            }
        }, e.Sprite.fromFrame = function(t) {
            var i = e.TextureCache[t];
            if (!i) throw new Error('The frameId "' + t + '" does not exist in the texture cache' + this);
            return new e.Sprite(i)
        }, e.Sprite.fromImage = function(t, i, r) {
            var n = e.Texture.fromImage(t, i, r);
            return new e.Sprite(n)
        }, e.SpriteBatch = function(t) {
            e.DisplayObjectContainer.call(this), this.textureThing = t, this.ready = !1
        }, e.SpriteBatch.prototype = Object.create(e.DisplayObjectContainer.prototype), e.SpriteBatch.constructor = e.SpriteBatch, e.SpriteBatch.prototype.initWebGL = function(t) {
            this.fastSpriteBatch = new e.WebGLFastSpriteBatch(t), this.ready = !0
        }, e.SpriteBatch.prototype.updateTransform = function() {
            e.DisplayObject.prototype.updateTransform.call(this)
        }, e.SpriteBatch.prototype._renderWebGL = function(e) {
            !this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(e.gl), e.spriteBatch.stop(), e.shaderManager.setShader(e.shaderManager.fastShader), this.fastSpriteBatch.begin(this, e), this.fastSpriteBatch.render(this), e.spriteBatch.start())
        }, e.SpriteBatch.prototype._renderCanvas = function(c) {
            if (this.visible && !(this.alpha <= 0) && this.children.length) {
                var n = c.context;
                n.globalAlpha = this.worldAlpha, e.DisplayObject.prototype.updateTransform.call(this);
                for (var a = this.worldTransform, o = !0, s = 0; s < this.children.length; s++) {
                    var t = this.children[s];
                    if (t.visible) {
                        var l = t.texture,
                            i = l.frame;
                        if (n.globalAlpha = this.worldAlpha * t.alpha, t.rotation % (2 * Math.PI) === 0) o && (n.setTransform(a.a, a.c, a.b, a.d, a.tx, a.ty), o = !1), n.drawImage(l.baseTexture.source, i.x, i.y, i.width, i.height, t.anchor.x * -i.width * t.scale.x + t.position.x + .5 | 0, t.anchor.y * -i.height * t.scale.y + t.position.y + .5 | 0, i.width * t.scale.x, i.height * t.scale.y);
                        else {
                            o || (o = !0), e.DisplayObject.prototype.updateTransform.call(t);
                            var r = t.worldTransform;
                            c.roundPixels ? n.setTransform(r.a, r.c, r.b, r.d, 0 | r.tx, 0 | r.ty) : n.setTransform(r.a, r.c, r.b, r.d, r.tx, r.ty), n.drawImage(l.baseTexture.source, i.x, i.y, i.width, i.height, t.anchor.x * -i.width + .5 | 0, t.anchor.y * -i.height + .5 | 0, i.width, i.height)
                        }
                    }
                }
            }
        }, e.MovieClip = function(t) {
            e.Sprite.call(this, t[0]), this.textures = t, this.animationSpeed = 1, this.loop = !0, this.onComplete = null, this.currentFrame = 0, this.playing = !1
        }, e.MovieClip.prototype = Object.create(e.Sprite.prototype), e.MovieClip.prototype.constructor = e.MovieClip, Object.defineProperty(e.MovieClip.prototype, "totalFrames", {
            get: function() {
                return this.textures.length
            }
        }), e.MovieClip.prototype.stop = function() {
            this.playing = !1
        }, e.MovieClip.prototype.play = function() {
            this.playing = !0
        }, e.MovieClip.prototype.gotoAndStop = function(e) {
            this.playing = !1, this.currentFrame = e;
            var t = this.currentFrame + .5 | 0;
            this.setTexture(this.textures[t % this.textures.length])
        }, e.MovieClip.prototype.gotoAndPlay = function(e) {
            this.currentFrame = e, this.playing = !0
        }, e.MovieClip.prototype.updateTransform = function() {
            if (e.Sprite.prototype.updateTransform.call(this), this.playing) {
                this.currentFrame += this.animationSpeed;
                var t = this.currentFrame + .5 | 0;
                this.currentFrame = this.currentFrame % this.textures.length, this.loop || t < this.textures.length ? this.setTexture(this.textures[t % this.textures.length]) : t >= this.textures.length && (this.gotoAndStop(this.textures.length - 1), this.onComplete && this.onComplete())
            }
        }, e.MovieClip.fromFrames = function(i) {
            for (var r = [], t = 0; t < i.length; t++) r.push(new e.Texture.fromFrame(i[t]));
            return new e.MovieClip(r)
        }, e.MovieClip.fromImages = function(i) {
            for (var r = [], t = 0; t < i.length; t++) r.push(new e.Texture.fromImage(i[t]));
            return new e.MovieClip(r)
        }, e.FilterBlock = function() {
            this.visible = !0, this.renderable = !0
        }, e.Text = function(t, i) {
            this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.resolution = 1, e.Sprite.call(this, e.Texture.fromCanvas(this.canvas)), this.setText(t), this.setStyle(i)
        }, e.Text.prototype = Object.create(e.Sprite.prototype), e.Text.prototype.constructor = e.Text, Object.defineProperty(e.Text.prototype, "width", {
            get: function() {
                return this.dirty && (this.updateText(), this.dirty = !1), this.scale.x * this.texture.frame.width
            },
            set: function(e) {
                this.scale.x = e / this.texture.frame.width, this._width = e
            }
        }), Object.defineProperty(e.Text.prototype, "height", {
            get: function() {
                return this.dirty && (this.updateText(), this.dirty = !1), this.scale.y * this.texture.frame.height
            },
            set: function(e) {
                this.scale.y = e / this.texture.frame.height, this._height = e
            }
        }), e.Text.prototype.setStyle = function(e) {
            e = e || {}, e.font = e.font || "bold 20pt Arial", e.fill = e.fill || "black", e.align = e.align || "left", e.stroke = e.stroke || "black", e.strokeThickness = e.strokeThickness || 0, e.wordWrap = e.wordWrap || !1, e.wordWrapWidth = e.wordWrapWidth || 100, e.dropShadow = e.dropShadow || !1, e.dropShadowAngle = e.dropShadowAngle || Math.PI / 6, e.dropShadowDistance = e.dropShadowDistance || 4, e.dropShadowColor = e.dropShadowColor || "black", this.style = e, this.dirty = !0
        }, e.Text.prototype.setText = function(e) {
            this.text = e.toString() || " ", this.dirty = !0
        }, e.Text.prototype.updateText = function() {
            this.texture.baseTexture.resolution = this.resolution, this.context.font = this.style.font;
            var c = this.text;
            this.style.wordWrap && (c = this.wordWrap(this.text));
            for (var i = c.split(/(?:\r\n|\r|\n)/), n = [], r = 0, e = 0; e < i.length; e++) {
                var h = this.context.measureText(i[e]).width;
                n[e] = h, r = Math.max(r, h)
            }
            var s = r + this.style.strokeThickness;
            this.style.dropShadow && (s += this.style.dropShadowDistance), this.canvas.width = (s + this.context.lineWidth) * this.resolution;
            var o = this.determineFontHeight("font: " + this.style.font + ";") + this.style.strokeThickness,
                l = o * i.length;
            this.style.dropShadow && (l += this.style.dropShadowDistance), this.canvas.height = l * this.resolution, this.context.scale(this.resolution, this.resolution), navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height), this.context.font = this.style.font, this.context.strokeStyle = this.style.stroke, this.context.lineWidth = this.style.strokeThickness, this.context.textBaseline = "top";
            var t, a;
            if (this.style.dropShadow) {
                this.context.fillStyle = this.style.dropShadowColor;
                var u = Math.sin(this.style.dropShadowAngle) * this.style.dropShadowDistance,
                    d = Math.cos(this.style.dropShadowAngle) * this.style.dropShadowDistance;
                for (e = 0; e < i.length; e++) t = this.style.strokeThickness / 2, a = this.style.strokeThickness / 2 + e * o, "right" === this.style.align ? t += r - n[e] : "center" === this.style.align && (t += (r - n[e]) / 2), this.style.fill && this.context.fillText(i[e], t + u, a + d)
            }
            for (this.context.fillStyle = this.style.fill, e = 0; e < i.length; e++) t = this.style.strokeThickness / 2, a = this.style.strokeThickness / 2 + e * o, "right" === this.style.align ? t += r - n[e] : "center" === this.style.align && (t += (r - n[e]) / 2), this.style.stroke && this.style.strokeThickness && this.context.strokeText(i[e], t, a), this.style.fill && this.context.fillText(i[e], t, a);
            this.updateTexture()
        }, e.Text.prototype.updateTexture = function() {
            this.texture.baseTexture.width = this.canvas.width, this.texture.baseTexture.height = this.canvas.height, this.texture.crop.width = this.texture.frame.width = this.canvas.width, this.texture.crop.height = this.texture.frame.height = this.canvas.height, this._width = this.canvas.width, this._height = this.canvas.height
        }, e.Text.prototype._renderWebGL = function(t) {
            this.dirty && (this.resolution = t.resolution, this.updateText(), this.dirty = !1, e.updateWebGLTexture(this.texture.baseTexture, t.gl)), e.Sprite.prototype._renderWebGL.call(this, t)
        }, e.Text.prototype._renderCanvas = function(t) {
            this.dirty && (this.resolution = t.resolution, this.updateText(), this.dirty = !1), e.Sprite.prototype._renderCanvas.call(this, t)
        }, e.Text.prototype.determineFontHeight = function(r) {
            var i = e.Text.heightCache[r];
            if (!i) {
                var n = document.getElementsByTagName("body")[0],
                    t = document.createElement("div"),
                    a = document.createTextNode("M");
                t.appendChild(a), t.setAttribute("style", r + ";position:absolute;top:0;left:0"), n.appendChild(t), i = t.offsetHeight, e.Text.heightCache[r] = i, n.removeChild(t)
            }
            return i
        }, e.Text.prototype.wordWrap = function(l) {
            for (var t = "", n = l.split("\n"), i = 0; i < n.length; i++) {
                for (var a = this.style.wordWrapWidth, r = n[i].split(" "), e = 0; e < r.length; e++) {
                    var o = this.context.measureText(r[e]).width,
                        s = o + this.context.measureText(" ").width;
                    0 === e || s > a ? (e > 0 && (t += "\n"), t += r[e], a = this.style.wordWrapWidth - o) : (a -= s, t += " " + r[e])
                }
                i < n.length - 1 && (t += "\n")
            }
            return t
        }, e.Text.prototype.destroy = function(e) {
            this.context = null, this.canvas = null, this.texture.destroy(void 0 === e ? !0 : e)
        }, e.Text.heightCache = {}, e.BitmapText = function(t, i) {
            e.DisplayObjectContainer.call(this), this._pool = [], this.setText(t), this.setStyle(i), this.updateText(), this.dirty = !1
        }, e.BitmapText.prototype = Object.create(e.DisplayObjectContainer.prototype), e.BitmapText.prototype.constructor = e.BitmapText, e.BitmapText.prototype.setText = function(e) {
            this.text = e || " ", this.dirty = !0
        }, e.BitmapText.prototype.setStyle = function(t) {
            t = t || {}, t.align = t.align || "left", this.style = t;
            var i = t.font.split(" ");
            this.fontName = i[i.length - 1], this.fontSize = i.length >= 2 ? parseInt(i[i.length - 2], 10) : e.BitmapText.fonts[this.fontName].size, this.dirty = !0, this.tint = t.tint
        }, e.BitmapText.prototype.updateText = function() {
            for (var c = e.BitmapText.fonts[this.fontName], i = new e.Point, s = null, n = [], a = 0, h = [], u = 0, l = this.fontSize / c.size, t = 0; t < this.text.length; t++) {
                var d = this.text.charCodeAt(t);
                if (/(?:\r\n|\r|\n)/.test(this.text.charAt(t))) h.push(i.x), a = Math.max(a, i.x), u++, i.x = 0, i.y += c.lineHeight, s = null;
                else {
                    var o = c.chars[d];
                    o && (s && o[s] && (i.x += o.kerning[s]), n.push({
                        texture: o.texture,
                        line: u,
                        charCode: d,
                        position: new e.Point(i.x + o.xOffset, i.y + o.yOffset)
                    }), i.x += o.xAdvance, s = d)
                }
            }
            h.push(i.x), a = Math.max(a, i.x);
            var f = [];
            for (t = 0; u >= t; t++) {
                var p = 0;
                "right" === this.style.align ? p = a - h[t] : "center" === this.style.align && (p = (a - h[t]) / 2), f.push(p)
            }
            var g = this.children.length,
                _ = n.length,
                v = this.tint || 16777215;
            for (t = 0; _ > t; t++) {
                var r = g > t ? this.children[t] : this._pool.pop();
                r ? r.setTexture(n[t].texture) : r = new e.Sprite(n[t].texture), r.position.x = (n[t].position.x + f[n[t].line]) * l, r.position.y = n[t].position.y * l, r.scale.x = r.scale.y = l, r.tint = v, r.parent || this.addChild(r)
            }
            for (; this.children.length > _;) {
                var m = this.getChildAt(this.children.length - 1);
                this._pool.push(m), this.removeChild(m)
            }
            this.textWidth = a * l, this.textHeight = (i.y + c.lineHeight) * l
        }, e.BitmapText.prototype.updateTransform = function() {
            this.dirty && (this.updateText(), this.dirty = !1), e.DisplayObjectContainer.prototype.updateTransform.call(this)
        }, e.BitmapText.fonts = {}, e.InteractionData = function() {
            this.global = new e.Point, this.target = null, this.originalEvent = null
        }, e.InteractionData.prototype.getLocalPosition = function(u, r) {
            var i = u.worldTransform,
                n = this.global,
                a = i.a,
                o = i.b,
                c = i.tx,
                l = i.c,
                s = i.d,
                h = i.ty,
                t = 1 / (a * s + o * -l);
            return r = r || new e.Point, r.x = s * t * n.x + -o * t * n.y + (h * o - c * s) * t, r.y = a * t * n.y + -l * t * n.x + (-h * a + c * l) * t, r
        }, e.InteractionData.prototype.constructor = e.InteractionData, e.InteractionManager = function(t) {
            this.stage = t, this.mouse = new e.InteractionData, this.touchs = {}, this.tempPoint = new e.Point, this.mouseoverEnabled = !0, this.pool = [], this.interactiveItems = [], this.interactionDOMElement = null, this.onMouseMove = this.onMouseMove.bind(this), this.onMouseDown = this.onMouseDown.bind(this), this.onMouseOut = this.onMouseOut.bind(this), this.onMouseUp = this.onMouseUp.bind(this), this.onTouchStart = this.onTouchStart.bind(this), this.onTouchEnd = this.onTouchEnd.bind(this), this.onTouchMove = this.onTouchMove.bind(this), this.last = 0, this.currentCursorStyle = "inherit", this.mouseOut = !1, this.resolution = 1
        }, e.InteractionManager.prototype.constructor = e.InteractionManager, e.InteractionManager.prototype.collectInteractiveSprite = function(n, i) {
            for (var r = n.children, a = r.length, t = a - 1; t >= 0; t--) {
                var e = r[t];
                e._interactive ? (i.interactiveChildren = !0, this.interactiveItems.push(e), e.children.length > 0 && this.collectInteractiveSprite(e, e)) : (e.__iParent = null, e.children.length > 0 && this.collectInteractiveSprite(e, i))
            }
        }, e.InteractionManager.prototype.setTarget = function(e) {
            this.target = e, this.resolution = e.resolution, null === this.interactionDOMElement && this.setTargetDomElement(e.view)
        }, e.InteractionManager.prototype.setTargetDomElement = function(e) {
            this.removeEvents(), window.navigator.msPointerEnabled && (e.style["-ms-content-zooming"] = "none", e.style["-ms-touch-action"] = "none"), this.interactionDOMElement = e, e.addEventListener("mousemove", this.onMouseMove, !0), e.addEventListener("mousedown", this.onMouseDown, !0), e.addEventListener("mouseout", this.onMouseOut, !0), e.addEventListener("touchstart", this.onTouchStart, !0), e.addEventListener("touchend", this.onTouchEnd, !0), e.addEventListener("touchmove", this.onTouchMove, !0)
        }, e.InteractionManager.prototype.removeEvents = function() {
            this.interactionDOMElement && (this.interactionDOMElement.style["-ms-content-zooming"] = "", this.interactionDOMElement.style["-ms-touch-action"] = "", this.interactionDOMElement.removeEventListener("mousemove", this.onMouseMove, !0), this.interactionDOMElement.removeEventListener("mousedown", this.onMouseDown, !0), this.interactionDOMElement.removeEventListener("mouseout", this.onMouseOut, !0), this.interactionDOMElement.removeEventListener("touchstart", this.onTouchStart, !0), this.interactionDOMElement.removeEventListener("touchend", this.onTouchEnd, !0), this.interactionDOMElement.removeEventListener("touchmove", this.onTouchMove, !0), this.interactionDOMElement = null)
        }, e.InteractionManager.prototype.update = function() {
            if (this.target) {
                var a = Date.now(),
                    n = a - this.last;
                if (n = n * e.INTERACTION_FREQUENCY / 1e3, !(1 > n)) {
                    this.last = a;
                    var i = 0;
                    this.dirty && this.rebuildInteractiveGraph();
                    var s = this.interactiveItems.length,
                        r = "inherit",
                        o = !1;
                    for (i = 0; s > i; i++) {
                        var t = this.interactiveItems[i];
                        t.__hit = this.hitTest(t, this.mouse), this.mouse.target = t, t.__hit && !o ? (t.buttonMode && (r = t.defaultCursor), t.interactiveChildren || (o = !0), t.__isOver || (t.mouseover && t.mouseover(this.mouse), t.__isOver = !0)) : t.__isOver && (t.mouseout && t.mouseout(this.mouse), t.__isOver = !1)
                    }
                    this.currentCursorStyle !== r && (this.currentCursorStyle = r, this.interactionDOMElement.style.cursor = r)
                }
            }
        }, e.InteractionManager.prototype.rebuildInteractiveGraph = function() {
            this.dirty = !1;
            for (var t = this.interactiveItems.length, e = 0; t > e; e++) this.interactiveItems[e].interactiveChildren = !1;
            this.interactiveItems = [], this.stage.interactive && this.interactiveItems.push(this.stage), this.collectInteractiveSprite(this.stage, this.stage)
        }, e.InteractionManager.prototype.onMouseMove = function(t) {
            this.dirty && this.rebuildInteractiveGraph(), this.mouse.originalEvent = t || window.event;
            var e = this.interactionDOMElement.getBoundingClientRect();
            this.mouse.global.x = (t.clientX - e.left) * (this.target.width / e.width) / this.resolution, this.mouse.global.y = (t.clientY - e.top) * (this.target.height / e.height) / this.resolution;
            for (var n = this.interactiveItems.length, i = 0; n > i; i++) {
                var r = this.interactiveItems[i];
                r.mousemove && r.mousemove(this.mouse)
            }
        }, e.InteractionManager.prototype.onMouseDown = function(o) {
            this.dirty && this.rebuildInteractiveGraph(), this.mouse.originalEvent = o || window.event, e.AUTO_PREVENT_DEFAULT && this.mouse.originalEvent.preventDefault();
            for (var s = this.interactiveItems.length, a = this.mouse.originalEvent, i = 2 === a.button || 3 === a.which, r = i ? "rightdown" : "mousedown", l = i ? "rightclick" : "click", c = i ? "__rightIsDown" : "__mouseIsDown", h = i ? "__isRightDown" : "__isDown", n = 0; s > n; n++) {
                var t = this.interactiveItems[n];
                if ((t[r] || t[l]) && (t[c] = !0, t.__hit = this.hitTest(t, this.mouse), t.__hit && (t[r] && t[r](this.mouse), t[h] = !0, !t.interactiveChildren))) break
            }
        }, e.InteractionManager.prototype.onMouseOut = function(i) {
            this.dirty && this.rebuildInteractiveGraph(), this.mouse.originalEvent = i || window.event;
            var r = this.interactiveItems.length;
            this.interactionDOMElement.style.cursor = "inherit";
            for (var t = 0; r > t; t++) {
                var e = this.interactiveItems[t];
                e.__isOver && (this.mouse.target = e, e.mouseout && e.mouseout(this.mouse), e.__isOver = !1)
            }
            this.mouseOut = !0, this.mouse.global.x = -1e4, this.mouse.global.y = -1e4
        }, e.InteractionManager.prototype.onMouseUp = function(h) {
            this.dirty && this.rebuildInteractiveGraph(), this.mouse.originalEvent = h || window.event;
            for (var c = this.interactiveItems.length, l = !1, s = this.mouse.originalEvent, t = 2 === s.button || 3 === s.which, n = t ? "rightup" : "mouseup", o = t ? "rightclick" : "click", a = t ? "rightupoutside" : "mouseupoutside", r = t ? "__isRightDown" : "__isDown", i = 0; c > i; i++) {
                var e = this.interactiveItems[i];
                (e[o] || e[n] || e[a]) && (e.__hit = this.hitTest(e, this.mouse), e.__hit && !l ? (e[n] && e[n](this.mouse), e[r] && e[o] && e[o](this.mouse), e.interactiveChildren || (l = !0)) : e[r] && e[a] && e[a](this.mouse), e[r] = !1)
            }
        }, e.InteractionManager.prototype.hitTest = function(t, r) {
            var a = r.global;
            if (!t.worldVisible) return !1;
            var b = t instanceof e.Sprite,
                n = t.worldTransform,
                h = n.a,
                d = n.b,
                f = n.tx,
                l = n.c,
                c = n.d,
                _ = n.ty,
                i = 1 / (h * c + d * -l),
                o = c * i * a.x + -d * i * a.y + (_ * d - f * c) * i,
                u = h * i * a.y + -l * i * a.x + (-_ * h + f * l) * i;
            if (r.target = t, t.hitArea && t.hitArea.contains) return t.hitArea.contains(o, u) ? (r.target = t, !0) : !1;
            if (b) {
                var s, m = t.texture.frame.width,
                    g = t.texture.frame.height,
                    v = -m * t.anchor.x;
                if (o > v && v + m > o && (s = -g * t.anchor.y, u > s && s + g > u)) return r.target = t, !0
            }
            for (var y = t.children.length, p = 0; y > p; p++) {
                var x = t.children[p],
                    w = this.hitTest(x, r);
                if (w) return r.target = t, !0
            }
            return !1
        }, e.InteractionManager.prototype.onTouchMove = function(r) {
            this.dirty && this.rebuildInteractiveGraph();
            var e, t = this.interactionDOMElement.getBoundingClientRect(),
                s = r.changedTouches,
                n = 0;
            for (n = 0; n < s.length; n++) {
                var i = s[n];
                e = this.touchs[i.identifier], e.originalEvent = r || window.event, e.global.x = (i.clientX - t.left) * (this.target.width / t.width) / this.resolution, e.global.y = (i.clientY - t.top) * (this.target.height / t.height) / this.resolution, !navigator.isCocoonJS || t.left || t.top || r.target.style.width || r.target.style.height || (e.global.x = i.clientX, e.global.y = i.clientY);
                for (var o = 0; o < this.interactiveItems.length; o++) {
                    var a = this.interactiveItems[o];
                    a.touchmove && a.__touchData && a.__touchData[i.identifier] && a.touchmove(e)
                }
            }
        }, e.InteractionManager.prototype.onTouchStart = function(a) {
            this.dirty && this.rebuildInteractiveGraph();
            var r = this.interactionDOMElement.getBoundingClientRect();
            e.AUTO_PREVENT_DEFAULT && a.preventDefault();
            for (var l = a.changedTouches, o = 0; o < l.length; o++) {
                var n = l[o],
                    i = this.pool.pop();
                i || (i = new e.InteractionData), i.originalEvent = a || window.event, this.touchs[n.identifier] = i, i.global.x = (n.clientX - r.left) * (this.target.width / r.width) / this.resolution, i.global.y = (n.clientY - r.top) * (this.target.height / r.height) / this.resolution, !navigator.isCocoonJS || r.left || r.top || a.target.style.width || a.target.style.height || (i.global.x = n.clientX, i.global.y = n.clientY);
                for (var c = this.interactiveItems.length, s = 0; c > s; s++) {
                    var t = this.interactiveItems[s];
                    if ((t.touchstart || t.tap) && (t.__hit = this.hitTest(t, i), t.__hit && (t.touchstart && t.touchstart(i), t.__isDown = !0, t.__touchData = t.__touchData || {}, t.__touchData[n.identifier] = i, !t.interactiveChildren))) break
                }
            }
        }, e.InteractionManager.prototype.onTouchEnd = function(n) {
            this.dirty && this.rebuildInteractiveGraph();
            for (var r = this.interactionDOMElement.getBoundingClientRect(), s = n.changedTouches, a = 0; a < s.length; a++) {
                var t = s[a],
                    i = this.touchs[t.identifier],
                    l = !1;
                i.global.x = (t.clientX - r.left) * (this.target.width / r.width) / this.resolution, i.global.y = (t.clientY - r.top) * (this.target.height / r.height) / this.resolution, !navigator.isCocoonJS || r.left || r.top || n.target.style.width || n.target.style.height || (i.global.x = t.clientX, i.global.y = t.clientY);
                for (var c = this.interactiveItems.length, o = 0; c > o; o++) {
                    var e = this.interactiveItems[o];
                    e.__touchData && e.__touchData[t.identifier] && (e.__hit = this.hitTest(e, e.__touchData[t.identifier]), i.originalEvent = n || window.event, (e.touchend || e.tap) && (e.__hit && !l ? (e.touchend && e.touchend(i), e.__isDown && e.tap && e.tap(i), e.interactiveChildren || (l = !0)) : e.__isDown && e.touchendoutside && e.touchendoutside(i), e.__isDown = !1), e.__touchData[t.identifier] = null)
                }
                this.pool.push(i), this.touchs[t.identifier] = null
            }
        }, e.Stage = function(t) {
            e.DisplayObjectContainer.call(this), this.worldTransform = new e.Matrix, this.interactive = !0, this.interactionManager = new e.InteractionManager(this), this.dirty = !0, this.stage = this, this.stage.hitArea = new e.Rectangle(0, 0, 1e5, 1e5), this.setBackgroundColor(t)
        }, e.Stage.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Stage.prototype.constructor = e.Stage, e.Stage.prototype.setInteractionDelegate = function(e) {
            this.interactionManager.setTargetDomElement(e)
        }, e.Stage.prototype.updateTransform = function() {
            this.worldAlpha = 1;
            for (var e = 0, t = this.children.length; t > e; e++) this.children[e].updateTransform();
            this.dirty && (this.dirty = !1, this.interactionManager.dirty = !0), this.interactive && this.interactionManager.update()
        }, e.Stage.prototype.setBackgroundColor = function(i) {
            this.backgroundColor = i || 0, this.backgroundColorSplit = e.hex2rgb(this.backgroundColor);
            var t = this.backgroundColor.toString(16);
            t = "000000".substr(0, 6 - t.length) + t, this.backgroundColorString = "#" + t
        }, e.Stage.prototype.getMousePosition = function() {
            return this.interactionManager.mouse.global
        }, e.hex2rgb = function(e) {
            return [(e >> 16 & 255) / 255, (e >> 8 & 255) / 255, (255 & e) / 255]
        }, e.rgb2hex = function(e) {
            return (255 * e[0] << 16) + (255 * e[1] << 8) + 255 * e[2]
        }, "function" != typeof Function.prototype.bind && (Function.prototype.bind = function() {
            return function(n) {
                function t() {
                    for (var e = arguments.length, a = new Array(e); e--;) a[e] = arguments[e];
                    a = r.concat(a), i.apply(this instanceof t ? this : n, a)
                }
                var i = this,
                    e = arguments.length - 1,
                    r = [];
                if (e > 0)
                    for (r.length = e; e--;) r[e] = arguments[e + 1];
                if ("function" != typeof i) throw new TypeError;
                return t.prototype = function a(e) {
                    return e && (a.prototype = e), this instanceof a ? void 0 : new a
                }(i.prototype), t
            }
        }()), e.AjaxRequest = function() {
            var t = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"];
            if (!window.ActiveXObject) return window.XMLHttpRequest ? new window.XMLHttpRequest : !1;
            for (var e = 0; e < t.length; e++) try {
                return new window.ActiveXObject(t[e])
            } catch (i) {}
        }, e.canUseNewCanvasBlendModes = function() {
            if ("undefined" == typeof document) return !1;
            var t = document.createElement("canvas");
            t.width = 1, t.height = 1;
            var e = t.getContext("2d");
            return e.fillStyle = "#000", e.fillRect(0, 0, 1, 1), e.globalCompositeOperation = "multiply", e.fillStyle = "#fff", e.fillRect(0, 0, 1, 1), 0 === e.getImageData(0, 0, 1, 1).data[0]
        }, e.getNextPowerOfTwo = function(e) {
            if (e > 0 && 0 === (e & e - 1)) return e;
            for (var t = 1; e > t;) t <<= 1;
            return t
        }, e.EventTarget = function() {
            var e = {};
            this.addEventListener = this.on = function(t, i) {
                void 0 === e[t] && (e[t] = []), -1 === e[t].indexOf(i) && e[t].unshift(i)
            }, this.dispatchEvent = this.emit = function(t) {
                if (e[t.type] && e[t.type].length)
                    for (var i = e[t.type].length - 1; i >= 0; i--) e[t.type][i](t)
            }, this.removeEventListener = this.off = function(t, r) {
                if (void 0 !== e[t]) {
                    var i = e[t].indexOf(r); - 1 !== i && e[t].splice(i, 1)
                }
            }, this.removeAllEventListeners = function(i) {
                var t = e[i];
                t && (t.length = 0)
            }
        }, e.autoDetectRenderer = function() {
            function i(e, i) {
                function t() {
                    return e.apply(this, i)
                }
                return t.prototype = e.prototype, new t
            }
            var t = Array.prototype.slice.call(arguments);
            "undefined" == typeof t[0] && (t[0] = 800), "undefined" == typeof t[1] && (t[1] = 600);
            var r = function() {
                try {
                    var e = document.createElement("canvas");
                    return !!window.WebGLRenderingContext && (e.getContext("webgl") || e.getContext("experimental-webgl"))
                } catch (t) {
                    return !1
                }
            }();
            return i(e[(r ? "WebGL" : "Canvas") + "Renderer"], t)
        }, e.autoDetectRecommendedRenderer = function(t, i, r) {
            t || (t = 800), i || (i = 600);
            var n = function() {
                    try {
                        var e = document.createElement("canvas");
                        return !!window.WebGLRenderingContext && (e.getContext("webgl") || e.getContext("experimental-webgl"))
                    } catch (t) {
                        return !1
                    }
                }(),
                a = /Android/i.test(navigator.userAgent);
            return n && !a ? new e.WebGLRenderer(t, i, r) : new e.CanvasRenderer(t, i, r)
        }, e.PolyK = {}, e.PolyK.Triangulate = function(r) {
            var u = !0,
                a = r.length >> 1;
            if (3 > a) return [];
            for (var s = [], i = [], t = 0; a > t; t++) i.push(t);
            t = 0;
            for (var n = a; n > 3;) {
                var h = i[(t + 0) % n],
                    c = i[(t + 1) % n],
                    l = i[(t + 2) % n],
                    _ = r[2 * h],
                    f = r[2 * h + 1],
                    y = r[2 * c],
                    m = r[2 * c + 1],
                    g = r[2 * l],
                    v = r[2 * l + 1],
                    d = !1;
                if (e.PolyK._convex(_, f, y, m, g, v, u)) {
                    d = !0;
                    for (var p = 0; n > p; p++) {
                        var o = i[p];
                        if (o !== h && o !== c && o !== l && e.PolyK._PointInTriangle(r[2 * o], r[2 * o + 1], _, f, y, m, g, v)) {
                            d = !1;
                            break
                        }
                    }
                }
                if (d) s.push(h, c, l), i.splice((t + 1) % n, 1), n--, t = 0;
                else if (t++ > 3 * n) {
                    if (!u) return window.console.log("PIXI Warning: shape too complex to fill"), [];
                    for (s = [], i = [], t = 0; a > t; t++) i.push(t);
                    t = 0, n = a, u = !1
                }
            }
            return s.push(i[0], i[1], i[2]), s
        }, e.PolyK._PointInTriangle = function(x, m, a, o, b, y, v, g) {
            var t = v - a,
                i = g - o,
                r = b - a,
                e = y - o,
                d = x - a,
                p = m - o,
                _ = t * t + i * i,
                n = t * r + i * e,
                u = t * d + i * p,
                s = r * r + e * e,
                f = r * d + e * p,
                h = 1 / (_ * s - n * n),
                c = (s * u - n * f) * h,
                l = (_ * f - n * u) * h;
            return c >= 0 && l >= 0 && 1 > c + l
        }, e.PolyK._convex = function(i, r, e, t, n, a, o) {
            return (r - t) * (n - e) + (e - i) * (a - t) >= 0 === o
        }, e.initDefaultShaders = function() {}, e.CompileVertexShader = function(t, i) {
            return e._CompileShader(t, i, t.VERTEX_SHADER)
        }, e.CompileFragmentShader = function(t, i) {
            return e._CompileShader(t, i, t.FRAGMENT_SHADER)
        }, e._CompileShader = function(e, i, r) {
            var n = i.join("\n"),
                t = e.createShader(r);
            return e.shaderSource(t, n), e.compileShader(t), e.getShaderParameter(t, e.COMPILE_STATUS) ? t : (window.console.log(e.getShaderInfoLog(t)), null)
        }, e.compileProgram = function(t, r, n) {
            var a = e.CompileFragmentShader(t, n),
                o = e.CompileVertexShader(t, r),
                i = t.createProgram();
            return t.attachShader(i, o), t.attachShader(i, a), t.linkProgram(i), t.getProgramParameter(i, t.LINK_STATUS) || window.console.log("Could not initialise shaders"), i
        }, e.PixiShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.textureCount = 0, this.attributes = [], this.init()
        }, e.PixiShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc || e.PixiShader.defaultVertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
            for (var r in this.uniforms) this.uniforms[r].uniformLocation = t.getUniformLocation(i, r);
            this.initUniforms(), this.program = i
        }, e.PixiShader.prototype.initUniforms = function() {
            this.textureCount = 1;
            var t, i = this.gl;
            for (var r in this.uniforms) {
                t = this.uniforms[r];
                var e = t.type;
                "sampler2D" === e ? (t._init = !1, null !== t.value && this.initSampler2D(t)) : "mat2" === e || "mat3" === e || "mat4" === e ? (t.glMatrix = !0, t.glValueLength = 1, "mat2" === e ? t.glFunc = i.uniformMatrix2fv : "mat3" === e ? t.glFunc = i.uniformMatrix3fv : "mat4" === e && (t.glFunc = i.uniformMatrix4fv)) : (t.glFunc = i["uniform" + e], t.glValueLength = "2f" === e || "2i" === e ? 2 : "3f" === e || "3i" === e ? 3 : "4f" === e || "4i" === e ? 4 : 1)
            }
        }, e.PixiShader.prototype.initSampler2D = function(i) {
            if (i.value && i.value.baseTexture && i.value.baseTexture.hasLoaded) {
                var e = this.gl;
                if (e.activeTexture(e["TEXTURE" + this.textureCount]), e.bindTexture(e.TEXTURE_2D, i.value.baseTexture._glTextures[e.id]), i.textureData) {
                    var t = i.textureData,
                        s = t.magFilter ? t.magFilter : e.LINEAR,
                        o = t.minFilter ? t.minFilter : e.LINEAR,
                        a = t.wrapS ? t.wrapS : e.CLAMP_TO_EDGE,
                        n = t.wrapT ? t.wrapT : e.CLAMP_TO_EDGE,
                        r = t.luminance ? e.LUMINANCE : e.RGBA;
                    if (t.repeat && (a = e.REPEAT, n = e.REPEAT), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !!t.flipY), t.width) {
                        var l = t.width ? t.width : 512,
                            c = t.height ? t.height : 2,
                            h = t.border ? t.border : 0;
                        e.texImage2D(e.TEXTURE_2D, 0, r, l, c, h, r, e.UNSIGNED_BYTE, null)
                    } else e.texImage2D(e.TEXTURE_2D, 0, r, e.RGBA, e.UNSIGNED_BYTE, i.value.baseTexture.source);
                    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, s), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, o), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, a), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, n)
                }
                e.uniform1i(i.uniformLocation, this.textureCount), i._init = !0, this.textureCount++
            }
        }, e.PixiShader.prototype.syncUniforms = function() {
            this.textureCount = 1;
            var t, i = this.gl;
            for (var r in this.uniforms) t = this.uniforms[r], 1 === t.glValueLength ? t.glMatrix === !0 ? t.glFunc.call(i, t.uniformLocation, t.transpose, t.value) : t.glFunc.call(i, t.uniformLocation, t.value) : 2 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y) : 3 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z) : 4 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z, t.value.w) : "sampler2D" === t.type && (t._init ? (i.activeTexture(i["TEXTURE" + this.textureCount]), i.bindTexture(i.TEXTURE_2D, t.value.baseTexture._glTextures[i.id] || e.createWebGLTexture(t.value.baseTexture, i)), i.uniform1i(t.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(t))
        }, e.PixiShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec2 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;", "   vColor = vec4(color * aColor.x, aColor.x);", "}"], e.PixiFastShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"], this.textureCount = 0, this.init()
        }, e.PixiFastShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.uMatrix = t.getUniformLocation(i, "uMatrix"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aPositionCoord = t.getAttribLocation(i, "aPositionCoord"), this.aScale = t.getAttribLocation(i, "aScale"), this.aRotation = t.getAttribLocation(i, "aRotation"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute], this.program = i
        }, e.PixiFastShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.StripShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"], this.init()
        }, e.StripShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.attributes = [this.aVertexPosition, this.aTextureCoord], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.StripShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null
        }, e.PrimitiveShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"], this.init()
        }, e.PrimitiveShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.PrimitiveShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.ComplexPrimitiveShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"], this.init()
        }, e.ComplexPrimitiveShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.color = t.getUniformLocation(i, "color"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.ComplexPrimitiveShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null
        }, e.WebGLGraphics = function() {}, e.WebGLGraphics.renderGraphics = function(n, i) {
            var a, t = i.gl,
                l = i.projection,
                c = i.offset,
                r = i.shaderManager.primitiveShader;
            n.dirty && e.WebGLGraphics.updateGraphics(n, t);
            for (var s = n._webGL[t.id], o = 0; o < s.data.length; o++) 1 === s.data[o].mode ? (a = s.data[o], i.stencilManager.pushStencil(n, a, i), t.drawElements(t.TRIANGLE_FAN, 4, t.UNSIGNED_SHORT, 2 * (a.indices.length - 4)), i.stencilManager.popStencil(n, a, i)) : (a = s.data[o], i.shaderManager.setShader(r), r = i.shaderManager.primitiveShader, t.uniformMatrix3fv(r.translationMatrix, !1, n.worldTransform.toArray(!0)), t.uniform2f(r.projectionVector, l.x, -l.y), t.uniform2f(r.offsetVector, -c.x, -c.y), t.uniform3fv(r.tintColor, e.hex2rgb(n.tint)), t.uniform1f(r.alpha, n.worldAlpha), t.bindBuffer(t.ARRAY_BUFFER, a.buffer), t.vertexAttribPointer(r.aVertexPosition, 2, t.FLOAT, !1, 24, 0), t.vertexAttribPointer(r.colorAttribute, 4, t.FLOAT, !1, 24, 8), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, a.indexBuffer), t.drawElements(t.TRIANGLE_STRIP, a.indices.length, t.UNSIGNED_SHORT, 0))
        }, e.WebGLGraphics.updateGraphics = function(a, o) {
            var i = a._webGL[o.id];
            i || (i = a._webGL[o.id] = {
                lastIndex: 0,
                data: [],
                gl: o
            }), a.dirty = !1;
            var n;
            if (a.clearDirty) {
                for (a.clearDirty = !1, n = 0; n < i.data.length; n++) {
                    var s = i.data[n];
                    s.reset(), e.WebGLGraphics.graphicsDataPool.push(s)
                }
                i.data = [], i.lastIndex = 0
            }
            var r;
            for (n = i.lastIndex; n < a.graphicsData.length; n++) {
                var t = a.graphicsData[n];
                t.type === e.Graphics.POLY ? (t.fill && t.points.length > 6 && (t.points.length > 10 ? (r = e.WebGLGraphics.switchMode(i, 1), e.WebGLGraphics.buildComplexPoly(t, r)) : (r = e.WebGLGraphics.switchMode(i, 0), e.WebGLGraphics.buildPoly(t, r))), t.lineWidth > 0 && (r = e.WebGLGraphics.switchMode(i, 0), e.WebGLGraphics.buildLine(t, r))) : (r = e.WebGLGraphics.switchMode(i, 0), t.type === e.Graphics.RECT ? e.WebGLGraphics.buildRectangle(t, r) : t.type === e.Graphics.CIRC || t.type === e.Graphics.ELIP ? e.WebGLGraphics.buildCircle(t, r) : t.type === e.Graphics.RREC && e.WebGLGraphics.buildRoundedRectangle(t, r)), i.lastIndex++
            }
            for (n = 0; n < i.data.length; n++) r = i.data[n], r.dirty && r.upload()
        }, e.WebGLGraphics.switchMode = function(i, r) {
            var t;
            return i.data.length ? (t = i.data[i.data.length - 1], (t.mode !== r || 1 === r) && (t = e.WebGLGraphics.graphicsDataPool.pop() || new e.WebGLGraphicsData(i.gl), t.mode = r, i.data.push(t))) : (t = e.WebGLGraphics.graphicsDataPool.pop() || new e.WebGLGraphicsData(i.gl), t.mode = r, i.data.push(t)), t.dirty = !0, t
        }, e.WebGLGraphics.buildRectangle = function(t, p) {
            var c = t.points,
                r = c[0],
                n = c[1],
                l = c[2],
                u = c[3];
            if (t.fill) {
                var _ = e.hex2rgb(t.fillColor),
                    a = t.fillAlpha,
                    h = _[0] * a,
                    s = _[1] * a,
                    d = _[2] * a,
                    i = p.points,
                    f = p.indices,
                    o = i.length / 6;
                i.push(r, n), i.push(h, s, d, a), i.push(r + l, n), i.push(h, s, d, a), i.push(r, n + u), i.push(h, s, d, a), i.push(r + l, n + u), i.push(h, s, d, a), f.push(o, o, o + 1, o + 2, o + 3, o + 3)
            }
            if (t.lineWidth) {
                var m = t.points;
                t.points = [r, n, r + l, n, r + l, n + u, r, n + u, r, n], e.WebGLGraphics.buildLine(t, p), t.points = m
            }
        }, e.WebGLGraphics.buildRoundedRectangle = function(o, _) {
            var h = o.points,
                i = h[0],
                r = h[1],
                l = h[2],
                s = h[3],
                a = h[4],
                t = [];
            if (t.push(i, r + a), t = t.concat(e.WebGLGraphics.quadraticBezierCurve(i, r + s - a, i, r + s, i + a, r + s)), t = t.concat(e.WebGLGraphics.quadraticBezierCurve(i + l - a, r + s, i + l, r + s, i + l, r + s - a)), t = t.concat(e.WebGLGraphics.quadraticBezierCurve(i + l, r + a, i + l, r, i + l - a, r)), t = t.concat(e.WebGLGraphics.quadraticBezierCurve(i + a, r, i, r, i, r + a)), o.fill) {
                var f = e.hex2rgb(o.fillColor),
                    p = o.fillAlpha,
                    y = f[0] * p,
                    v = f[1] * p,
                    g = f[2] * p,
                    m = _.points,
                    d = _.indices,
                    u = m.length / 6,
                    c = e.PolyK.Triangulate(t),
                    n = 0;
                for (n = 0; n < c.length; n += 3) d.push(c[n] + u), d.push(c[n] + u), d.push(c[n + 1] + u), d.push(c[n + 2] + u), d.push(c[n + 2] + u);
                for (n = 0; n < t.length; n++) m.push(t[n], t[++n], y, v, g, p)
            }
            if (o.lineWidth) {
                var b = o.points;
                o.points = t, e.WebGLGraphics.buildLine(o, _), o.points = b
            }
        }, e.WebGLGraphics.quadraticBezierCurve = function(m, p, o, r, f, _) {
            function t(e, t, i) {
                var r = t - e;
                return e + r * i
            }
            for (var s, n, c, h, u, d, l = 20, a = [], e = 0, i = 0; l >= i; i++) e = i / l, s = t(m, o, e), n = t(p, r, e), c = t(o, f, e), h = t(r, _, e), u = t(s, c, e), d = t(n, h, e), a.push(u, d);
            return a
        }, e.WebGLGraphics.buildCircle = function(i, h) {
            var n = i.points,
                u = n[0],
                c = n[1],
                v = n[2],
                g = n[3],
                l = 40,
                o = 2 * Math.PI / l,
                t = 0;
            if (i.fill) {
                var d = e.hex2rgb(i.fillColor),
                    r = i.fillAlpha,
                    m = d[0] * r,
                    _ = d[1] * r,
                    f = d[2] * r,
                    p = h.points,
                    s = h.indices,
                    a = p.length / 6;
                for (s.push(a), t = 0; l + 1 > t; t++) p.push(u, c, m, _, f, r), p.push(u + Math.sin(o * t) * v, c + Math.cos(o * t) * g, m, _, f, r), s.push(a++, a++);
                s.push(a - 1)
            }
            if (i.lineWidth) {
                var y = i.points;
                for (i.points = [], t = 0; l + 1 > t; t++) i.points.push(u + Math.sin(o * t) * v, c + Math.cos(o * t) * g);
                e.WebGLGraphics.buildLine(i, h), i.points = y
            }
        }, e.WebGLGraphics.buildLine = function(w, G) {
            var s = 0,
                t = w.points;
            if (0 !== t.length) {
                if (w.lineWidth % 2)
                    for (s = 0; s < t.length; s++) t[s] += .5;
                var A = new e.Point(t[0], t[1]),
                    b = new e.Point(t[t.length - 2], t[t.length - 1]);
                if (A.x === b.x && A.y === b.y) {
                    t = t.slice(), t.pop(), t.pop(), b = new e.Point(t[t.length - 2], t[t.length - 1]);
                    var N = b.x + .5 * (A.x - b.x),
                        B = b.y + .5 * (A.y - b.y);
                    t.unshift(N, B), t.push(N, B)
                }
                var C, x, f, p, a, n, k, E, r, i, g, _, y, v, F, P, M, L, z, R, S, U, l, o = G.points,
                    j = G.indices,
                    T = t.length / 2,
                    D = t.length,
                    I = o.length / 6,
                    m = w.lineWidth / 2,
                    O = e.hex2rgb(w.lineColor),
                    c = w.lineAlpha,
                    u = O[0] * c,
                    h = O[1] * c,
                    d = O[2] * c;
                for (f = t[0], p = t[1], a = t[2], n = t[3], r = -(p - n), i = f - a, l = Math.sqrt(r * r + i * i), r /= l, i /= l, r *= m, i *= m, o.push(f - r, p - i, u, h, d, c), o.push(f + r, p + i, u, h, d, c), s = 1; T - 1 > s; s++) f = t[2 * (s - 1)], p = t[2 * (s - 1) + 1], a = t[2 * s], n = t[2 * s + 1], k = t[2 * (s + 1)], E = t[2 * (s + 1) + 1], r = -(p - n), i = f - a, l = Math.sqrt(r * r + i * i), r /= l, i /= l, r *= m, i *= m, g = -(n - E), _ = a - k, l = Math.sqrt(g * g + _ * _), g /= l, _ /= l, g *= m, _ *= m, F = -i + p - (-i + n), P = -r + a - (-r + f), M = (-r + f) * (-i + n) - (-r + a) * (-i + p), L = -_ + E - (-_ + n), z = -g + a - (-g + k), R = (-g + k) * (-_ + n) - (-g + a) * (-_ + E), S = F * z - L * P, Math.abs(S) < .1 ? (S += 10.1, o.push(a - r, n - i, u, h, d, c), o.push(a + r, n + i, u, h, d, c)) : (C = (P * R - z * M) / S, x = (L * M - F * R) / S, U = (C - a) * (C - a) + (x - n) + (x - n), U > 19600 ? (y = r - g, v = i - _, l = Math.sqrt(y * y + v * v), y /= l, v /= l, y *= m, v *= m, o.push(a - y, n - v), o.push(u, h, d, c), o.push(a + y, n + v), o.push(u, h, d, c), o.push(a - y, n - v), o.push(u, h, d, c), D++) : (o.push(C, x), o.push(u, h, d, c), o.push(a - (C - a), n - (x - n)), o.push(u, h, d, c)));
                for (f = t[2 * (T - 2)], p = t[2 * (T - 2) + 1], a = t[2 * (T - 1)], n = t[2 * (T - 1) + 1], r = -(p - n), i = f - a, l = Math.sqrt(r * r + i * i), r /= l, i /= l, r *= m, i *= m, o.push(a - r, n - i), o.push(u, h, d, c), o.push(a + r, n + i), o.push(u, h, d, c), j.push(I), s = 0; D > s; s++) j.push(I++);
                j.push(I - 1)
            }
        }, e.WebGLGraphics.buildComplexPoly = function(h, c) {
            var i = h.points.slice();
            if (!(i.length < 6)) {
                var u = c.indices;
                c.points = i, c.alpha = h.fillAlpha, c.color = e.hex2rgb(h.fillColor);
                for (var n, a, r = 1 / 0, o = -1 / 0, s = 1 / 0, l = -1 / 0, t = 0; t < i.length; t += 2) n = i[t], a = i[t + 1], r = r > n ? n : r, o = n > o ? n : o, s = s > a ? a : s, l = a > l ? a : l;
                i.push(r, s, o, s, o, l, r, l);
                var d = i.length / 2;
                for (t = 0; d > t; t++) u.push(t)
            }
        }, e.WebGLGraphics.buildPoly = function(l, c) {
            var r = l.points;
            if (!(r.length < 6)) {
                var h = c.points,
                    a = c.indices,
                    _ = r.length / 2,
                    s = e.hex2rgb(l.fillColor),
                    o = l.fillAlpha,
                    u = s[0] * o,
                    d = s[1] * o,
                    p = s[2] * o,
                    i = e.PolyK.Triangulate(r),
                    n = h.length / 6,
                    t = 0;
                for (t = 0; t < i.length; t += 3) a.push(i[t] + n), a.push(i[t] + n), a.push(i[t + 1] + n), a.push(i[t + 2] + n), a.push(i[t + 2] + n);
                for (t = 0; _ > t; t++) h.push(r[2 * t], r[2 * t + 1], u, d, p, o)
            }
        }, e.WebGLGraphics.graphicsDataPool = [], e.WebGLGraphicsData = function(e) {
            this.gl = e, this.color = [0, 0, 0], this.points = [], this.indices = [], this.lastIndex = 0, this.buffer = e.createBuffer(), this.indexBuffer = e.createBuffer(), this.mode = 1, this.alpha = 1, this.dirty = !0
        }, e.WebGLGraphicsData.prototype.reset = function() {
            this.points = [], this.indices = [], this.lastIndex = 0
        }, e.WebGLGraphicsData.prototype.upload = function() {
            var e = this.gl;
            this.glPoints = new Float32Array(this.points), e.bindBuffer(e.ARRAY_BUFFER, this.buffer), e.bufferData(e.ARRAY_BUFFER, this.glPoints, e.STATIC_DRAW), this.glIndicies = new Uint16Array(this.indices), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.glIndicies, e.STATIC_DRAW), this.dirty = !1
        }, e.glContexts = [], e.WebGLRenderer = function(n, a, i) {
            if (i)
                for (var r in e.defaultRenderOptions) "undefined" == typeof i[r] && (i[r] = e.defaultRenderOptions[r]);
            else i = e.defaultRenderOptions;
            this.type = e.WEBGL_RENDERER, this.resolution = i.resolution, this.transparent = i.transparent, this.preserveDrawingBuffer = i.preserveDrawingBuffer, this.clearBeforeRender = i.clearBeforeRender, this.width = n || 800, this.height = a || 600, this.view = i.view || document.createElement("canvas"), this.contextLost = this.handleContextLost.bind(this), this.contextRestoredLost = this.handleContextRestored.bind(this), this.view.addEventListener("webglcontextlost", this.contextLost, !1), this.view.addEventListener("webglcontextrestored", this.contextRestoredLost, !1), this.contextOptions = {
                alpha: this.transparent,
                antialias: i.antialias,
                premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent,
                stencil: !0,
                preserveDrawingBuffer: i.preserveDrawingBuffer
            };
            var t = null;
            if (["experimental-webgl", "webgl"].forEach(function(e) {
                    try {
                        t = t || this.view.getContext(e, this.contextOptions)
                    } catch (i) {}
                }, this), !t) throw new Error("This browser does not support webGL. Try using the canvas renderer" + this);
            this.gl = t, this.glContextId = t.id = e.WebGLRenderer.glContextId++, e.glContexts[this.glContextId] = t, e.blendModesWebGL || (e.blendModesWebGL = [], e.blendModesWebGL[e.blendModes.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.ADD] = [t.SRC_ALPHA, t.DST_ALPHA], e.blendModesWebGL[e.blendModes.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.SCREEN] = [t.SRC_ALPHA, t.ONE], e.blendModesWebGL[e.blendModes.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA]), this.projection = new e.Point, this.offset = new e.Point(0, 0), this.resize(n, a), this.contextLost = !1, this.shaderManager = new e.WebGLShaderManager(t), this.spriteBatch = new e.WebGLSpriteBatch(t), this.maskManager = new e.WebGLMaskManager(t), this.filterManager = new e.WebGLFilterManager(t, this.transparent), this.stencilManager = new e.WebGLStencilManager(t), this.blendModeManager = new e.WebGLBlendModeManager(t), this.renderSession = {}, this.renderSession.gl = this.gl, this.renderSession.drawCount = 0, this.renderSession.shaderManager = this.shaderManager, this.renderSession.maskManager = this.maskManager, this.renderSession.filterManager = this.filterManager, this.renderSession.blendModeManager = this.blendModeManager, this.renderSession.spriteBatch = this.spriteBatch, this.renderSession.stencilManager = this.stencilManager, this.renderSession.renderer = this, this.renderSession.resolution = this.resolution, t.disable(t.DEPTH_TEST), t.disable(t.CULL_FACE), t.enable(t.BLEND), t.colorMask(!0, !0, !0, this.transparent)
        }, e.WebGLRenderer.prototype.constructor = e.WebGLRenderer, e.WebGLRenderer.prototype.render = function(t) {
            if (!this.contextLost) {
                this.__stage !== t && (t.interactive && t.interactionManager.removeEvents(), this.__stage = t), e.WebGLRenderer.updateTextures(), t.updateTransform(), t._interactive && (t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this)));
                var i = this.gl;
                i.viewport(0, 0, this.width, this.height), i.bindFramebuffer(i.FRAMEBUFFER, null), this.clearBeforeRender && (this.transparent ? i.clearColor(0, 0, 0, 0) : i.clearColor(t.backgroundColorSplit[0], t.backgroundColorSplit[1], t.backgroundColorSplit[2], 1), i.clear(i.COLOR_BUFFER_BIT)), this.renderDisplayObject(t, this.projection), t.interactive ? t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this)) : t._interactiveEventsAdded && (t._interactiveEventsAdded = !1, t.interactionManager.setTarget(this))
            }
        }, e.WebGLRenderer.prototype.renderDisplayObject = function(t, i, r) {
            this.renderSession.blendModeManager.setBlendMode(e.blendModes.NORMAL), this.renderSession.drawCount = 0, this.renderSession.currentBlendMode = 9999, this.renderSession.projection = i, this.renderSession.offset = this.offset, this.spriteBatch.begin(this.renderSession), this.filterManager.begin(this.renderSession, r), t._renderWebGL(this.renderSession), this.spriteBatch.end()
        }, e.WebGLRenderer.updateTextures = function() {
            var t = 0;
            for (t = 0; t < e.Texture.frameUpdates.length; t++) e.WebGLRenderer.updateTextureFrame(e.Texture.frameUpdates[t]);
            for (t = 0; t < e.texturesToDestroy.length; t++) e.WebGLRenderer.destroyTexture(e.texturesToDestroy[t]);
            e.texturesToUpdate.length = 0, e.texturesToDestroy.length = 0, e.Texture.frameUpdates.length = 0
        }, e.WebGLRenderer.destroyTexture = function(i) {
            for (var t = i._glTextures.length - 1; t >= 0; t--) {
                var r = i._glTextures[t],
                    n = e.glContexts[t];
                n && r && n.deleteTexture(r)
            }
            i._glTextures.length = 0
        }, e.WebGLRenderer.updateTextureFrame = function(e) {
            e._updateWebGLuvs()
        }, e.WebGLRenderer.prototype.resize = function(e, t) {
            this.width = e * this.resolution, this.height = t * this.resolution, this.view.width = this.width, this.view.height = this.height, this.gl.viewport(0, 0, this.width, this.height), this.projection.x = this.width / 2 / this.resolution, this.projection.y = -this.height / 2 / this.resolution
        }, e.createWebGLTexture = function(i, t) {
            return i.hasLoaded && (i._glTextures[t.id] = t.createTexture(), t.bindTexture(t.TEXTURE_2D, i._glTextures[t.id]), t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.premultipliedAlpha), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, i.source), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, i.scaleMode === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, i.scaleMode === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), i._powerOf2 ? (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT)) : (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE)), t.bindTexture(t.TEXTURE_2D, null), i._dirty[t.id] = !1), i._glTextures[t.id]
        }, e.updateWebGLTexture = function(i, t) {
            i._glTextures[t.id] && (t.bindTexture(t.TEXTURE_2D, i._glTextures[t.id]), t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL, i.premultipliedAlpha), t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, i.source), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, i.scaleMode === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, i.scaleMode === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), i._powerOf2 ? (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.REPEAT), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.REPEAT)) : (t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE)), i._dirty[t.id] = !1)
        }, e.WebGLRenderer.prototype.handleContextLost = function(e) {
            e.preventDefault(), this.contextLost = !0
        }, e.WebGLRenderer.prototype.handleContextRestored = function() {
            try {
                this.gl = this.view.getContext("experimental-webgl", this.contextOptions)
            } catch (n) {
                try {
                    this.gl = this.view.getContext("webgl", this.contextOptions)
                } catch (a) {
                    throw new Error(" This browser does not support webGL. Try using the canvas renderer" + this)
                }
            }
            e.glContexts[this.glContextId] = null;
            var t = this.gl;
            this.glContextId = t.id = e.WebGLRenderer.glContextId++, e.glContexts[this.glContextId] = t, this.shaderManager.setContext(t), this.spriteBatch.setContext(t), this.maskManager.setContext(t), this.filterManager.setContext(t), this.renderSession.gl = this.gl, t.disable(t.DEPTH_TEST), t.disable(t.CULL_FACE), t.enable(t.BLEND), t.colorMask(!0, !0, !0, this.transparent), this.gl.viewport(0, 0, this.width, this.height);
            for (var i in e.TextureCache) {
                var r = e.TextureCache[i].baseTexture;
                r._glTextures = []
            }
            "object" == typeof this.contextLost && this.view.removeEventListener("webglcontextlost", this.contextLost), this.contextLost = !1
        }, e.WebGLRenderer.prototype.destroy = function() {
            "object" == typeof this.contextLost && this.view.removeEventListener("webglcontextlost", this.contextLost), this.view.removeEventListener("webglcontextrestored", this.contextRestoredLost), e.glContexts[this.glContextId] = null, this.projection = null, this.offset = null, this.shaderManager.destroy(), this.spriteBatch.destroy(), this.maskManager.destroy(), this.filterManager.destroy(), this.shaderManager = null, this.spriteBatch = null, this.maskManager = null, this.filterManager = null, this.gl = null, this.renderSession = null, this.view = null, this.__stage = null, this.contextRestoredLost = null, this.stencilManager = null, this.blendModeManager = null, this.contextOptions = null
        }, e.WebGLRenderer.glContextId = 0, e.WebGLBlendModeManager = function(e) {
            this.gl = e, this.currentBlendMode = 99999
        }, e.WebGLBlendModeManager.prototype.setBlendMode = function(t) {
            if (this.currentBlendMode === t) return !1;
            this.currentBlendMode = t;
            var i = e.blendModesWebGL[this.currentBlendMode];
            return this.gl.blendFunc(i[0], i[1]), !0
        }, e.WebGLBlendModeManager.prototype.destroy = function() {
            this.gl = null
        }, e.WebGLMaskManager = function(e) {
            this.setContext(e)
        }, e.WebGLMaskManager.prototype.setContext = function(e) {
            this.gl = e
        }, e.WebGLMaskManager.prototype.pushMask = function(t, i) {
            var r = i.gl;
            t.dirty && e.WebGLGraphics.updateGraphics(t, r), t._webGL[r.id].data.length && i.stencilManager.pushStencil(t, t._webGL[r.id].data[0], i)
        }, e.WebGLMaskManager.prototype.popMask = function(e, t) {
            var i = this.gl;
            t.stencilManager.popStencil(e, e._webGL[i.id].data[0], t)
        }, e.WebGLMaskManager.prototype.destroy = function() {
            this.gl = null
        }, e.WebGLStencilManager = function(e) {
            this.stencilStack = [], this.setContext(e), this.reverse = !0, this.count = 0
        }, e.WebGLStencilManager.prototype.setContext = function(e) {
            this.gl = e
        }, e.WebGLStencilManager.prototype.pushStencil = function(r, i, n) {
            var e = this.gl;
            this.bindGraphics(r, i, n), 0 === this.stencilStack.length && (e.enable(e.STENCIL_TEST), e.clear(e.STENCIL_BUFFER_BIT), this.reverse = !0, this.count = 0), this.stencilStack.push(i);
            var t = this.count;
            e.colorMask(!1, !1, !1, !1), e.stencilFunc(e.ALWAYS, 0, 255), e.stencilOp(e.KEEP, e.KEEP, e.INVERT), 1 === i.mode ? (e.drawElements(e.TRIANGLE_FAN, i.indices.length - 4, e.UNSIGNED_SHORT, 0), this.reverse ? (e.stencilFunc(e.EQUAL, 255 - t, 255), e.stencilOp(e.KEEP, e.KEEP, e.DECR)) : (e.stencilFunc(e.EQUAL, t, 255), e.stencilOp(e.KEEP, e.KEEP, e.INCR)), e.drawElements(e.TRIANGLE_FAN, 4, e.UNSIGNED_SHORT, 2 * (i.indices.length - 4)), this.reverse ? e.stencilFunc(e.EQUAL, 255 - (t + 1), 255) : e.stencilFunc(e.EQUAL, t + 1, 255), this.reverse = !this.reverse) : (this.reverse ? (e.stencilFunc(e.EQUAL, t, 255), e.stencilOp(e.KEEP, e.KEEP, e.INCR)) : (e.stencilFunc(e.EQUAL, 255 - t, 255), e.stencilOp(e.KEEP, e.KEEP, e.DECR)), e.drawElements(e.TRIANGLE_STRIP, i.indices.length, e.UNSIGNED_SHORT, 0), this.reverse ? e.stencilFunc(e.EQUAL, t + 1, 255) : e.stencilFunc(e.EQUAL, 255 - (t + 1), 255)), e.colorMask(!0, !0, !0, !0), e.stencilOp(e.KEEP, e.KEEP, e.KEEP), this.count++
        }, e.WebGLStencilManager.prototype.bindGraphics = function(r, n, a) {
            this._currentGraphics = r;
            var i, t = this.gl,
                o = a.projection,
                s = a.offset;
            1 === n.mode ? (i = a.shaderManager.complexPrimitiveShader, a.shaderManager.setShader(i), t.uniformMatrix3fv(i.translationMatrix, !1, r.worldTransform.toArray(!0)), t.uniform2f(i.projectionVector, o.x, -o.y), t.uniform2f(i.offsetVector, -s.x, -s.y), t.uniform3fv(i.tintColor, e.hex2rgb(r.tint)), t.uniform3fv(i.color, n.color), t.uniform1f(i.alpha, r.worldAlpha * n.alpha), t.bindBuffer(t.ARRAY_BUFFER, n.buffer), t.vertexAttribPointer(i.aVertexPosition, 2, t.FLOAT, !1, 8, 0), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, n.indexBuffer)) : (i = a.shaderManager.primitiveShader, a.shaderManager.setShader(i), t.uniformMatrix3fv(i.translationMatrix, !1, r.worldTransform.toArray(!0)), t.uniform2f(i.projectionVector, o.x, -o.y), t.uniform2f(i.offsetVector, -s.x, -s.y), t.uniform3fv(i.tintColor, e.hex2rgb(r.tint)), t.uniform1f(i.alpha, r.worldAlpha), t.bindBuffer(t.ARRAY_BUFFER, n.buffer), t.vertexAttribPointer(i.aVertexPosition, 2, t.FLOAT, !1, 24, 0), t.vertexAttribPointer(i.colorAttribute, 4, t.FLOAT, !1, 24, 8), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, n.indexBuffer))
        }, e.WebGLStencilManager.prototype.popStencil = function(r, i, n) {
            var e = this.gl;
            if (this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length) e.disable(e.STENCIL_TEST);
            else {
                var t = this.count;
                this.bindGraphics(r, i, n), e.colorMask(!1, !1, !1, !1), 1 === i.mode ? (this.reverse = !this.reverse, this.reverse ? (e.stencilFunc(e.EQUAL, 255 - (t + 1), 255), e.stencilOp(e.KEEP, e.KEEP, e.INCR)) : (e.stencilFunc(e.EQUAL, t + 1, 255), e.stencilOp(e.KEEP, e.KEEP, e.DECR)), e.drawElements(e.TRIANGLE_FAN, 4, e.UNSIGNED_SHORT, 2 * (i.indices.length - 4)), e.stencilFunc(e.ALWAYS, 0, 255), e.stencilOp(e.KEEP, e.KEEP, e.INVERT), e.drawElements(e.TRIANGLE_FAN, i.indices.length - 4, e.UNSIGNED_SHORT, 0), this.reverse ? e.stencilFunc(e.EQUAL, t, 255) : e.stencilFunc(e.EQUAL, 255 - t, 255)) : (this.reverse ? (e.stencilFunc(e.EQUAL, t + 1, 255), e.stencilOp(e.KEEP, e.KEEP, e.DECR)) : (e.stencilFunc(e.EQUAL, 255 - (t + 1), 255), e.stencilOp(e.KEEP, e.KEEP, e.INCR)), e.drawElements(e.TRIANGLE_STRIP, i.indices.length, e.UNSIGNED_SHORT, 0), this.reverse ? e.stencilFunc(e.EQUAL, t, 255) : e.stencilFunc(e.EQUAL, 255 - t, 255)), e.colorMask(!0, !0, !0, !0), e.stencilOp(e.KEEP, e.KEEP, e.KEEP)
            }
        }, e.WebGLStencilManager.prototype.destroy = function() {
            this.stencilStack = null, this.gl = null
        }, e.WebGLShaderManager = function(t) {
            this.maxAttibs = 10, this.attribState = [], this.tempAttribState = [];
            for (var e = 0; e < this.maxAttibs; e++) this.attribState[e] = !1;
            this.setContext(t)
        }, e.WebGLShaderManager.prototype.setContext = function(t) {
            this.gl = t, this.primitiveShader = new e.PrimitiveShader(t), this.complexPrimitiveShader = new e.ComplexPrimitiveShader(t), this.defaultShader = new e.PixiShader(t), this.fastShader = new e.PixiFastShader(t), this.stripShader = new e.StripShader(t), this.setShader(this.defaultShader)
        }, e.WebGLShaderManager.prototype.setAttribs = function(t) {
            var e;
            for (e = 0; e < this.tempAttribState.length; e++) this.tempAttribState[e] = !1;
            for (e = 0; e < t.length; e++) {
                var r = t[e];
                this.tempAttribState[r] = !0
            }
            var i = this.gl;
            for (e = 0; e < this.attribState.length; e++) this.attribState[e] !== this.tempAttribState[e] && (this.attribState[e] = this.tempAttribState[e], this.tempAttribState[e] ? i.enableVertexAttribArray(e) : i.disableVertexAttribArray(e))
        }, e.WebGLShaderManager.prototype.setShader = function(e) {
            return this._currentId === e._UID ? !1 : (this._currentId = e._UID, this.currentShader = e, this.gl.useProgram(e.program), this.setAttribs(e.attributes), !0)
        }, e.WebGLShaderManager.prototype.destroy = function() {
            this.attribState = null, this.tempAttribState = null, this.primitiveShader.destroy(), this.complexPrimitiveShader.destroy(), this.defaultShader.destroy(), this.fastShader.destroy(), this.stripShader.destroy(), this.gl = null
        }, e.WebGLSpriteBatch = function(r) {
            this.vertSize = 6, this.size = 2e3;
            var n = 4 * this.size * this.vertSize,
                i = 6 * this.size;
            this.vertices = new Float32Array(n), this.indices = new Uint16Array(i), this.lastIndexCount = 0;
            for (var e = 0, t = 0; i > e; e += 6, t += 4) this.indices[e + 0] = t + 0, this.indices[e + 1] = t + 1, this.indices[e + 2] = t + 2, this.indices[e + 3] = t + 0, this.indices[e + 4] = t + 2, this.indices[e + 5] = t + 3;
            this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.setContext(r), this.dirty = !0, this.textures = [], this.blendModes = []
        }, e.WebGLSpriteBatch.prototype.setContext = function(e) {
            this.gl = e, this.vertexBuffer = e.createBuffer(), this.indexBuffer = e.createBuffer(), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer), e.bufferData(e.ARRAY_BUFFER, this.vertices, e.DYNAMIC_DRAW), this.currentBlendMode = 99999
        }, e.WebGLSpriteBatch.prototype.begin = function(e) {
            this.renderSession = e, this.shader = this.renderSession.shaderManager.defaultShader, this.start()
        }, e.WebGLSpriteBatch.prototype.end = function() {
            this.flush()
        }, e.WebGLSpriteBatch.prototype.render = function(n) {
            var i = n.texture;
            this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = i.baseTexture);
            var r = i._uvs;
            if (r) {
                var s, a, l, o, u = n.worldAlpha,
                    p = n.tint,
                    e = this.vertices,
                    b = n.anchor.x,
                    x = n.anchor.y;
                if (i.trim) {
                    var d = i.trim;
                    a = d.x - b * d.width, s = a + i.crop.width, o = d.y - x * d.height, l = o + i.crop.height
                } else s = i.frame.width * (1 - b), a = i.frame.width * -b, l = i.frame.height * (1 - x), o = i.frame.height * -x;
                var t = 4 * this.currentBatchSize * this.vertSize,
                    _ = i.baseTexture.resolution,
                    c = n.worldTransform,
                    m = c.a / _,
                    g = c.c / _,
                    v = c.b / _,
                    y = c.d / _,
                    h = c.tx,
                    f = c.ty;
                e[t++] = m * a + v * o + h, e[t++] = y * o + g * a + f, e[t++] = r.x0, e[t++] = r.y0, e[t++] = u, e[t++] = p, e[t++] = m * s + v * o + h, e[t++] = y * o + g * s + f, e[t++] = r.x1, e[t++] = r.y1, e[t++] = u, e[t++] = p, e[t++] = m * s + v * l + h, e[t++] = y * l + g * s + f, e[t++] = r.x2, e[t++] = r.y2, e[t++] = u, e[t++] = p, e[t++] = m * a + v * l + h, e[t++] = y * l + g * a + f, e[t++] = r.x3, e[t++] = r.y3, e[t++] = u, e[t++] = p, this.textures[this.currentBatchSize] = n.texture.baseTexture, this.blendModes[this.currentBatchSize] = n.blendMode, this.currentBatchSize++
            }
        }, e.WebGLSpriteBatch.prototype.renderTilingSprite = function(t) {
            var a = t.tilingTexture;
            this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = a.baseTexture), t._uvs || (t._uvs = new e.TextureUvs);
            var n = t._uvs;
            t.tilePosition.x %= a.baseTexture.width * t.tileScaleOffset.x, t.tilePosition.y %= a.baseTexture.height * t.tileScaleOffset.y;
            var _ = t.tilePosition.x / (a.baseTexture.width * t.tileScaleOffset.x),
                y = t.tilePosition.y / (a.baseTexture.height * t.tileScaleOffset.y),
                E = t.width / a.baseTexture.width / (t.tileScale.x * t.tileScaleOffset.x),
                S = t.height / a.baseTexture.height / (t.tileScale.y * t.tileScaleOffset.y);
            n.x0 = 0 - _, n.y0 = 0 - y, n.x1 = 1 * E - _, n.y1 = 0 - y, n.x2 = 1 * E - _, n.y2 = 1 * S - y, n.x3 = 0 - _, n.y3 = 1 * S - y;
            var l = t.worldAlpha,
                c = t.tint,
                i = this.vertices,
                C = t.width,
                T = t.height,
                w = t.anchor.x,
                A = t.anchor.y,
                f = C * (1 - w),
                m = C * -w,
                g = T * (1 - A),
                v = T * -A,
                r = 4 * this.currentBatchSize * this.vertSize,
                b = a.baseTexture.resolution,
                o = t.worldTransform,
                p = o.a / b,
                d = o.c / b,
                u = o.b / b,
                s = o.d / b,
                x = o.tx,
                h = o.ty;
            i[r++] = p * m + u * v + x, i[r++] = s * v + d * m + h, i[r++] = n.x0, i[r++] = n.y0, i[r++] = l, i[r++] = c, i[r++] = p * f + u * v + x, i[r++] = s * v + d * f + h, i[r++] = n.x1, i[r++] = n.y1, i[r++] = l, i[r++] = c, i[r++] = p * f + u * g + x, i[r++] = s * g + d * f + h, i[r++] = n.x2, i[r++] = n.y2, i[r++] = l, i[r++] = c, i[r++] = p * m + u * g + x, i[r++] = s * g + d * m + h, i[r++] = n.x3, i[r++] = n.y3, i[r++] = l, i[r++] = c, this.textures[this.currentBatchSize] = a.baseTexture, this.blendModes[this.currentBatchSize] = t.blendMode, this.currentBatchSize++
        }, e.WebGLSpriteBatch.prototype.flush = function() {
            if (0 !== this.currentBatchSize) {
                var e = this.gl;
                if (this.renderSession.shaderManager.setShader(this.renderSession.shaderManager.defaultShader), this.dirty) {
                    this.dirty = !1, e.activeTexture(e.TEXTURE0), e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
                    var c = this.renderSession.projection;
                    e.uniform2f(this.shader.projectionVector, c.x, c.y);
                    var l = 4 * this.vertSize;
                    e.vertexAttribPointer(this.shader.aVertexPosition, 2, e.FLOAT, !1, l, 0), e.vertexAttribPointer(this.shader.aTextureCoord, 2, e.FLOAT, !1, l, 8), e.vertexAttribPointer(this.shader.colorAttribute, 2, e.FLOAT, !1, l, 16)
                }
                if (this.currentBatchSize > .5 * this.size) e.bufferSubData(e.ARRAY_BUFFER, 0, this.vertices);
                else {
                    var h = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                    e.bufferSubData(e.ARRAY_BUFFER, 0, h)
                }
                for (var n, a, i = 0, o = 0, r = null, s = this.renderSession.blendModeManager.currentBlendMode, t = 0, u = this.currentBatchSize; u > t; t++) n = this.textures[t], a = this.blendModes[t], (r !== n || s !== a) && (this.renderBatch(r, i, o), o = t, i = 0, r = n, s = a, this.renderSession.blendModeManager.setBlendMode(s)), i++;
                this.renderBatch(r, i, o), this.currentBatchSize = 0
            }
        }, e.WebGLSpriteBatch.prototype.renderBatch = function(i, r, n) {
            if (0 !== r) {
                var t = this.gl;
                t.bindTexture(t.TEXTURE_2D, i._glTextures[t.id] || e.createWebGLTexture(i, t)), i._dirty[t.id] && e.updateWebGLTexture(this.currentBaseTexture, t), t.drawElements(t.TRIANGLES, 6 * r, t.UNSIGNED_SHORT, 6 * n * 2), this.renderSession.drawCount++
            }
        }, e.WebGLSpriteBatch.prototype.stop = function() {
            this.flush()
        }, e.WebGLSpriteBatch.prototype.start = function() {
            this.dirty = !0
        }, e.WebGLSpriteBatch.prototype.destroy = function() {
            this.vertices = null, this.indices = null, this.gl.deleteBuffer(this.vertexBuffer), this.gl.deleteBuffer(this.indexBuffer), this.currentBaseTexture = null, this.gl = null
        }, e.WebGLFastSpriteBatch = function(r) {
            this.vertSize = 10, this.maxSize = 6e3, this.size = this.maxSize;
            var n = 4 * this.size * this.vertSize,
                i = 6 * this.maxSize;
            this.vertices = new Float32Array(n), this.indices = new Uint16Array(i), this.vertexBuffer = null, this.indexBuffer = null, this.lastIndexCount = 0;
            for (var e = 0, t = 0; i > e; e += 6, t += 4) this.indices[e + 0] = t + 0, this.indices[e + 1] = t + 1, this.indices[e + 2] = t + 2, this.indices[e + 3] = t + 0, this.indices[e + 4] = t + 2, this.indices[e + 5] = t + 3;
            this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.currentBlendMode = 0, this.renderSession = null, this.shader = null, this.matrix = null, this.setContext(r)
        }, e.WebGLFastSpriteBatch.prototype.setContext = function(e) {
            this.gl = e, this.vertexBuffer = e.createBuffer(), this.indexBuffer = e.createBuffer(), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer), e.bufferData(e.ARRAY_BUFFER, this.vertices, e.DYNAMIC_DRAW)
        }, e.WebGLFastSpriteBatch.prototype.begin = function(e, t) {
            this.renderSession = t, this.shader = this.renderSession.shaderManager.fastShader, this.matrix = e.worldTransform.toArray(!0), this.start()
        }, e.WebGLFastSpriteBatch.prototype.end = function() {
            this.flush()
        }, e.WebGLFastSpriteBatch.prototype.render = function(r) {
            var t = r.children,
                e = t[0];
            if (e.texture._uvs) {
                this.currentBaseTexture = e.texture.baseTexture, e.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(e.blendMode));
                for (var i = 0, n = t.length; n > i; i++) this.renderSprite(t[i]);
                this.flush()
            }
        }, e.WebGLFastSpriteBatch.prototype.renderSprite = function(e) {
            if (e.visible && (e.texture.baseTexture === this.currentBaseTexture || (this.flush(), this.currentBaseTexture = e.texture.baseTexture, e.texture._uvs))) {
                var r, h, c, s, a, o, n, t, i = this.vertices;
                if (r = e.texture._uvs, h = e.texture.frame.width, c = e.texture.frame.height, e.texture.trim) {
                    var l = e.texture.trim;
                    a = l.x - e.anchor.x * l.width, s = a + e.texture.crop.width, n = l.y - e.anchor.y * l.height, o = n + e.texture.crop.height
                } else s = e.texture.frame.width * (1 - e.anchor.x), a = e.texture.frame.width * -e.anchor.x, o = e.texture.frame.height * (1 - e.anchor.y), n = e.texture.frame.height * -e.anchor.y;
                t = 4 * this.currentBatchSize * this.vertSize, i[t++] = a, i[t++] = n, i[t++] = e.position.x, i[t++] = e.position.y, i[t++] = e.scale.x, i[t++] = e.scale.y, i[t++] = e.rotation, i[t++] = r.x0, i[t++] = r.y1, i[t++] = e.alpha, i[t++] = s, i[t++] = n, i[t++] = e.position.x, i[t++] = e.position.y, i[t++] = e.scale.x, i[t++] = e.scale.y, i[t++] = e.rotation, i[t++] = r.x1, i[t++] = r.y1, i[t++] = e.alpha, i[t++] = s, i[t++] = o, i[t++] = e.position.x, i[t++] = e.position.y, i[t++] = e.scale.x, i[t++] = e.scale.y, i[t++] = e.rotation, i[t++] = r.x2, i[t++] = r.y2, i[t++] = e.alpha, i[t++] = a, i[t++] = o, i[t++] = e.position.x, i[t++] = e.position.y, i[t++] = e.scale.x, i[t++] = e.scale.y, i[t++] = e.rotation, i[t++] = r.x3, i[t++] = r.y3, i[t++] = e.alpha, this.currentBatchSize++, this.currentBatchSize >= this.size && this.flush()
            }
        }, e.WebGLFastSpriteBatch.prototype.flush = function() {
            if (0 !== this.currentBatchSize) {
                var t = this.gl;
                if (this.currentBaseTexture._glTextures[t.id] || e.createWebGLTexture(this.currentBaseTexture, t), t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id]), this.currentBatchSize > .5 * this.size) t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices);
                else {
                    var i = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                    t.bufferSubData(t.ARRAY_BUFFER, 0, i)
                }
                t.drawElements(t.TRIANGLES, 6 * this.currentBatchSize, t.UNSIGNED_SHORT, 0), this.currentBatchSize = 0, this.renderSession.drawCount++
            }
        }, e.WebGLFastSpriteBatch.prototype.stop = function() {
            this.flush()
        }, e.WebGLFastSpriteBatch.prototype.start = function() {
            var e = this.gl;
            e.activeTexture(e.TEXTURE0), e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
            var i = this.renderSession.projection;
            e.uniform2f(this.shader.projectionVector, i.x, i.y), e.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
            var t = 4 * this.vertSize;
            e.vertexAttribPointer(this.shader.aVertexPosition, 2, e.FLOAT, !1, t, 0), e.vertexAttribPointer(this.shader.aPositionCoord, 2, e.FLOAT, !1, t, 8), e.vertexAttribPointer(this.shader.aScale, 2, e.FLOAT, !1, t, 16), e.vertexAttribPointer(this.shader.aRotation, 1, e.FLOAT, !1, t, 24), e.vertexAttribPointer(this.shader.aTextureCoord, 2, e.FLOAT, !1, t, 28), e.vertexAttribPointer(this.shader.colorAttribute, 1, e.FLOAT, !1, t, 36)
        }, e.WebGLFilterManager = function(e, t) {
            this.transparent = t, this.filterStack = [], this.offsetX = 0, this.offsetY = 0, this.setContext(e)
        }, e.WebGLFilterManager.prototype.setContext = function(e) {
            this.gl = e, this.texturePool = [], this.initShaderBuffers()
        }, e.WebGLFilterManager.prototype.begin = function(e, i) {
            this.renderSession = e, this.defaultShader = e.shaderManager.defaultShader;
            var t = this.renderSession.projection;
            this.width = 2 * t.x, this.height = 2 * -t.y, this.buffer = i
        }, e.WebGLFilterManager.prototype.pushFilter = function(r) {
            var i = this.gl,
                o = this.renderSession.projection,
                s = this.renderSession.offset;
            r._filterArea = r.target.filterArea || r.target.getBounds(), this.filterStack.push(r);
            var l = r.filterPasses[0];
            this.offsetX += r._filterArea.x, this.offsetY += r._filterArea.y;
            var n = this.texturePool.pop();
            n ? n.resize(this.width, this.height) : n = new e.FilterTexture(this.gl, this.width, this.height), i.bindTexture(i.TEXTURE_2D, n.texture);
            var t = r._filterArea,
                a = l.padding;
            t.x -= a, t.y -= a, t.width += 2 * a, t.height += 2 * a, t.x < 0 && (t.x = 0), t.width > this.width && (t.width = this.width), t.y < 0 && (t.y = 0), t.height > this.height && (t.height = this.height), i.bindFramebuffer(i.FRAMEBUFFER, n.frameBuffer), i.viewport(0, 0, t.width, t.height), o.x = t.width / 2, o.y = -t.height / 2, s.x = -t.x, s.y = -t.y, this.renderSession.shaderManager.setShader(this.defaultShader), i.uniform2f(this.defaultShader.projectionVector, t.width / 2, -t.height / 2), i.uniform2f(this.defaultShader.offsetVector, -t.x, -t.y), i.colorMask(!0, !0, !0, !0), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), r._glFilterTexture = n
        }, e.WebGLFilterManager.prototype.popFilter = function() {
            var t = this.gl,
                r = this.filterStack.pop(),
                i = r._filterArea,
                h = r._glFilterTexture,
                g = this.renderSession.projection,
                _ = this.renderSession.offset;
            if (r.filterPasses.length > 1) {
                t.viewport(0, 0, i.width, i.height), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = 0, this.vertexArray[1] = i.height, this.vertexArray[2] = i.width, this.vertexArray[3] = i.height, this.vertexArray[4] = 0, this.vertexArray[5] = 0, this.vertexArray[6] = i.width, this.vertexArray[7] = 0, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = i.width / this.width, this.uvArray[5] = i.height / this.height, this.uvArray[6] = i.width / this.width, this.uvArray[7] = i.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray);
                var s = h,
                    n = this.texturePool.pop();
                n || (n = new e.FilterTexture(this.gl, this.width, this.height)), n.resize(this.width, this.height), t.bindFramebuffer(t.FRAMEBUFFER, n.frameBuffer), t.clear(t.COLOR_BUFFER_BIT), t.disable(t.BLEND);
                for (var p = 0; p < r.filterPasses.length - 1; p++) {
                    var y = r.filterPasses[p];
                    t.bindFramebuffer(t.FRAMEBUFFER, n.frameBuffer), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, s.texture), this.applyFilterPass(y, i, i.width, i.height);
                    var b = s;
                    s = n, n = b
                }
                t.enable(t.BLEND), h = s, this.texturePool.push(n)
            }
            var v = r.filterPasses[r.filterPasses.length - 1];
            this.offsetX -= i.x, this.offsetY -= i.y;
            var o = this.width,
                a = this.height,
                c = 0,
                d = 0,
                f = this.buffer;
            if (0 === this.filterStack.length) t.colorMask(!0, !0, !0, !0);
            else {
                var m = this.filterStack[this.filterStack.length - 1];
                i = m._filterArea, o = i.width, a = i.height, c = i.x, d = i.y, f = m._glFilterTexture.frameBuffer
            }
            g.x = o / 2, g.y = -a / 2, _.x = c, _.y = d, i = r._filterArea;
            var u = i.x - c,
                l = i.y - d;
            t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = u, this.vertexArray[1] = l + i.height, this.vertexArray[2] = u + i.width, this.vertexArray[3] = l + i.height, this.vertexArray[4] = u, this.vertexArray[5] = l, this.vertexArray[6] = u + i.width, this.vertexArray[7] = l, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = i.width / this.width, this.uvArray[5] = i.height / this.height, this.uvArray[6] = i.width / this.width, this.uvArray[7] = i.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray), t.viewport(0, 0, o, a), t.bindFramebuffer(t.FRAMEBUFFER, f), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, h.texture), this.applyFilterPass(v, i, o, a), this.renderSession.shaderManager.setShader(this.defaultShader), t.uniform2f(this.defaultShader.projectionVector, o / 2, -a / 2), t.uniform2f(this.defaultShader.offsetVector, -c, -d), this.texturePool.push(h), r._glFilterTexture = null
        }, e.WebGLFilterManager.prototype.applyFilterPass = function(r, o, n, a) {
            var t = this.gl,
                i = r.shaders[t.id];
            i || (i = new e.PixiShader(t), i.fragmentSrc = r.fragmentSrc, i.uniforms = r.uniforms, i.init(), r.shaders[t.id] = i), this.renderSession.shaderManager.setShader(i), t.uniform2f(i.projectionVector, n / 2, -a / 2), t.uniform2f(i.offsetVector, 0, 0), r.uniforms.dimensions && (r.uniforms.dimensions.value[0] = this.width, r.uniforms.dimensions.value[1] = this.height, r.uniforms.dimensions.value[2] = this.vertexArray[0], r.uniforms.dimensions.value[3] = this.vertexArray[5]), i.syncUniforms(), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.vertexAttribPointer(i.aVertexPosition, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), t.vertexAttribPointer(i.aTextureCoord, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer), t.vertexAttribPointer(i.colorAttribute, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.drawElements(t.TRIANGLES, 6, t.UNSIGNED_SHORT, 0), this.renderSession.drawCount++
        }, e.WebGLFilterManager.prototype.initShaderBuffers = function() {
            var e = this.gl;
            this.vertexBuffer = e.createBuffer(), this.uvBuffer = e.createBuffer(), this.colorBuffer = e.createBuffer(), this.indexBuffer = e.createBuffer(), this.vertexArray = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), e.bindBuffer(e.ARRAY_BUFFER, this.vertexBuffer), e.bufferData(e.ARRAY_BUFFER, this.vertexArray, e.STATIC_DRAW), this.uvArray = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), e.bindBuffer(e.ARRAY_BUFFER, this.uvBuffer), e.bufferData(e.ARRAY_BUFFER, this.uvArray, e.STATIC_DRAW), this.colorArray = new Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]), e.bindBuffer(e.ARRAY_BUFFER, this.colorBuffer), e.bufferData(e.ARRAY_BUFFER, this.colorArray, e.STATIC_DRAW), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this.indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), e.STATIC_DRAW)
        }, e.WebGLFilterManager.prototype.destroy = function() {
            var e = this.gl;
            this.filterStack = null, this.offsetX = 0, this.offsetY = 0;
            for (var t = 0; t < this.texturePool.length; t++) this.texturePool[t].destroy();
            this.texturePool = null, e.deleteBuffer(this.vertexBuffer), e.deleteBuffer(this.uvBuffer), e.deleteBuffer(this.colorBuffer), e.deleteBuffer(this.indexBuffer)
        }, e.FilterTexture = function(t, r, n, i) {
            this.gl = t, this.frameBuffer = t.createFramebuffer(), this.texture = t.createTexture(), i = i || e.scaleModes.DEFAULT, t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, i === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, i === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0), this.renderBuffer = t.createRenderbuffer(), t.bindRenderbuffer(t.RENDERBUFFER, this.renderBuffer), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.renderBuffer), this.resize(r, n)
        }, e.FilterTexture.prototype.clear = function() {
            var e = this.gl;
            e.clearColor(0, 0, 0, 0), e.clear(e.COLOR_BUFFER_BIT)
        }, e.FilterTexture.prototype.resize = function(t, i) {
            if (this.width !== t || this.height !== i) {
                this.width = t, this.height = i;
                var e = this.gl;
                e.bindTexture(e.TEXTURE_2D, this.texture), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, t, i, 0, e.RGBA, e.UNSIGNED_BYTE, null), e.bindRenderbuffer(e.RENDERBUFFER, this.renderBuffer), e.renderbufferStorage(e.RENDERBUFFER, e.DEPTH_STENCIL, t, i)
            }
        }, e.FilterTexture.prototype.destroy = function() {
            var e = this.gl;
            e.deleteFramebuffer(this.frameBuffer), e.deleteTexture(this.texture), this.frameBuffer = null, this.texture = null
        }, e.CanvasMaskManager = function() {}, e.CanvasMaskManager.prototype.pushMask = function(r, a) {
            var n = a.context;
            n.save();
            var o = r.alpha,
                t = r.worldTransform,
                i = a.resolution;
            n.setTransform(t.a * i, t.c * i, t.b * i, t.d * i, t.tx * i, t.ty * i), e.CanvasGraphics.renderGraphicsMask(r, n), n.clip(), r.worldAlpha = o
        }, e.CanvasMaskManager.prototype.popMask = function(e) {
            e.context.restore()
        }, e.CanvasTinter = function() {}, e.CanvasTinter.getTintedTexture = function(o, i) {
            var t = o.texture;
            i = e.CanvasTinter.roundColor(i);
            var r = "#" + ("00000" + (0 | i).toString(16)).substr(-6);
            if (t.tintCache = t.tintCache || {}, t.tintCache[r]) return t.tintCache[r];
            var n = e.CanvasTinter.canvas || document.createElement("canvas");
            if (e.CanvasTinter.tintMethod(t, i, n), e.CanvasTinter.convertTintToImage) {
                var a = new Image;
                a.src = n.toDataURL(), t.tintCache[r] = a
            } else t.tintCache[r] = n, e.CanvasTinter.canvas = null;
            return n
        }, e.CanvasTinter.tintWithMultiply = function(i, n, r) {
            var t = r.getContext("2d"),
                e = i.crop;
            r.width = e.width, r.height = e.height, t.fillStyle = "#" + ("00000" + (0 | n).toString(16)).substr(-6), t.fillRect(0, 0, e.width, e.height), t.globalCompositeOperation = "multiply", t.drawImage(i.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height), t.globalCompositeOperation = "destination-atop", t.drawImage(i.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height)
        }, e.CanvasTinter.tintWithOverlay = function(r, n, i) {
            var t = i.getContext("2d"),
                e = r.crop;
            i.width = e.width, i.height = e.height, t.globalCompositeOperation = "copy", t.fillStyle = "#" + ("00000" + (0 | n).toString(16)).substr(-6), t.fillRect(0, 0, e.width, e.height), t.globalCompositeOperation = "destination-atop", t.drawImage(r.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height)
        }, e.CanvasTinter.tintWithPerPixel = function(s, u, a) {
            var r = a.getContext("2d"),
                t = s.crop;
            a.width = t.width, a.height = t.height, r.globalCompositeOperation = "copy", r.drawImage(s.baseTexture.source, t.x, t.y, t.width, t.height, 0, 0, t.width, t.height);
            for (var o = e.hex2rgb(u), d = o[0], h = o[1], c = o[2], l = r.getImageData(0, 0, t.width, t.height), n = l.data, i = 0; i < n.length; i += 4) n[i + 0] *= d, n[i + 1] *= h, n[i + 2] *= c;
            r.putImageData(l, 0, 0)
        }, e.CanvasTinter.roundColor = function(r) {
            var i = e.CanvasTinter.cacheStepsPerColorChannel,
                t = e.hex2rgb(r);
            return t[0] = Math.min(255, t[0] / i * i), t[1] = Math.min(255, t[1] / i * i), t[2] = Math.min(255, t[2] / i * i), e.rgb2hex(t)
        }, e.CanvasTinter.cacheStepsPerColorChannel = 8, e.CanvasTinter.convertTintToImage = !1, e.CanvasTinter.canUseMultiply = e.canUseNewCanvasBlendModes(), e.CanvasTinter.tintMethod = e.CanvasTinter.canUseMultiply ? e.CanvasTinter.tintWithMultiply : e.CanvasTinter.tintWithPerPixel, e.CanvasRenderer = function(r, n, t) {
            if (t)
                for (var i in e.defaultRenderOptions) "undefined" == typeof t[i] && (t[i] = e.defaultRenderOptions[i]);
            else t = e.defaultRenderOptions;
            this.type = e.CANVAS_RENDERER, this.resolution = t.resolution, this.clearBeforeRender = t.clearBeforeRender, this.transparent = t.transparent, e.blendModesCanvas || (e.blendModesCanvas = [], e.canUseNewCanvasBlendModes() ? (e.blendModesCanvas[e.blendModes.NORMAL] = "source-over", e.blendModesCanvas[e.blendModes.ADD] = "lighter", e.blendModesCanvas[e.blendModes.MULTIPLY] = "multiply", e.blendModesCanvas[e.blendModes.SCREEN] = "screen", e.blendModesCanvas[e.blendModes.OVERLAY] = "overlay", e.blendModesCanvas[e.blendModes.DARKEN] = "darken", e.blendModesCanvas[e.blendModes.LIGHTEN] = "lighten", e.blendModesCanvas[e.blendModes.COLOR_DODGE] = "color-dodge", e.blendModesCanvas[e.blendModes.COLOR_BURN] = "color-burn", e.blendModesCanvas[e.blendModes.HARD_LIGHT] = "hard-light", e.blendModesCanvas[e.blendModes.SOFT_LIGHT] = "soft-light", e.blendModesCanvas[e.blendModes.DIFFERENCE] = "difference", e.blendModesCanvas[e.blendModes.EXCLUSION] = "exclusion", e.blendModesCanvas[e.blendModes.HUE] = "hue", e.blendModesCanvas[e.blendModes.SATURATION] = "saturation", e.blendModesCanvas[e.blendModes.COLOR] = "color", e.blendModesCanvas[e.blendModes.LUMINOSITY] = "luminosity") : (e.blendModesCanvas[e.blendModes.NORMAL] = "source-over", e.blendModesCanvas[e.blendModes.ADD] = "lighter", e.blendModesCanvas[e.blendModes.MULTIPLY] = "source-over", e.blendModesCanvas[e.blendModes.SCREEN] = "source-over", e.blendModesCanvas[e.blendModes.OVERLAY] = "source-over", e.blendModesCanvas[e.blendModes.DARKEN] = "source-over", e.blendModesCanvas[e.blendModes.LIGHTEN] = "source-over", e.blendModesCanvas[e.blendModes.COLOR_DODGE] = "source-over", e.blendModesCanvas[e.blendModes.COLOR_BURN] = "source-over", e.blendModesCanvas[e.blendModes.HARD_LIGHT] = "source-over", e.blendModesCanvas[e.blendModes.SOFT_LIGHT] = "source-over", e.blendModesCanvas[e.blendModes.DIFFERENCE] = "source-over", e.blendModesCanvas[e.blendModes.EXCLUSION] = "source-over", e.blendModesCanvas[e.blendModes.HUE] = "source-over", e.blendModesCanvas[e.blendModes.SATURATION] = "source-over", e.blendModesCanvas[e.blendModes.COLOR] = "source-over", e.blendModesCanvas[e.blendModes.LUMINOSITY] = "source-over")), this.width = r || 800, this.height = n || 600, this.width *= this.resolution, this.height *= this.resolution, this.view = t.view || document.createElement("canvas"), this.context = this.view.getContext("2d", {
                alpha: this.transparent
            }), this.refresh = !0, this.view.width = this.width * this.resolution, this.view.height = this.height * this.resolution, this.count = 0, this.maskManager = new e.CanvasMaskManager, this.renderSession = {
                context: this.context,
                maskManager: this.maskManager,
                scaleMode: null,
                smoothProperty: null,
                roundPixels: !1
            }, this.resize(r, n), "imageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "imageSmoothingEnabled" : "webkitImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "webkitImageSmoothingEnabled" : "mozImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "mozImageSmoothingEnabled" : "oImageSmoothingEnabled" in this.context ? this.renderSession.smoothProperty = "oImageSmoothingEnabled" : "msImageSmoothingEnabled" in this.context && (this.renderSession.smoothProperty = "msImageSmoothingEnabled")
        }, e.CanvasRenderer.prototype.constructor = e.CanvasRenderer, e.CanvasRenderer.prototype.render = function(t) {
            e.texturesToUpdate.length = 0, e.texturesToDestroy.length = 0, t.updateTransform(), this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.globalAlpha = 1, navigator.isCocoonJS && this.view.screencanvas && (this.context.fillStyle = "black", this.context.clear()), this.clearBeforeRender && (this.transparent || (this.context.fillStyle = t.backgroundColorString), this.context[this.transparent ? "clearRect" : "fillRect"](0, 0, this.width, this.height)), this.renderDisplayObject(t), t.interactive && (t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this))), e.Texture.frameUpdates.length > 0 && (e.Texture.frameUpdates.length = 0)
        }, e.CanvasRenderer.prototype.resize = function(e, t) {
            this.width = e * this.resolution, this.height = t * this.resolution, this.view.width = this.width, this.view.height = this.height
        }, e.CanvasRenderer.prototype.renderDisplayObject = function(e, t) {
            this.renderSession.context = t || this.context, this.renderSession.resolution = this.resolution, e._renderCanvas(this.renderSession)
        }, e.CanvasRenderer.prototype.renderStripFlat = function(o) {
            var t = this.context,
                e = o.verticies,
                a = e.length / 2;
            this.count++, t.beginPath();
            for (var r = 1; a - 2 > r; r++) {
                var i = 2 * r,
                    n = e[i],
                    s = e[i + 2],
                    l = e[i + 4],
                    c = e[i + 1],
                    h = e[i + 3],
                    u = e[i + 5];
                t.moveTo(n, c), t.lineTo(s, h), t.lineTo(l, u)
            }
            t.fillStyle = "#FF0000", t.fill(), t.closePath()
        }, e.CanvasRenderer.prototype.renderStrip = function(l) {
            var s = this.context,
                _ = l.verticies,
                m = l.uvs,
                y = _.length / 2;
            this.count++;
            for (var v = 1; y - 2 > v; v++) {
                var e = 2 * v,
                    p = _[e],
                    d = _[e + 2],
                    c = _[e + 4],
                    f = _[e + 1],
                    h = _[e + 3],
                    u = _[e + 5],
                    t = m[e] * l.texture.width,
                    o = m[e + 2] * l.texture.width,
                    a = m[e + 4] * l.texture.width,
                    n = m[e + 1] * l.texture.height,
                    r = m[e + 3] * l.texture.height,
                    i = m[e + 5] * l.texture.height;
                s.save(), s.beginPath(), s.moveTo(p, f), s.lineTo(d, h), s.lineTo(c, u), s.closePath(), s.clip();
                var g = t * r + n * a + o * i - r * a - n * o - t * i,
                    b = p * r + n * c + d * i - r * c - n * d - p * i,
                    x = t * d + p * a + o * c - d * a - p * o - t * c,
                    w = t * r * c + n * d * a + p * o * i - p * r * a - n * o * c - t * d * i,
                    T = f * r + n * u + h * i - r * u - n * h - f * i,
                    C = t * h + f * a + o * u - h * a - f * o - t * u,
                    S = t * r * u + n * h * a + f * o * i - f * r * a - n * o * u - t * h * i;
                s.transform(b / g, T / g, x / g, C / g, w / g, S / g), s.drawImage(l.texture.baseTexture.source, 0, 0), s.restore()
            }
        }, e.CanvasBuffer = function(e, t) {
            this.width = e, this.height = t, this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.canvas.width = e, this.canvas.height = t
        }, e.CanvasBuffer.prototype.clear = function() {
            this.context.clearRect(0, 0, this.width, this.height)
        }, e.CanvasBuffer.prototype.resize = function(e, t) {
            this.width = this.canvas.width = e, this.height = this.canvas.height = t
        }, e.CanvasGraphics = function() {}, e.CanvasGraphics.renderGraphics = function(x, t) {
            for (var s = x.worldAlpha, p = "", T = 0; T < x.graphicsData.length; T++) {
                var i = x.graphicsData[T],
                    r = i.points;
                if (t.strokeStyle = p = "#" + ("00000" + (0 | i.lineColor).toString(16)).substr(-6), t.lineWidth = i.lineWidth, i.type === e.Graphics.POLY) {
                    t.beginPath(), t.moveTo(r[0], r[1]);
                    for (var g = 1; g < r.length / 2; g++) t.lineTo(r[2 * g], r[2 * g + 1]);
                    r[0] === r[r.length - 2] && r[1] === r[r.length - 1] && t.closePath(), i.fill && (t.globalAlpha = i.fillAlpha * s, t.fillStyle = p = "#" + ("00000" + (0 | i.fillColor).toString(16)).substr(-6), t.fill()), i.lineWidth && (t.globalAlpha = i.lineAlpha * s, t.stroke())
                } else if (i.type === e.Graphics.RECT)(i.fillColor || 0 === i.fillColor) && (t.globalAlpha = i.fillAlpha * s, t.fillStyle = p = "#" + ("00000" + (0 | i.fillColor).toString(16)).substr(-6), t.fillRect(r[0], r[1], r[2], r[3])), i.lineWidth && (t.globalAlpha = i.lineAlpha * s, t.strokeRect(r[0], r[1], r[2], r[3]));
                else if (i.type === e.Graphics.CIRC) t.beginPath(), t.arc(r[0], r[1], r[2], 0, 2 * Math.PI), t.closePath(), i.fill && (t.globalAlpha = i.fillAlpha * s, t.fillStyle = p = "#" + ("00000" + (0 | i.fillColor).toString(16)).substr(-6), t.fill()), i.lineWidth && (t.globalAlpha = i.lineAlpha * s, t.stroke());
                else if (i.type === e.Graphics.ELIP) {
                    var f = i.points,
                        y = 2 * f[2],
                        m = 2 * f[3],
                        u = f[0] - y / 2,
                        _ = f[1] - m / 2;
                    t.beginPath();
                    var E = .5522848,
                        v = y / 2 * E,
                        b = m / 2 * E,
                        C = u + y,
                        w = _ + m,
                        d = u + y / 2,
                        c = _ + m / 2;
                    t.moveTo(u, c), t.bezierCurveTo(u, c - b, d - v, _, d, _), t.bezierCurveTo(d + v, _, C, c - b, C, c), t.bezierCurveTo(C, c + b, d + v, w, d, w), t.bezierCurveTo(d - v, w, u, c + b, u, c), t.closePath(), i.fill && (t.globalAlpha = i.fillAlpha * s, t.fillStyle = p = "#" + ("00000" + (0 | i.fillColor).toString(16)).substr(-6), t.fill()), i.lineWidth && (t.globalAlpha = i.lineAlpha * s, t.stroke())
                } else if (i.type === e.Graphics.RREC) {
                    var a = r[0],
                        n = r[1],
                        h = r[2],
                        l = r[3],
                        o = r[4],
                        S = Math.min(h, l) / 2 | 0;
                    o = o > S ? S : o, t.beginPath(), t.moveTo(a, n + o), t.lineTo(a, n + l - o), t.quadraticCurveTo(a, n + l, a + o, n + l), t.lineTo(a + h - o, n + l), t.quadraticCurveTo(a + h, n + l, a + h, n + l - o), t.lineTo(a + h, n + o), t.quadraticCurveTo(a + h, n, a + h - o, n), t.lineTo(a + o, n), t.quadraticCurveTo(a, n, a, n + o), t.closePath(), (i.fillColor || 0 === i.fillColor) && (t.globalAlpha = i.fillAlpha * s, t.fillStyle = p = "#" + ("00000" + (0 | i.fillColor).toString(16)).substr(-6), t.fill()), i.lineWidth && (t.globalAlpha = i.lineAlpha * s, t.stroke())
                }
            }
        }, e.CanvasGraphics.renderGraphicsMask = function(C, t) {
            var x = C.graphicsData.length;
            if (0 !== x) {
                x > 1 && (x = 1, window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));
                for (var b = 0; 1 > b; b++) {
                    var l = C.graphicsData[b],
                        i = l.points;
                    if (l.type === e.Graphics.POLY) {
                        t.beginPath(), t.moveTo(i[0], i[1]);
                        for (var _ = 1; _ < i.length / 2; _++) t.lineTo(i[2 * _], i[2 * _ + 1]);
                        i[0] === i[i.length - 2] && i[1] === i[i.length - 1] && t.closePath()
                    } else if (l.type === e.Graphics.RECT) t.beginPath(), t.rect(i[0], i[1], i[2], i[3]), t.closePath();
                    else if (l.type === e.Graphics.CIRC) t.beginPath(), t.arc(i[0], i[1], i[2], 0, 2 * Math.PI), t.closePath();
                    else if (l.type === e.Graphics.ELIP) {
                        var p = l.points,
                            g = 2 * p[2],
                            f = 2 * p[3],
                            h = p[0] - g / 2,
                            d = p[1] - f / 2;
                        t.beginPath();
                        var T = .5522848,
                            m = g / 2 * T,
                            v = f / 2 * T,
                            w = h + g,
                            y = d + f,
                            u = h + g / 2,
                            s = d + f / 2;
                        t.moveTo(h, s), t.bezierCurveTo(h, s - v, u - m, d, u, d), t.bezierCurveTo(u + m, d, w, s - v, w, s), t.bezierCurveTo(w, s + v, u + m, y, u, y), t.bezierCurveTo(u - m, y, h, s + v, h, s), t.closePath()
                    } else if (l.type === e.Graphics.RREC) {
                        var n = i[0],
                            r = i[1],
                            c = i[2],
                            o = i[3],
                            a = i[4],
                            S = Math.min(c, o) / 2 | 0;
                        a = a > S ? S : a, t.beginPath(), t.moveTo(n, r + a), t.lineTo(n, r + o - a), t.quadraticCurveTo(n, r + o, n + a, r + o), t.lineTo(n + c - a, r + o), t.quadraticCurveTo(n + c, r + o, n + c, r + o - a), t.lineTo(n + c, r + a), t.quadraticCurveTo(n + c, r, n + c - a, r), t.lineTo(n + a, r), t.quadraticCurveTo(n, r, n, r + a), t.closePath()
                    }
                }
            }
        }, e.Graphics = function() {
            e.DisplayObjectContainer.call(this), this.renderable = !0, this.fillAlpha = 1, this.lineWidth = 0, this.lineColor = "black", this.graphicsData = [], this.tint = 16777215, this.blendMode = e.blendModes.NORMAL, this.currentPath = {
                points: []
            }, this._webGL = [], this.isMask = !1, this.bounds = null, this.boundsPadding = 10, this.dirty = !0
        }, e.Graphics.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Graphics.prototype.constructor = e.Graphics, Object.defineProperty(e.Graphics.prototype, "cacheAsBitmap", {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(e) {
                this._cacheAsBitmap = e, this._cacheAsBitmap ? this._generateCachedSprite() : (this.destroyCachedSprite(), this.dirty = !0)
            }
        }), e.Graphics.prototype.lineStyle = function(t, i, r) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.lineWidth = t || 0, this.lineColor = i || 0, this.lineAlpha = arguments.length < 3 ? 1 : r, this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [],
                type: e.Graphics.POLY
            }, this.graphicsData.push(this.currentPath), this
        }, e.Graphics.prototype.moveTo = function(t, i) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [],
                type: e.Graphics.POLY
            }, this.currentPath.points.push(t, i), this.graphicsData.push(this.currentPath), this
        }, e.Graphics.prototype.lineTo = function(e, t) {
            return this.currentPath.points.push(e, t), this.dirty = !0, this
        }, e.Graphics.prototype.quadraticCurveTo = function(i, o, u, h) {
            0 === this.currentPath.points.length && this.moveTo(0, 0);
            var n, a, c = 20,
                t = this.currentPath.points;
            0 === t.length && this.moveTo(0, 0);
            for (var s = t[t.length - 2], l = t[t.length - 1], e = 0, r = 1; c >= r; r++) e = r / c, n = s + (i - s) * e, a = l + (o - l) * e, t.push(n + (i + (u - i) * e - n) * e, a + (o + (h - o) * e - a) * e);
            return this.dirty = !0, this
        }, e.Graphics.prototype.bezierCurveTo = function(m, c, f, d, u, h) {
            0 === this.currentPath.points.length && this.moveTo(0, 0);
            for (var t, n, a, r, o, l = 20, i = this.currentPath.points, p = i[i.length - 2], _ = i[i.length - 1], e = 0, s = 1; l >= s; s++) e = s / l, t = 1 - e, n = t * t, a = n * t, r = e * e, o = r * e, i.push(a * p + 3 * n * e * m + 3 * t * r * f + o * u, a * _ + 3 * n * e * c + 3 * t * r * d + o * h);
            return this.dirty = !0, this
        }, e.Graphics.prototype.arcTo = function(a, s, x, b, c) {
            0 === this.currentPath.points.length && this.moveTo(a, s);
            var n = this.currentPath.points,
                y = n[n.length - 2],
                v = n[n.length - 1],
                t = v - s,
                e = y - a,
                r = b - s,
                i = x - a,
                u = Math.abs(t * i - e * r);
            if (1e-8 > u || 0 === c) n.push(a, s);
            else {
                var p = t * t + e * e,
                    m = r * r + i * i,
                    f = t * r + e * i,
                    o = c * Math.sqrt(p) / u,
                    l = c * Math.sqrt(m) / u,
                    _ = o * f / p,
                    g = l * f / m,
                    d = o * i + l * e,
                    h = o * r + l * t,
                    w = e * (l + _),
                    T = t * (l + _),
                    C = i * (o + g),
                    S = r * (o + g),
                    E = Math.atan2(T - h, w - d),
                    A = Math.atan2(S - h, C - d);
                this.arc(d + a, h + s, c, E, A, e * r > i * t)
            }
            return this.dirty = !0, this
        }, e.Graphics.prototype.arc = function(g, u, n, e, i, o) {
            var c = g + Math.cos(e) * n,
                f = u + Math.sin(e) * n,
                t = this.currentPath.points;
            if ((0 !== t.length && t[t.length - 2] !== c || t[t.length - 1] !== f) && (this.moveTo(c, f), t = this.currentPath.points), e === i) return this;
            !o && e >= i ? i += 2 * Math.PI : o && i >= e && (e += 2 * Math.PI);
            var s = o ? -1 * (e - i) : i - e,
                h = Math.abs(s) / (2 * Math.PI) * 40;
            if (0 === s) return this;
            for (var r = s / (2 * h), x = 2 * r, p = Math.cos(r), _ = Math.sin(r), l = h - 1, b = l % 1 / l, a = 0; l >= a; a++) {
                var y = a + b * a,
                    m = r + e + x * y,
                    d = Math.cos(m),
                    v = -Math.sin(m);
                t.push((p * d + _ * v) * n + g, (p * -v + _ * d) * n + u)
            }
            return this.dirty = !0, this
        }, e.Graphics.prototype.drawPath = function(t) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [],
                type: e.Graphics.POLY
            }, this.graphicsData.push(this.currentPath), this.currentPath.points = this.currentPath.points.concat(t), this.dirty = !0, this
        }, e.Graphics.prototype.beginFill = function(e, t) {
            return this.filling = !0, this.fillColor = e || 0, this.fillAlpha = arguments.length < 2 ? 1 : t, this
        }, e.Graphics.prototype.endFill = function() {
            return this.filling = !1, this.fillColor = null, this.fillAlpha = 1, this
        }, e.Graphics.prototype.drawRect = function(t, i, r, n) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [t, i, r, n],
                type: e.Graphics.RECT
            }, this.graphicsData.push(this.currentPath), this.dirty = !0, this
        }, e.Graphics.prototype.drawRoundedRect = function(t, i, r, n, a) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [t, i, r, n, a],
                type: e.Graphics.RREC
            }, this.graphicsData.push(this.currentPath), this.dirty = !0, this
        }, e.Graphics.prototype.drawCircle = function(i, r, t) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [i, r, t, t],
                type: e.Graphics.CIRC
            }, this.graphicsData.push(this.currentPath), this.dirty = !0, this
        }, e.Graphics.prototype.drawEllipse = function(t, i, r, n) {
            return this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {
                lineWidth: this.lineWidth,
                lineColor: this.lineColor,
                lineAlpha: this.lineAlpha,
                fillColor: this.fillColor,
                fillAlpha: this.fillAlpha,
                fill: this.filling,
                points: [t, i, r, n],
                type: e.Graphics.ELIP
            }, this.graphicsData.push(this.currentPath), this.dirty = !0, this
        }, e.Graphics.prototype.clear = function() {
            return this.lineWidth = 0, this.filling = !1, this.dirty = !0, this.clearDirty = !0, this.graphicsData = [], this.bounds = null, this
        }, e.Graphics.prototype.generateTexture = function(t, a) {
            t = t || 2;
            var i = this.getBounds(),
                r = new e.CanvasBuffer(i.width * t, i.height * t),
                n = e.Texture.fromCanvas(r.canvas, a);
            return n.baseTexture.resolution = t, r.context.scale(t, t), r.context.translate(-i.x, -i.y), e.CanvasGraphics.renderGraphics(this, r.context), n
        }, e.Graphics.prototype._renderWebGL = function(t) {
            if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
                if (this._cacheAsBitmap) return this.dirty && (this._generateCachedSprite(), e.updateWebGLTexture(this._cachedSprite.texture.baseTexture, t.gl), this.dirty = !1), this._cachedSprite.alpha = this.alpha, void e.Sprite.prototype._renderWebGL.call(this._cachedSprite, t);
                if (t.spriteBatch.stop(), t.blendModeManager.setBlendMode(this.blendMode), this._mask && t.maskManager.pushMask(this._mask, t), this._filters && t.filterManager.pushFilter(this._filterBlock), this.blendMode !== t.spriteBatch.currentBlendMode) {
                    t.spriteBatch.currentBlendMode = this.blendMode;
                    var r = e.blendModesWebGL[t.spriteBatch.currentBlendMode];
                    t.spriteBatch.gl.blendFunc(r[0], r[1])
                }
                if (e.WebGLGraphics.renderGraphics(this, t), this.children.length) {
                    t.spriteBatch.start();
                    for (var i = 0, n = this.children.length; n > i; i++) this.children[i]._renderWebGL(t);
                    t.spriteBatch.stop()
                }
                this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(this.mask, t), t.drawCount++, t.spriteBatch.start()
            }
        }, e.Graphics.prototype._renderCanvas = function(t) {
            if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
                var n = t.context,
                    i = this.worldTransform;
                this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, n.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t.context);
                var r = t.resolution;
                n.setTransform(i.a * r, i.c * r, i.b * r, i.d * r, i.tx * r, i.ty * r), e.CanvasGraphics.renderGraphics(this, n);
                for (var a = 0, o = this.children.length; o > a; a++) this.children[a]._renderCanvas(t);
                this._mask && t.maskManager.popMask(t.context)
            }
        }, e.Graphics.prototype.getBounds = function(C) {
            this.bounds || this.updateBounds();
            var x = this.bounds.x,
                u = this.bounds.width + this.bounds.x,
                b = this.bounds.y,
                y = this.bounds.height + this.bounds.y,
                n = C || this.worldTransform,
                v = n.a,
                s = n.c,
                _ = n.b,
                l = n.d,
                c = n.tx,
                h = n.ty,
                w = v * u + _ * y + c,
                T = l * y + s * u + h,
                d = v * x + _ * y + c,
                p = l * y + s * x + h,
                o = v * x + _ * b + c,
                f = l * b + s * x + h,
                m = v * u + _ * b + c,
                g = l * b + s * u + h,
                r = w,
                i = T,
                t = w,
                e = T;
            t = t > d ? d : t, t = t > o ? o : t, t = t > m ? m : t, e = e > p ? p : e, e = e > f ? f : e, e = e > g ? g : e, r = d > r ? d : r, r = o > r ? o : r, r = m > r ? m : r, i = p > i ? p : i, i = f > i ? f : i, i = g > i ? g : i;
            var a = this._bounds;
            return a.x = t, a.width = r - t, a.y = e, a.height = i - e, a
        }, e.Graphics.prototype.updateBounds = function() {
            for (var n, i, t, h, c, o = 1 / 0, s = -1 / 0, a = 1 / 0, l = -1 / 0, p = 0; p < this.graphicsData.length; p++) {
                var _ = this.graphicsData[p],
                    f = _.type,
                    r = _.lineWidth;
                if (n = _.points, f === e.Graphics.RECT) i = n[0] - r / 2, t = n[1] - r / 2, h = n[2] + r, c = n[3] + r, o = o > i ? i : o, s = i + h > s ? i + h : s, a = a > t ? t : a, l = t + c > l ? t + c : l;
                else if (f === e.Graphics.CIRC || f === e.Graphics.ELIP) i = n[0], t = n[1], h = n[2] + r / 2, c = n[3] + r / 2, o = o > i - h ? i - h : o, s = i + h > s ? i + h : s, a = a > t - c ? t - c : a, l = t + c > l ? t + c : l;
                else
                    for (var u = 0; u < n.length; u += 2) i = n[u], t = n[u + 1], o = o > i - r ? i - r : o, s = i + r > s ? i + r : s, a = a > t - r ? t - r : a, l = t + r > l ? t + r : l
            }
            var d = this.boundsPadding;
            this.bounds = new e.Rectangle(o - d, a - d, s - o + 2 * d, l - a + 2 * d)
        }, e.Graphics.prototype._generateCachedSprite = function() {
            var t = this.getLocalBounds();
            if (this._cachedSprite) this._cachedSprite.buffer.resize(t.width, t.height);
            else {
                var i = new e.CanvasBuffer(t.width, t.height),
                    r = e.Texture.fromCanvas(i.canvas);
                this._cachedSprite = new e.Sprite(r), this._cachedSprite.buffer = i, this._cachedSprite.worldTransform = this.worldTransform
            }
            this._cachedSprite.anchor.x = -(t.x / t.width), this._cachedSprite.anchor.y = -(t.y / t.height), this._cachedSprite.buffer.context.translate(-t.x, -t.y), e.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context), this._cachedSprite.alpha = this.alpha
        }, e.Graphics.prototype.destroyCachedSprite = function() {
            this._cachedSprite.texture.destroy(!0), this._cachedSprite = null
        }, e.Graphics.POLY = 0, e.Graphics.RECT = 1, e.Graphics.CIRC = 2, e.Graphics.ELIP = 3, e.Graphics.RREC = 4, e.Strip = function(t) {
            e.DisplayObjectContainer.call(this), this.texture = t, this.uvs = new e.Float32Array([0, 1, 1, 1, 1, 0, 0, 1]), this.verticies = new e.Float32Array([0, 0, 100, 0, 100, 100, 0, 100]), this.colors = new e.Float32Array([1, 1, 1, 1]), this.indices = new e.Uint16Array([0, 1, 2, 3]), this.dirty = !0, this.padding = 0
        }, e.Strip.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Strip.prototype.constructor = e.Strip, e.Strip.prototype._renderWebGL = function(e) {
            !this.visible || this.alpha <= 0 || (e.spriteBatch.stop(), this._vertexBuffer || this._initWebGL(e), e.shaderManager.setShader(e.shaderManager.stripShader), this._renderStrip(e), e.spriteBatch.start())
        }, e.Strip.prototype._initWebGL = function(t) {
            var e = t.gl;
            this._vertexBuffer = e.createBuffer(), this._indexBuffer = e.createBuffer(), this._uvBuffer = e.createBuffer(), this._colorBuffer = e.createBuffer(), e.bindBuffer(e.ARRAY_BUFFER, this._vertexBuffer), e.bufferData(e.ARRAY_BUFFER, this.verticies, e.DYNAMIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this._uvBuffer), e.bufferData(e.ARRAY_BUFFER, this.uvs, e.STATIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this._colorBuffer), e.bufferData(e.ARRAY_BUFFER, this.colors, e.STATIC_DRAW), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW)
        }, e.Strip.prototype._renderStrip = function(r) {
            var t = r.gl,
                n = r.projection,
                a = r.offset,
                i = r.shaderManager.stripShader;
            t.blendFunc(t.ONE, t.ONE_MINUS_SRC_ALPHA), t.uniformMatrix3fv(i.translationMatrix, !1, this.worldTransform.toArray(!0)), t.uniform2f(i.projectionVector, n.x, -n.y), t.uniform2f(i.offsetVector, -a.x, -a.y), t.uniform1f(i.alpha, 1), this.dirty ? (this.dirty = !1, t.bindBuffer(t.ARRAY_BUFFER, this._vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.verticies, t.STATIC_DRAW), t.vertexAttribPointer(i.aVertexPosition, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ARRAY_BUFFER, this._uvBuffer), t.bufferData(t.ARRAY_BUFFER, this.uvs, t.STATIC_DRAW), t.vertexAttribPointer(i.aTextureCoord, 2, t.FLOAT, !1, 0, 0), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, this.texture.baseTexture._glTextures[t.id] || e.createWebGLTexture(this.texture.baseTexture, t)), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this._indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW)) : (t.bindBuffer(t.ARRAY_BUFFER, this._vertexBuffer), t.bufferSubData(t.ARRAY_BUFFER, 0, this.verticies), t.vertexAttribPointer(i.aVertexPosition, 2, t.FLOAT, !1, 0, 0), t.bindBuffer(t.ARRAY_BUFFER, this._uvBuffer), t.vertexAttribPointer(i.aTextureCoord, 2, t.FLOAT, !1, 0, 0), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, this.texture.baseTexture._glTextures[t.id] || e.createWebGLTexture(this.texture.baseTexture, t)), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this._indexBuffer)), t.drawElements(t.TRIANGLE_STRIP, this.indices.length, t.UNSIGNED_SHORT, 0)
        }, e.Strip.prototype._renderCanvas = function(S) {
            var r = S.context,
                i = this.worldTransform;
            S.roundPixels ? r.setTransform(i.a, i.c, i.b, i.d, 0 | i.tx, 0 | i.ty) : r.setTransform(i.a, i.c, i.b, i.d, i.tx, i.ty);
            var v = this,
                y = v.verticies,
                w = v.uvs,
                E = y.length / 2;
            this.count++;
            for (var C = 0; E - 2 > C; C++) {
                var t = 2 * C,
                    l = y[t],
                    c = y[t + 2],
                    h = y[t + 4],
                    u = y[t + 1],
                    o = y[t + 3],
                    p = y[t + 5];
                if (0 === this.padding) {
                    var b = (l + c + h) / 3,
                        T = (u + o + p) / 3,
                        n = l - b,
                        a = u - T,
                        e = Math.sqrt(n * n + a * a);
                    l = b + n / e * (e + 3), u = T + a / e * (e + 3), n = c - b, a = o - T, e = Math.sqrt(n * n + a * a), c = b + n / e * (e + 3), o = T + a / e * (e + 3), n = h - b, a = p - T, e = Math.sqrt(n * n + a * a), h = b + n / e * (e + 3), p = T + a / e * (e + 3)
                }
                var g = w[t] * v.texture.width,
                    m = w[t + 2] * v.texture.width,
                    f = w[t + 4] * v.texture.width,
                    _ = w[t + 1] * v.texture.height,
                    d = w[t + 3] * v.texture.height,
                    s = w[t + 5] * v.texture.height;
                r.save(), r.beginPath(), r.moveTo(l, u), r.lineTo(c, o), r.lineTo(h, p), r.closePath(), r.clip();
                var x = g * d + _ * f + m * s - d * f - _ * m - g * s,
                    A = l * d + _ * h + c * s - d * h - _ * c - l * s,
                    k = g * c + l * f + m * h - c * f - l * m - g * h,
                    M = g * d * h + _ * c * f + l * m * s - l * d * f - _ * m * h - g * c * s,
                    L = u * d + _ * p + o * s - d * p - _ * o - u * s,
                    R = g * o + u * f + m * p - o * f - u * m - g * p,
                    P = g * d * p + _ * o * f + u * m * s - u * d * f - _ * m * p - g * o * s;
                r.transform(A / x, L / x, k / x, R / x, M / x, P / x), r.drawImage(v.texture.baseTexture.source, 0, 0), r.restore()
            }
        }, e.Strip.prototype.onTextureUpdate = function() {
            this.updateFrame = !0
        }, e.Rope = function(i, t) {
            e.Strip.call(this, i), this.points = t, this.verticies = new e.Float32Array(4 * t.length), this.uvs = new e.Float32Array(4 * t.length), this.colors = new e.Float32Array(2 * t.length), this.indices = new e.Uint16Array(2 * t.length), this.refresh()
        }, e.Rope.prototype = Object.create(e.Strip.prototype), e.Rope.prototype.constructor = e.Rope, e.Rope.prototype.refresh = function() {
            var n = this.points;
            if (!(n.length < 1)) {
                var t = this.uvs,
                    c = n[0],
                    a = this.indices,
                    o = this.colors;
                this.count -= .2, t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 1, o[0] = 1, o[1] = 1, a[0] = 0, a[1] = 1;
                for (var s, e, r, l = n.length, i = 1; l > i; i++) s = n[i], e = 4 * i, r = i / (l - 1), i % 2 ? (t[e] = r, t[e + 1] = 0, t[e + 2] = r, t[e + 3] = 1) : (t[e] = r, t[e + 1] = 0, t[e + 2] = r, t[e + 3] = 1), e = 2 * i, o[e] = 1, o[e + 1] = 1, e = 2 * i, a[e] = e, a[e + 1] = e + 1, c = s
            }
        }, e.Rope.prototype.updateTransform = function() {
            var n = this.points;
            if (!(n.length < 1)) {
                var l, s = n[0],
                    t = {
                        x: 0,
                        y: 0
                    };
                this.count -= .2;
                for (var r, a, u, c, h, o = this.verticies, d = n.length, i = 0; d > i; i++) r = n[i], a = 4 * i, l = i < n.length - 1 ? n[i + 1] : r, t.y = -(l.x - s.x), t.x = l.y - s.y, u = 10 * (1 - i / (d - 1)), u > 1 && (u = 1), c = Math.sqrt(t.x * t.x + t.y * t.y), h = this.texture.height / 2, t.x /= c, t.y /= c, t.x *= h, t.y *= h, o[a] = r.x + t.x, o[a + 1] = r.y + t.y, o[a + 2] = r.x - t.x, o[a + 3] = r.y - t.y, s = r;
                e.DisplayObjectContainer.prototype.updateTransform.call(this)
            }
        }, e.Rope.prototype.setTexture = function(e) {
            this.texture = e
        }, e.TilingSprite = function(t, i, r) {
            e.Sprite.call(this, t), this._width = i || 100, this._height = r || 100, this.tileScale = new e.Point(1, 1), this.tileScaleOffset = new e.Point(1, 1), this.tilePosition = new e.Point(0, 0), this.renderable = !0, this.tint = 16777215, this.blendMode = e.blendModes.NORMAL
        }, e.TilingSprite.prototype = Object.create(e.Sprite.prototype), e.TilingSprite.prototype.constructor = e.TilingSprite, Object.defineProperty(e.TilingSprite.prototype, "width", {
            get: function() {
                return this._width
            },
            set: function(e) {
                this._width = e
            }
        }), Object.defineProperty(e.TilingSprite.prototype, "height", {
            get: function() {
                return this._height
            },
            set: function(e) {
                this._height = e
            }
        }), e.TilingSprite.prototype.setTexture = function(e) {
            this.texture !== e && (this.texture = e, this.refreshTexture = !0, this.cachedTint = 16777215)
        }, e.TilingSprite.prototype._renderWebGL = function(t) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                var i, r;
                for (this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), this._filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), !this.tilingTexture || this.refreshTexture ? (this.generateTilingTexture(!0), this.tilingTexture && this.tilingTexture.needsUpdate && (e.updateWebGLTexture(this.tilingTexture.baseTexture, t.gl), this.tilingTexture.needsUpdate = !1)) : t.spriteBatch.renderTilingSprite(this), i = 0, r = this.children.length; r > i; i++) this.children[i]._renderWebGL(t);
                t.spriteBatch.stop(), this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(this._mask, t), t.spriteBatch.start()
            }
        }, e.TilingSprite.prototype._renderCanvas = function(i) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                var t = i.context;
                this._mask && i.maskManager.pushMask(this._mask, t), t.globalAlpha = this.worldAlpha;
                var s, l, n = this.worldTransform,
                    a = i.resolution;
                if (t.setTransform(n.a * a, n.c * a, n.b * a, n.d * a, n.tx * a, n.ty * a), !this.__tilePattern || this.refreshTexture) {
                    if (this.generateTilingTexture(!1), !this.tilingTexture) return;
                    this.__tilePattern = t.createPattern(this.tilingTexture.baseTexture.source, "repeat")
                }
                this.blendMode !== i.currentBlendMode && (i.currentBlendMode = this.blendMode, t.globalCompositeOperation = e.blendModesCanvas[i.currentBlendMode]);
                var r = this.tilePosition,
                    o = this.tileScale;
                for (r.x %= this.tilingTexture.baseTexture.width, r.y %= this.tilingTexture.baseTexture.height, t.scale(o.x, o.y), t.translate(r.x, r.y), t.fillStyle = this.__tilePattern, t.fillRect(-r.x + this.anchor.x * -this._width, -r.y + this.anchor.y * -this._height, this._width / o.x, this._height / o.y), t.scale(1 / o.x, 1 / o.y), t.translate(-r.x, -r.y), this._mask && i.maskManager.popMask(i.context), s = 0, l = this.children.length; l > s; s++) this.children[s]._renderCanvas(i)
            }
        }, e.TilingSprite.prototype.getBounds = function() {
            var S = this._width,
                C = this._height,
                p = S * (1 - this.anchor.x),
                x = S * -this.anchor.x,
                w = C * (1 - this.anchor.y),
                T = C * -this.anchor.y,
                a = this.worldTransform,
                s = a.a,
                l = a.c,
                c = a.b,
                h = a.d,
                u = a.tx,
                d = a.ty,
                o = s * x + c * T + u,
                _ = h * T + l * x + d,
                f = s * p + c * T + u,
                m = h * T + l * p + d,
                g = s * p + c * w + u,
                v = h * w + l * p + d,
                y = s * x + c * w + u,
                b = h * w + l * x + d,
                i = -1 / 0,
                r = -1 / 0,
                t = 1 / 0,
                e = 1 / 0;
            t = t > o ? o : t, t = t > f ? f : t, t = t > g ? g : t, t = t > y ? y : t, e = e > _ ? _ : e, e = e > m ? m : e, e = e > v ? v : e, e = e > b ? b : e, i = o > i ? o : i, i = f > i ? f : i, i = g > i ? g : i, i = y > i ? y : i, r = _ > r ? _ : r, r = m > r ? m : r, r = v > r ? v : r, r = b > r ? b : r;
            var n = this._bounds;
            return n.x = t, n.width = i - t, n.y = e, n.height = r - e, this._currentBounds = n, n
        }, e.TilingSprite.prototype.onTextureUpdate = function() {}, e.TilingSprite.prototype.generateTilingTexture = function(s) {
            if (this.texture.baseTexture.hasLoaded) {
                var r, n, i = this.texture,
                    t = i.frame,
                    l = t.width !== i.baseTexture.width || t.height !== i.baseTexture.height,
                    o = !1;
                if (s ? (r = e.getNextPowerOfTwo(t.width), n = e.getNextPowerOfTwo(t.height), (t.width !== r || t.height !== n) && (o = !0)) : l && (r = t.width, n = t.height, o = !0), o) {
                    var a;
                    this.tilingTexture && this.tilingTexture.isTiling ? (a = this.tilingTexture.canvasBuffer, a.resize(r, n), this.tilingTexture.baseTexture.width = r, this.tilingTexture.baseTexture.height = n, this.tilingTexture.needsUpdate = !0) : (a = new e.CanvasBuffer(r, n), this.tilingTexture = e.Texture.fromCanvas(a.canvas), this.tilingTexture.canvasBuffer = a, this.tilingTexture.isTiling = !0), a.context.drawImage(i.baseTexture.source, i.crop.x, i.crop.y, i.crop.width, i.crop.height, 0, 0, r, n), this.tileScaleOffset.x = t.width / r, this.tileScaleOffset.y = t.height / n
                } else this.tilingTexture && this.tilingTexture.isTiling && this.tilingTexture.destroy(!0), this.tileScaleOffset.x = 1, this.tileScaleOffset.y = 1, this.tilingTexture = i;
                this.refreshTexture = !1, this.tilingTexture.baseTexture._powerOf2 = !0
            }
        };
        var t = {};
        t.BoneData = function(e, t) {
            this.name = e, this.parent = t
        }, t.BoneData.prototype = {
            length: 0,
            x: 0,
            y: 0,
            rotation: 0,
            scaleX: 1,
            scaleY: 1
        }, t.SlotData = function(e, t) {
            this.name = e, this.boneData = t
        }, t.SlotData.prototype = {
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            attachmentName: null
        }, t.Bone = function(e, t) {
            this.data = e, this.parent = t, this.setToSetupPose()
        }, t.Bone.yDown = !1, t.Bone.prototype = {
            x: 0,
            y: 0,
            rotation: 0,
            scaleX: 1,
            scaleY: 1,
            m00: 0,
            m01: 0,
            worldX: 0,
            m10: 0,
            m11: 0,
            worldY: 0,
            worldRotation: 0,
            worldScaleX: 1,
            worldScaleY: 1,
            updateWorldTransform: function(a, o) {
                var e = this.parent;
                null != e ? (this.worldX = this.x * e.m00 + this.y * e.m01 + e.worldX, this.worldY = this.x * e.m10 + this.y * e.m11 + e.worldY, this.worldScaleX = e.worldScaleX * this.scaleX, this.worldScaleY = e.worldScaleY * this.scaleY, this.worldRotation = e.worldRotation + this.rotation) : (this.worldX = this.x, this.worldY = this.y, this.worldScaleX = this.scaleX, this.worldScaleY = this.scaleY, this.worldRotation = this.rotation);
                var i = this.worldRotation * Math.PI / 180,
                    r = Math.cos(i),
                    n = Math.sin(i);
                this.m00 = r * this.worldScaleX, this.m10 = n * this.worldScaleX, this.m01 = -n * this.worldScaleY, this.m11 = r * this.worldScaleY, a && (this.m00 = -this.m00, this.m01 = -this.m01), o && (this.m10 = -this.m10, this.m11 = -this.m11), t.Bone.yDown && (this.m10 = -this.m10, this.m11 = -this.m11)
            },
            setToSetupPose: function() {
                var e = this.data;
                this.x = e.x, this.y = e.y, this.rotation = e.rotation, this.scaleX = e.scaleX, this.scaleY = e.scaleY
            }
        }, t.Slot = function(e, t, i) {
            this.data = e, this.skeleton = t, this.bone = i, this.setToSetupPose()
        }, t.Slot.prototype = {
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            _attachmentTime: 0,
            attachment: null,
            setAttachment: function(e) {
                this.attachment = e, this._attachmentTime = this.skeleton.time
            },
            setAttachmentTime: function(e) {
                this._attachmentTime = this.skeleton.time - e
            },
            getAttachmentTime: function() {
                return this.skeleton.time - this._attachmentTime
            },
            setToSetupPose: function() {
                var e = this.data;
                this.r = e.r, this.g = e.g, this.b = e.b, this.a = e.a;
                for (var i = this.skeleton.data.slots, t = 0, r = i.length; r > t; t++)
                    if (i[t] == e) {
                        this.setAttachment(e.attachmentName ? this.skeleton.getAttachmentBySlotIndex(t, e.attachmentName) : null);
                        break
                    }
            }
        }, t.Skin = function(e) {
            this.name = e, this.attachments = {}
        }, t.Skin.prototype = {
            addAttachment: function(e, t, i) {
                this.attachments[e + ":" + t] = i
            },
            getAttachment: function(e, t) {
                return this.attachments[e + ":" + t]
            },
            _attachAll: function(o, s) {
                for (var e in s.attachments) {
                    var i = e.indexOf(":"),
                        r = parseInt(e.substring(0, i), 10),
                        n = e.substring(i + 1),
                        t = o.slots[r];
                    if (t.attachment && t.attachment.name == n) {
                        var a = this.getAttachment(r, n);
                        a && t.setAttachment(a)
                    }
                }
            }
        }, t.Animation = function(e, t, i) {
            this.name = e, this.timelines = t, this.duration = i
        }, t.Animation.prototype = {
            apply: function(r, t, n) {
                n && this.duration && (t %= this.duration);
                for (var i = this.timelines, e = 0, a = i.length; a > e; e++) i[e].apply(r, t, 1)
            },
            mix: function(r, t, n, a) {
                n && this.duration && (t %= this.duration);
                for (var i = this.timelines, e = 0, o = i.length; o > e; e++) i[e].apply(r, t, a)
            }
        }, t.binarySearch = function(n, a, t) {
            var i = 0,
                e = Math.floor(n.length / t) - 2;
            if (!e) return t;
            for (var r = e >>> 1;;) {
                if (n[(r + 1) * t] <= a ? i = r + 1 : e = r, i == e) return (i + 1) * t;
                r = i + e >>> 1
            }
        }, t.linearSearch = function(t, r, i) {
            for (var e = 0, n = t.length - i; n >= e; e += i)
                if (t[e] > r) return e;
            return -1
        }, t.Curves = function(e) {
            this.curves = [], this.curves.length = 6 * (e - 1)
        }, t.Curves.prototype = {
            setLinear: function(e) {
                this.curves[6 * e] = 0
            },
            setStepped: function(e) {
                this.curves[6 * e] = -1
            },
            setCurve: function(g, s, n, u, _) {
                var i = .1,
                    a = i * i,
                    o = a * i,
                    f = 3 * i,
                    m = 3 * a,
                    h = 6 * a,
                    r = 6 * o,
                    d = 2 * -s + u,
                    p = 2 * -n + _,
                    l = 3 * (s - u) + 1,
                    c = 3 * (n - _) + 1,
                    t = 6 * g,
                    e = this.curves;
                e[t] = s * f + d * m + l * o, e[t + 1] = n * f + p * m + c * o, e[t + 2] = d * h + l * r, e[t + 3] = p * h + c * r, e[t + 4] = l * r, e[t + 5] = c * r
            },
            getCurvePercent: function(_, e) {
                e = 0 > e ? 0 : e > 1 ? 1 : e;
                var t = 6 * _,
                    i = this.curves,
                    r = i[t];
                if (!r) return e;
                if (-1 == r) return 0;
                for (var o = i[t + 1], h = i[t + 2], s = i[t + 3], p = i[t + 4], d = i[t + 5], n = r, a = o, c = 8;;) {
                    if (n >= e) {
                        var l = n - r,
                            u = a - o;
                        return u + (a - u) * (e - l) / (n - l)
                    }
                    if (!c) break;
                    c--, r += h, o += s, h += p, s += d, n += r, a += o
                }
                return a + (1 - a) * (e - n) / (1 - n)
            }
        }, t.RotateTimeline = function(e) {
            this.curves = new t.Curves(e), this.frames = [], this.frames.length = 2 * e
        }, t.RotateTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 2
            },
            setFrame: function(e, t, i) {
                e *= 2, this.frames[e] = t, this.frames[e + 1] = i
            },
            apply: function(h, a, s) {
                var e, i = this.frames;
                if (!(a < i[0])) {
                    var r = h.bones[this.boneIndex];
                    if (a >= i[i.length - 2]) {
                        for (e = r.data.rotation + i[i.length - 1] - r.rotation; e > 180;) e -= 360;
                        for (; - 180 > e;) e += 360;
                        return void(r.rotation += e * s)
                    }
                    var n = t.binarySearch(i, a, 2),
                        l = i[n - 1],
                        c = i[n],
                        o = 1 - (a - c) / (i[n - 2] - c);
                    for (o = this.curves.getCurvePercent(n / 2 - 1, o), e = i[n + 1] - l; e > 180;) e -= 360;
                    for (; - 180 > e;) e += 360;
                    for (e = r.data.rotation + (l + e * o) - r.rotation; e > 180;) e -= 360;
                    for (; - 180 > e;) e += 360;
                    r.rotation += e * s
                }
            }
        }, t.TranslateTimeline = function(e) {
            this.curves = new t.Curves(e), this.frames = [], this.frames.length = 3 * e
        }, t.TranslateTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 3
            },
            setFrame: function(e, t, i, r) {
                e *= 3, this.frames[e] = t, this.frames[e + 1] = i, this.frames[e + 2] = r
            },
            apply: function(h, n, a) {
                var e = this.frames;
                if (!(n < e[0])) {
                    var i = h.bones[this.boneIndex];
                    if (n >= e[e.length - 3]) return i.x += (i.data.x + e[e.length - 2] - i.x) * a, void(i.y += (i.data.y + e[e.length - 1] - i.y) * a);
                    var r = t.binarySearch(e, n, 3),
                        s = e[r - 2],
                        l = e[r - 1],
                        c = e[r],
                        o = 1 - (n - c) / (e[r + -3] - c);
                    o = this.curves.getCurvePercent(r / 3 - 1, o), i.x += (i.data.x + s + (e[r + 1] - s) * o - i.x) * a, i.y += (i.data.y + l + (e[r + 2] - l) * o - i.y) * a
                }
            }
        }, t.ScaleTimeline = function(e) {
            this.curves = new t.Curves(e), this.frames = [], this.frames.length = 3 * e
        }, t.ScaleTimeline.prototype = {
            boneIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 3
            },
            setFrame: function(e, t, i, r) {
                e *= 3, this.frames[e] = t, this.frames[e + 1] = i, this.frames[e + 2] = r
            },
            apply: function(h, n, a) {
                var e = this.frames;
                if (!(n < e[0])) {
                    var i = h.bones[this.boneIndex];
                    if (n >= e[e.length - 3]) return i.scaleX += (i.data.scaleX - 1 + e[e.length - 2] - i.scaleX) * a, void(i.scaleY += (i.data.scaleY - 1 + e[e.length - 1] - i.scaleY) * a);
                    var r = t.binarySearch(e, n, 3),
                        s = e[r - 2],
                        l = e[r - 1],
                        c = e[r],
                        o = 1 - (n - c) / (e[r + -3] - c);
                    o = this.curves.getCurvePercent(r / 3 - 1, o), i.scaleX += (i.data.scaleX - 1 + s + (e[r + 1] - s) * o - i.scaleX) * a, i.scaleY += (i.data.scaleY - 1 + l + (e[r + 2] - l) * o - i.scaleY) * a
                }
            }
        }, t.ColorTimeline = function(e) {
            this.curves = new t.Curves(e), this.frames = [], this.frames.length = 5 * e
        }, t.ColorTimeline.prototype = {
            slotIndex: 0,
            getFrameCount: function() {
                return this.frames.length / 5
            },
            setFrame: function(e, t, i, r, n, a) {
                e *= 5, this.frames[e] = t, this.frames[e + 1] = i, this.frames[e + 2] = r, this.frames[e + 3] = n, this.frames[e + 4] = a
            },
            apply: function(g, s, a) {
                var e = this.frames;
                if (!(s < e[0])) {
                    var i = g.slots[this.slotIndex];
                    if (s >= e[e.length - 5]) {
                        var o = e.length - 1;
                        return i.r = e[o - 3], i.g = e[o - 2], i.b = e[o - 1], void(i.a = e[o])
                    }
                    var r = t.binarySearch(e, s, 5),
                        p = e[r - 4],
                        l = e[r - 3],
                        h = e[r - 2],
                        u = e[r - 1],
                        d = e[r],
                        n = 1 - (s - d) / (e[r - 5] - d);
                    n = this.curves.getCurvePercent(r / 5 - 1, n);
                    var _ = p + (e[r + 1] - p) * n,
                        f = l + (e[r + 2] - l) * n,
                        m = h + (e[r + 3] - h) * n,
                        c = u + (e[r + 4] - u) * n;
                    1 > a ? (i.r += (_ - i.r) * a, i.g += (f - i.g) * a, i.b += (m - i.b) * a, i.a += (c - i.a) * a) : (i.r = _, i.g = f, i.b = m, i.a = c)
                }
            }
        }, t.AttachmentTimeline = function(e) {
            this.curves = new t.Curves(e), this.frames = [], this.frames.length = e, this.attachmentNames = [], this.attachmentNames.length = e
        }, t.AttachmentTimeline.prototype = {
            slotIndex: 0,
            getFrameCount: function() {
                return this.frames.length
            },
            setFrame: function(e, t, i) {
                this.frames[e] = t, this.attachmentNames[e] = i
            },
            apply: function(r, i) {
                var e = this.frames;
                if (!(i < e[0])) {
                    var n;
                    n = i >= e[e.length - 1] ? e.length - 1 : t.binarySearch(e, i, 1) - 1;
                    var a = this.attachmentNames[n];
                    r.slots[this.slotIndex].setAttachment(a ? r.getAttachmentBySlotIndex(this.slotIndex, a) : null)
                }
            }
        }, t.SkeletonData = function() {
            this.bones = [], this.slots = [], this.skins = [], this.animations = []
        }, t.SkeletonData.prototype = {
            defaultSkin: null,
            findBone: function(i) {
                for (var t = this.bones, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return t[e];
                return null
            },
            findBoneIndex: function(i) {
                for (var t = this.bones, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return e;
                return -1
            },
            findSlot: function(i) {
                for (var t = this.slots, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return slot[e];
                return null
            },
            findSlotIndex: function(i) {
                for (var t = this.slots, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return e;
                return -1
            },
            findSkin: function(i) {
                for (var t = this.skins, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return t[e];
                return null
            },
            findAnimation: function(i) {
                for (var t = this.animations, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return t[e];
                return null
            }
        }, t.Skeleton = function(e) {
            this.data = e, this.bones = [];
            for (var i = 0, r = e.bones.length; r > i; i++) {
                var n = e.bones[i],
                    s = n.parent ? this.bones[e.bones.indexOf(n.parent)] : null;
                this.bones.push(new t.Bone(n, s))
            }
            for (this.slots = [], this.drawOrder = [], i = 0, r = e.slots.length; r > i; i++) {
                var a = e.slots[i],
                    l = this.bones[e.bones.indexOf(a.boneData)],
                    o = new t.Slot(a, this, l);
                this.slots.push(o), this.drawOrder.push(o)
            }
        }, t.Skeleton.prototype = {
            x: 0,
            y: 0,
            skin: null,
            r: 1,
            g: 1,
            b: 1,
            a: 1,
            time: 0,
            flipX: !1,
            flipY: !1,
            updateWorldTransform: function() {
                for (var i = this.flipX, r = this.flipY, t = this.bones, e = 0, n = t.length; n > e; e++) t[e].updateWorldTransform(i, r)
            },
            setToSetupPose: function() {
                this.setBonesToSetupPose(), this.setSlotsToSetupPose()
            },
            setBonesToSetupPose: function() {
                for (var t = this.bones, e = 0, i = t.length; i > e; e++) t[e].setToSetupPose()
            },
            setSlotsToSetupPose: function() {
                for (var t = this.slots, e = 0, i = t.length; i > e; e++) t[e].setToSetupPose(e)
            },
            getRootBone: function() {
                return this.bones.length ? this.bones[0] : null
            },
            findBone: function(i) {
                for (var t = this.bones, e = 0, r = t.length; r > e; e++)
                    if (t[e].data.name == i) return t[e];
                return null
            },
            findBoneIndex: function(i) {
                for (var t = this.bones, e = 0, r = t.length; r > e; e++)
                    if (t[e].data.name == i) return e;
                return -1
            },
            findSlot: function(i) {
                for (var t = this.slots, e = 0, r = t.length; r > e; e++)
                    if (t[e].data.name == i) return t[e];
                return null
            },
            findSlotIndex: function(i) {
                for (var t = this.slots, e = 0, r = t.length; r > e; e++)
                    if (t[e].data.name == i) return e;
                return -1
            },
            setSkinByName: function(e) {
                var t = this.data.findSkin(e);
                if (!t) throw "Skin not found: " + e;
                this.setSkin(t)
            },
            setSkin: function(e) {
                this.skin && e && e._attachAll(this, this.skin), this.skin = e
            },
            getAttachmentBySlotName: function(e, t) {
                return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e), t)
            },
            getAttachmentBySlotIndex: function(e, t) {
                if (this.skin) {
                    var i = this.skin.getAttachment(e, t);
                    if (i) return i
                }
                return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(e, t) : null
            },
            setAttachment: function(t, i) {
                for (var n = this.slots, e = 0, o = n.size; o > e; e++) {
                    var a = n[e];
                    if (a.data.name == t) {
                        var r = null;
                        if (i && (r = this.getAttachment(e, i), null == r)) throw "Attachment not found: " + i + ", for slot: " + t;
                        return void a.setAttachment(r)
                    }
                }
                throw "Slot not found: " + t
            },
            update: function(e) {
                time += e
            }
        }, t.AttachmentType = {
            region: 0
        }, t.RegionAttachment = function() {
            this.offset = [], this.offset.length = 8, this.uvs = [], this.uvs.length = 8
        }, t.RegionAttachment.prototype = {
            x: 0,
            y: 0,
            rotation: 0,
            scaleX: 1,
            scaleY: 1,
            width: 0,
            height: 0,
            rendererObject: null,
            regionOffsetX: 0,
            regionOffsetY: 0,
            regionWidth: 0,
            regionHeight: 0,
            regionOriginalWidth: 0,
            regionOriginalHeight: 0,
            setUVs: function(t, i, r, n, a) {
                var e = this.uvs;
                a ? (e[2] = t, e[3] = n, e[4] = t, e[5] = i, e[6] = r, e[7] = i, e[0] = r, e[1] = n) : (e[0] = t, e[1] = n, e[2] = t, e[3] = i, e[4] = r, e[5] = i, e[6] = r, e[7] = n)
            },
            updateOffset: function() {
                var s = this.width / this.regionOriginalWidth * this.scaleX,
                    c = this.height / this.regionOriginalHeight * this.scaleY,
                    r = -this.width / 2 * this.scaleX + this.regionOffsetX * s,
                    n = -this.height / 2 * this.scaleY + this.regionOffsetY * c,
                    l = r + this.regionWidth * s,
                    a = n + this.regionHeight * c,
                    o = this.rotation * Math.PI / 180,
                    t = Math.cos(o),
                    i = Math.sin(o),
                    g = r * t + this.x,
                    h = r * i,
                    u = n * t + this.y,
                    d = n * i,
                    p = l * t + this.x,
                    _ = l * i,
                    f = a * t + this.y,
                    m = a * i,
                    e = this.offset;
                e[0] = g - d, e[1] = u + h, e[2] = g - m, e[3] = f + h, e[4] = p - m, e[5] = f + _, e[6] = p - d, e[7] = u + _
            },
            computeVertices: function(r, n, i, t) {
                r += i.worldX, n += i.worldY;
                var a = i.m00,
                    o = i.m01,
                    s = i.m10,
                    l = i.m11,
                    e = this.offset;
                t[0] = e[0] * a + e[1] * o + r, t[1] = e[0] * s + e[1] * l + n, t[2] = e[2] * a + e[3] * o + r, t[3] = e[2] * s + e[3] * l + n, t[4] = e[4] * a + e[5] * o + r, t[5] = e[4] * s + e[5] * l + n, t[6] = e[6] * a + e[7] * o + r, t[7] = e[6] * s + e[7] * l + n
            }
        }, t.AnimationStateData = function(e) {
            this.skeletonData = e, this.animationToMixTime = {}
        }, t.AnimationStateData.prototype = {
            defaultMix: 0,
            setMixByName: function(e, t, n) {
                var i = this.skeletonData.findAnimation(e);
                if (!i) throw "Animation not found: " + e;
                var r = this.skeletonData.findAnimation(t);
                if (!r) throw "Animation not found: " + t;
                this.setMix(i, r, n)
            },
            setMix: function(e, t, i) {
                this.animationToMixTime[e.name + ":" + t.name] = i
            },
            getMix: function(t, i) {
                var e = this.animationToMixTime[t.name + ":" + i.name];
                return e ? e : this.defaultMix
            }
        }, t.AnimationState = function(e) {
            this.data = e, this.queue = []
        }, t.AnimationState.prototype = {
            animationSpeed: 1,
            current: null,
            previous: null,
            currentTime: 0,
            previousTime: 0,
            currentLoop: !1,
            previousLoop: !1,
            mixTime: 0,
            mixDuration: 0,
            update: function(e) {
                if (this.currentTime += e * this.animationSpeed, this.previousTime += e, this.mixTime += e, this.queue.length > 0) {
                    var t = this.queue[0];
                    this.currentTime >= t.delay && (this._setAnimation(t.animation, t.loop), this.queue.shift())
                }
            },
            apply: function(e) {
                if (this.current)
                    if (this.previous) {
                        this.previous.apply(e, this.previousTime, this.previousLoop);
                        var t = this.mixTime / this.mixDuration;
                        t >= 1 && (t = 1, this.previous = null), this.current.mix(e, this.currentTime, this.currentLoop, t)
                    } else this.current.apply(e, this.currentTime, this.currentLoop)
            },
            clearAnimation: function() {
                this.previous = null, this.current = null, this.queue.length = 0
            },
            _setAnimation: function(e, t) {
                this.previous = null, e && this.current && (this.mixDuration = this.data.getMix(this.current, e), this.mixDuration > 0 && (this.mixTime = 0, this.previous = this.current, this.previousTime = this.currentTime, this.previousLoop = this.currentLoop)), this.current = e, this.currentLoop = t, this.currentTime = 0
            },
            setAnimationByName: function(e, i) {
                var t = this.data.skeletonData.findAnimation(e);
                if (!t) throw "Animation not found: " + e;
                this.setAnimation(t, i)
            },
            setAnimation: function(e, t) {
                this.queue.length = 0, this._setAnimation(e, t)
            },
            addAnimationByName: function(e, i, r) {
                var t = this.data.skeletonData.findAnimation(e);
                if (!t) throw "Animation not found: " + e;
                this.addAnimation(t, i, r)
            },
            addAnimation: function(r, n, e) {
                var t = {};
                if (t.animation = r, t.loop = n, !e || 0 >= e) {
                    var i = this.queue.length ? this.queue[this.queue.length - 1].animation : this.current;
                    e = null != i ? i.duration - this.data.getMix(i, r) + (e || 0) : 0
                }
                t.delay = e, this.queue.push(t)
            },
            isComplete: function() {
                return !this.current || this.currentTime >= this.current.duration
            }
        }, t.SkeletonJson = function(e) {
            this.attachmentLoader = e
        }, t.SkeletonJson.prototype = {
            scale: 1,
            readSkeletonData: function(c) {
                for (var e, r = new t.SkeletonData, b = c.bones, n = 0, m = b.length; m > n; n++) {
                    var i = b[n],
                        g = null;
                    if (i.parent && (g = r.findBone(i.parent), !g)) throw "Parent bone not found: " + i.parent;
                    e = new t.BoneData(i.name, g), e.length = (i.length || 0) * this.scale, e.x = (i.x || 0) * this.scale, e.y = (i.y || 0) * this.scale, e.rotation = i.rotation || 0, e.scaleX = i.scaleX || 1, e.scaleY = i.scaleY || 1, r.bones.push(e)
                }
                var w = c.slots;
                for (n = 0, m = w.length; m > n; n++) {
                    var l = w[n];
                    if (e = r.findBone(l.bone), !e) throw "Slot bone not found: " + l.bone;
                    var a = new t.SlotData(l.name, e),
                        o = l.color;
                    o && (a.r = t.SkeletonJson.toColor(o, 0), a.g = t.SkeletonJson.toColor(o, 1), a.b = t.SkeletonJson.toColor(o, 2), a.a = t.SkeletonJson.toColor(o, 3)), a.attachmentName = l.attachment, r.slots.push(a)
                }
                var p = c.skins;
                for (var _ in p)
                    if (p.hasOwnProperty(_)) {
                        var f = p[_],
                            s = new t.Skin(_);
                        for (var u in f)
                            if (f.hasOwnProperty(u)) {
                                var T = r.findSlotIndex(u),
                                    y = f[u];
                                for (var h in y)
                                    if (y.hasOwnProperty(h)) {
                                        var x = this.readAttachment(s, h, y[h]);
                                        null != x && s.addAttachment(T, h, x)
                                    }
                            }
                        r.skins.push(s), "default" == s.name && (r.defaultSkin = s)
                    }
                var v = c.animations;
                for (var d in v) v.hasOwnProperty(d) && this.readAnimation(d, v[d], r);
                return r
            },
            readAttachment: function(a, r, i) {
                r = i.name || r;
                var n = t.AttachmentType[i.type || "region"];
                if (n == t.AttachmentType.region) {
                    var e = new t.RegionAttachment;
                    return e.x = (i.x || 0) * this.scale, e.y = (i.y || 0) * this.scale, e.scaleX = i.scaleX || 1, e.scaleY = i.scaleY || 1, e.rotation = i.rotation || 0, e.width = (i.width || 32) * this.scale, e.height = (i.height || 32) * this.scale, e.updateOffset(), e.rendererObject = {}, e.rendererObject.name = r, e.rendererObject.scale = {}, e.rendererObject.scale.x = e.scaleX, e.rendererObject.scale.y = e.scaleY, e.rendererObject.rotation = -e.rotation * Math.PI / 180, e
                }
                throw "Unknown attachment type: " + n
            },
            readAnimation: function(T, b, g) {
                var a, e, o, i, n, r, l, c = [],
                    s = 0,
                    p = b.bones;
                for (var h in p)
                    if (p.hasOwnProperty(h)) {
                        var y = g.findBoneIndex(h);
                        if (-1 == y) throw "Bone not found: " + h;
                        var _ = p[h];
                        for (o in _)
                            if (_.hasOwnProperty(o))
                                if (n = _[o], "rotate" == o) {
                                    for (e = new t.RotateTimeline(n.length), e.boneIndex = y, a = 0, r = 0, l = n.length; l > r; r++) i = n[r], e.setFrame(a, i.time, i.angle), t.SkeletonJson.readCurve(e, a, i), a++;
                                    c.push(e), s = Math.max(s, e.frames[2 * e.getFrameCount() - 2])
                                } else {
                                    if ("translate" != o && "scale" != o) throw "Invalid timeline type for a bone: " + o + " (" + h + ")";
                                    var f = 1;
                                    for ("scale" == o ? e = new t.ScaleTimeline(n.length) : (e = new t.TranslateTimeline(n.length), f = this.scale), e.boneIndex = y, a = 0, r = 0, l = n.length; l > r; r++) {
                                        i = n[r];
                                        var C = (i.x || 0) * f,
                                            w = (i.y || 0) * f;
                                        e.setFrame(a, i.time, C, w), t.SkeletonJson.readCurve(e, a, i), a++
                                    }
                                    c.push(e), s = Math.max(s, e.frames[3 * e.getFrameCount() - 3])
                                }
                    }
                var m = b.slots;
                for (var u in m)
                    if (m.hasOwnProperty(u)) {
                        var v = m[u],
                            x = g.findSlotIndex(u);
                        for (o in v)
                            if (v.hasOwnProperty(o))
                                if (n = v[o], "color" == o) {
                                    for (e = new t.ColorTimeline(n.length), e.slotIndex = x, a = 0, r = 0, l = n.length; l > r; r++) {
                                        i = n[r];
                                        var d = i.color,
                                            S = t.SkeletonJson.toColor(d, 0),
                                            E = t.SkeletonJson.toColor(d, 1),
                                            A = t.SkeletonJson.toColor(d, 2),
                                            k = t.SkeletonJson.toColor(d, 3);
                                        e.setFrame(a, i.time, S, E, A, k), t.SkeletonJson.readCurve(e, a, i), a++
                                    }
                                    c.push(e), s = Math.max(s, e.frames[5 * e.getFrameCount() - 5])
                                } else {
                                    if ("attachment" != o) throw "Invalid timeline type for a slot: " + o + " (" + u + ")";
                                    for (e = new t.AttachmentTimeline(n.length), e.slotIndex = x, a = 0, r = 0, l = n.length; l > r; r++) i = n[r], e.setFrame(a++, i.time, i.name);
                                    c.push(e), s = Math.max(s, e.frames[e.getFrameCount() - 1])
                                }
                    }
                g.animations.push(new t.Animation(T, c, s))
            }
        }, t.SkeletonJson.readCurve = function(t, i, r) {
            var e = r.curve;
            e && ("stepped" == e ? t.curves.setStepped(i) : e instanceof Array && t.curves.setCurve(i, e[0], e[1], e[2], e[3]))
        }, t.SkeletonJson.toColor = function(e, t) {
            if (8 != e.length) throw "Color hexidecimal length must be 8, recieved: " + e;
            return parseInt(e.substr(2 * t, 2), 16) / 255
        }, t.Atlas = function(d, u) {
            this.textureLoader = u, this.pages = [], this.regions = [];
            var n = new t.AtlasReader(d),
                e = [];
            e.length = 4;
            for (var r = null;;) {
                var a = n.readLine();
                if (null == a) break;
                if (a = n.trim(a), a.length)
                    if (r) {
                        var i = new t.AtlasRegion;
                        i.name = a, i.page = r, i.rotate = "true" == n.readValue(), n.readTuple(e);
                        var o = parseInt(e[0], 10),
                            s = parseInt(e[1], 10);
                        n.readTuple(e);
                        var h = parseInt(e[0], 10),
                            c = parseInt(e[1], 10);
                        i.u = o / r.width, i.v = s / r.height, i.rotate ? (i.u2 = (o + c) / r.width, i.v2 = (s + h) / r.height) : (i.u2 = (o + h) / r.width, i.v2 = (s + c) / r.height), i.x = o, i.y = s, i.width = Math.abs(h), i.height = Math.abs(c), 4 == n.readTuple(e) && (i.splits = [parseInt(e[0], 10), parseInt(e[1], 10), parseInt(e[2], 10), parseInt(e[3], 10)], 4 == n.readTuple(e) && (i.pads = [parseInt(e[0], 10), parseInt(e[1], 10), parseInt(e[2], 10), parseInt(e[3], 10)], n.readTuple(e))), i.originalWidth = parseInt(e[0], 10), i.originalHeight = parseInt(e[1], 10), n.readTuple(e), i.offsetX = parseInt(e[0], 10), i.offsetY = parseInt(e[1], 10), i.index = parseInt(n.readValue(), 10), this.regions.push(i)
                    } else {
                        r = new t.AtlasPage, r.name = a, r.format = t.Atlas.Format[n.readValue()], n.readTuple(e), r.minFilter = t.Atlas.TextureFilter[e[0]], r.magFilter = t.Atlas.TextureFilter[e[1]];
                        var l = n.readValue();
                        r.uWrap = t.Atlas.TextureWrap.clampToEdge, r.vWrap = t.Atlas.TextureWrap.clampToEdge, "x" == l ? r.uWrap = t.Atlas.TextureWrap.repeat : "y" == l ? r.vWrap = t.Atlas.TextureWrap.repeat : "xy" == l && (r.uWrap = r.vWrap = t.Atlas.TextureWrap.repeat), u.load(r, a), this.pages.push(r)
                    } else r = null
            }
        }, t.Atlas.prototype = {
            findRegion: function(i) {
                for (var t = this.regions, e = 0, r = t.length; r > e; e++)
                    if (t[e].name == i) return t[e];
                return null
            },
            dispose: function() {
                for (var t = this.pages, e = 0, i = t.length; i > e; e++) this.textureLoader.unload(t[e].rendererObject)
            },
            updateUVs: function(t) {
                for (var r = this.regions, i = 0, n = r.length; n > i; i++) {
                    var e = r[i];
                    e.page == t && (e.u = e.x / t.width, e.v = e.y / t.height, e.rotate ? (e.u2 = (e.x + e.height) / t.width, e.v2 = (e.y + e.width) / t.height) : (e.u2 = (e.x + e.width) / t.width, e.v2 = (e.y + e.height) / t.height))
                }
            }
        }, t.Atlas.Format = {
            alpha: 0,
            intensity: 1,
            luminanceAlpha: 2,
            rgb565: 3,
            rgba4444: 4,
            rgb888: 5,
            rgba8888: 6
        }, t.Atlas.TextureFilter = {
            nearest: 0,
            linear: 1,
            mipMap: 2,
            mipMapNearestNearest: 3,
            mipMapLinearNearest: 4,
            mipMapNearestLinear: 5,
            mipMapLinearLinear: 6
        }, t.Atlas.TextureWrap = {
            mirroredRepeat: 0,
            clampToEdge: 1,
            repeat: 2
        }, t.AtlasPage = function() {}, t.AtlasPage.prototype = {
            name: null,
            format: null,
            minFilter: null,
            magFilter: null,
            uWrap: null,
            vWrap: null,
            rendererObject: null,
            width: 0,
            height: 0
        }, t.AtlasRegion = function() {}, t.AtlasRegion.prototype = {
            page: null,
            name: null,
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            u: 0,
            v: 0,
            u2: 0,
            v2: 0,
            offsetX: 0,
            offsetY: 0,
            originalWidth: 0,
            originalHeight: 0,
            index: 0,
            rotate: !1,
            splits: null,
            pads: null
        }, t.AtlasReader = function(e) {
            this.lines = e.split(/\r\n|\r|\n/)
        }, t.AtlasReader.prototype = {
            index: 0,
            trim: function(e) {
                return e.replace(/^\s+|\s+$/g, "")
            },
            readLine: function() {
                return this.index >= this.lines.length ? null : this.lines[this.index++]
            },
            readValue: function() {
                var e = this.readLine(),
                    t = e.indexOf(":");
                if (-1 == t) throw "Invalid line: " + e;
                return this.trim(e.substring(t + 1))
            },
            readTuple: function(n) {
                var e = this.readLine(),
                    a = e.indexOf(":");
                if (-1 == a) throw "Invalid line: " + e;
                for (var t = 0, i = a + 1; 3 > t; t++) {
                    var r = e.indexOf(",", i);
                    if (-1 == r) {
                        if (!t) throw "Invalid line: " + e;
                        break
                    }
                    n[t] = this.trim(e.substr(i, r - i)), i = r + 1
                }
                return n[t] = this.trim(e.substring(i)), t + 1
            }
        }, t.AtlasAttachmentLoader = function(e) {
            this.atlas = e
        }, t.AtlasAttachmentLoader.prototype = {
            newAttachment: function(a, r, n) {
                switch (r) {
                    case t.AttachmentType.region:
                        var e = this.atlas.findRegion(n);
                        if (!e) throw "Region not found in atlas: " + n + " (" + r + ")";
                        var i = new t.RegionAttachment(n);
                        return i.rendererObject = e, i.setUVs(e.u, e.v, e.u2, e.v2, e.rotate), i.regionOffsetX = e.offsetX, i.regionOffsetY = e.offsetY, i.regionWidth = e.width, i.regionHeight = e.height, i.regionOriginalWidth = e.originalWidth, i.regionOriginalHeight = e.originalHeight, i
                }
                throw "Unknown attachment type: " + r
            }
        }, t.Bone.yDown = !0, e.AnimCache = {}, e.Spine = function(o) {
            if (e.DisplayObjectContainer.call(this), this.spineData = e.AnimCache[o], !this.spineData) throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: " + o);
            this.skeleton = new t.Skeleton(this.spineData), this.skeleton.updateWorldTransform(), this.stateData = new t.AnimationStateData(this.spineData), this.state = new t.AnimationState(this.stateData), this.slotContainers = [];
            for (var r = 0, l = this.skeleton.drawOrder.length; l > r; r++) {
                var i = this.skeleton.drawOrder[r],
                    n = i.attachment,
                    a = new e.DisplayObjectContainer;
                if (this.slotContainers.push(a), this.addChild(a), n instanceof t.RegionAttachment) {
                    var c = n.rendererObject.name,
                        s = this.createSprite(i, n.rendererObject);
                    i.currentSprite = s, i.currentSpriteName = c, a.addChild(s)
                }
            }
        }, e.Spine.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Spine.prototype.constructor = e.Spine, e.Spine.prototype.updateTransform = function() {
            this.lastTime = this.lastTime || Date.now();
            var c = .001 * (Date.now() - this.lastTime);
            this.lastTime = Date.now(), this.state.update(c), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform();
            for (var l = this.skeleton.drawOrder, o = 0, h = l.length; h > o; o++) {
                var i = l[o],
                    r = i.attachment,
                    n = this.slotContainers[o];
                if (r instanceof t.RegionAttachment) {
                    if (r.rendererObject && (!i.currentSpriteName || i.currentSpriteName != r.name)) {
                        var s = r.rendererObject.name;
                        if (void 0 !== i.currentSprite && (i.currentSprite.visible = !1), i.sprites = i.sprites || {}, void 0 !== i.sprites[s]) i.sprites[s].visible = !0;
                        else {
                            var u = this.createSprite(i, r.rendererObject);
                            n.addChild(u)
                        }
                        i.currentSprite = i.sprites[s], i.currentSpriteName = s
                    }
                    n.visible = !0;
                    var a = i.bone;
                    n.position.x = a.worldX + r.x * a.m00 + r.y * a.m01, n.position.y = a.worldY + r.x * a.m10 + r.y * a.m11, n.scale.x = a.worldScaleX, n.scale.y = a.worldScaleY, n.rotation = -(i.bone.worldRotation * Math.PI / 180), n.alpha = i.a, i.currentSprite.tint = e.rgb2hex([i.r, i.g, i.b])
                } else n.visible = !1
            }
            e.DisplayObjectContainer.prototype.updateTransform.call(this)
        }, e.Spine.prototype.createSprite = function(r, t) {
            var n = e.TextureCache[t.name] ? t.name : t.name + ".png",
                i = new e.Sprite(e.Texture.fromFrame(n));
            return i.scale = t.scale, i.rotation = t.rotation, i.anchor.x = i.anchor.y = .5, r.sprites = r.sprites || {}, r.sprites[t.name] = i, i
        }, e.BaseTextureCache = {}, e.texturesToUpdate = [], e.texturesToDestroy = [], e.BaseTextureCacheIdGenerator = 0, e.BaseTexture = function(i, r) {
            if (e.EventTarget.call(this), this.resolution = 1, this.width = 100, this.height = 100, this.scaleMode = r || e.scaleModes.DEFAULT, this.hasLoaded = !1, this.source = i, this.id = e.BaseTextureCacheIdGenerator++, this.premultipliedAlpha = !0, this._glTextures = [], this._dirty = [], i) {
                if ((this.source.complete || this.source.getContext) && this.source.width && this.source.height) this.hasLoaded = !0, this.width = this.source[this.source instanceof HTMLImageElement ? "naturalWidth" : "width"], this.height = this.source[this.source instanceof HTMLImageElement ? "naturalHeight" : "height"], e.texturesToUpdate.push(this);
                else {
                    var t = this;
                    this.source.onload = function() {
                        t.hasLoaded = !0, t.width = t.source[t.source instanceof HTMLImageElement ? "naturalWidth" : "width"], t.height = t.source[t.source instanceof HTMLImageElement ? "naturalHeight" : "height"];
                        for (var e = 0; e < t._glTextures.length; e++) t._dirty[e] = !0;
                        t.dispatchEvent({
                            type: "loaded",
                            content: t
                        })
                    }, this.source.onerror = function() {
                        t.dispatchEvent({
                            type: "error",
                            content: t
                        })
                    }
                }
                this.imageUrl = null, this._powerOf2 = !1
            }
        }, e.BaseTexture.prototype.constructor = e.BaseTexture, e.BaseTexture.prototype.destroy = function() {
            this.imageUrl ? (delete e.BaseTextureCache[this.imageUrl], delete e.TextureCache[this.imageUrl], this.imageUrl = null, this.source.src = "") : this.source && this.source._pixiId && delete e.BaseTextureCache[this.source._pixiId], this.source = null, e.texturesToDestroy.push(this)
        }, e.BaseTexture.prototype.updateSourceImage = function(e) {
            this.hasLoaded = !1, this.source.src = null, this.source.src = e
        }, e.BaseTexture.fromImage = function(t, r, a) {
            var i = e.BaseTextureCache[t];
            if (void 0 === r && -1 === t.indexOf("data:") && (r = !0), !i) {
                var n = new Image;
                r && (n.crossOrigin = ""), n.src = t, i = new e.BaseTexture(n, a), i.imageUrl = t, e.BaseTextureCache[t] = i, -1 !== t.indexOf(e.RETINA_PREFIX + ".") && (i.resolution = 2)
            }
            return i
        }, e.BaseTexture.fromCanvas = function(t, r) {
            t._pixiId || (t._pixiId = "canvas_" + e.TextureCacheIdGenerator++);
            var i = e.BaseTextureCache[t._pixiId];
            return i || (i = new e.BaseTexture(t, r), e.BaseTextureCache[t._pixiId] = i), i
        }, e.TextureCache = {}, e.FrameCache = {}, e.TextureCacheIdGenerator = 0, e.Texture = function(t, i) {
            e.EventTarget.call(this), this.noFrame = !1, i || (this.noFrame = !0, i = new e.Rectangle(0, 0, 1, 1)), t instanceof e.Texture && (t = t.baseTexture), this.baseTexture = t, this.frame = i, this.trim = null, this.valid = !1, this._uvs = null, this.width = 0, this.height = 0, this.crop = new e.Rectangle(0, 0, 1, 1), t.hasLoaded ? (this.noFrame && (i = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(i)) : t.addEventListener("loaded", this.onBaseTextureLoaded.bind(this))
        }, e.Texture.prototype.constructor = e.Texture, e.Texture.prototype.onBaseTextureLoaded = function() {
            var t = this.baseTexture;
            t.removeEventListener("loaded", this.onLoaded), this.noFrame && (this.frame = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(this.frame), this.dispatchEvent({
                type: "update",
                content: this
            })
        }, e.Texture.prototype.destroy = function(e) {
            e && this.baseTexture.destroy(), this.valid = !1
        }, e.Texture.prototype.setFrame = function(t) {
            if (this.noFrame = !1, this.frame = t, this.width = t.width, this.height = t.height, this.crop.x = t.x, this.crop.y = t.y, this.crop.width = t.width, this.crop.height = t.height, !this.trim && (t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height)) throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
            this.valid = t && t.width && t.height && this.baseTexture.source && this.baseTexture.hasLoaded, this.trim && (this.width = this.trim.width, this.height = this.trim.height, this.frame.width = this.trim.width, this.frame.height = this.trim.height), this.valid && e.Texture.frameUpdates.push(this)
        }, e.Texture.prototype._updateWebGLuvs = function() {
            this._uvs || (this._uvs = new e.TextureUvs);
            var t = this.crop,
                i = this.baseTexture.width,
                r = this.baseTexture.height;
            this._uvs.x0 = t.x / i, this._uvs.y0 = t.y / r, this._uvs.x1 = (t.x + t.width) / i, this._uvs.y1 = t.y / r, this._uvs.x2 = (t.x + t.width) / i, this._uvs.y2 = (t.y + t.height) / r, this._uvs.x3 = t.x / i, this._uvs.y3 = (t.y + t.height) / r
        }, e.Texture.fromImage = function(i, r, n) {
            var t = e.TextureCache[i];
            return t || (t = new e.Texture(e.BaseTexture.fromImage(i, r, n)), e.TextureCache[i] = t), t
        }, e.Texture.fromFrame = function(t) {
            var i = e.TextureCache[t];
            if (!i) throw new Error('The frameId "' + t + '" does not exist in the texture cache ');
            return i
        }, e.Texture.fromCanvas = function(t, i) {
            var r = e.BaseTexture.fromCanvas(t, i);
            return new e.Texture(r)
        }, e.Texture.addTextureToCache = function(t, i) {
            e.TextureCache[i] = t
        }, e.Texture.removeTextureFromCache = function(t) {
            var i = e.TextureCache[t];
            return delete e.TextureCache[t], delete e.BaseTextureCache[t], i
        }, e.Texture.frameUpdates = [], e.TextureUvs = function() {
            this.x0 = 0, this.y0 = 0, this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.x3 = 0, this.y3 = 0
        }, e.RenderTexture = function(i, r, n, a, o) {
            if (e.EventTarget.call(this), this.width = i || 100, this.height = r || 100, this.resolution = o || 1, this.frame = new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.crop = new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.baseTexture = new e.BaseTexture, this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution, this.baseTexture._glTextures = [], this.baseTexture.resolution = this.resolution, this.baseTexture.scaleMode = a || e.scaleModes.DEFAULT, this.baseTexture.hasLoaded = !0, this.renderer = n || e.defaultRenderer, this.renderer.type === e.WEBGL_RENDERER) {
                var t = this.renderer.gl;
                this.textureBuffer = new e.FilterTexture(t, this.width * this.resolution, this.height * this.resolution, this.baseTexture.scaleMode), this.baseTexture._glTextures[t.id] = this.textureBuffer.texture, this.render = this.renderWebGL, this.projection = new e.Point(.5 * this.width, .5 * -this.height)
            } else this.render = this.renderCanvas, this.textureBuffer = new e.CanvasBuffer(this.width * this.resolution, this.height * this.resolution), this.baseTexture.source = this.textureBuffer.canvas;
            this.valid = !0, e.Texture.frameUpdates.push(this)
        }, e.RenderTexture.prototype = Object.create(e.Texture.prototype), e.RenderTexture.prototype.constructor = e.RenderTexture, e.RenderTexture.prototype.resize = function(t, i, r) {
            (t !== this.width || i !== this.height) && (this.valid = t > 0 && i > 0, this.width = this.frame.width = this.crop.width = t, this.height = this.frame.height = this.crop.height = i, r && (this.baseTexture.width = this.width, this.baseTexture.height = this.height), this.renderer.type === e.WEBGL_RENDERER && (this.projection.x = this.width / 2, this.projection.y = -this.height / 2), this.valid && this.textureBuffer.resize(this.width * this.resolution, this.height * this.resolution))
        }, e.RenderTexture.prototype.clear = function() {
            this.valid && (this.renderer.type === e.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear())
        }, e.RenderTexture.prototype.renderWebGL = function(t, r, o) {
            if (this.valid) {
                var i = this.renderer.gl;
                i.colorMask(!0, !0, !0, !0), i.viewport(0, 0, this.width * this.resolution, this.height * this.resolution), i.bindFramebuffer(i.FRAMEBUFFER, this.textureBuffer.frameBuffer), o && this.textureBuffer.clear();
                var a = t.children,
                    s = t.worldTransform;
                t.worldTransform = e.RenderTexture.tempMatrix, t.worldAlpha = 1, t.worldTransform.d = -1, t.worldTransform.ty = -2 * this.projection.y, r && (t.worldTransform.tx = r.x, t.worldTransform.ty -= r.y);
                for (var n = 0, l = a.length; l > n; n++) a[n].updateTransform();
                e.WebGLRenderer.updateTextures(), this.renderer.spriteBatch.dirty = !0, this.renderer.renderDisplayObject(t, this.projection, this.textureBuffer.frameBuffer), t.worldTransform = s, this.renderer.spriteBatch.dirty = !0
            }
        }, e.RenderTexture.prototype.renderCanvas = function(t, i, o) {
            if (this.valid) {
                var n = t.children,
                    s = t.worldTransform;
                t.worldTransform = e.RenderTexture.tempMatrix, i ? (t.worldTransform.tx = i.x, t.worldTransform.ty = i.y) : (t.worldTransform.tx = 0, t.worldTransform.ty = 0);
                for (var r = 0, l = n.length; l > r; r++) n[r].updateTransform();
                o && this.textureBuffer.clear();
                var a = this.textureBuffer.context,
                    c = this.renderer.resolution;
                this.renderer.resolution = this.resolution, this.renderer.renderDisplayObject(t, a), this.renderer.resolution = c, a.setTransform(1, 0, 0, 1, 0, 0), t.worldTransform = s
            }
        }, e.RenderTexture.prototype.getImage = function() {
            var e = new Image;
            return e.src = this.getBase64(), e
        }, e.RenderTexture.prototype.getBase64 = function() {
            return this.getCanvas().toDataURL()
        }, e.RenderTexture.prototype.getCanvas = function() {
            if (this.renderer.type === e.WEBGL_RENDERER) {
                var i = this.renderer.gl,
                    n = this.textureBuffer.width,
                    a = this.textureBuffer.height,
                    r = new Uint8Array(4 * n * a);
                i.bindFramebuffer(i.FRAMEBUFFER, this.textureBuffer.frameBuffer), i.readPixels(0, 0, n, a, i.RGBA, i.UNSIGNED_BYTE, r), i.bindFramebuffer(i.FRAMEBUFFER, null);
                for (var l = new e.CanvasBuffer(n, a), c = l.context.getImageData(0, 0, n, a), o = c.data, t = 0; t < r.length; t += 4) {
                    var s = r[t + 3];
                    o[t] = r[t] * s, o[t + 1] = r[t + 1] * s, o[t + 2] = r[t + 2] * s, o[t + 3] = s
                }
                return l.context.putImageData(c, 0, 0), l.canvas
            }
            return this.textureBuffer.canvas
        }, e.RenderTexture.tempMatrix = new e.Matrix, e.AssetLoader = function(t, i) {
            e.EventTarget.call(this), this.assetURLs = t, this.crossorigin = i, this.loadersByType = {
                jpg: e.ImageLoader,
                jpeg: e.ImageLoader,
                png: e.ImageLoader,
                gif: e.ImageLoader,
                webp: e.ImageLoader,
                json: e.JsonLoader,
                atlas: e.AtlasLoader,
                anim: e.SpineLoader,
                xml: e.BitmapFontLoader,
                fnt: e.BitmapFontLoader
            }
        }, e.AssetLoader.prototype.constructor = e.AssetLoader, e.AssetLoader.prototype._getDataType = function(i) {
            var e = "data:",
                a = i.slice(0, e.length).toLowerCase();
            if (a === e) {
                var r = i.slice(e.length),
                    n = r.indexOf(",");
                if (-1 === n) return null;
                var t = r.slice(0, n).split(";")[0];
                return t && "text/plain" !== t.toLowerCase() ? t.split("/").pop().toLowerCase() : "txt"
            }
            return null
        }, e.AssetLoader.prototype.load = function() {
            function a(e) {
                o.onAssetLoaded(e.content)
            }
            var o = this;
            this.loadCount = this.assetURLs.length;
            for (var t = 0; t < this.assetURLs.length; t++) {
                var i = this.assetURLs[t],
                    e = this._getDataType(i);
                e || (e = i.split("?").shift().split(".").pop().toLowerCase());
                var r = this.loadersByType[e];
                if (!r) throw new Error(e + " is an unsupported file type");
                var n = new r(i, this.crossorigin);
                n.addEventListener("loaded", a), n.load()
            }
        }, e.AssetLoader.prototype.onAssetLoaded = function(e) {
            this.loadCount--, this.dispatchEvent({
                type: "onProgress",
                content: this,
                loader: e
            }), this.onProgress && this.onProgress(e), this.loadCount || (this.dispatchEvent({
                type: "onComplete",
                content: this
            }), this.onComplete && this.onComplete())
        }, e.JsonLoader = function(t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.baseUrl = t.replace(/[^\/]*$/, ""), this.loaded = !1
        }, e.JsonLoader.prototype.constructor = e.JsonLoader, e.JsonLoader.prototype.load = function() {
            window.XDomainRequest && this.crossorigin ? (this.ajaxRequest = new window.XDomainRequest, this.ajaxRequest.timeout = 3e3, this.ajaxRequest.onerror = this.onError.bind(this), this.ajaxRequest.ontimeout = this.onError.bind(this), this.ajaxRequest.onprogress = function() {}) : this.ajaxRequest = window.XMLHttpRequest ? new window.XMLHttpRequest : new window.ActiveXObject("Microsoft.XMLHTTP"), this.ajaxRequest.onload = this.onJSONLoaded.bind(this), this.ajaxRequest.open("GET", this.url, !0), this.ajaxRequest.send()
        }, e.JsonLoader.prototype.onJSONLoaded = function() {
            if (!this.ajaxRequest.responseText) return void this.onError();
            if (this.json = JSON.parse(this.ajaxRequest.responseText), this.json.frames) {
                var l = this.baseUrl + this.json.meta.image,
                    a = new e.ImageLoader(l, this.crossorigin),
                    n = this.json.frames;
                this.texture = a.texture.baseTexture, a.addEventListener("loaded", this.onLoaded.bind(this));
                for (var r in n) {
                    var i = n[r].frame;
                    if (i && (e.TextureCache[r] = new e.Texture(this.texture, {
                            x: i.x,
                            y: i.y,
                            width: i.w,
                            height: i.h
                        }), e.TextureCache[r].crop = new e.Rectangle(i.x, i.y, i.w, i.h), n[r].trimmed)) {
                        var o = n[r].sourceSize,
                            s = n[r].spriteSourceSize;
                        e.TextureCache[r].trim = new e.Rectangle(s.x, s.y, o.w, o.h)
                    }
                }
                a.load()
            } else if (this.json.bones) {
                var c = new t.SkeletonJson,
                    h = c.readSkeletonData(this.json);
                e.AnimCache[this.url] = h, this.onLoaded()
            } else this.onLoaded()
        }, e.JsonLoader.prototype.onLoaded = function() {
            this.loaded = !0, this.dispatchEvent({
                type: "loaded",
                content: this
            })
        }, e.JsonLoader.prototype.onError = function() {
            this.dispatchEvent({
                type: "error",
                content: this
            })
        }, e.AtlasLoader = function(t, i) {
            e.EventTarget.call(this), this.url = t, this.baseUrl = t.replace(/[^\/]*$/, ""), this.crossorigin = i, this.loaded = !1
        }, e.AtlasLoader.constructor = e.AtlasLoader, e.AtlasLoader.prototype.load = function() {
            this.ajaxRequest = new e.AjaxRequest, this.ajaxRequest.onreadystatechange = this.onAtlasLoaded.bind(this), this.ajaxRequest.open("GET", this.url, !0), this.ajaxRequest.overrideMimeType && this.ajaxRequest.overrideMimeType("application/json"), this.ajaxRequest.send(null)
        }, e.AtlasLoader.prototype.onAtlasLoaded = function() {
            if (4 === this.ajaxRequest.readyState)
                if (200 === this.ajaxRequest.status || -1 === window.location.href.indexOf("http")) {
                    this.atlas = {
                        meta: {
                            image: []
                        },
                        frames: []
                    };
                    var n = this.ajaxRequest.responseText.split(/\r?\n/),
                        a = -3,
                        c = 0,
                        i = null,
                        u = !1,
                        t = 0,
                        r = 0,
                        d = this.onLoaded.bind(this);
                    for (t = 0; t < n.length; t++)
                        if (n[t] = n[t].replace(/^\s+|\s+$/g, ""), "" === n[t] && (u = t + 1), n[t].length > 0) {
                            if (u === t) this.atlas.meta.image.push(n[t]), c = this.atlas.meta.image.length - 1, this.atlas.frames.push({}), a = -3;
                            else if (a > 0)
                                if (a % 7 === 1) null != i && (this.atlas.frames[c][i.name] = i), i = {
                                    name: n[t],
                                    frame: {}
                                };
                                else {
                                    var o = n[t].split(" ");
                                    if (a % 7 === 3) i.frame.x = Number(o[1].replace(",", "")), i.frame.y = Number(o[2]);
                                    else if (a % 7 === 4) i.frame.w = Number(o[1].replace(",", "")), i.frame.h = Number(o[2]);
                                    else if (a % 7 === 5) {
                                        var h = {
                                            x: 0,
                                            y: 0,
                                            w: Number(o[1].replace(",", "")),
                                            h: Number(o[2])
                                        };
                                        h.w > i.frame.w || h.h > i.frame.h ? (i.trimmed = !0, i.realSize = h) : i.trimmed = !1
                                    }
                                }
                            a++
                        }
                    if (null != i && (this.atlas.frames[c][i.name] = i), this.atlas.meta.image.length > 0) {
                        for (this.images = [], r = 0; r < this.atlas.meta.image.length; r++) {
                            var p = this.baseUrl + this.atlas.meta.image[r],
                                l = this.atlas.frames[r];
                            this.images.push(new e.ImageLoader(p, this.crossorigin));
                            for (t in l) {
                                var s = l[t].frame;
                                s && (e.TextureCache[t] = new e.Texture(this.images[r].texture.baseTexture, {
                                    x: s.x,
                                    y: s.y,
                                    width: s.w,
                                    height: s.h
                                }), l[t].trimmed && (e.TextureCache[t].realSize = l[t].realSize, e.TextureCache[t].trim.x = 0, e.TextureCache[t].trim.y = 0))
                            }
                        }
                        for (this.currentImageId = 0, r = 0; r < this.images.length; r++) this.images[r].addEventListener("loaded", d);
                        this.images[this.currentImageId].load()
                    } else this.onLoaded()
                } else this.onError()
        }, e.AtlasLoader.prototype.onLoaded = function() {
            this.images.length - 1 > this.currentImageId ? (this.currentImageId++, this.images[this.currentImageId].load()) : (this.loaded = !0, this.dispatchEvent({
                type: "loaded",
                content: this
            }))
        }, e.AtlasLoader.prototype.onError = function() {
            this.dispatchEvent({
                type: "error",
                content: this
            })
        }, e.SpriteSheetLoader = function(t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.baseUrl = t.replace(/[^\/]*$/, ""), this.texture = null, this.frames = {}
        }, e.SpriteSheetLoader.prototype.constructor = e.SpriteSheetLoader, e.SpriteSheetLoader.prototype.load = function() {
            var t = this,
                i = new e.JsonLoader(this.url, this.crossorigin);
            i.addEventListener("loaded", function(e) {
                t.json = e.content.json, t.onLoaded()
            }), i.load()
        }, e.SpriteSheetLoader.prototype.onLoaded = function() {
            this.dispatchEvent({
                type: "loaded",
                content: this
            })
        }, e.ImageLoader = function(t, i) {
            e.EventTarget.call(this), this.texture = e.Texture.fromImage(t, i), this.frames = []
        }, e.ImageLoader.prototype.constructor = e.ImageLoader, e.ImageLoader.prototype.load = function() {
            this.texture.baseTexture.hasLoaded ? this.onLoaded() : this.texture.baseTexture.addEventListener("loaded", this.onLoaded.bind(this))
        }, e.ImageLoader.prototype.onLoaded = function() {
            this.dispatchEvent({
                type: "loaded",
                content: this
            })
        }, e.ImageLoader.prototype.loadFramedSpriteSheet = function(t, i, a) {
            this.frames = [];
            for (var l = Math.floor(this.texture.width / t), c = Math.floor(this.texture.height / i), o = 0, r = 0; c > r; r++)
                for (var n = 0; l > n; n++, o++) {
                    var s = new e.Texture(this.texture.baseTexture, {
                        x: n * t,
                        y: r * i,
                        width: t,
                        height: i
                    });
                    this.frames.push(s), a && (e.TextureCache[a + "-" + o] = s)
                }
            this.load()
        }, e.BitmapFontLoader = function(t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.baseUrl = t.replace(/[^\/]*$/, ""), this.texture = null
        }, e.BitmapFontLoader.prototype.constructor = e.BitmapFontLoader, e.BitmapFontLoader.prototype.load = function() {
            this.ajaxRequest = new e.AjaxRequest, this.ajaxRequest.onreadystatechange = this.onXMLLoaded.bind(this), this.ajaxRequest.open("GET", this.url, !0), this.ajaxRequest.overrideMimeType && this.ajaxRequest.overrideMimeType("application/xml"), this.ajaxRequest.send(null)
        }, e.BitmapFontLoader.prototype.onXMLLoaded = function() {
            if (4 === this.ajaxRequest.readyState && (200 === this.ajaxRequest.status || -1 === window.location.protocol.indexOf("http"))) {
                var r = this.ajaxRequest.responseXML;
                if (!r || /MSIE 9/i.test(navigator.userAgent) || navigator.isCocoonJS)
                    if ("function" == typeof window.DOMParser) {
                        var h = new DOMParser;
                        r = h.parseFromString(this.ajaxRequest.responseText, "text/xml")
                    } else {
                        var c = document.createElement("div");
                        c.innerHTML = this.ajaxRequest.responseText, r = c
                    }
                var u = this.baseUrl + r.getElementsByTagName("page")[0].getAttribute("file"),
                    o = new e.ImageLoader(u, this.crossorigin);
                this.texture = o.texture.baseTexture;
                var n = {},
                    s = r.getElementsByTagName("info")[0],
                    p = r.getElementsByTagName("common")[0];
                n.font = s.getAttribute("face"), n.size = parseInt(s.getAttribute("size"), 10), n.lineHeight = parseInt(p.getAttribute("lineHeight"), 10), n.chars = {};
                for (var i = r.getElementsByTagName("char"), t = 0; t < i.length; t++) {
                    var l = parseInt(i[t].getAttribute("id"), 10),
                        d = new e.Rectangle(parseInt(i[t].getAttribute("x"), 10), parseInt(i[t].getAttribute("y"), 10), parseInt(i[t].getAttribute("width"), 10), parseInt(i[t].getAttribute("height"), 10));
                    n.chars[l] = {
                        xOffset: parseInt(i[t].getAttribute("xoffset"), 10),
                        yOffset: parseInt(i[t].getAttribute("yoffset"), 10),
                        xAdvance: parseInt(i[t].getAttribute("xadvance"), 10),
                        kerning: {},
                        texture: e.TextureCache[l] = new e.Texture(this.texture, d)
                    }
                }
                var a = r.getElementsByTagName("kerning");
                for (t = 0; t < a.length; t++) {
                    var _ = parseInt(a[t].getAttribute("first"), 10),
                        f = parseInt(a[t].getAttribute("second"), 10),
                        m = parseInt(a[t].getAttribute("amount"), 10);
                    n.chars[f].kerning[_] = m
                }
                e.BitmapText.fonts[n.font] = n, o.addEventListener("loaded", this.onLoaded.bind(this)), o.load()
            }
        }, e.BitmapFontLoader.prototype.onLoaded = function() {
            this.dispatchEvent({
                type: "loaded",
                content: this
            })
        }, e.SpineLoader = function(t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.loaded = !1
        }, e.SpineLoader.prototype.constructor = e.SpineLoader, e.SpineLoader.prototype.load = function() {
            var t = this,
                i = new e.JsonLoader(this.url, this.crossorigin);
            i.addEventListener("loaded", function(e) {
                t.json = e.content.json, t.onLoaded()
            }), i.load()
        }, e.SpineLoader.prototype.onLoaded = function() {
            this.loaded = !0, this.dispatchEvent({
                type: "loaded",
                content: this
            })
        }, e.AbstractFilter = function(e, t) {
            this.passes = [this], this.shaders = [], this.dirty = !0, this.padding = 0, this.uniforms = t || {}, this.fragmentSrc = e || []
        }, e.AlphaMaskFilter = function(t) {
            e.AbstractFilter.call(this), this.passes = [this], t.baseTexture._powerOf2 = !0, this.uniforms = {
                mask: {
                    type: "sampler2D",
                    value: t
                },
                mapDimensions: {
                    type: "2f",
                    value: {
                        x: 1,
                        y: 5112
                    }
                },
                dimensions: {
                    type: "4fv",
                    value: [0, 0, 0, 0]
                }
            }, t.baseTexture.hasLoaded ? (this.uniforms.mask.value.x = t.width, this.uniforms.mask.value.y = t.height) : (this.boundLoadedFunction = this.onTextureLoaded.bind(this), t.baseTexture.on("loaded", this.boundLoadedFunction)), this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D mask;", "uniform sampler2D uSampler;", "uniform vec2 offset;", "uniform vec4 dimensions;", "uniform vec2 mapDimensions;", "void main(void) {", "   vec2 mapCords = vTextureCoord.xy;", "   mapCords += (dimensions.zw + offset)/ dimensions.xy ;", "   mapCords.y *= -1.0;", "   mapCords.y += 1.0;", "   mapCords *= dimensions.xy / mapDimensions;", "   vec4 original =  texture2D(uSampler, vTextureCoord);", "   float maskAlpha =  texture2D(mask, mapCords).r;", "   original *= maskAlpha;", "   gl_FragColor =  original;", "}"]
        }, e.AlphaMaskFilter.prototype = Object.create(e.AbstractFilter.prototype), e.AlphaMaskFilter.prototype.constructor = e.AlphaMaskFilter, e.AlphaMaskFilter.prototype.onTextureLoaded = function() {
            this.uniforms.mapDimensions.value.x = this.uniforms.mask.value.width, this.uniforms.mapDimensions.value.y = this.uniforms.mask.value.height, this.uniforms.mask.value.baseTexture.off("loaded", this.boundLoadedFunction)
        }, Object.defineProperty(e.AlphaMaskFilter.prototype, "map", {
            get: function() {
                return this.uniforms.mask.value
            },
            set: function(e) {
                this.uniforms.mask.value = e
            }
        }), e.ColorMatrixFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                matrix: {
                    type: "mat4",
                    value: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float invert;", "uniform mat4 matrix;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;", "}"]
        }, e.ColorMatrixFilter.prototype = Object.create(e.AbstractFilter.prototype), e.ColorMatrixFilter.prototype.constructor = e.ColorMatrixFilter, Object.defineProperty(e.ColorMatrixFilter.prototype, "matrix", {
            get: function() {
                return this.uniforms.matrix.value
            },
            set: function(e) {
                this.uniforms.matrix.value = e
            }
        }), e.GrayFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                gray: {
                    type: "1f",
                    value: 1
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "uniform float gray;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord);", "   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);", "}"]
        }, e.GrayFilter.prototype = Object.create(e.AbstractFilter.prototype), e.GrayFilter.prototype.constructor = e.GrayFilter, Object.defineProperty(e.GrayFilter.prototype, "gray", {
            get: function() {
                return this.uniforms.gray.value
            },
            set: function(e) {
                this.uniforms.gray.value = e
            }
        }), e.DisplacementFilter = function(t) {
            e.AbstractFilter.call(this), this.passes = [this], t.baseTexture._powerOf2 = !0, this.uniforms = {
                displacementMap: {
                    type: "sampler2D",
                    value: t
                },
                scale: {
                    type: "2f",
                    value: {
                        x: 30,
                        y: 30
                    }
                },
                offset: {
                    type: "2f",
                    value: {
                        x: 0,
                        y: 0
                    }
                },
                mapDimensions: {
                    type: "2f",
                    value: {
                        x: 1,
                        y: 5112
                    }
                },
                dimensions: {
                    type: "4fv",
                    value: [0, 0, 0, 0]
                }
            }, t.baseTexture.hasLoaded ? (this.uniforms.mapDimensions.value.x = t.width, this.uniforms.mapDimensions.value.y = t.height) : (this.boundLoadedFunction = this.onTextureLoaded.bind(this), t.baseTexture.on("loaded", this.boundLoadedFunction)), this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D displacementMap;", "uniform sampler2D uSampler;", "uniform vec2 scale;", "uniform vec2 offset;", "uniform vec4 dimensions;", "uniform vec2 mapDimensions;", "void main(void) {", "   vec2 mapCords = vTextureCoord.xy;", "   mapCords += (dimensions.zw + offset)/ dimensions.xy ;", "   mapCords.y *= -1.0;", "   mapCords.y += 1.0;", "   vec2 matSample = texture2D(displacementMap, mapCords).xy;", "   matSample -= 0.5;", "   matSample *= scale;", "   matSample /= mapDimensions;", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));", "   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);", "   vec2 cord = vTextureCoord;", "}"]
        }, e.DisplacementFilter.prototype = Object.create(e.AbstractFilter.prototype), e.DisplacementFilter.prototype.constructor = e.DisplacementFilter, e.DisplacementFilter.prototype.onTextureLoaded = function() {
            this.uniforms.mapDimensions.value.x = this.uniforms.displacementMap.value.width, this.uniforms.mapDimensions.value.y = this.uniforms.displacementMap.value.height, this.uniforms.displacementMap.value.baseTexture.off("loaded", this.boundLoadedFunction)
        }, Object.defineProperty(e.DisplacementFilter.prototype, "map", {
            get: function() {
                return this.uniforms.displacementMap.value
            },
            set: function(e) {
                this.uniforms.displacementMap.value = e
            }
        }), Object.defineProperty(e.DisplacementFilter.prototype, "scale", {
            get: function() {
                return this.uniforms.scale.value
            },
            set: function(e) {
                this.uniforms.scale.value = e
            }
        }), Object.defineProperty(e.DisplacementFilter.prototype, "offset", {
            get: function() {
                return this.uniforms.offset.value
            },
            set: function(e) {
                this.uniforms.offset.value = e
            }
        }), e.PixelateFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                invert: {
                    type: "1f",
                    value: 0
                },
                dimensions: {
                    type: "4fv",
                    value: new Float32Array([1e4, 100, 10, 10])
                },
                pixelSize: {
                    type: "2f",
                    value: {
                        x: 10,
                        y: 10
                    }
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec2 testDim;", "uniform vec4 dimensions;", "uniform vec2 pixelSize;", "uniform sampler2D uSampler;", "void main(void) {", "   vec2 coord = vTextureCoord;", "   vec2 size = dimensions.xy/pixelSize;", "   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;", "   gl_FragColor = texture2D(uSampler, color);", "}"]
        }, e.PixelateFilter.prototype = Object.create(e.AbstractFilter.prototype), e.PixelateFilter.prototype.constructor = e.PixelateFilter, Object.defineProperty(e.PixelateFilter.prototype, "size", {
            get: function() {
                return this.uniforms.pixelSize.value
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.pixelSize.value = e
            }
        }), e.BlurXFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                blur: {
                    type: "1f",
                    value: 1 / 512
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float blur;", "uniform sampler2D uSampler;", "void main(void) {", "   vec4 sum = vec4(0.0);", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;", "   gl_FragColor = sum;", "}"]
        }, e.BlurXFilter.prototype = Object.create(e.AbstractFilter.prototype), e.BlurXFilter.prototype.constructor = e.BlurXFilter, Object.defineProperty(e.BlurXFilter.prototype, "blur", {
            get: function() {
                return this.uniforms.blur.value / (1 / 7e3)
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.blur.value = 1 / 7e3 * e
            }
        }), e.BlurYFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                blur: {
                    type: "1f",
                    value: 1 / 512
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float blur;", "uniform sampler2D uSampler;", "void main(void) {", "   vec4 sum = vec4(0.0);", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;", "   gl_FragColor = sum;", "}"]
        }, e.BlurYFilter.prototype = Object.create(e.AbstractFilter.prototype), e.BlurYFilter.prototype.constructor = e.BlurYFilter, Object.defineProperty(e.BlurYFilter.prototype, "blur", {
            get: function() {
                return this.uniforms.blur.value / (1 / 7e3)
            },
            set: function(e) {
                this.uniforms.blur.value = 1 / 7e3 * e
            }
        }), e.BlurFilter = function() {
            this.blurXFilter = new e.BlurXFilter, this.blurYFilter = new e.BlurYFilter, this.passes = [this.blurXFilter, this.blurYFilter]
        }, Object.defineProperty(e.BlurFilter.prototype, "blur", {
            get: function() {
                return this.blurXFilter.blur
            },
            set: function(e) {
                this.blurXFilter.blur = this.blurYFilter.blur = e
            }
        }), Object.defineProperty(e.BlurFilter.prototype, "blurX", {
            get: function() {
                return this.blurXFilter.blur
            },
            set: function(e) {
                this.blurXFilter.blur = e
            }
        }), Object.defineProperty(e.BlurFilter.prototype, "blurY", {
            get: function() {
                return this.blurYFilter.blur
            },
            set: function(e) {
                this.blurYFilter.blur = e
            }
        }), e.InvertFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                invert: {
                    type: "1f",
                    value: 1
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float invert;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord);", "   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);", "}"]
        }, e.InvertFilter.prototype = Object.create(e.AbstractFilter.prototype), e.InvertFilter.prototype.constructor = e.InvertFilter, Object.defineProperty(e.InvertFilter.prototype, "invert", {
            get: function() {
                return this.uniforms.invert.value
            },
            set: function(e) {
                this.uniforms.invert.value = e
            }
        }), e.SepiaFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                sepia: {
                    type: "1f",
                    value: 1
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float sepia;", "uniform sampler2D uSampler;", "const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord);", "   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);", "}"]
        }, e.SepiaFilter.prototype = Object.create(e.AbstractFilter.prototype), e.SepiaFilter.prototype.constructor = e.SepiaFilter, Object.defineProperty(e.SepiaFilter.prototype, "sepia", {
            get: function() {
                return this.uniforms.sepia.value
            },
            set: function(e) {
                this.uniforms.sepia.value = e
            }
        }), e.TwistFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                radius: {
                    type: "1f",
                    value: .5
                },
                angle: {
                    type: "1f",
                    value: 5
                },
                offset: {
                    type: "2f",
                    value: {
                        x: .5,
                        y: .5
                    }
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec4 dimensions;", "uniform sampler2D uSampler;", "uniform float radius;", "uniform float angle;", "uniform vec2 offset;", "void main(void) {", "   vec2 coord = vTextureCoord - offset;", "   float distance = length(coord);", "   if (distance < radius) {", "       float ratio = (radius - distance) / radius;", "       float angleMod = ratio * ratio * angle;", "       float s = sin(angleMod);", "       float c = cos(angleMod);", "       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);", "   }", "   gl_FragColor = texture2D(uSampler, coord+offset);", "}"]
        }, e.TwistFilter.prototype = Object.create(e.AbstractFilter.prototype), e.TwistFilter.prototype.constructor = e.TwistFilter, Object.defineProperty(e.TwistFilter.prototype, "offset", {
            get: function() {
                return this.uniforms.offset.value
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.offset.value = e
            }
        }), Object.defineProperty(e.TwistFilter.prototype, "radius", {
            get: function() {
                return this.uniforms.radius.value
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.radius.value = e
            }
        }), Object.defineProperty(e.TwistFilter.prototype, "angle", {
            get: function() {
                return this.uniforms.angle.value
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.angle.value = e
            }
        }), e.ColorStepFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                step: {
                    type: "1f",
                    value: 5
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "uniform float step;", "void main(void) {", "   vec4 color = texture2D(uSampler, vTextureCoord);", "   color = floor(color * step) / step;", "   gl_FragColor = color;", "}"]
        }, e.ColorStepFilter.prototype = Object.create(e.AbstractFilter.prototype), e.ColorStepFilter.prototype.constructor = e.ColorStepFilter, Object.defineProperty(e.ColorStepFilter.prototype, "step", {
            get: function() {
                return this.uniforms.step.value
            },
            set: function(e) {
                this.uniforms.step.value = e
            }
        }), e.DotScreenFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                scale: {
                    type: "1f",
                    value: 1
                },
                angle: {
                    type: "1f",
                    value: 5
                },
                dimensions: {
                    type: "4fv",
                    value: [0, 0, 0, 0]
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec4 dimensions;", "uniform sampler2D uSampler;", "uniform float angle;", "uniform float scale;", "float pattern() {", "   float s = sin(angle), c = cos(angle);", "   vec2 tex = vTextureCoord * dimensions.xy;", "   vec2 point = vec2(", "       c * tex.x - s * tex.y,", "       s * tex.x + c * tex.y", "   ) * scale;", "   return (sin(point.x) * sin(point.y)) * 4.0;", "}", "void main() {", "   vec4 color = texture2D(uSampler, vTextureCoord);", "   float average = (color.r + color.g + color.b) / 3.0;", "   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);", "}"]
        }, e.DotScreenFilter.prototype = Object.create(e.AbstractFilter.prototype), e.DotScreenFilter.prototype.constructor = e.DotScreenFilter, Object.defineProperty(e.DotScreenFilter.prototype, "scale", {
            get: function() {
                return this.uniforms.scale.value
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.scale.value = e
            }
        }), Object.defineProperty(e.DotScreenFilter.prototype, "angle", {
            get: function() {
                return this.uniforms.angle.value
            },
            set: function(e) {
                this.dirty = !0, this.uniforms.angle.value = e
            }
        }), e.CrossHatchFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                blur: {
                    type: "1f",
                    value: 1 / 512
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float blur;", "uniform sampler2D uSampler;", "void main(void) {", "    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);", "    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);", "    if (lum < 1.00) {", "        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "    if (lum < 0.75) {", "        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "    if (lum < 0.50) {", "        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "    if (lum < 0.3) {", "        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "}"]
        }, e.CrossHatchFilter.prototype = Object.create(e.AbstractFilter.prototype), e.CrossHatchFilter.prototype.constructor = e.BlurYFilter, Object.defineProperty(e.CrossHatchFilter.prototype, "blur", {
            get: function() {
                return this.uniforms.blur.value / (1 / 7e3)
            },
            set: function(e) {
                this.uniforms.blur.value = 1 / 7e3 * e
            }
        }), e.RGBSplitFilter = function() {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {
                red: {
                    type: "2f",
                    value: {
                        x: 20,
                        y: 20
                    }
                },
                green: {
                    type: "2f",
                    value: {
                        x: -20,
                        y: 20
                    }
                },
                blue: {
                    type: "2f",
                    value: {
                        x: 20,
                        y: -20
                    }
                },
                dimensions: {
                    type: "4fv",
                    value: [0, 0, 0, 0]
                }
            }, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec2 red;", "uniform vec2 green;", "uniform vec2 blue;", "uniform vec4 dimensions;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;", "   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;", "   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;", "   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;", "}"]
        }, e.RGBSplitFilter.prototype = Object.create(e.AbstractFilter.prototype), e.RGBSplitFilter.prototype.constructor = e.RGBSplitFilter, Object.defineProperty(e.RGBSplitFilter.prototype, "angle", {
            get: function() {
                return this.uniforms.blur.value / (1 / 7e3)
            },
            set: function(e) {
                this.uniforms.blur.value = 1 / 7e3 * e
            }
        }), "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = e), exports.PIXI = e) : "undefined" != typeof define && define.amd ? define(e) : i.PIXI = e
    }.call(this), ! function() {
        for (var i = 0, t = ["ms", "moz", "webkit", "o"], e = 0; e < t.length && !window.requestAnimationFrame; ++e) window.requestAnimationFrame = window[t[e] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[e] + "CancelAnimationFrame"] || window[t[e] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function(r) {
            var e = (new Date).getTime(),
                t = Math.max(0, 16 - (e - i)),
                n = window.setTimeout(function() {
                    r(e + t)
                }, t);
            return i = e + t, n
        }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e) {
            clearTimeout(e)
        })
    }();
    var t = "undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window;
    if ((t._gsQueue || (t._gsQueue = [])).push(function() {
            "use strict";
            t._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(n, u, t) {
                    var c = function(t) {
                            var e, i = [],
                                r = t.length;
                            for (e = 0; e !== r; i.push(t[e++]));
                            return i
                        },
                        e = function(i, r, n) {
                            t.call(this, i, r, n), this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._dirty = !0, this.render = e.prototype.render
                        },
                        r = 1e-10,
                        o = t._internals,
                        p = o.isSelector,
                        l = o.isArray,
                        i = e.prototype = t.to({}, .1, {}),
                        a = [];
                    e.version = "1.13.1", i.constructor = e, i.kill()._gc = !1, e.killTweensOf = e.killDelayedCallsTo = t.killTweensOf, e.getTweensOf = t.getTweensOf, e.lagSmoothing = t.lagSmoothing, e.ticker = t.ticker, e.render = t.render, i.invalidate = function() {
                        return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), t.prototype.invalidate.call(this)
                    }, i.updateTo = function(r, n) {
                        var i, o = this.ratio;
                        n && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
                        for (i in r) this.vars[i] = r[i];
                        if (this._initted)
                            if (n) this._initted = !1;
                            else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && t._onPluginEvent("_onDisable", this), this._time / this._duration > .998) {
                            var s = this._time;
                            this.render(0, !0, !1), this._initted = !1, this.render(s, !0, !1)
                        } else if (this._time > 0) {
                            this._initted = !1, this._init();
                            for (var a, l = 1 / (1 - o), e = this._firstPT; e;) a = e.s + e.c, e.c *= l, e.s = a - e.c, e = e._next
                        }
                        return this
                    }, i.render = function(t, c, s) {
                        this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
                        var u, h, n, f, e, d, p, m, y = this._dirty ? this.totalDuration() : this._totalDuration,
                            g = this._time,
                            _ = this._totalTime,
                            v = this._cycle,
                            i = this._duration,
                            l = this._rawPrevTime;
                        if (t >= y ? (this._totalTime = y, this._cycle = this._repeat, this._yoyo && 0 !== (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = i, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), this._reversed || (u = !0, h = "onComplete"), 0 === i && (this._initted || !this.vars.lazy || s) && (this._startTime === this._timeline._duration && (t = 0), (0 === t || 0 > l || l === r) && l !== t && (s = !0, l > r && (h = "onReverseComplete")), this._rawPrevTime = m = !c || t || l === t ? t : r)) : 1e-7 > t ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== _ || 0 === i && l > 0 && l !== r) && (h = "onReverseComplete", u = this._reversed), 0 > t ? (this._active = !1, 0 === i && (this._initted || !this.vars.lazy || s) && (l >= 0 && (s = !0), this._rawPrevTime = m = !c || t || l === t ? t : r)) : this._initted || (s = !0)) : (this._totalTime = this._time = t, 0 !== this._repeat && (f = i + this._repeatDelay, this._cycle = this._totalTime / f >> 0, 0 !== this._cycle && this._cycle === this._totalTime / f && this._cycle--, this._time = this._totalTime - this._cycle * f, this._yoyo && 0 !== (1 & this._cycle) && (this._time = i - this._time), this._time > i ? this._time = i : 0 > this._time && (this._time = 0)), this._easeType ? (e = this._time / i, d = this._easeType, p = this._easePower, (1 === d || 3 === d && e >= .5) && (e = 1 - e), 3 === d && (e *= 2), 1 === p ? e *= e : 2 === p ? e *= e * e : 3 === p ? e *= e * e * e : 4 === p && (e *= e * e * e * e), this.ratio = 1 === d ? 1 - e : 2 === d ? e : .5 > this._time / i ? e / 2 : 1 - e / 2) : this.ratio = this._ease.getRatio(this._time / i)), g === this._time && !s && v === this._cycle) return void(_ !== this._totalTime && this._onUpdate && (c || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || a)));
                        if (!this._initted) {
                            if (this._init(), !this._initted || this._gc) return;
                            if (!s && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = g, this._totalTime = _, this._rawPrevTime = l, this._cycle = v, o.lazyTweens.push(this), void(this._lazy = t);
                            this._time && !u ? this.ratio = this._ease.getRatio(this._time / i) : u && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                        }
                        for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== g && t >= 0 && (this._active = !0), 0 === _ && (2 === this._initted && t > 0 && this._init(), this._startAt && (t >= 0 ? this._startAt.render(t, c, s) : h || (h = "_dummyGS")), this.vars.onStart && (0 !== this._totalTime || 0 === i) && (c || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || a))), n = this._firstPT; n;) n.f ? n.t[n.p](n.c * this.ratio + n.s) : n.t[n.p] = n.c * this.ratio + n.s, n = n._next;
                        this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, c, s), c || (this._totalTime !== _ || u) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || a)), this._cycle !== v && (c || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || a)), h && (!this._gc || s) && (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, c, s), u && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !c && this.vars[h] && this.vars[h].apply(this.vars[h + "Scope"] || this, this.vars[h + "Params"] || a), 0 === i && this._rawPrevTime === r && m !== r && (this._rawPrevTime = 0))
                    }, e.to = function(t, i, r) {
                        return new e(t, i, r)
                    }, e.from = function(i, r, t) {
                        return t.runBackwards = !0, t.immediateRender = 0 != t.immediateRender, new e(i, r, t)
                    }, e.fromTo = function(r, n, i, t) {
                        return t.startAt = i, t.immediateRender = 0 != t.immediateRender && 0 != i.immediateRender, new e(r, n, t)
                    }, e.staggerTo = e.allTo = function(i, m, r, u, d, v, g) {
                        u = u || 0;
                        var h, o, n, s, _ = r.delay || 0,
                            f = [],
                            y = function() {
                                r.onComplete && r.onComplete.apply(r.onCompleteScope || this, arguments), d.apply(g || this, v || a)
                            };
                        for (l(i) || ("string" == typeof i && (i = t.selector(i) || i), p(i) && (i = c(i))), h = i.length, n = 0; h > n; n++) {
                            o = {};
                            for (s in r) o[s] = r[s];
                            o.delay = _, n === h - 1 && d && (o.onComplete = y), f[n] = new e(i[n], m, o), _ += u
                        }
                        return f
                    }, e.staggerFrom = e.allFrom = function(i, r, t, n, a, o, s) {
                        return t.runBackwards = !0, t.immediateRender = 0 != t.immediateRender, e.staggerTo(i, r, t, n, a, o, s)
                    }, e.staggerFromTo = e.allFromTo = function(r, n, i, t, a, o, s, l) {
                        return t.startAt = i, t.immediateRender = 0 != t.immediateRender && 0 != i.immediateRender, e.staggerTo(r, n, t, a, o, s, l)
                    }, e.delayedCall = function(n, t, i, r, a) {
                        return new e(t, 0, {
                            delay: n,
                            onComplete: t,
                            onCompleteParams: i,
                            onCompleteScope: r,
                            onReverseComplete: t,
                            onReverseCompleteParams: i,
                            onReverseCompleteScope: r,
                            immediateRender: !1,
                            useFrames: a,
                            overwrite: 0
                        })
                    }, e.set = function(t, i) {
                        return new e(t, 0, i)
                    }, e.isTweening = function(e) {
                        return t.getTweensOf(e, !0).length > 0
                    };
                    var s = function(a, n) {
                            for (var i = [], r = 0, e = a._first; e;) e instanceof t ? i[r++] = e : (n && (i[r++] = e), i = i.concat(s(e, n)), r = i.length), e = e._next;
                            return i
                        },
                        d = e.getAllTweens = function(e) {
                            return s(n._rootTimeline, e).concat(s(n._rootFramesTimeline, e))
                        };
                    e.killAll = function(s, t, i, n) {
                        null == t && (t = !0), null == i && (i = !0);
                        var a, e, r, o = d(0 != n),
                            l = o.length,
                            c = t && i && n;
                        for (r = 0; l > r; r++) e = o[r], (c || e instanceof u || (a = e.target === e.vars.onComplete) && i || t && !a) && (s ? e.totalTime(e._reversed ? 0 : e.totalDuration()) : e._enabled(!1, !1))
                    }, e.killChildTweensOf = function(i, u) {
                        if (null != i) {
                            var n, a, s, r, d, h = o.tweenLookup;
                            if ("string" == typeof i && (i = t.selector(i) || i), p(i) && (i = c(i)), l(i))
                                for (r = i.length; --r > -1;) e.killChildTweensOf(i[r], u);
                            else {
                                n = [];
                                for (s in h)
                                    for (a = h[s].target.parentNode; a;) a === i && (n = n.concat(h[s].tweens)), a = a.parentNode;
                                for (d = n.length, r = 0; d > r; r++) u && n[r].totalTime(n[r].totalDuration()), n[r]._enabled(!1, !1)
                            }
                        }
                    };
                    var h = function(s, t, i, r) {
                        t = t !== !1, i = i !== !1, r = r !== !1;
                        for (var n, e, a = d(r), l = t && i && r, o = a.length; --o > -1;) e = a[o], (l || e instanceof u || (n = e.target === e.vars.onComplete) && i || t && !n) && e.paused(s)
                    };
                    return e.pauseAll = function(e, t, i) {
                        h(!0, e, t, i)
                    }, e.resumeAll = function(e, t, i) {
                        h(!1, e, t, i)
                    }, e.globalTimeScale = function(i) {
                        var e = n._rootTimeline,
                            a = t.ticker.time;
                        return arguments.length ? (i = i || r, e._startTime = a - (a - e._startTime) * e._timeScale / i, e = n._rootFramesTimeline, a = t.ticker.frame, e._startTime = a - (a - e._startTime) * e._timeScale / i, e._timeScale = n._rootTimeline._timeScale = i, i) : e._timeScale
                    }, i.progress = function(e) {
                        return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - e : e) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                    }, i.totalProgress = function(e) {
                        return arguments.length ? this.totalTime(this.totalDuration() * e, !1) : this._totalTime / this.totalDuration()
                    }, i.time = function(e, t) {
                        return arguments.length ? (this._dirty && this.totalDuration(), e > this._duration && (e = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? e = this._duration - e + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (e += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(e, t)) : this._time
                    }, i.duration = function(e) {
                        return arguments.length ? n.prototype.duration.call(this, e) : this._duration
                    }, i.totalDuration = function(e) {
                        return arguments.length ? -1 === this._repeat ? this : this.duration((e - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration)
                    }, i.repeat = function(e) {
                        return arguments.length ? (this._repeat = e, this._uncache(!0)) : this._repeat
                    }, i.repeatDelay = function(e) {
                        return arguments.length ? (this._repeatDelay = e, this._uncache(!0)) : this._repeatDelay
                    }, i.yoyo = function(e) {
                        return arguments.length ? (this._yoyo = e, this) : this._yoyo
                    }, e
                }, !0), t._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(s, o, i) {
                    var r = function(r) {
                            o.call(this, r), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                            var t, i, e = this.vars;
                            for (i in e) t = e[i], n(t) && -1 !== t.join("").indexOf("{self}") && (e[i] = this._swapSelfInParams(t));
                            n(e.tweens) && this.add(e.tweens, 0, e.align, e.stagger)
                        },
                        a = 1e-10,
                        l = i._internals,
                        _ = l.isSelector,
                        n = l.isArray,
                        p = l.lazyTweens,
                        u = l.lazyRender,
                        c = [],
                        h = t._gsDefine.globals,
                        d = function(t) {
                            var e, i = {};
                            for (e in t) i[e] = t[e];
                            return i
                        },
                        f = function(e, t, i, r) {
                            e._timeline.pause(e._startTime), t && t.apply(r || e._timeline, i || c)
                        },
                        m = function(t) {
                            var e, i = [],
                                r = t.length;
                            for (e = 0; e !== r; i.push(t[e++]));
                            return i
                        },
                        e = r.prototype = new o;
                    return r.version = "1.13.1", e.constructor = r, e.kill()._gc = !1, e.to = function(t, r, e, n) {
                        var a = e.repeat && h.TweenMax || i;
                        return r ? this.add(new a(t, r, e), n) : this.set(t, e, n)
                    }, e.from = function(t, r, e, n) {
                        return this.add((e.repeat && h.TweenMax || i).from(t, r, e), n)
                    }, e.fromTo = function(t, r, a, e, n) {
                        var o = e.repeat && h.TweenMax || i;
                        return r ? this.add(o.fromTo(t, r, a, e), n) : this.set(t, e, n)
                    }, e.staggerTo = function(e, s, n, a, l, c, h, u) {
                        var t, o = new r({
                            onComplete: c,
                            onCompleteParams: h,
                            onCompleteScope: u,
                            smoothChildTiming: this.smoothChildTiming
                        });
                        for ("string" == typeof e && (e = i.selector(e) || e), _(e) && (e = m(e)), a = a || 0, t = 0; e.length > t; t++) n.startAt && (n.startAt = d(n.startAt)), o.to(e[t], s, d(n), t * a);
                        return this.add(o, l)
                    }, e.staggerFrom = function(t, i, e, r, n, a, o, s) {
                        return e.immediateRender = 0 != e.immediateRender, e.runBackwards = !0, this.staggerTo(t, i, e, r, n, a, o, s)
                    }, e.staggerFromTo = function(i, r, t, e, n, a, o, s, l) {
                        return e.startAt = t, e.immediateRender = 0 != e.immediateRender && 0 != t.immediateRender, this.staggerTo(i, r, e, n, a, o, s, l)
                    }, e.call = function(e, t, r, n) {
                        return this.add(i.delayedCall(0, e, t, r), n)
                    }, e.set = function(r, t, e) {
                        return e = this._parseTimeOrLabel(e, 0, !0), null == t.immediateRender && (t.immediateRender = e === this._time && !this._paused), this.add(new i(r, 0, t), e)
                    }, r.exportRoot = function(n, o) {
                        n = n || {}, null == n.smoothChildTiming && (n.smoothChildTiming = !0);
                        var e, s, t = new r(n),
                            a = t._timeline;
                        for (null == o && (o = !0), a._remove(t, !0), t._startTime = 0, t._rawPrevTime = t._time = t._totalTime = a._time, e = a._first; e;) s = e._next, o && e instanceof i && e.target === e.vars.onComplete || t.add(e, e._startTime - e._delay), e = s;
                        return a.add(t, 0), t
                    }, e.add = function(e, l, c, d) {
                        var h, p, u, t, a, _;
                        if ("number" != typeof l && (l = this._parseTimeOrLabel(l, 0, !0, e)), !(e instanceof s)) {
                            if (e instanceof Array || e && e.push && n(e)) {
                                for (c = c || "normal", d = d || 0, h = l, p = e.length, u = 0; p > u; u++) n(t = e[u]) && (t = new r({
                                    tweens: t
                                })), this.add(t, h), "string" != typeof t && "function" != typeof t && ("sequence" === c ? h = t._startTime + t.totalDuration() / t._timeScale : "start" === c && (t._startTime -= t.delay())), h += d;
                                return this._uncache(!0)
                            }
                            if ("string" == typeof e) return this.addLabel(e, l);
                            if ("function" != typeof e) throw "Cannot add " + e + " into the timeline; it is not a tween, timeline, function, or string.";
                            e = i.delayedCall(0, e)
                        }
                        if (o.prototype.add.call(this, e, l), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                            for (a = this, _ = a.rawTime() > e._startTime; a._timeline;) _ && a._timeline.smoothChildTiming ? a.totalTime(a._totalTime, !0) : a._gc && a._enabled(!0, !1), a = a._timeline;
                        return this
                    }, e.remove = function(e) {
                        if (e instanceof s) return this._remove(e, !1);
                        if (e instanceof Array || e && e.push && n(e)) {
                            for (var t = e.length; --t > -1;) this.remove(e[t]);
                            return this
                        }
                        return "string" == typeof e ? this.removeLabel(e) : this.kill(null, e)
                    }, e._remove = function(t, i) {
                        o.prototype._remove.call(this, t, i);
                        var e = this._last;
                        return e ? this._time > e._startTime + e._totalDuration / e._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
                    }, e.append = function(e, t) {
                        return this.add(e, this._parseTimeOrLabel(null, t, !0, e))
                    }, e.insert = e.insertMultiple = function(e, t, i, r) {
                        return this.add(e, t || 0, i, r)
                    }, e.appendMultiple = function(e, t, i, r) {
                        return this.add(e, this._parseTimeOrLabel(null, t, !0, e), i, r)
                    }, e.addLabel = function(e, t) {
                        return this._labels[e] = this._parseTimeOrLabel(t), this
                    }, e.addPause = function(e, t, i, r) {
                        return this.call(f, ["{self}", t, i, r], this, e)
                    }, e.removeLabel = function(e) {
                        return delete this._labels[e], this
                    }, e.getLabelTime = function(e) {
                        return null != this._labels[e] ? this._labels[e] : -1
                    }, e._parseTimeOrLabel = function(e, r, a, t) {
                        var i;
                        if (t instanceof s && t.timeline === this) this.remove(t);
                        else if (t && (t instanceof Array || t.push && n(t)))
                            for (i = t.length; --i > -1;) t[i] instanceof s && t[i].timeline === this && this.remove(t[i]);
                        if ("string" == typeof r) return this._parseTimeOrLabel(r, a && "number" == typeof e && null == this._labels[r] ? e - this.duration() : 0, a);
                        if (r = r || 0, "string" != typeof e || !isNaN(e) && null == this._labels[e]) null == e && (e = this.duration());
                        else {
                            if (i = e.indexOf("="), -1 === i) return null == this._labels[e] ? a ? this._labels[e] = this.duration() + r : r : this._labels[e] + r;
                            r = parseInt(e.charAt(i - 1) + "1", 10) * Number(e.substr(i + 1)), e = i > 1 ? this._parseTimeOrLabel(e.substr(0, i - 1), 0, a) : this.duration()
                        }
                        return Number(e) + r
                    }, e.seek = function(e, t) {
                        return this.totalTime("number" == typeof e ? e : this._parseTimeOrLabel(e), t !== !1)
                    }, e.stop = function() {
                        return this.paused(!0)
                    }, e.gotoAndPlay = function(e, t) {
                        return this.play(e, t)
                    }, e.gotoAndStop = function(e, t) {
                        return this.pause(e, t)
                    }, e.render = function(t, i, o) {
                        this._gc && this._enabled(!0, !1);
                        var e, d, s, r, l, h = this._dirty ? this.totalDuration() : this._totalDuration,
                            n = this._time,
                            f = this._startTime,
                            m = this._timeScale,
                            _ = this._paused;
                        if (t >= h ? (this._totalTime = this._time = h, this._reversed || this._hasPausedChild() || (d = !0, r = "onComplete", 0 === this._duration && (0 === t || 0 > this._rawPrevTime || this._rawPrevTime === a) && this._rawPrevTime !== t && this._first && (l = !0, this._rawPrevTime > a && (r = "onReverseComplete"))), this._rawPrevTime = this._duration || !i || t || this._rawPrevTime === t ? t : a, t = h + 1e-4) : 1e-7 > t ? (this._totalTime = this._time = 0, (0 !== n || 0 === this._duration && this._rawPrevTime !== a && (this._rawPrevTime > 0 || 0 > t && this._rawPrevTime >= 0)) && (r = "onReverseComplete", d = this._reversed), 0 > t ? (this._active = !1, this._rawPrevTime >= 0 && this._first && (l = !0), this._rawPrevTime = t) : (this._rawPrevTime = this._duration || !i || t || this._rawPrevTime === t ? t : a, t = 0, this._initted || (l = !0))) : this._totalTime = this._time = this._rawPrevTime = t, this._time !== n && this._first || o || l) {
                            if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== n && t > 0 && (this._active = !0), 0 === n && this.vars.onStart && 0 !== this._time && (i || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || c)), this._time >= n)
                                for (e = this._first; e && (s = e._next, !this._paused || _);)(e._active || e._startTime <= this._time && !e._paused && !e._gc) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (t - e._startTime) * e._timeScale, i, o) : e.render((t - e._startTime) * e._timeScale, i, o)), e = s;
                            else
                                for (e = this._last; e && (s = e._prev, !this._paused || _);)(e._active || n >= e._startTime && !e._paused && !e._gc) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (t - e._startTime) * e._timeScale, i, o) : e.render((t - e._startTime) * e._timeScale, i, o)), e = s;
                            this._onUpdate && (i || (p.length && u(), this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || c))), r && (this._gc || (f === this._startTime || m !== this._timeScale) && (0 === this._time || h >= this.totalDuration()) && (d && (p.length && u(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !i && this.vars[r] && this.vars[r].apply(this.vars[r + "Scope"] || this, this.vars[r + "Params"] || c)))
                        }
                    }, e._hasPausedChild = function() {
                        for (var e = this._first; e;) {
                            if (e._paused || e instanceof r && e._hasPausedChild()) return !0;
                            e = e._next
                        }
                        return !1
                    }, e.getChildren = function(s, a, o, r) {
                        r = r || -9999999999;
                        for (var t = [], e = this._first, n = 0; e;) r > e._startTime || (e instanceof i ? a !== !1 && (t[n++] = e) : (o !== !1 && (t[n++] = e), s !== !1 && (t = t.concat(e.getChildren(!0, a, o)), n = t.length))), e = e._next;
                        return t
                    }, e.getTweensOf = function(a, o) {
                        var e, t, r = this._gc,
                            n = [],
                            s = 0;
                        for (r && this._enabled(!0, !0), e = i.getTweensOf(a), t = e.length; --t > -1;)(e[t].timeline === this || o && this._contains(e[t])) && (n[s++] = e[t]);
                        return r && this._enabled(!1, !0), n
                    }, e._contains = function(t) {
                        for (var e = t.timeline; e;) {
                            if (e === this) return !0;
                            e = e.timeline
                        }
                        return !1
                    }, e.shiftChildren = function(n, a, t) {
                        t = t || 0;
                        for (var i, e = this._first, r = this._labels; e;) e._startTime >= t && (e._startTime += n), e = e._next;
                        if (a)
                            for (i in r) r[i] >= t && (r[i] += n);
                        return this._uncache(!0)
                    }, e._kill = function(t, e) {
                        if (!t && !e) return this._enabled(!1, !1);
                        for (var i = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), r = i.length, n = !1; --r > -1;) i[r]._kill(t, e) && (n = !0);
                        return n
                    }, e.clear = function(i) {
                        var e = this.getChildren(!1, !0, !0),
                            t = e.length;
                        for (this._time = this._totalTime = 0; --t > -1;) e[t]._enabled(!1, !1);
                        return i !== !1 && (this._labels = {}), this._uncache(!0)
                    }, e.invalidate = function() {
                        for (var e = this._first; e;) e.invalidate(), e = e._next;
                        return this
                    }, e._enabled = function(t, i) {
                        if (t === this._gc)
                            for (var e = this._first; e;) e._enabled(t, !0), e = e._next;
                        return o.prototype._enabled.call(this, t, i)
                    }, e.duration = function(e) {
                        return arguments.length ? (0 !== this.duration() && 0 !== e && this.timeScale(this._duration / e), this) : (this._dirty && this.totalDuration(), this._duration)
                    }, e.totalDuration = function(n) {
                        if (!arguments.length) {
                            if (this._dirty) {
                                for (var a, i, t = 0, e = this._last, r = 999999999999; e;) a = e._prev, e._dirty && e.totalDuration(), e._startTime > r && this._sortChildren && !e._paused ? this.add(e, e._startTime - e._delay) : r = e._startTime, 0 > e._startTime && !e._paused && (t -= e._startTime, this._timeline.smoothChildTiming && (this._startTime += e._startTime / this._timeScale), this.shiftChildren(-e._startTime, !1, -9999999999), r = 0), i = e._startTime + e._totalDuration / e._timeScale, i > t && (t = i), e = a;
                                this._duration = this._totalDuration = t, this._dirty = !1
                            }
                            return this._totalDuration
                        }
                        return 0 !== this.totalDuration() && 0 !== n && this.timeScale(this._totalDuration / n), this
                    }, e.usesFrames = function() {
                        for (var e = this._timeline; e._timeline;) e = e._timeline;
                        return e === s._rootFramesTimeline
                    }, e.rawTime = function() {
                        return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
                    }, r
                }, !0), t._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(n, a, c) {
                    var r = function(e) {
                            n.call(this, e), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._dirty = !0
                        },
                        i = 1e-10,
                        t = [],
                        o = a._internals,
                        s = o.lazyTweens,
                        l = o.lazyRender,
                        h = new c(null, null, 1, 0),
                        e = r.prototype = new n;
                    return e.constructor = r, e.kill()._gc = !1, r.version = "1.13.1", e.invalidate = function() {
                        return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), n.prototype.invalidate.call(this)
                    }, e.addCallback = function(e, t, i, r) {
                        return this.add(a.delayedCall(0, e, i, r), t)
                    }, e.removeCallback = function(e, r) {
                        if (e)
                            if (null == r) this._kill(null, e);
                            else
                                for (var t = this.getTweensOf(e, !1), i = t.length, n = this._parseTimeOrLabel(r); --i > -1;) t[i]._startTime === n && t[i]._enabled(!1, !1);
                        return this
                    }, e.tweenTo = function(s, i) {
                        i = i || {};
                        var n, o, e, r = {
                            ease: h,
                            overwrite: i.delay ? 2 : 1,
                            useFrames: this.usesFrames(),
                            immediateRender: !1
                        };
                        for (o in i) r[o] = i[o];
                        return r.time = this._parseTimeOrLabel(s), n = Math.abs(Number(r.time) - this._time) / this._timeScale || .001, e = new a(this, n, r), r.onStart = function() {
                            e.target.paused(!0), e.vars.time !== e.target.time() && n === e.duration() && e.duration(Math.abs(e.vars.time - e.target.time()) / e.target._timeScale), i.onStart && i.onStart.apply(i.onStartScope || e, i.onStartParams || t)
                        }, e
                    }, e.tweenFromTo = function(t, r, e) {
                        e = e || {}, t = this._parseTimeOrLabel(t), e.startAt = {
                            onComplete: this.seek,
                            onCompleteParams: [t],
                            onCompleteScope: this
                        }, e.immediateRender = e.immediateRender !== !1;
                        var i = this.tweenTo(r, e);
                        return i.duration(Math.abs(i.vars.time - t) / this._timeScale || .001)
                    }, e.render = function(r, a, d) {
                        this._gc && this._enabled(!0, !1);
                        var e, v, f, h, u, m, y = this._dirty ? this.totalDuration() : this._totalDuration,
                            n = this._duration,
                            c = this._time,
                            g = this._totalTime,
                            w = this._startTime,
                            x = this._timeScale,
                            o = this._rawPrevTime,
                            b = this._paused,
                            _ = this._cycle;
                        if (r >= y ? (this._locked || (this._totalTime = y, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (v = !0, h = "onComplete", 0 === this._duration && (0 === r || 0 > o || o === i) && o !== r && this._first && (u = !0, o > i && (h = "onReverseComplete"))), this._rawPrevTime = this._duration || !a || r || this._rawPrevTime === r ? r : i, this._yoyo && 0 !== (1 & this._cycle) ? this._time = r = 0 : (this._time = n, r = n + 1e-4)) : 1e-7 > r ? (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== c || 0 === n && o !== i && (o > 0 || 0 > r && o >= 0) && !this._locked) && (h = "onReverseComplete", v = this._reversed), 0 > r ? (this._active = !1, o >= 0 && this._first && (u = !0), this._rawPrevTime = r) : (this._rawPrevTime = n || !a || r || this._rawPrevTime === r ? r : i, r = 0, this._initted || (u = !0))) : (0 === n && 0 > o && (u = !0), this._time = this._rawPrevTime = r, this._locked || (this._totalTime = r, 0 !== this._repeat && (m = n + this._repeatDelay, this._cycle = this._totalTime / m >> 0, 0 !== this._cycle && this._cycle === this._totalTime / m && this._cycle--, this._time = this._totalTime - this._cycle * m, this._yoyo && 0 !== (1 & this._cycle) && (this._time = n - this._time), this._time > n ? (this._time = n, r = n + 1e-4) : 0 > this._time ? this._time = r = 0 : r = this._time))), this._cycle !== _ && !this._locked) {
                            var p = this._yoyo && 0 !== (1 & _),
                                T = p === (this._yoyo && 0 !== (1 & this._cycle)),
                                C = this._totalTime,
                                S = this._cycle,
                                E = this._rawPrevTime,
                                A = this._time;
                            if (this._totalTime = _ * n, _ > this._cycle ? p = !p : this._totalTime += n, this._time = c, this._rawPrevTime = 0 === n ? o - 1e-4 : o, this._cycle = _, this._locked = !0, c = p ? 0 : n, this.render(c, a, 0 === n), a || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || t), T && (c = p ? n + 1e-4 : -1e-4, this.render(c, !0, !1)), this._locked = !1, this._paused && !b) return;
                            this._time = A, this._totalTime = C, this._cycle = S, this._rawPrevTime = E
                        }
                        if (!(this._time !== c && this._first || d || u)) return void(g !== this._totalTime && this._onUpdate && (a || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || t)));
                        if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== g && r > 0 && (this._active = !0), 0 === g && this.vars.onStart && 0 !== this._totalTime && (a || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || t)), this._time >= c)
                            for (e = this._first; e && (f = e._next, !this._paused || b);)(e._active || e._startTime <= this._time && !e._paused && !e._gc) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (r - e._startTime) * e._timeScale, a, d) : e.render((r - e._startTime) * e._timeScale, a, d)), e = f;
                        else
                            for (e = this._last; e && (f = e._prev, !this._paused || b);)(e._active || c >= e._startTime && !e._paused && !e._gc) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (r - e._startTime) * e._timeScale, a, d) : e.render((r - e._startTime) * e._timeScale, a, d)), e = f;
                        this._onUpdate && (a || (s.length && l(), this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || t))), h && (this._locked || this._gc || (w === this._startTime || x !== this._timeScale) && (0 === this._time || y >= this.totalDuration()) && (v && (s.length && l(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !a && this.vars[h] && this.vars[h].apply(this.vars[h + "Scope"] || this, this.vars[h + "Params"] || t)))
                    }, e.getActive = function(t, i, r) {
                        null == t && (t = !0), null == i && (i = !0), null == r && (r = !1);
                        var e, n, a = [],
                            o = this.getChildren(t, i, r),
                            s = 0,
                            l = o.length;
                        for (e = 0; l > e; e++) n = o[e], n.isActive() && (a[s++] = n);
                        return a
                    }, e.getLabelAfter = function(t) {
                        t || 0 !== t && (t = this._time);
                        var e, i = this.getLabelsArray(),
                            r = i.length;
                        for (e = 0; r > e; e++)
                            if (i[e].time > t) return i[e].name;
                        return null
                    }, e.getLabelBefore = function(e) {
                        null == e && (e = this._time);
                        for (var t = this.getLabelsArray(), i = t.length; --i > -1;)
                            if (e > t[i].time) return t[i].name;
                        return null
                    }, e.getLabelsArray = function() {
                        var e, t = [],
                            i = 0;
                        for (e in this._labels) t[i++] = {
                            time: this._labels[e],
                            name: e
                        };
                        return t.sort(function(e, t) {
                            return e.time - t.time
                        }), t
                    }, e.progress = function(e) {
                        return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - e : e) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                    }, e.totalProgress = function(e) {
                        return arguments.length ? this.totalTime(this.totalDuration() * e, !1) : this._totalTime / this.totalDuration()
                    }, e.totalDuration = function(e) {
                        return arguments.length ? -1 === this._repeat ? this : this.duration((e - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (n.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
                    }, e.time = function(e, t) {
                        return arguments.length ? (this._dirty && this.totalDuration(), e > this._duration && (e = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? e = this._duration - e + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (e += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(e, t)) : this._time
                    }, e.repeat = function(e) {
                        return arguments.length ? (this._repeat = e, this._uncache(!0)) : this._repeat
                    }, e.repeatDelay = function(e) {
                        return arguments.length ? (this._repeatDelay = e, this._uncache(!0)) : this._repeatDelay
                    }, e.yoyo = function(e) {
                        return arguments.length ? (this._yoyo = e, this) : this._yoyo
                    }, e.currentLabel = function(e) {
                        return arguments.length ? this.seek(e, !0) : this.getLabelBefore(this._time + 1e-8)
                    }, r
                }, !0),
                function() {
                    var u = 180 / Math.PI,
                        e = [],
                        i = [],
                        r = [],
                        o = {},
                        a = function(e, t, i, r) {
                            this.a = e, this.b = t, this.c = i, this.d = r, this.da = r - e, this.ca = i - e, this.ba = t - e
                        },
                        f = ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",
                        s = function(n, u, d, o) {
                            var r = {
                                    a: n
                                },
                                e = {},
                                t = {},
                                i = {
                                    c: o
                                },
                                l = (n + u) / 2,
                                h = (u + d) / 2,
                                c = (d + o) / 2,
                                s = (l + h) / 2,
                                a = (h + c) / 2,
                                p = (a - s) / 8;
                            return r.b = l + (n - l) / 4, e.b = s + p, r.c = e.a = (r.b + e.b) / 2, e.c = t.a = (s + a) / 2, t.b = a - p, i.b = c + (o - c) / 4, t.c = i.a = (t.b + i.b) / 2, [r, e, t, i]
                        },
                        m = function(u, f, w, x, T) {
                            var c, h, n, y, t, d, p, g, b, o, _, m, v, C = u.length - 1,
                                l = 0,
                                a = u[0].a;
                            for (c = 0; C > c; c++) t = u[l], h = t.a, n = t.d, y = u[l + 1].d, T ? (_ = e[c], m = i[c], v = .25 * (m + _) * f / (x ? .5 : r[c] || .5), d = n - (n - h) * (x ? .5 * f : 0 !== _ ? v / _ : 0), p = n + (y - n) * (x ? .5 * f : 0 !== m ? v / m : 0), g = n - (d + ((p - d) * (3 * _ / (_ + m) + .5) / 4 || 0))) : (d = n - .5 * (n - h) * f, p = n + .5 * (y - n) * f, g = n - (d + p) / 2), d += g, p += g, t.c = b = d, t.b = 0 !== c ? a : a = t.a + .6 * (t.c - t.a), t.da = n - h, t.ca = b - h, t.ba = a - h, w ? (o = s(h, a, b, n), u.splice(l, 1, o[0], o[1], o[2], o[3]), l += 4) : l++, a = p;
                            t = u[l], t.b = a, t.c = a + .4 * (t.d - a), t.da = t.d - t.a, t.ca = t.c - t.a, t.ba = a - t.a, w && (o = s(t.a, a, t.c, t.d), u.splice(l, 1, o[0], o[1], o[2], o[3]))
                        },
                        h = function(r, n, p, u) {
                            var l, t, c, o, d, h, s = [];
                            if (u)
                                for (r = [u].concat(r), t = r.length; --t > -1;) "string" == typeof(h = r[t][n]) && "=" === h.charAt(1) && (r[t][n] = u[n] + Number(h.charAt(0) + h.substr(2)));
                            if (l = r.length - 2, 0 > l) return s[0] = new a(r[0][n], 0, 0, r[-1 > l ? 0 : 1][n]), s;
                            for (t = 0; l > t; t++) c = r[t][n], o = r[t + 1][n], s[t] = new a(c, 0, 0, o), p && (d = r[t + 2][n], e[t] = (e[t] || 0) + (o - c) * (o - c), i[t] = (i[t] || 0) + (d - o) * (d - o));
                            return s[t] = new a(r[t][n], 0, 0, r[t + 1][n]), s
                        },
                        c = function(a, g, w, x, d, u) {
                            var t, n, c, s, v, y, p, b, _ = {},
                                l = [],
                                T = u || a[0];
                            d = "string" == typeof d ? "," + d + "," : f, null == g && (g = 1);
                            for (n in a[0]) l.push(n);
                            if (a.length > 1) {
                                for (b = a[a.length - 1], p = !0, t = l.length; --t > -1;)
                                    if (n = l[t], Math.abs(T[n] - b[n]) > .05) {
                                        p = !1;
                                        break
                                    }
                                p && (a = a.concat(), u && a.unshift(u), a.push(a[1]), u = a[a.length - 3])
                            }
                            for (e.length = i.length = r.length = 0, t = l.length; --t > -1;) n = l[t], o[n] = -1 !== d.indexOf("," + n + ","), _[n] = h(a, n, o[n], u);
                            for (t = e.length; --t > -1;) e[t] = Math.sqrt(e[t]), i[t] = Math.sqrt(i[t]);
                            if (!x) {
                                for (t = l.length; --t > -1;)
                                    if (o[n])
                                        for (c = _[l[t]], y = c.length - 1, s = 0; y > s; s++) v = c[s + 1].da / i[s] + c[s].da / e[s], r[s] = (r[s] || 0) + v * v;
                                for (t = r.length; --t > -1;) r[t] = Math.sqrt(r[t])
                            }
                            for (t = l.length, s = w ? 4 : 1; --t > -1;) n = l[t], c = _[n], m(c, g, w, x, o[n]), p && (c.splice(0, s), c.splice(c.length - s, s));
                            return _
                        },
                        d = function(r, h, p) {
                            h = h || "soft";
                            var o, u, d, g, t, _, e, c, n, i, s, m = {},
                                l = "cubic" === h ? 3 : 2,
                                v = "soft" === h,
                                f = [];
                            if (v && p && (r = [p].concat(r)), null == r || l + 1 > r.length) throw "invalid Bezier data";
                            for (n in r[0]) f.push(n);
                            for (_ = f.length; --_ > -1;) {
                                for (n = f[_], m[n] = t = [], i = 0, c = r.length, e = 0; c > e; e++) o = null == p ? r[e][n] : "string" == typeof(s = r[e][n]) && "=" === s.charAt(1) ? p[n] + Number(s.charAt(0) + s.substr(2)) : Number(s), v && e > 1 && c - 1 > e && (t[i++] = (o + t[i - 2]) / 2), t[i++] = o;
                                for (c = i - l + 1, i = 0, e = 0; c > e; e += l) o = t[e], u = t[e + 1], d = t[e + 2], g = 2 === l ? 0 : t[e + 3], t[i++] = s = 3 === l ? new a(o, u, d, g) : new a(o, (2 * u + o) / 3, (2 * u + d) / 3, d);
                                t.length = i
                            }
                            return m
                        },
                        p = function(p, d, o) {
                            for (var r, s, n, h, u, _, e, t, l, i, c, f = 1 / o, a = p.length; --a > -1;)
                                for (i = p[a], n = i.a, h = i.d - n, u = i.c - n, _ = i.b - n, r = s = 0, t = 1; o >= t; t++) e = f * t, l = 1 - e, r = s - (s = (e * e * h + 3 * l * (e * u + l * _)) * e), c = a * o + t - 1, d[c] = (d[c] || 0) + r * r
                        },
                        _ = function(u, i) {
                            i = i >> 0 || 6;
                            var c, e, l, t, n = [],
                                s = [],
                                r = 0,
                                o = 0,
                                d = i - 1,
                                h = [],
                                a = [];
                            for (c in u) p(u[c], n, i);
                            for (l = n.length, e = 0; l > e; e++) r += Math.sqrt(n[e]), t = e % i, a[t] = r, t === d && (o += r, t = e / i >> 0, h[t] = a, s[t] = o, r = 0, a = []);
                            return {
                                length: o,
                                lengths: s,
                                segments: h
                            }
                        },
                        n = t._gsDefine.plugin({
                            propName: "bezier",
                            priority: -1,
                            version: "1.3.3",
                            API: 2,
                            global: !0,
                            init: function(r, t, p) {
                                this._target = r, t instanceof Array && (t = {
                                    values: t
                                }), this._func = {}, this._round = {}, this._props = [], this._timeRes = null == t.timeResolution ? 6 : parseInt(t.timeResolution, 10);
                                var e, u, n, a, l, s = t.values || [],
                                    o = {},
                                    f = s[0],
                                    i = t.autoRotate || p.vars.orientToBezier;
                                this._autoRotate = i ? i instanceof Array ? i : [
                                    ["x", "y", "rotation", i === !0 ? 0 : Number(i) || 0]
                                ] : null;
                                for (e in f) this._props.push(e);
                                for (n = this._props.length; --n > -1;) e = this._props[n], this._overwriteProps.push(e), u = this._func[e] = "function" == typeof r[e], o[e] = u ? r[e.indexOf("set") || "function" != typeof r["get" + e.substr(3)] ? e : "get" + e.substr(3)]() : parseFloat(r[e]), l || o[e] !== s[0][e] && (l = o);
                                if (this._beziers = "cubic" !== t.type && "quadratic" !== t.type && "soft" !== t.type ? c(s, isNaN(t.curviness) ? 1 : t.curviness, !1, "thruBasic" === t.type, t.correlate, l) : d(s, t.type, o), this._segCount = this._beziers[e].length, this._timeRes) {
                                    var h = _(this._beziers, this._timeRes);
                                    this._length = h.length, this._lengths = h.lengths, this._segments = h.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length
                                }
                                if (i = this._autoRotate)
                                    for (this._initialRotations = [], i[0] instanceof Array || (this._autoRotate = i = [i]), n = i.length; --n > -1;) {
                                        for (a = 0; 3 > a; a++) e = i[n][a], this._func[e] = "function" == typeof r[e] ? r[e.indexOf("set") || "function" != typeof r["get" + e.substr(3)] ? e : "get" + e.substr(3)] : !1;
                                        e = i[n][2], this._initialRotations[n] = this._func[e] ? this._func[e].call(this._target) : this._target[e]
                                    }
                                return this._startRatio = p.vars.runBackwards ? 1 : 0, !0
                            },
                            set: function(t) {
                                var l, y, e, o, i, r, s, f, d, a, h = this._segCount,
                                    b = this._func,
                                    g = this._target,
                                    T = t !== this._startRatio;
                                if (this._timeRes) {
                                    if (d = this._lengths, a = this._curSeg, t *= this._length, e = this._li, t > this._l2 && h - 1 > e) {
                                        for (f = h - 1; f > e && t >= (this._l2 = d[++e]););
                                        this._l1 = d[e - 1], this._li = e, this._curSeg = a = this._segments[e], this._s2 = a[this._s1 = this._si = 0]
                                    } else if (this._l1 > t && e > 0) {
                                        for (; e > 0 && (this._l1 = d[--e]) >= t;);
                                        0 === e && this._l1 > t ? this._l1 = 0 : e++, this._l2 = d[e], this._li = e, this._curSeg = a = this._segments[e], this._s1 = a[(this._si = a.length - 1) - 1] || 0, this._s2 = a[this._si]
                                    }
                                    if (l = e, t -= this._l1, e = this._si, t > this._s2 && a.length - 1 > e) {
                                        for (f = a.length - 1; f > e && t >= (this._s2 = a[++e]););
                                        this._s1 = a[e - 1], this._si = e
                                    } else if (this._s1 > t && e > 0) {
                                        for (; e > 0 && (this._s1 = a[--e]) >= t;);
                                        0 === e && this._s1 > t ? this._s1 = 0 : e++, this._s2 = a[e], this._si = e
                                    }
                                    r = (e + (t - this._s1) / (this._s2 - this._s1)) * this._prec
                                } else l = 0 > t ? 0 : t >= 1 ? h - 1 : h * t >> 0, r = (t - l * (1 / h)) * h;
                                for (y = 1 - r, e = this._props.length; --e > -1;) o = this._props[e], i = this._beziers[o][l], s = (r * r * i.da + 3 * y * (r * i.ca + y * i.ba)) * r + i.a, this._round[o] && (s = Math.round(s)), b[o] ? g[o](s) : g[o] = s;
                                if (this._autoRotate) {
                                    var n, v, m, _, p, x, w, c = this._autoRotate;
                                    for (e = c.length; --e > -1;) o = c[e][2], x = c[e][3] || 0, w = c[e][4] === !0 ? 1 : u, i = this._beziers[c[e][0]], n = this._beziers[c[e][1]], i && n && (i = i[l], n = n[l], v = i.a + (i.b - i.a) * r, _ = i.b + (i.c - i.b) * r, v += (_ - v) * r, _ += (i.c + (i.d - i.c) * r - _) * r, m = n.a + (n.b - n.a) * r, p = n.b + (n.c - n.b) * r, m += (p - m) * r, p += (n.c + (n.d - n.c) * r - p) * r, s = T ? Math.atan2(p - m, _ - v) * w + x : this._initialRotations[e], b[o] ? g[o](s) : g[o] = s)
                                }
                            }
                        }),
                        l = n.prototype;
                    n.bezierThrough = c, n.cubicToQuadratic = s, n._autoCSS = !0, n.quadraticToCubic = function(e, t, i) {
                        return new a(e, (2 * t + e) / 3, (2 * t + i) / 3, i)
                    }, n._cssRegister = function() {
                        var i = t._gsDefine.globals.CSSPlugin;
                        if (i) {
                            var e = i._internals,
                                r = e._parseToProxy,
                                a = e._setPluginRatio,
                                o = e.CSSPropTween;
                            e._registerComplexSpecialProp("bezier", {
                                parser: function(_, l, m, c, s, h) {
                                    l instanceof Array && (l = {
                                        values: l
                                    }), h = new n;
                                    var t, u, i, p = l.values,
                                        d = p.length - 1,
                                        f = [],
                                        e = {};
                                    if (0 > d) return s;
                                    for (t = 0; d >= t; t++) i = r(_, p[t], c, s, h, d !== t), f[t] = i.end;
                                    for (u in l) e[u] = l[u];
                                    return e.values = f, s = new o(_, "bezier", 0, 0, i.pt, 2), s.data = i, s.plugin = h, s.setRatio = a, 0 === e.autoRotate && (e.autoRotate = !0), !e.autoRotate || e.autoRotate instanceof Array || (t = e.autoRotate === !0 ? 0 : Number(e.autoRotate), e.autoRotate = null != i.end.left ? [
                                        ["left", "top", "rotation", t, !1]
                                    ] : null != i.end.x ? [
                                        ["x", "y", "rotation", t, !1]
                                    ] : !1), e.autoRotate && (c._transform || c._enableTransforms(!1), i.autoRotate = c._target._gsTransform), h._onInitTween(i.proxy, e, c._tween), s
                                }
                            })
                        }
                    }, l._roundProps = function(e, r) {
                        for (var t = this._overwriteProps, i = t.length; --i > -1;)(e[t[i]] || e.bezier || e.bezierThrough) && (this._round[t[i]] = r)
                    }, l._kill = function(r) {
                        var e, t, i = this._props;
                        for (e in this._beziers)
                            if (e in r)
                                for (delete this._beziers[e], delete this._func[e], t = i.length; --t > -1;) i[t] === e && i.splice(t, 1);
                        return this._super._kill.call(this, r)
                    }
                }(), t._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(L, z) {
                    var T, R, n, U, a = function() {
                            L.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = a.prototype.setRatio
                        },
                        _ = {},
                        e = a.prototype = new L("css");
                    e.constructor = a, a.version = "1.13.1", a.API = 2, a.defaultTransformPerspective = 0, a.defaultSkewType = "compensated", e = "px", a.suffixMap = {
                        top: e,
                        right: e,
                        bottom: e,
                        left: e,
                        width: e,
                        height: e,
                        fontSize: e,
                        padding: e,
                        margin: e,
                        perspective: e,
                        lineHeight: ""
                    };
                    var W, gt, X, ft, _t, A, P = /(?:\d|\-\d|\.\d|\-\.\d)+/g,
                        pt = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
                        B = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,
                        F = /[^\d\-\.]/g,
                        K = /(?:\d|\-|\+|=|#|\.)*/g,
                        Q = /opacity *= *([^)]*)/i,
                        St = /opacity:([^;]*)/i,
                        Ct = /alpha\(opacity *=.+?\)/i,
                        st = /^(rgb|hsl)/,
                        lt = /([A-Z])/g,
                        ut = /-([a-z])/gi,
                        wt = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
                        tt = function(t, e) {
                            return e.toUpperCase()
                        },
                        yt = /(?:Left|Right|Width)/i,
                        Lt = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
                        Tt = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,
                        d = /,(?=[^\)]*(?:\(|$))/gi,
                        h = Math.PI / 180,
                        x = 180 / Math.PI,
                        O = {},
                        v = document,
                        m = v.createElement("div"),
                        D = v.createElement("img"),
                        u = a._internals = {
                            _specialProps: _
                        },
                        g = navigator.userAgent,
                        y = function() {
                            var e, t = g.indexOf("Android"),
                                i = v.createElement("div");
                            return X = -1 !== g.indexOf("Safari") && -1 === g.indexOf("Chrome") && (-1 === t || Number(g.substr(t + 8, 1)) > 3), _t = X && 6 > Number(g.substr(g.indexOf("Version/") + 8, 1)), ft = -1 !== g.indexOf("Firefox"), /MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(g) && (A = parseFloat(RegExp.$1)), i.innerHTML = "<a style='top:1px;opacity:.55;'>a</a>", e = i.getElementsByTagName("a")[0], e ? /^0.55/.test(e.style.opacity) : !1
                        }(),
                        nt = function(e) {
                            return Q.test("string" == typeof e ? e : (e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
                        },
                        ct = function(e) {
                            window.console && console.log(e)
                        },
                        dt = "",
                        et = "",
                        M = function(e, i) {
                            i = i || m;
                            var r, t, n = i.style;
                            if (void 0 !== n[e]) return e;
                            for (e = e.charAt(0).toUpperCase() + e.substr(1), r = ["O", "Moz", "ms", "Ms", "Webkit"], t = 5; --t > -1 && void 0 === n[r[t] + e];);
                            return t >= 0 ? (et = 3 === t ? "ms" : r[t], dt = "-" + et.toLowerCase() + "-", et + e) : null
                        },
                        k = v.defaultView ? v.defaultView.getComputedStyle : function() {},
                        r = a.getStyle = function(i, t, r, a, n) {
                            var e;
                            return y || "opacity" !== t ? (!a && i.style[t] ? e = i.style[t] : (r = r || k(i)) ? e = r[t] || r.getPropertyValue(t) || r.getPropertyValue(t.replace(lt, "-$1").toLowerCase()) : i.currentStyle && (e = i.currentStyle[t]), null == n || e && "none" !== e && "auto" !== e && "auto auto" !== e ? e : n) : nt(i)
                        },
                        p = u.convertToPixels = function(s, h, e, t, _) {
                            if ("px" === t || !t) return e;
                            if ("auto" === t || !e) return 0;
                            var o, i, c, l = yt.test(h),
                                n = s,
                                u = m.style,
                                d = 0 > e;
                            if (d && (e = -e), "%" === t && -1 !== h.indexOf("border")) o = e / 100 * (l ? s.clientWidth : s.clientHeight);
                            else {
                                if (u.cssText = "border:0 solid red;position:" + r(s, "position") + ";line-height:0;", "%" !== t && n.appendChild) u[l ? "borderLeftWidth" : "borderTopWidth"] = e + t;
                                else {
                                    if (n = s.parentNode || v.body, i = n._gsCache, c = z.ticker.frame, i && l && i.time === c) return i.width * e / 100;
                                    u[l ? "width" : "height"] = e + t
                                }
                                n.appendChild(m), o = parseFloat(m[l ? "offsetWidth" : "offsetHeight"]), n.removeChild(m), l && "%" === t && a.cacheWidths !== !1 && (i = n._gsCache = n._gsCache || {}, i.time = c, i.width = 100 * (o / e)), 0 !== o || _ || (o = p(s, h, e, t, !0))
                            }
                            return d ? -o : o
                        },
                        ot = u.calculateOffset = function(e, t, i) {
                            if ("absolute" !== r(e, "position", i)) return 0;
                            var n = "left" === t ? "Left" : "Top",
                                a = r(e, "margin" + n, i);
                            return e["offset" + n] - (p(e, t, parseFloat(a), a.replace(K, "")) || 0)
                        },
                        S = function(n, t) {
                            var i, r, e = {};
                            if (t = t || k(n, null))
                                if (i = t.length)
                                    for (; --i > -1;) e[t[i].replace(ut, tt)] = t.getPropertyValue(t[i]);
                                else
                                    for (i in t) e[i] = t[i];
                            else if (t = n.currentStyle || n.style)
                                for (i in t) "string" == typeof i && void 0 === e[i] && (e[i.replace(ut, tt)] = t[i]);
                            return y || (e.opacity = nt(n)), r = C(n, t, !1), e.rotation = r.rotation, e.skewX = r.skewX, e.scaleX = r.scaleX, e.scaleY = r.scaleY, e.x = r.x, e.y = r.y, f && (e.z = r.z, e.rotationX = r.rotationX, e.rotationY = r.rotationY, e.scaleZ = r.scaleZ), e.filters && delete e.filters, e
                        },
                        $ = function(s, i, l, r, c) {
                            var t, e, n, a = {},
                                o = s.style;
                            for (e in l) "cssText" !== e && "length" !== e && isNaN(e) && (i[e] !== (t = l[e]) || c && c[e]) && -1 === e.indexOf("Origin") && ("number" == typeof t || "string" == typeof t) && (a[e] = "auto" !== t || "left" !== e && "top" !== e ? "" !== t && "auto" !== t && "none" !== t || "string" != typeof i[e] || "" === i[e].replace(F, "") ? t : 0 : ot(s, e), void 0 !== o[e] && (n = new Y(o, e, o[e], n)));
                            if (r)
                                for (e in r) "className" !== e && (a[e] = r[e]);
                            return {
                                difs: a,
                                firstMPT: n
                            }
                        },
                        kt = {
                            width: ["Left", "Right"],
                            height: ["Top", "Bottom"]
                        },
                        zt = ["marginLeft", "marginRight", "marginTop", "marginBottom"],
                        At = function(e, o, t) {
                            var i = parseFloat("width" === o ? e.offsetWidth : e.offsetHeight),
                                n = kt[o],
                                a = n.length;
                            for (t = t || k(e, null); --a > -1;) i -= parseFloat(r(e, "padding" + n[a], t, !0)) || 0, i -= parseFloat(r(e, "border" + n[a] + "Width", t, !0)) || 0;
                            return i
                        },
                        Z = function(e, r) {
                            (null == e || "" === e || "auto" === e || "auto auto" === e) && (e = "0 0");
                            var n = e.split(" "),
                                t = -1 !== e.indexOf("left") ? "0%" : -1 !== e.indexOf("right") ? "100%" : n[0],
                                i = -1 !== e.indexOf("top") ? "0%" : -1 !== e.indexOf("bottom") ? "100%" : n[1];
                            return null == i ? i = "0" : "center" === i && (i = "50%"), ("center" === t || isNaN(parseFloat(t)) && -1 === (t + "").indexOf("=")) && (t = "50%"), r && (r.oxp = -1 !== t.indexOf("%"), r.oyp = -1 !== i.indexOf("%"), r.oxr = "=" === t.charAt(1), r.oyr = "=" === i.charAt(1), r.ox = parseFloat(t.replace(F, "")), r.oy = parseFloat(i.replace(F, ""))), t + " " + i + (n.length > 2 ? " " + n[2] : "")
                        },
                        rt = function(e, t) {
                            return "string" == typeof e && "=" === e.charAt(1) ? parseInt(e.charAt(0) + "1", 10) * parseFloat(e.substr(2)) : parseFloat(e) - parseFloat(t)
                        },
                        c = function(e, t) {
                            return null == e ? t : "string" == typeof e && "=" === e.charAt(1) ? parseInt(e.charAt(0) + "1", 10) * Number(e.substr(2)) + t : parseFloat(e)
                        },
                        E = function(i, n, l, o) {
                            var t, a, e, r, s = 1e-6;
                            return null == i ? r = n : "number" == typeof i ? r = i : (t = 360, a = i.split("_"), e = Number(a[0].replace(F, "")) * (-1 === i.indexOf("rad") ? 1 : x) - ("=" === i.charAt(1) ? 0 : n), a.length && (o && (o[l] = n + e), -1 !== i.indexOf("short") && (e %= t, e !== e % (t / 2) && (e = 0 > e ? e + t : e - t)), -1 !== i.indexOf("_cw") && 0 > e ? e = (e + 9999999999 * t) % t - (0 | e / t) * t : -1 !== i.indexOf("ccw") && e > 0 && (e = (e - 9999999999 * t) % t - (0 | e / t) * t)), r = n + e), s > r && r > -s && (r = 0), r
                        },
                        w = {
                            aqua: [0, 255, 255],
                            lime: [0, 255, 0],
                            silver: [192, 192, 192],
                            black: [0, 0, 0],
                            maroon: [128, 0, 0],
                            teal: [0, 128, 128],
                            blue: [0, 0, 255],
                            navy: [0, 0, 128],
                            white: [255, 255, 255],
                            fuchsia: [255, 0, 255],
                            olive: [128, 128, 0],
                            yellow: [255, 255, 0],
                            orange: [255, 165, 0],
                            gray: [128, 128, 128],
                            purple: [128, 0, 128],
                            green: [0, 128, 0],
                            red: [255, 0, 0],
                            pink: [255, 192, 203],
                            cyan: [0, 255, 255],
                            transparent: [255, 255, 255, 0]
                        },
                        J = function(e, t, i) {
                            return e = 0 > e ? e + 1 : e > 1 ? e - 1 : e, 0 | 255 * (1 > 6 * e ? t + 6 * (i - t) * e : .5 > e ? i : 2 > 3 * e ? t + 6 * (i - t) * (2 / 3 - e) : t) + .5
                        },
                        q = function(e) {
                            var i, t, o, n, a, r;
                            return e && "" !== e ? "number" == typeof e ? [e >> 16, 255 & e >> 8, 255 & e] : ("," === e.charAt(e.length - 1) && (e = e.substr(0, e.length - 1)), w[e] ? w[e] : "#" === e.charAt(0) ? (4 === e.length && (i = e.charAt(1), t = e.charAt(2), o = e.charAt(3), e = "#" + i + i + t + t + o + o), e = parseInt(e.substr(1), 16), [e >> 16, 255 & e >> 8, 255 & e]) : "hsl" === e.substr(0, 3) ? (e = e.match(P), n = Number(e[0]) % 360 / 360, a = Number(e[1]) / 100, r = Number(e[2]) / 100, t = .5 >= r ? r * (a + 1) : r + a - r * a, i = 2 * r - t, e.length > 3 && (e[3] = Number(e[3])), e[0] = J(n + 1 / 3, i, t), e[1] = J(n, i, t), e[2] = J(n - 1 / 3, i, t), e) : (e = e.match(P) || w.transparent, e[0] = Number(e[0]), e[1] = Number(e[1]), e[2] = Number(e[2]), e.length > 3 && (e[3] = Number(e[3])), e)) : w.black
                        },
                        b = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
                    for (e in w) b += "|" + e + "\\b";
                    b = RegExp(b + ")", "gi");
                    var ht = function(e, s, h, a) {
                            if (null == e) return function(e) {
                                return e
                            };
                            var r, o = s ? (e.match(b) || [""])[0] : "",
                                i = e.split(o).join("").match(B) || [],
                                l = e.substr(0, e.indexOf(i[0])),
                                c = ")" === e.charAt(e.length - 1) ? ")" : "",
                                n = -1 !== e.indexOf(" ") ? " " : ",",
                                t = i.length,
                                u = t > 0 ? i[0].replace(P, "") : "";
                            return t ? r = s ? function(s) {
                                var f, p, e, _;
                                if ("number" == typeof s) s += u;
                                else if (a && d.test(s)) {
                                    for (_ = s.replace(d, "|").split("|"), e = 0; _.length > e; e++) _[e] = r(_[e]);
                                    return _.join(",")
                                }
                                if (f = (s.match(b) || [o])[0], p = s.split(f).join("").match(B) || [], e = p.length, t > e--)
                                    for (; t > ++e;) p[e] = h ? p[0 | (e - 1) / 2] : i[e];
                                return l + p.join(n) + n + f + c + (-1 !== s.indexOf("inset") ? " inset" : "")
                            } : function(o) {
                                var s, p, e;
                                if ("number" == typeof o) o += u;
                                else if (a && d.test(o)) {
                                    for (p = o.replace(d, "|").split("|"), e = 0; p.length > e; e++) p[e] = r(p[e]);
                                    return p.join(",")
                                }
                                if (s = o.match(B) || [], e = s.length, t > e--)
                                    for (; t > ++e;) s[e] = h ? s[0 | (e - 1) / 2] : i[e];
                                return l + s.join(n) + c
                            } : function(e) {
                                return e
                            }
                        },
                        V = function(e) {
                            return e = e.split(","),
                                function(n, a, c, o, s, l, i) {
                                    var t, r = (a + "").split(" ");
                                    for (i = {}, t = 0; 4 > t; t++) i[e[t]] = r[t] = r[t] || r[(t - 1) / 2 >> 0];
                                    return o.parse(n, i, s, l)
                                }
                        },
                        Y = (u._setPluginRatio = function(o) {
                            this.plugin.setRatio(o);
                            for (var i, e, r, a, n = this.data, s = n.proxy, t = n.firstMPT, l = 1e-6; t;) i = s[t.v], t.r ? i = Math.round(i) : l > i && i > -l && (i = 0), t.t[t.p] = i, t = t._next;
                            if (n.autoRotate && (n.autoRotate.rotation = s.rotation), 1 === o)
                                for (t = n.firstMPT; t;) {
                                    if (e = t.t, e.type) {
                                        if (1 === e.type) {
                                            for (a = e.xs0 + e.s + e.xs1, r = 1; e.l > r; r++) a += e["xn" + r] + e["xs" + (r + 1)];
                                            e.e = a
                                        }
                                    } else e.e = e.s + e.xs0;
                                    t = t._next
                                }
                        }, function(t, i, r, e, n) {
                            this.t = t, this.p = i, this.v = r, this.r = n, e && (e._prev = this, this._next = e)
                        }),
                        o = (u._parseToProxy = function(p, u, a, e, d, o) {
                            var s, t, i, r, h, n = e,
                                l = {},
                                c = {},
                                _ = a._transform,
                                f = O;
                            for (a._transform = null, O = u, e = h = a.parse(p, u, e, d), O = f, o && (a._transform = _, n && (n._prev = null, n._prev && (n._prev._next = null))); e && e !== n;) {
                                if (1 >= e.type && (t = e.p, c[t] = e.s + e.c, l[t] = e.s, o || (r = new Y(e, "s", t, r, e.r), e.c = 0), 1 === e.type))
                                    for (s = e.l; --s > 0;) i = "xn" + s, t = e.p + "_" + i, c[t] = e.data[i], l[t] = e[i], o || (r = new Y(e, i, t, r, e.rxp[i]));
                                e = e._next
                            }
                            return {
                                proxy: l,
                                end: c,
                                firstMPT: r,
                                pt: h
                            }
                        }, u.CSSPropTween = function(i, a, e, r, t, u, h, c, l, s, n) {
                            this.t = i, this.p = a, this.s = e, this.c = r, this.n = h || a, i instanceof o || U.push(this.n), this.r = c, this.type = u || 0, l && (this.pr = l, T = !0), this.b = void 0 === s ? e : s, this.e = void 0 === n ? e + r : n, t && (this._next = t, t._prev = this)
                        }),
                        I = a.parseComplex = function(M, S, u, f, k, T, e, A, E, x) {
                            u = u || T || "", e = new o(M, S, 0, 0, e, x ? 2 : 1, null, !1, A, u, f), f += "";
                            var r, c, h, t, i, g, v, _, l, b, s, a, n = u.split(", ").join(",").split(" "),
                                p = f.split(", ").join(",").split(" "),
                                m = n.length,
                                C = W !== !1;
                            for ((-1 !== f.indexOf(",") || -1 !== u.indexOf(",")) && (n = n.join(" ").replace(d, ", ").split(" "), p = p.join(" ").replace(d, ", ").split(" "), m = n.length), m !== p.length && (n = (T || "").split(" "), m = n.length), e.plugin = E, e.setRatio = x, r = 0; m > r; r++)
                                if (t = n[r], i = p[r], _ = parseFloat(t), _ || 0 === _) e.appendXtra("", _, rt(i, _), i.replace(pt, ""), C && -1 !== i.indexOf("px"), !0);
                                else if (k && ("#" === t.charAt(0) || w[t] || st.test(t))) a = "," === i.charAt(i.length - 1) ? ")," : ")", t = q(t), i = q(i), l = t.length + i.length > 6, l && !y && 0 === i[3] ? (e["xs" + e.l] += e.l ? " transparent" : "transparent", e.e = e.e.split(p[r]).join("transparent")) : (y || (l = !1), e.appendXtra(l ? "rgba(" : "rgb(", t[0], i[0] - t[0], ",", !0, !0).appendXtra("", t[1], i[1] - t[1], ",", !0).appendXtra("", t[2], i[2] - t[2], l ? "," : a, !0), l && (t = 4 > t.length ? 1 : t[3], e.appendXtra("", t, (4 > i.length ? 1 : i[3]) - t, a, !1)));
                            else if (g = t.match(P)) {
                                if (v = i.match(pt), !v || v.length !== g.length) return e;
                                for (h = 0, c = 0; g.length > c; c++) s = g[c], b = t.indexOf(s, h), e.appendXtra(t.substr(h, b - h), Number(s), rt(v[c], s), "", C && "px" === t.substr(b + s.length, 2), 0 === c), h = b + s.length;
                                e["xs" + e.l] += t.substr(h)
                            } else e["xs" + e.l] += e.l ? " " + t : t;
                            if (-1 !== f.indexOf("=") && e.data) {
                                for (a = e.xs0 + e.data.s, r = 1; e.l > r; r++) a += e["xs" + r] + e.data["xn" + r];
                                e.e = a + e["xs" + r]
                            }
                            return e.l || (e.type = -1, e.xs0 = e.e), e.xfirst || e
                        },
                        s = 9;
                    for (e = o.prototype, e.l = e.pr = 0; --s > 0;) e["xn" + s] = 0, e["xs" + s] = "";
                    e.xs0 = "", e._next = e._prev = e.xfirst = e.data = e.plugin = e.setRatio = e.rxp = null, e.appendXtra = function(a, i, r, s, n, l) {
                        var e = this,
                            t = e.l;
                        return e["xs" + t] += l && t ? " " + a : a || "", r || 0 === t || e.plugin ? (e.l++, e.type = e.setRatio ? 2 : 1, e["xs" + e.l] = s || "", t > 0 ? (e.data["xn" + t] = i + r, e.rxp["xn" + t] = n, e["xn" + t] = i, e.plugin || (e.xfirst = new o(e, "xn" + t, i, r, e.xfirst || e, 0, e.n, n, e.pr), e.xfirst.xs0 = 0), e) : (e.data = {
                            s: i + r
                        }, e.rxp = {}, e.s = i, e.c = r, e.r = n, e)) : (e["xs" + t] += i + (s || ""), e)
                    };
                    var mt = function(t, e) {
                            e = e || {}, this.p = e.prefix ? M(t) || t : t, _[t] = _[this.p] = this, this.format = e.formatter || ht(e.defaultValue, e.color, e.collapsible, e.multi), e.parser && (this.parse = e.parser), this.clrs = e.color, this.multi = e.multi, this.keyword = e.keyword, this.dflt = e.defaultValue, this.pr = e.priority || 0
                        },
                        i = u._registerComplexSpecialProp = function(a, e, i) {
                            "object" != typeof e && (e = {
                                parser: i
                            });
                            var t, o, r = a.split(","),
                                n = e.defaultValue;
                            for (i = i || [n], t = 0; r.length > t; t++) e.prefix = 0 === t && e.prefix, e.defaultValue = i[t] || n, o = new mt(r[t], e)
                        },
                        bt = function(e) {
                            if (!_[e]) {
                                var r = e.charAt(0).toUpperCase() + e.substr(1) + "Plugin";
                                i(e, {
                                    parser: function(a, o, e, s, i, l, c) {
                                        var n = (t.GreenSockGlobals || t).com.greensock.plugins[r];
                                        return n ? (n._cssRegister(), _[e].parse(a, o, e, s, i, l, c)) : (ct("Error: " + r + " js file not loaded."), i)
                                    }
                                })
                            }
                        };
                    e = mt.prototype, e.parseComplex = function(p, n, e, u, h, c) {
                        var i, r, t, s, l, o, a = this.keyword;
                        if (this.multi && (d.test(e) || d.test(n) ? (r = n.replace(d, "|").split("|"), t = e.replace(d, "|").split("|")) : a && (r = [n], t = [e])), t) {
                            for (s = t.length > r.length ? t.length : r.length, i = 0; s > i; i++) n = r[i] = r[i] || this.dflt, e = t[i] = t[i] || this.dflt, a && (l = n.indexOf(a), o = e.indexOf(a), l !== o && (e = -1 === o ? t : r, e[i] += " " + a));
                            n = r.join(", "), e = t.join(", ")
                        }
                        return I(p, this.p, n, e, this.clrs, this.dflt, u, this.pr, h, c)
                    }, e.parse = function(e, t, o, s, i, a) {
                        return this.parseComplex(e.style, this.format(r(e, this.p, n, !1, this.dflt)), this.format(t), i, a)
                    }, a.registerSpecialProp = function(t, r, e) {
                        i(t, {
                            parser: function(n, a, t, s, l, c) {
                                var i = new o(n, t, 0, 0, l, 2, t, !1, e);
                                return i.plugin = c, i.setRatio = r(n, a, s._tween, t), i
                            },
                            priority: e
                        })
                    };
                    var vt = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),
                        l = M("transform"),
                        xt = dt + "transform",
                        H = M("transformOrigin"),
                        f = null !== M("perspective"),
                        at = u.Transform = function() {
                            this.skewY = 0
                        },
                        C = u.getTransform = function(m, K, P, J) {
                            if (m._gsTransform && P && !J) return m._gsTransform;
                            var s, t, y, L, Y, R, O, w, v, q, V, F, N, e = P ? m._gsTransform || new at : new at,
                                nt = 0 > e.scaleX,
                                k = 2e-5,
                                u = 1e5,
                                M = 179.99,
                                C = M * h,
                                rt = f ? parseFloat(r(m, H, K, !1, "0 0 0").split(" ")[2]) || e.zOrigin || 0 : 0;
                            if (l ? s = r(m, xt, K, !0) : m.currentStyle && (s = m.currentStyle.filter.match(Lt), s = s && 4 === s.length ? [s[0].substr(4), Number(s[2].substr(4)), Number(s[1].substr(4)), s[3].substr(4), e.x || 0, e.y || 0].join(",") : ""), s && "none" !== s && "matrix(1, 0, 0, 1, 0, 0)" !== s) {
                                for (t = (s || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [], y = t.length; --y > -1;) L = Number(t[y]), t[y] = (Y = L - (L |= 0)) ? (0 | Y * u + (0 > Y ? -.5 : .5)) / u + L : L;
                                if (16 === t.length) {
                                    var S = t[8],
                                        p = t[9],
                                        c = t[10],
                                        tt = t[12],
                                        $ = t[13],
                                        E = t[14];
                                    if (e.zOrigin && (E = -e.zOrigin, tt = S * E - t[12], $ = p * E - t[13], E = c * E + e.zOrigin - t[14]), !P || J || null == e.rotationX) {
                                        var I, A, W, o, n, Q, X, T = t[0],
                                            _ = t[1],
                                            D = t[2],
                                            ot = t[3],
                                            B = t[4],
                                            d = t[5],
                                            b = t[6],
                                            it = t[7],
                                            g = t[11],
                                            i = Math.atan2(b, c),
                                            Z = -C > i || i > C;
                                        e.rotationX = i * x, i && (o = Math.cos(-i), n = Math.sin(-i), I = B * o + S * n, A = d * o + p * n, W = b * o + c * n, S = B * -n + S * o, p = d * -n + p * o, c = b * -n + c * o, g = it * -n + g * o, B = I, d = A, b = W), i = Math.atan2(S, T), e.rotationY = i * x, i && (Q = -C > i || i > C, o = Math.cos(-i), n = Math.sin(-i), I = T * o - S * n, A = _ * o - p * n, W = D * o - c * n, p = _ * n + p * o, c = D * n + c * o, g = ot * n + g * o, T = I, _ = A, D = W), i = Math.atan2(_, d), e.rotation = i * x, i && (X = -C > i || i > C, o = Math.cos(-i), n = Math.sin(-i), T = T * o + B * n, A = _ * o + d * n, d = _ * -n + d * o, b = D * -n + b * o, _ = A), X && Z ? e.rotation = e.rotationX = 0 : X && Q ? e.rotation = e.rotationY = 0 : Q && Z && (e.rotationY = e.rotationX = 0), e.scaleX = (0 | Math.sqrt(T * T + _ * _) * u + .5) / u, e.scaleY = (0 | Math.sqrt(d * d + p * p) * u + .5) / u, e.scaleZ = (0 | Math.sqrt(b * b + c * c) * u + .5) / u, e.skewX = 0, e.perspective = g ? 1 / (0 > g ? -g : g) : 0, e.x = tt, e.y = $, e.z = E
                                    }
                                } else if (!(f && !J && t.length && e.x === t[4] && e.y === t[5] && (e.rotationX || e.rotationY) || void 0 !== e.x && "none" === r(m, "display", K))) {
                                    var et = t.length >= 6,
                                        G = et ? t[0] : 1,
                                        j = t[1] || 0,
                                        z = t[2] || 0,
                                        U = et ? t[3] : 1;
                                    e.x = t[4] || 0, e.y = t[5] || 0, R = Math.sqrt(G * G + j * j), O = Math.sqrt(U * U + z * z), w = G || j ? Math.atan2(j, G) * x : e.rotation || 0, v = z || U ? Math.atan2(z, U) * x + w : e.skewX || 0, q = R - Math.abs(e.scaleX || 0), V = O - Math.abs(e.scaleY || 0), Math.abs(v) > 90 && 270 > Math.abs(v) && (nt ? (R *= -1, v += 0 >= w ? 180 : -180, w += 0 >= w ? 180 : -180) : (O *= -1, v += 0 >= v ? 180 : -180)), F = (w - e.rotation) % 180, N = (v - e.skewX) % 180, (void 0 === e.skewX || q > k || -k > q || V > k || -k > V || F > -M && M > F && !1 | F * u || N > -M && M > N && !1 | N * u) && (e.scaleX = R, e.scaleY = O, e.rotation = w, e.skewX = v), f && (e.rotationX = e.rotationY = e.z = 0, e.perspective = parseFloat(a.defaultTransformPerspective) || 0, e.scaleZ = 1)
                                }
                                e.zOrigin = rt;
                                for (y in e) k > e[y] && e[y] > -k && (e[y] = 0)
                            } else e = {
                                x: 0,
                                y: 0,
                                z: 0,
                                scaleX: 1,
                                scaleY: 1,
                                scaleZ: 1,
                                skewX: 0,
                                perspective: 0,
                                rotation: 0,
                                rotationX: 0,
                                rotationY: 0,
                                zOrigin: 0
                            };
                            return P && (m._gsTransform = e), e.xPercent = e.yPercent = 0, e
                        },
                        Et = function(S) {
                            var d, f, e = this.data,
                                b = -e.rotation * h,
                                C = b + e.skewX * h,
                                a = 1e5,
                                o = (0 | Math.cos(b) * e.scaleX * a) / a,
                                n = (0 | Math.sin(b) * e.scaleX * a) / a,
                                r = (0 | Math.sin(C) * -e.scaleY * a) / a,
                                l = (0 | Math.cos(C) * e.scaleY * a) / a,
                                v = this.t.style,
                                y = this.t.currentStyle;
                            if (y) {
                                f = n, n = -r, r = -f, d = y.filter, v.filter = "";
                                var t, i, c = this.t.offsetWidth,
                                    u = this.t.offsetHeight,
                                    x = "absolute" !== y.position,
                                    m = "progid:DXImageTransform.Microsoft.Matrix(M11=" + o + ", M12=" + n + ", M21=" + r + ", M22=" + l,
                                    w = e.x + c * e.xPercent / 100,
                                    T = e.y + u * e.yPercent / 100;
                                if (null != e.ox && (t = (e.oxp ? .01 * c * e.ox : e.ox) - c / 2, i = (e.oyp ? .01 * u * e.oy : e.oy) - u / 2, w += t - (t * o + i * n), T += i - (t * r + i * l)), x ? (t = c / 2, i = u / 2, m += ", Dx=" + (t - (t * o + i * n) + w) + ", Dy=" + (i - (t * r + i * l) + T) + ")") : m += ", sizingMethod='auto expand')", v.filter = -1 !== d.indexOf("DXImageTransform.Microsoft.Matrix(") ? d.replace(Tt, m) : m + " " + d, (0 === S || 1 === S) && 1 === o && 0 === n && 0 === r && 1 === l && (x && -1 === m.indexOf("Dx=0, Dy=0") || Q.test(d) && 100 !== parseFloat(RegExp.$1) || -1 === d.indexOf("gradient(" && d.indexOf("Alpha")) && v.removeAttribute("filter")), !x) {
                                    var g, _, E, k = 8 > A ? 1 : -1;
                                    for (t = e.ieOffsetX || 0, i = e.ieOffsetY || 0, e.ieOffsetX = Math.round((c - ((0 > o ? -o : o) * c + (0 > n ? -n : n) * u)) / 2 + w), e.ieOffsetY = Math.round((u - ((0 > l ? -l : l) * u + (0 > r ? -r : r) * c)) / 2 + T), s = 0; 4 > s; s++) _ = zt[s], g = y[_], f = -1 !== g.indexOf("px") ? parseFloat(g) : p(this.t, _, parseFloat(g), g.replace(K, "")) || 0, E = f !== e[_] ? 2 > s ? -e.ieOffsetX : -e.ieOffsetY : 2 > s ? t - e.ieOffsetX : i - e.ieOffsetY, v[_] = (e[_] = Math.round(f - E * (0 === s || 2 === s ? 1 : k))) + "px"
                                }
                            }
                        },
                        G = u.set3DTransformRatio = function(L) {
                            var w, y, v, m, x, b, p, _, k, T, d, o, A, C, f, E, t, r, i, n, I, j, P, e = this.data,
                                R = this.t.style,
                                a = e.rotation * h,
                                s = e.scaleX,
                                c = e.scaleY,
                                u = e.scaleZ,
                                z = e.x,
                                O = e.y,
                                M = e.z,
                                g = e.perspective;
                            if (!(1 !== L && 0 !== L || "auto" !== e.force3D || e.rotationY || e.rotationX || 1 !== u || g || M)) return void it.call(this, L);
                            if (ft) {
                                var S = 1e-4;
                                S > s && s > -S && (s = u = 2e-5), S > c && c > -S && (c = u = 2e-5), !g || e.z || e.rotationX || e.rotationY || (g = 0)
                            }
                            if (a || e.skewX) r = Math.cos(a), i = Math.sin(a), w = r, x = i, e.skewX && (a -= e.skewX * h, r = Math.cos(a), i = Math.sin(a), "simple" === e.skewType && (n = Math.tan(e.skewX * h), n = Math.sqrt(1 + n * n), r *= n, i *= n)), y = -i, b = r;
                            else {
                                if (!(e.rotationY || e.rotationX || 1 !== u || g)) return void(R[l] = (e.xPercent || e.yPercent ? "translate(" + e.xPercent + "%," + e.yPercent + "%) translate3d(" : "translate3d(") + z + "px," + O + "px," + M + "px)" + (1 !== s || 1 !== c ? " scale(" + s + "," + c + ")" : ""));
                                w = b = 1, y = x = 0
                            }
                            d = 1, v = m = p = _ = k = T = o = A = C = 0, f = g ? -1 / g : 0, E = e.zOrigin, t = 1e5, a = e.rotationY * h, a && (r = Math.cos(a), i = Math.sin(a), k = d * -i, A = f * -i, v = w * i, p = x * i, d *= r, f *= r, w *= r, x *= r), a = e.rotationX * h, a && (r = Math.cos(a), i = Math.sin(a), n = y * r + v * i, I = b * r + p * i, j = T * r + d * i, P = C * r + f * i, v = y * -i + v * r, p = b * -i + p * r, d = T * -i + d * r, f = C * -i + f * r, y = n, b = I, T = j, C = P), 1 !== u && (v *= u, p *= u, d *= u, f *= u), 1 !== c && (y *= c, b *= c, T *= c, C *= c), 1 !== s && (w *= s, x *= s, k *= s, A *= s), E && (o -= E, m = v * o, _ = p * o, o = d * o + E), m = (n = (m += z) - (m |= 0)) ? (0 | n * t + (0 > n ? -.5 : .5)) / t + m : m, _ = (n = (_ += O) - (_ |= 0)) ? (0 | n * t + (0 > n ? -.5 : .5)) / t + _ : _, o = (n = (o += M) - (o |= 0)) ? (0 | n * t + (0 > n ? -.5 : .5)) / t + o : o, R[l] = (e.xPercent || e.yPercent ? "translate(" + e.xPercent + "%," + e.yPercent + "%) matrix3d(" : "matrix3d(") + [(0 | w * t) / t, (0 | x * t) / t, (0 | k * t) / t, (0 | A * t) / t, (0 | y * t) / t, (0 | b * t) / t, (0 | T * t) / t, (0 | C * t) / t, (0 | v * t) / t, (0 | p * t) / t, (0 | d * t) / t, (0 | f * t) / t, m, _, o, g ? 1 + -o / g : 1].join(",") + ")"
                        },
                        it = u.set2DTransformRatio = function(o) {
                            var i, a, t, n, r, e = this.data,
                                d = this.t,
                                s = d.style,
                                c = e.x,
                                u = e.y;
                            return e.rotationX || e.rotationY || e.z || e.force3D === !0 || "auto" === e.force3D && 1 !== o && 0 !== o ? (this.setRatio = G, void G.call(this, o)) : void(e.rotation || e.skewX ? (i = e.rotation * h, a = i - e.skewX * h, t = 1e5, n = e.scaleX * t, r = e.scaleY * t, s[l] = (e.xPercent || e.yPercent ? "translate(" + e.xPercent + "%," + e.yPercent + "%) matrix(" : "matrix(") + (0 | Math.cos(i) * n) / t + "," + (0 | Math.sin(i) * n) / t + "," + (0 | Math.sin(a) * -r) / t + "," + (0 | Math.cos(a) * r) / t + "," + c + "," + u + ")") : s[l] = (e.xPercent || e.yPercent ? "translate(" + e.xPercent + "%," + e.yPercent + "%) matrix(" : "matrix(") + e.scaleX + ",0,0," + e.scaleY + "," + c + "," + u + ")")
                        };
                    i("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent", {
                        parser: function(w, L, u, b, i, M, k) {
                            if (b._transform) return i;
                            var s, x, d, h, g, y, p, t = b._transform = C(w, n, !0, k.parseTransform),
                                T = w.style,
                                S = 1e-6,
                                A = vt.length,
                                e = k,
                                _ = {};
                            if ("string" == typeof e.transform && l) d = m.style, d[l] = e.transform, d.display = "block", d.position = "absolute", v.body.appendChild(m), s = C(m, null, !1), v.body.removeChild(m);
                            else if ("object" == typeof e) {
                                if (s = {
                                        scaleX: c(null != e.scaleX ? e.scaleX : e.scale, t.scaleX),
                                        scaleY: c(null != e.scaleY ? e.scaleY : e.scale, t.scaleY),
                                        scaleZ: c(e.scaleZ, t.scaleZ),
                                        x: c(e.x, t.x),
                                        y: c(e.y, t.y),
                                        z: c(e.z, t.z),
                                        xPercent: c(e.xPercent, t.xPercent),
                                        yPercent: c(e.yPercent, t.yPercent),
                                        perspective: c(e.transformPerspective, t.perspective)
                                    }, p = e.directionalRotation, null != p)
                                    if ("object" == typeof p)
                                        for (d in p) e[d] = p[d];
                                    else e.rotation = p;
                                    "string" == typeof e.x && -1 !== e.x.indexOf("%") && (s.x = 0, s.xPercent = c(e.x, t.xPercent)), "string" == typeof e.y && -1 !== e.y.indexOf("%") && (s.y = 0, s.yPercent = c(e.y, t.yPercent)), s.rotation = E("rotation" in e ? e.rotation : "shortRotation" in e ? e.shortRotation + "_short" : "rotationZ" in e ? e.rotationZ : t.rotation, t.rotation, "rotation", _), f && (s.rotationX = E("rotationX" in e ? e.rotationX : "shortRotationX" in e ? e.shortRotationX + "_short" : t.rotationX || 0, t.rotationX, "rotationX", _), s.rotationY = E("rotationY" in e ? e.rotationY : "shortRotationY" in e ? e.shortRotationY + "_short" : t.rotationY || 0, t.rotationY, "rotationY", _)), s.skewX = null == e.skewX ? t.skewX : E(e.skewX, t.skewX), s.skewY = null == e.skewY ? t.skewY : E(e.skewY, t.skewY), (x = s.skewY - t.skewY) && (s.skewX += x, s.rotation += x)
                            }
                            for (f && null != e.force3D && (t.force3D = e.force3D, y = !0), t.skewType = e.skewType || t.skewType || a.defaultSkewType, g = t.force3D || t.z || t.rotationX || t.rotationY || s.z || s.rotationX || s.rotationY || s.perspective, g || null == e.scale || (s.scaleZ = 1); --A > -1;) u = vt[A], h = s[u] - t[u], (h > S || -S > h || null != O[u]) && (y = !0, i = new o(t, u, t[u], h, i), u in _ && (i.e = _[u]), i.xs0 = 0, i.plugin = M, b._overwriteProps.push(i.n));
                            return h = e.transformOrigin, (h || f && g && t.zOrigin) && (l ? (y = !0, u = H, h = (h || r(w, u, n, !1, "50% 50%")) + "", i = new o(T, u, 0, 0, i, -1, "transformOrigin"), i.b = T[u], i.plugin = M, f ? (d = t.zOrigin, h = h.split(" "), t.zOrigin = (h.length > 2 && (0 === d || "0px" !== h[2]) ? parseFloat(h[2]) : d) || 0, i.xs0 = i.e = h[0] + " " + (h[1] || "50%") + " 0px", i = new o(t, "zOrigin", 0, 0, i, -1, i.n), i.b = d, i.xs0 = i.e = t.zOrigin) : i.xs0 = i.e = h) : Z(h + "", t)), y && (b._transformType = g || 3 === this._transformType ? 3 : 2), i
                        },
                        prefix: !0
                    }), i("boxShadow", {
                        defaultValue: "0px 0px 0px 0px #999",
                        prefix: !0,
                        color: !0,
                        multi: !0,
                        keyword: "inset"
                    }), i("borderRadius", {
                        defaultValue: "0px",
                        parser: function(l, m, T, S, y) {
                            m = this.format(m);
                            var x, o, v, i, e, t, _, s, b, w, a, h, f, d, u, g, c = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                                C = l.style;
                            for (b = parseFloat(l.offsetWidth), w = parseFloat(l.offsetHeight), x = m.split(" "), o = 0; c.length > o; o++) this.p.indexOf("border") && (c[o] = M(c[o])), e = i = r(l, c[o], n, !1, "0px"), -1 !== e.indexOf(" ") && (i = e.split(" "), e = i[0], i = i[1]), t = v = x[o], _ = parseFloat(e), h = e.substr((_ + "").length), f = "=" === t.charAt(1), f ? (s = parseInt(t.charAt(0) + "1", 10), t = t.substr(2), s *= parseFloat(t), a = t.substr((s + "").length - (0 > s ? 1 : 0)) || "") : (s = parseFloat(t), a = t.substr((s + "").length)), "" === a && (a = R[T] || h), a !== h && (d = p(l, "borderLeft", _, h), u = p(l, "borderTop", _, h), "%" === a ? (e = 100 * (d / b) + "%", i = 100 * (u / w) + "%") : "em" === a ? (g = p(l, "borderLeft", 1, "em"), e = d / g + "em", i = u / g + "em") : (e = d + "px", i = u + "px"), f && (t = parseFloat(e) + s + a, v = parseFloat(i) + s + a)), y = I(C, c[o], e + " " + i, t + " " + v, !1, "0px", y);
                            return y
                        },
                        prefix: !0,
                        formatter: ht("0px 0px 0px 0px", !1, !0)
                    }), i("backgroundPosition", {
                        defaultValue: "0 0",
                        parser: function(t, _, m, g, p, f) {
                            var o, d, i, l, u, s, c = "background-position",
                                a = n || k(t, null),
                                e = this.format((a ? A ? a.getPropertyValue(c + "-x") + " " + a.getPropertyValue(c + "-y") : a.getPropertyValue(c) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"),
                                h = this.format(_);
                            if (-1 !== e.indexOf("%") != (-1 !== h.indexOf("%")) && (s = r(t, "backgroundImage").replace(wt, ""), s && "none" !== s)) {
                                for (o = e.split(" "), d = h.split(" "), D.setAttribute("src", s), i = 2; --i > -1;) e = o[i], l = -1 !== e.indexOf("%"), l !== (-1 !== d[i].indexOf("%")) && (u = 0 === i ? t.offsetWidth - D.width : t.offsetHeight - D.height, o[i] = l ? parseFloat(e) / 100 * u + "px" : 100 * (parseFloat(e) / u) + "%");
                                e = o.join(" ")
                            }
                            return this.parseComplex(t.style, e, h, p, f)
                        },
                        formatter: Z
                    }), i("backgroundSize", {
                        defaultValue: "0 0",
                        formatter: Z
                    }), i("perspective", {
                        defaultValue: "0px",
                        prefix: !0
                    }), i("perspectiveOrigin", {
                        defaultValue: "50% 50%",
                        prefix: !0
                    }), i("transformStyle", {
                        prefix: !0
                    }), i("backfaceVisibility", {
                        prefix: !0
                    }), i("userSelect", {
                        prefix: !0
                    }), i("margin", {
                        parser: V("marginTop,marginRight,marginBottom,marginLeft")
                    }), i("padding", {
                        parser: V("paddingTop,paddingRight,paddingBottom,paddingLeft")
                    }), i("clip", {
                        defaultValue: "rect(0px,0px,0px,0px)",
                        parser: function(a, e, c, h, s, l) {
                            var o, t, i;
                            return 9 > A ? (t = a.currentStyle, i = 8 > A ? " " : ",", o = "rect(" + t.clipTop + i + t.clipRight + i + t.clipBottom + i + t.clipLeft + ")", e = this.format(e).split(",").join(i)) : (o = this.format(r(a, this.p, n, !1, this.dflt)), e = this.format(e)), this.parseComplex(a.style, o, e, s, l)
                        }
                    }), i("textShadow", {
                        defaultValue: "0px 0px 0px #999",
                        color: !0,
                        multi: !0
                    }), i("autoRound,strictUnits", {
                        parser: function(t, i, r, n, e) {
                            return e
                        }
                    }), i("border", {
                        defaultValue: "0px solid #000",
                        parser: function(e, t, o, s, i, a) {
                            return this.parseComplex(e.style, this.format(r(e, "borderTopWidth", n, !1, "0px") + " " + r(e, "borderTopStyle", n, !1, "solid") + " " + r(e, "borderTopColor", n, !1, "#000")), this.format(t), i, a)
                        },
                        color: !0,
                        formatter: function(e) {
                            var t = e.split(" ");
                            return t[0] + " " + (t[1] || "solid") + " " + (e.match(b) || ["#000"])[0]
                        }
                    }), i("borderWidth", {
                        parser: V("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
                    }), i("float,cssFloat,styleFloat", {
                        parser: function(i, r, n, s, a) {
                            var e = i.style,
                                t = "cssFloat" in e ? "cssFloat" : "styleFloat";
                            return new o(e, t, 0, 0, a, -1, n, !1, 0, e[t], r)
                        }
                    });
                    var Mt = function(a) {
                        var n, t = this.t,
                            e = t.filter || r(this.data, "filter"),
                            i = 0 | this.s + this.c * a;
                        100 === i && (-1 === e.indexOf("atrix(") && -1 === e.indexOf("radient(") && -1 === e.indexOf("oader(") ? (t.removeAttribute("filter"), n = !r(this.data, "filter")) : (t.filter = e.replace(Ct, ""), n = !0)), n || (this.xn1 && (t.filter = e = e || "alpha(opacity=" + i + ")"), -1 === e.indexOf("pacity") ? 0 === i && this.xn1 || (t.filter = e + " alpha(opacity=" + i + ")") : t.filter = e.replace(Q, "opacity=" + i))
                    };
                    i("opacity,alpha,autoAlpha", {
                        defaultValue: "1",
                        parser: function(a, t, c, h, e, u) {
                            var i = parseFloat(r(a, "opacity", n, !1, "1")),
                                s = a.style,
                                l = "autoAlpha" === c;
                            return "string" == typeof t && "=" === t.charAt(1) && (t = ("-" === t.charAt(0) ? -1 : 1) * parseFloat(t.substr(2)) + i), l && 1 === i && "hidden" === r(a, "visibility", n) && 0 !== t && (i = 0), y ? e = new o(s, "opacity", i, t - i, e) : (e = new o(s, "opacity", 100 * i, 100 * (t - i), e), e.xn1 = l ? 1 : 0, s.zoom = 1, e.type = 2, e.b = "alpha(opacity=" + e.s + ")", e.e = "alpha(opacity=" + (e.s + e.c) + ")", e.data = a, e.plugin = u, e.setRatio = Mt), l && (e = new o(s, "visibility", 0, 0, e, -1, null, !1, 0, 0 !== i ? "inherit" : "hidden", 0 === t ? "hidden" : "inherit"), e.xs0 = "inherit", h._overwriteProps.push(e.n), h._overwriteProps.push(c)), e
                        }
                    });
                    var N = function(t, e) {
                            e && (t.removeProperty ? ("ms" === e.substr(0, 2) && (e = "M" + e.substr(1)), t.removeProperty(e.replace(lt, "-$1").toLowerCase())) : t.removeAttribute(e))
                        },
                        Rt = function(t) {
                            if (this.t._gsClassPT = this, 1 === t || 0 === t) {
                                this.t.setAttribute("class", 0 === t ? this.b : this.e);
                                for (var e = this.data, i = this.t.style; e;) e.v ? i[e.p] = e.v : N(i, e.p), e = e._next;
                                1 === t && this.t._gsClassPT === this && (this.t._gsClassPT = null)
                            } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
                        };
                    i("className", {
                        parser: function(t, r, _, c, e, p, d) {
                            var a, u, h, l, i, s = t.getAttribute("class") || "",
                                f = t.style.cssText;
                            if (e = c._classNamePT = new o(t, _, 0, 0, e, 2), e.setRatio = Rt, e.pr = -11, T = !0, e.b = s, u = S(t, n), h = t._gsClassPT) {
                                for (l = {}, i = h.data; i;) l[i.p] = 1, i = i._next;
                                h.setRatio(1)
                            }
                            return t._gsClassPT = e, e.e = "=" !== r.charAt(1) ? r : s.replace(RegExp("\\s*\\b" + r.substr(2) + "\\b"), "") + ("+" === r.charAt(0) ? " " + r.substr(2) : ""), c._tween._duration && (t.setAttribute("class", e.e), a = $(t, u, S(t), d, l), t.setAttribute("class", s), e.data = a.firstMPT, t.style.cssText = f, e = e.xfirst = c.parse(t, a.difs, e, p)), e
                        }
                    });
                    var Pt = function(a) {
                        if ((1 === a || 0 === a) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                            var t, e, i, r, n = this.t.style,
                                o = _.transform.parse;
                            if ("all" === this.e) n.cssText = "", r = !0;
                            else
                                for (t = this.e.split(","), i = t.length; --i > -1;) e = t[i], _[e] && (_[e].parse === o ? r = !0 : e = "transformOrigin" === e ? H : _[e].p), N(n, e);
                            r && (N(n, l), this.t._gsTransform && delete this.t._gsTransform)
                        }
                    };
                    for (i("clearProps", {
                            parser: function(t, i, r, n, e) {
                                return e = new o(t, r, 0, 0, e, 2), e.setRatio = Pt, e.e = i, e.pr = -10, e.data = n._tween, T = !0, e
                            }
                        }), e = "bezier,throwProps,physicsProps,physics2D".split(","), s = e.length; s--;) bt(e[s]);
                    e = a.prototype, e._firstPT = null, e._onInitTween = function(i, h, v) {
                        if (!i.nodeType) return !1;
                        this._target = i, this._tween = v, this._vars = h, W = h.autoRound, T = !1, R = h.suffixMap || a.suffixMap, n = k(i, ""), U = this._overwriteProps;
                        var c, t, e, u, m, g, p, d, _, s = i.style;
                        if (gt && "" === s.zIndex && (c = r(i, "zIndex", n), ("auto" === c || "" === c) && this._addLazySet(s, "zIndex", 0)), "string" == typeof h && (u = s.cssText, c = S(i, n), s.cssText = u + ";" + h, c = $(i, c, S(i)).difs, !y && St.test(h) && (c.opacity = parseFloat(RegExp.$1)), h = c, s.cssText = u), this._firstPT = t = this.parse(i, h, null), this._transformType) {
                            for (_ = 3 === this._transformType, l ? X && (gt = !0, "" === s.zIndex && (p = r(i, "zIndex", n), ("auto" === p || "" === p) && this._addLazySet(s, "zIndex", 0)), _t && this._addLazySet(s, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (_ ? "visible" : "hidden"))) : s.zoom = 1, e = t; e && e._next;) e = e._next;
                            d = new o(i, "transform", 0, 0, null, 2), this._linkCSSP(d, null, e), d.setRatio = _ && f ? G : l ? it : Et, d.data = this._transform || C(i, n, !0), U.pop()
                        }
                        if (T) {
                            for (; t;) {
                                for (g = t._next, e = u; e && e.pr > t.pr;) e = e._next;
                                (t._prev = e ? e._prev : m) ? t._prev._next = t: u = t, (t._next = e) ? e._prev = t : m = t, t = g
                            }
                            this._firstPT = u
                        }
                        return !0
                    }, e.parse = function(h, d, s, m) {
                        var e, y, i, a, c, t, u, l, f, g, v = h.style;
                        for (e in d) t = d[e], y = _[e], y ? s = y.parse(h, t, e, this, s, m, d) : (c = r(h, e, n) + "", f = "string" == typeof t, "color" === e || "fill" === e || "stroke" === e || -1 !== e.indexOf("Color") || f && st.test(t) ? (f || (t = q(t), t = (t.length > 3 ? "rgba(" : "rgb(") + t.join(",") + ")"), s = I(v, e, c, t, !0, "transparent", s, 0, m)) : !f || -1 === t.indexOf(" ") && -1 === t.indexOf(",") ? (i = parseFloat(c), u = i || 0 === i ? c.substr((i + "").length) : "", ("" === c || "auto" === c) && ("width" === e || "height" === e ? (i = At(h, e, n), u = "px") : "left" === e || "top" === e ? (i = ot(h, e, n), u = "px") : (i = "opacity" !== e ? 0 : 1, u = "")), g = f && "=" === t.charAt(1), g ? (a = parseInt(t.charAt(0) + "1", 10), t = t.substr(2), a *= parseFloat(t), l = t.replace(K, "")) : (a = parseFloat(t), l = f ? t.substr((a + "").length) || "" : ""), "" === l && (l = e in R ? R[e] : u), t = a || 0 === a ? (g ? a + i : a) + l : d[e], u !== l && "" !== l && (a || 0 === a) && i && (i = p(h, e, i, u), "%" === l ? (i /= p(h, e, 100, "%") / 100, d.strictUnits !== !0 && (c = i + "%")) : "em" === l ? i /= p(h, e, 1, "em") : "px" !== l && (a = p(h, e, a, l), l = "px"), g && (a || 0 === a) && (t = a + i + l)), g && (a += i), !i && 0 !== i || !a && 0 !== a ? void 0 !== v[e] && (t || "NaN" != t + "" && null != t) ? (s = new o(v, e, a || i || 0, 0, s, -1, e, !1, 0, c, t), s.xs0 = "none" !== t || "display" !== e && -1 === e.indexOf("Style") ? t : c) : ct("invalid " + e + " tween value: " + d[e]) : (s = new o(v, e, i, a - i, s, 0, e, W !== !1 && ("px" === l || "zIndex" === e), 0, c, t), s.xs0 = l)) : s = I(v, e, c, t, !0, null, s, 0, m)), m && s && !s.plugin && (s.plugin = m);
                        return s
                    }, e.setRatio = function(r) {
                        var t, n, i, e = this._firstPT,
                            a = 1e-6;
                        if (1 !== r || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                            if (r || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -1e-6)
                                for (; e;) {
                                    if (t = e.c * r + e.s, e.r ? t = Math.round(t) : a > t && t > -a && (t = 0), e.type)
                                        if (1 === e.type)
                                            if (i = e.l, 2 === i) e.t[e.p] = e.xs0 + t + e.xs1 + e.xn1 + e.xs2;
                                            else if (3 === i) e.t[e.p] = e.xs0 + t + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3;
                                    else if (4 === i) e.t[e.p] = e.xs0 + t + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3 + e.xn3 + e.xs4;
                                    else if (5 === i) e.t[e.p] = e.xs0 + t + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3 + e.xn3 + e.xs4 + e.xn4 + e.xs5;
                                    else {
                                        for (n = e.xs0 + t + e.xs1, i = 1; e.l > i; i++) n += e["xn" + i] + e["xs" + (i + 1)];
                                        e.t[e.p] = n
                                    } else -1 === e.type ? e.t[e.p] = e.xs0 : e.setRatio && e.setRatio(r);
                                    else e.t[e.p] = t + e.xs0;
                                    e = e._next
                                } else
                                    for (; e;) 2 !== e.type ? e.t[e.p] = e.b : e.setRatio(r), e = e._next;
                            else
                                for (; e;) 2 !== e.type ? e.t[e.p] = e.e : e.setRatio(r), e = e._next
                    }, e._enableTransforms = function(e) {
                        this._transformType = e || 3 === this._transformType ? 3 : 2, this._transform = this._transform || C(this._target, n, !0)
                    };
                    var jt = function() {
                        this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0)
                    };
                    e._addLazySet = function(t, i, r) {
                        var e = this._firstPT = new o(t, i, 0, 0, this._firstPT, 2);
                        e.e = r, e.setRatio = jt, e.data = this
                    }, e._linkCSSP = function(e, t, i, r) {
                        return e && (t && (t._prev = e), e._next && (e._next._prev = e._prev), e._prev ? e._prev._next = e._next : this._firstPT === e && (this._firstPT = e._next, r = !0), i ? i._next = e : r || null !== this._firstPT || (this._firstPT = e), e._next = t, e._prev = i), e
                    }, e._kill = function(i) {
                        var e, n, t, r = i;
                        if (i.autoAlpha || i.alpha) {
                            r = {};
                            for (n in i) r[n] = i[n];
                            r.opacity = 1, r.autoAlpha && (r.visibility = 1)
                        }
                        return i.className && (e = this._classNamePT) && (t = e.xfirst, t && t._prev ? this._linkCSSP(t._prev, e._next, t._prev._prev) : t === this._firstPT && (this._firstPT = e._next), e._next && this._linkCSSP(e._next, e._next._next, t._prev), this._classNamePT = null), L.prototype._kill.call(this, r)
                    };
                    var j = function(i, a, r) {
                        var o, t, e, n;
                        if (i.slice)
                            for (t = i.length; --t > -1;) j(i[t], a, r);
                        else
                            for (o = i.childNodes, t = o.length; --t > -1;) e = o[t], n = e.type, e.style && (a.push(S(e)), r && r.push(e)), 1 !== n && 9 !== n && 11 !== n || !e.childNodes.length || j(e, a, r)
                    };
                    return a.cascadeTo = function(r, o, s) {
                        var t, i, a, e = z.to(r, o, s),
                            l = [e],
                            c = [],
                            h = [],
                            n = [],
                            u = z._internals.reservedProps;
                        for (r = e._targets || e.target, j(r, c, n), e.render(o, !0), j(r, h), e.render(0, !0), e._enabled(!0), t = n.length; --t > -1;)
                            if (i = $(n[t], c[t], h[t]), i.firstMPT) {
                                i = i.difs;
                                for (a in s) u[a] && (i[a] = s[a]);
                                l.push(z.to(n[t], o, i))
                            }
                        return l
                    }, L.activate([a]), a
                }, !0),
                function() {
                    var i = t._gsDefine.plugin({
                            propName: "roundProps",
                            priority: -1,
                            API: 2,
                            init: function(t, i, e) {
                                return this._tween = e, !0
                            }
                        }),
                        e = i.prototype;
                    e._onInitAllProps = function() {
                        for (var n, e, i, t = this._tween, a = t.vars.roundProps instanceof Array ? t.vars.roundProps : t.vars.roundProps.split(","), r = a.length, o = {}, s = t._propLookup.roundProps; --r > -1;) o[a[r]] = 1;
                        for (r = a.length; --r > -1;)
                            for (n = a[r], e = t._firstPT; e;) i = e._next, e.pg ? e.t._roundProps(o, !0) : e.n === n && (this._add(e.t, n, e.s, e.c), i && (i._prev = e._prev), e._prev ? e._prev._next = i : t._firstPT === e && (t._firstPT = i), e._next = e._prev = null, t._propLookup[n] = s), e = i;
                        return !1
                    }, e._add = function(i, e, t, r) {
                        this._addTween(i, e, t, t + r, e, !0), this._overwriteProps.push(e)
                    }
                }(), t._gsDefine.plugin({
                    propName: "attr",
                    API: 2,
                    version: "0.3.3",
                    init: function(i, r) {
                        var e, n, t;
                        if ("function" != typeof i.setAttribute) return !1;
                        this._target = i, this._proxy = {}, this._start = {}, this._end = {};
                        for (e in r) this._start[e] = this._proxy[e] = n = i.getAttribute(e), t = this._addTween(this._proxy, e, parseFloat(n), r[e], e), this._end[e] = t ? t.s + t.c : r[e], this._overwriteProps.push(e);
                        return !0
                    },
                    set: function(e) {
                        this._super.setRatio.call(this, e);
                        for (var t, i = this._overwriteProps, r = i.length, n = 1 === e ? this._end : e ? this._proxy : this._start; --r > -1;) t = i[r], this._target.setAttribute(t, n[t] + "")
                    }
                }), t._gsDefine.plugin({
                    propName: "directionalRotation",
                    version: "0.2.1",
                    API: 2,
                    init: function(a, n) {
                        "object" != typeof n && (n = {
                            rotation: n
                        }), this.finals = {};
                        var t, r, o, l, e, s, i = n.useRadians === !0 ? 2 * Math.PI : 360,
                            c = 1e-6;
                        for (t in n) "useRadians" !== t && (s = (n[t] + "").split("_"), r = s[0], o = parseFloat("function" != typeof a[t] ? a[t] : a[t.indexOf("set") || "function" != typeof a["get" + t.substr(3)] ? t : "get" + t.substr(3)]()), l = this.finals[t] = "string" == typeof r && "=" === r.charAt(1) ? o + parseInt(r.charAt(0) + "1", 10) * Number(r.substr(2)) : Number(r) || 0, e = l - o, s.length && (r = s.join("_"), -1 !== r.indexOf("short") && (e %= i, e !== e % (i / 2) && (e = 0 > e ? e + i : e - i)), -1 !== r.indexOf("_cw") && 0 > e ? e = (e + 9999999999 * i) % i - (0 | e / i) * i : -1 !== r.indexOf("ccw") && e > 0 && (e = (e - 9999999999 * i) % i - (0 | e / i) * i)), (e > c || -c > e) && (this._addTween(a, t, o, o + e, t), this._overwriteProps.push(t)));
                        return !0
                    },
                    set: function(t) {
                        var e;
                        if (1 !== t) this._super.setRatio.call(this, t);
                        else
                            for (e = this._firstPT; e;) e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p], e = e._next
                    }
                })._autoCSS = !0, t._gsDefine("easing.Back", ["easing.Ease"], function(r) {
                    var l, a, h, _ = t.GreenSockGlobals || t,
                        g = _.com.greensock,
                        c = 2 * Math.PI,
                        f = Math.PI / 2,
                        n = g._class,
                        e = function(i, a) {
                            var e = n("easing." + i, function() {}, !0),
                                t = e.prototype = new r;
                            return t.constructor = e, t.getRatio = a, e
                        },
                        u = r.register || function() {},
                        s = function(e, i, r, a) {
                            var t = n("easing." + e, {
                                easeOut: new i,
                                easeIn: new r,
                                easeInOut: new a
                            }, !0);
                            return u(t, e), t
                        },
                        d = function(t, i, e) {
                            this.t = t, this.v = i, e && (this.next = e, e.prev = this, this.c = e.v - i, this.gap = e.t - t)
                        },
                        p = function(i, a) {
                            var e = n("easing." + i, function(e) {
                                    this._p1 = e || 0 === e ? e : 1.70158, this._p2 = 1.525 * this._p1
                                }, !0),
                                t = e.prototype = new r;
                            return t.constructor = e, t.getRatio = a, t.config = function(t) {
                                return new e(t)
                            }, e
                        },
                        m = s("Back", p("BackOut", function(e) {
                            return (e -= 1) * e * ((this._p1 + 1) * e + this._p1) + 1
                        }), p("BackIn", function(e) {
                            return e * e * ((this._p1 + 1) * e - this._p1)
                        }), p("BackInOut", function(e) {
                            return 1 > (e *= 2) ? .5 * e * e * ((this._p2 + 1) * e - this._p2) : .5 * ((e -= 2) * e * ((this._p2 + 1) * e + this._p2) + 2)
                        })),
                        o = n("easing.SlowMo", function(e, t, i) {
                            t = t || 0 === t ? t : .7, null == e ? e = .7 : e > 1 && (e = 1), this._p = 1 !== e ? t : 0, this._p1 = (1 - e) / 2, this._p2 = e, this._p3 = this._p1 + this._p2, this._calcEnd = i === !0
                        }, !0),
                        i = o.prototype = new r;
                    return i.constructor = o, i.getRatio = function(e) {
                        var t = e + (.5 - e) * this._p;
                        return this._p1 > e ? this._calcEnd ? 1 - (e = 1 - e / this._p1) * e : t - (e = 1 - e / this._p1) * e * e * e * t : e > this._p3 ? this._calcEnd ? 1 - (e = (e - this._p3) / this._p1) * e : t + (e - t) * (e = (e - this._p3) / this._p1) * e * e * e : this._calcEnd ? 1 : t
                    }, o.ease = new o(.7, .7), i.config = o.config = function(e, t, i) {
                        return new o(e, t, i)
                    }, l = n("easing.SteppedEase", function(e) {
                        e = e || 1, this._p1 = 1 / e, this._p2 = e + 1
                    }, !0), i = l.prototype = new r, i.constructor = l, i.getRatio = function(e) {
                        return 0 > e ? e = 0 : e >= 1 && (e = .999999999), (this._p2 * e >> 0) * this._p1
                    }, i.config = l.config = function(e) {
                        return new l(e)
                    }, a = n("easing.RoughEase", function(e) {
                        e = e || {};
                        for (var t, i, n, a, u, s, c = e.taper || "none", p = [], m = 0, h = 0 | (e.points || 20), o = h, _ = e.randomize !== !1, g = e.clamp === !0, f = e.template instanceof r ? e.template : null, l = "number" == typeof e.strength ? .4 * e.strength : .4; --o > -1;) t = _ ? Math.random() : 1 / h * o, i = f ? f.getRatio(t) : t, "none" === c ? n = l : "out" === c ? (a = 1 - t, n = a * a * l) : "in" === c ? n = t * t * l : .5 > t ? (a = 2 * t, n = .5 * a * a * l) : (a = 2 * (1 - t), n = .5 * a * a * l), _ ? i += Math.random() * n - .5 * n : o % 2 ? i += .5 * n : i -= .5 * n, g && (i > 1 ? i = 1 : 0 > i && (i = 0)), p[m++] = {
                            x: t,
                            y: i
                        };
                        for (p.sort(function(e, t) {
                                return e.x - t.x
                            }), s = new d(1, 1, null), o = h; --o > -1;) u = p[o], s = new d(u.x, u.y, s);
                        this._prev = new d(0, 0, 0 !== s.t ? s : s.next)
                    }, !0), i = a.prototype = new r, i.constructor = a, i.getRatio = function(t) {
                        var e = this._prev;
                        if (t > e.t) {
                            for (; e.next && t >= e.t;) e = e.next;
                            e = e.prev
                        } else
                            for (; e.prev && e.t >= t;) e = e.prev;
                        return this._prev = e, e.v + (t - e.t) / e.gap * e.c
                    }, i.config = function(e) {
                        return new a(e)
                    }, a.ease = new a, s("Bounce", e("BounceOut", function(e) {
                        return 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
                    }), e("BounceIn", function(e) {
                        return 1 / 2.75 > (e = 1 - e) ? 1 - 7.5625 * e * e : 2 / 2.75 > e ? 1 - (7.5625 * (e -= 1.5 / 2.75) * e + .75) : 2.5 / 2.75 > e ? 1 - (7.5625 * (e -= 2.25 / 2.75) * e + .9375) : 1 - (7.5625 * (e -= 2.625 / 2.75) * e + .984375)
                    }), e("BounceInOut", function(e) {
                        var t = .5 > e;
                        return e = t ? 1 - 2 * e : 2 * e - 1, e = 1 / 2.75 > e ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375, t ? .5 * (1 - e) : .5 * e + .5
                    })), s("Circ", e("CircOut", function(e) {
                        return Math.sqrt(1 - (e -= 1) * e)
                    }), e("CircIn", function(e) {
                        return -(Math.sqrt(1 - e * e) - 1)
                    }), e("CircInOut", function(e) {
                        return 1 > (e *= 2) ? -.5 * (Math.sqrt(1 - e * e) - 1) : .5 * (Math.sqrt(1 - (e -= 2) * e) + 1)
                    })), h = function(i, a, o) {
                        var e = n("easing." + i, function(e, t) {
                                this._p1 = e || 1, this._p2 = t || o, this._p3 = this._p2 / c * (Math.asin(1 / this._p1) || 0)
                            }, !0),
                            t = e.prototype = new r;
                        return t.constructor = e, t.getRatio = a, t.config = function(t, i) {
                            return new e(t, i)
                        }, e
                    }, s("Elastic", h("ElasticOut", function(e) {
                        return this._p1 * Math.pow(2, -10 * e) * Math.sin((e - this._p3) * c / this._p2) + 1
                    }, .3), h("ElasticIn", function(e) {
                        return -(this._p1 * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - this._p3) * c / this._p2))
                    }, .3), h("ElasticInOut", function(e) {
                        return 1 > (e *= 2) ? -.5 * this._p1 * Math.pow(2, 10 * (e -= 1)) * Math.sin((e - this._p3) * c / this._p2) : .5 * this._p1 * Math.pow(2, -10 * (e -= 1)) * Math.sin((e - this._p3) * c / this._p2) + 1
                    }, .45)), s("Expo", e("ExpoOut", function(e) {
                        return 1 - Math.pow(2, -10 * e)
                    }), e("ExpoIn", function(e) {
                        return Math.pow(2, 10 * (e - 1)) - .001
                    }), e("ExpoInOut", function(e) {
                        return 1 > (e *= 2) ? .5 * Math.pow(2, 10 * (e - 1)) : .5 * (2 - Math.pow(2, -10 * (e - 1)))
                    })), s("Sine", e("SineOut", function(e) {
                        return Math.sin(e * f)
                    }), e("SineIn", function(e) {
                        return -Math.cos(e * f) + 1
                    }), e("SineInOut", function(e) {
                        return -.5 * (Math.cos(Math.PI * e) - 1)
                    })), n("easing.EaseLookup", {
                        find: function(e) {
                            return r.map[e]
                        }
                    }, !0), u(_.SlowMo, "SlowMo", "ease,"), u(a, "RoughEase", "ease,"), u(l, "SteppedEase", "ease,"), m
                }, !0)
        }), t._gsDefine && t._gsQueue.pop()(), function(i, q) {
            "use strict";
            var E = i.GreenSockGlobals = i.GreenSockGlobals || i;
            if (!E.TweenLite) {
                var n, a, e, r, s, N = function(r) {
                        var e, i = r.split("."),
                            t = E;
                        for (e = 0; i.length > e; e++) t[i[e]] = t = t[i[e]] || {};
                        return t
                    },
                    d = N("com.greensock"),
                    o = 1e-10,
                    W = function(t) {
                        var e, i = [],
                            r = t.length;
                        for (e = 0; e !== r; i.push(t[e++]));
                        return i
                    },
                    X = function() {},
                    y = function() {
                        var e = Object.prototype.toString,
                            t = e.call([]);
                        return function(i) {
                            return null != i && (i instanceof Array || "object" == typeof i && !!i.push && e.call(i) === t)
                        }
                    }(),
                    v = {},
                    D = function(e, r, t, a) {
                        this.sc = v[e] ? v[e].sc : [], v[e] = this, this.gsClass = null, this.func = t;
                        var n = [];
                        this.check = function(d) {
                            for (var l, c, h, s, o = r.length, u = o; --o > -1;)(l = v[r[o]] || new D(r[o], [])).gsClass ? (n[o] = l.gsClass, u--) : d && l.sc.push(this);
                            if (0 === u && t)
                                for (c = ("com.greensock." + e).split("."), h = c.pop(), s = N(c.join("."))[h] = this.gsClass = t.apply(t, n), a && (E[h] = s, "function" == typeof define && define.amd ? define((i.GreenSockAMDPath ? i.GreenSockAMDPath + "/" : "") + e.split(".").pop(), [], function() {
                                        return s
                                    }) : e === q && "undefined" != typeof module && module.exports && (module.exports = s)), o = 0; this.sc.length > o; o++) this.sc[o].check()
                        }, this.check(!0)
                    },
                    I = i._gsDefine = function(e, t, i, r) {
                        return new D(e, t, i, r)
                    },
                    u = d._class = function(t, e, i) {
                        return e = e || function() {}, I(t, [], function() {
                            return e
                        }, i), e
                    };
                I.globals = E;
                var U = [0, 0, 1, 1],
                    k = [],
                    c = u("easing.Ease", function(t, e, i, r) {
                        this._func = t, this._type = i || 0, this._power = r || 0, this._params = e ? U.concat(e) : U
                    }, !0),
                    b = c.map = {},
                    z = c.register = function(i, c, h, l) {
                        for (var n, e, r, t, a = c.split(","), o = a.length, s = (h || "easeIn,easeOut,easeInOut").split(","); --o > -1;)
                            for (e = a[o], n = l ? u("easing." + e, null, !0) : d.easing[e] || {}, r = s.length; --r > -1;) t = s[r], b[e + "." + t] = b[t + e] = n[t] = i.getRatio ? i : i[t] || new i
                    };
                for (e = c.prototype, e._calcEnd = !1, e.getRatio = function(t) {
                        if (this._func) return this._params[0] = t, this._func.apply(null, this._params);
                        var i = this._type,
                            r = this._power,
                            e = 1 === i ? 1 - t : 2 === i ? t : .5 > t ? 2 * t : 2 * (1 - t);
                        return 1 === r ? e *= e : 2 === r ? e *= e * e : 3 === r ? e *= e * e * e : 4 === r && (e *= e * e * e * e), 1 === i ? 1 - e : 2 === i ? e : .5 > t ? e / 2 : 1 - e / 2
                    }, n = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"], a = n.length; --a > -1;) e = n[a] + ",Power" + a, z(new c(null, null, 1, a), e, "easeOut", !0), z(new c(null, null, 2, a), e, "easeIn" + (0 === a ? ",easeNone" : "")), z(new c(null, null, 3, a), e, "easeInOut");
                b.linear = d.easing.Linear.easeIn, b.swing = d.easing.Quad.easeInOut;
                var F = u("events.EventDispatcher", function(e) {
                    this._listeners = {}, this._eventTarget = e || this
                });
                e = F.prototype, e.addEventListener = function(o, l, c, h, i) {
                    i = i || 0;
                    var n, t, e = this._listeners[o],
                        a = 0;
                    for (null == e && (this._listeners[o] = e = []), t = e.length; --t > -1;) n = e[t], n.c === l && n.s === c ? e.splice(t, 1) : 0 === a && i > n.pr && (a = t + 1);
                    e.splice(a, 0, {
                        c: l,
                        s: c,
                        up: h,
                        pr: i
                    }), this !== r || s || r.wake()
                }, e.removeEventListener = function(i, r) {
                    var e, t = this._listeners[i];
                    if (t)
                        for (e = t.length; --e > -1;)
                            if (t[e].c === r) return void t.splice(e, 1)
                }, e.dispatchEvent = function(n) {
                    var i, t, e, r = this._listeners[n];
                    if (r)
                        for (i = r.length, t = this._eventTarget; --i > -1;) e = r[i], e.up ? e.c.call(e.s || t, {
                            type: n,
                            target: t
                        }) : e.c.call(e.s || t)
                };
                var T = i.requestAnimationFrame,
                    M = i.cancelAnimationFrame,
                    C = Date.now || function() {
                        return (new Date).getTime()
                    },
                    S = C();
                for (n = ["ms", "moz", "webkit", "o"], a = n.length; --a > -1 && !T;) T = i[n[a] + "RequestAnimationFrame"], M = i[n[a] + "CancelAnimationFrame"] || i[n[a] + "CancelRequestAnimationFrame"];
                u("Ticker", function(f, _) {
                    var i, h, t, l, a, e = this,
                        d = C(),
                        n = _ !== !1 && T,
                        c = 500,
                        p = 33,
                        u = function(o) {
                            var r, s, n = C() - S;
                            n > c && (d += n - p), S += n, e.time = (S - d) / 1e3, r = e.time - a, (!i || r > 0 || o === !0) && (e.frame++, a += r + (r >= l ? .004 : l - r), s = !0), o !== !0 && (t = h(u)), s && e.dispatchEvent("tick")
                        };
                    F.call(e), e.time = e.frame = 0, e.tick = function() {
                        u(!0)
                    }, e.lagSmoothing = function(e, t) {
                        c = e || 1 / o, p = Math.min(t, c, 0)
                    }, e.sleep = function() {
                        null != t && (n && M ? M(t) : clearTimeout(t), h = X, t = null, e === r && (s = !1))
                    }, e.wake = function() {
                        null !== t ? e.sleep() : e.frame > 10 && (S = C() - c + 5), h = 0 === i ? X : n && T ? T : function(t) {
                            return setTimeout(t, 0 | 1e3 * (a - e.time) + 1)
                        }, e === r && (s = !0), u(2)
                    }, e.fps = function(t) {
                        return arguments.length ? (i = t, l = 1 / (i || 60), a = this.time + l, void e.wake()) : i
                    }, e.useRAF = function(t) {
                        return arguments.length ? (e.sleep(), n = t, void e.fps(i)) : n
                    }, e.fps(f), setTimeout(function() {
                        n && (!t || 5 > e.frame) && e.useRAF(!1)
                    }, 1500)
                }), e = d.Ticker.prototype = new d.events.EventDispatcher, e.constructor = d.Ticker;
                var l = u("core.Animation", function(i, e) {
                    if (this.vars = e = e || {}, this._duration = this._totalDuration = i || 0, this._delay = Number(e.delay) || 0, this._timeScale = 1, this._active = e.immediateRender === !0, this.data = e.data, this._reversed = e.reversed === !0, p) {
                        s || r.wake();
                        var t = this.vars.useFrames ? f : p;
                        t.add(this, t._time), this.vars.paused && this.paused(!0)
                    }
                });
                r = l.ticker = new d.Ticker, e = l.prototype, e._dirty = e._gc = e._initted = e._paused = !1, e._totalTime = e._time = 0, e._rawPrevTime = -1, e._next = e._last = e._onUpdate = e._timeline = e.timeline = null, e._paused = !1;
                var B = function() {
                    s && C() - S > 2e3 && r.wake(), setTimeout(B, 2e3)
                };
                B(), e.play = function(e, t) {
                    return null != e && this.seek(e, t), this.reversed(!1).paused(!1)
                }, e.pause = function(e, t) {
                    return null != e && this.seek(e, t), this.paused(!0)
                }, e.resume = function(e, t) {
                    return null != e && this.seek(e, t), this.paused(!1)
                }, e.seek = function(e, t) {
                    return this.totalTime(Number(e), t !== !1)
                }, e.restart = function(e, t) {
                    return this.reversed(!1).paused(!1).totalTime(e ? -this._delay : 0, t !== !1, !0)
                }, e.reverse = function(e, t) {
                    return null != e && this.seek(e || this.totalDuration(), t), this.reversed(!0).paused(!1)
                }, e.render = function() {}, e.invalidate = function() {
                    return this
                }, e.isActive = function() {
                    var t, e = this._timeline,
                        i = this._startTime;
                    return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime()) >= i && i + this.totalDuration() / this._timeScale > t
                }, e._enabled = function(e, t) {
                    return s || r.wake(), this._gc = !e, this._active = this.isActive(), t !== !0 && (e && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !e && this.timeline && this._timeline._remove(this, !0)), !1
                }, e._kill = function() {
                    return this._enabled(!1, !1)
                }, e.kill = function(e, t) {
                    return this._kill(e, t), this
                }, e._uncache = function(t) {
                    for (var e = t ? this : this.timeline; e;) e._dirty = !0, e = e.timeline;
                    return this
                }, e._swapSelfInParams = function(e) {
                    for (var t = e.length, i = e.concat(); --t > -1;) "{self}" === e[t] && (i[t] = this);
                    return i
                }, e.eventCallback = function(e, r, i, n) {
                    if ("on" === (e || "").substr(0, 2)) {
                        var t = this.vars;
                        if (1 === arguments.length) return t[e];
                        null == r ? delete t[e] : (t[e] = r, t[e + "Params"] = y(i) && -1 !== i.join("").indexOf("{self}") ? this._swapSelfInParams(i) : i, t[e + "Scope"] = n), "onUpdate" === e && (this._onUpdate = r)
                    }
                    return this
                }, e.delay = function(e) {
                    return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + e - this._delay), this._delay = e, this) : this._delay
                }, e.duration = function(e) {
                    return arguments.length ? (this._duration = this._totalDuration = e, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== e && this.totalTime(this._totalTime * (e / this._duration), !0), this) : (this._dirty = !1, this._duration)
                }, e.totalDuration = function(e) {
                    return this._dirty = !1, arguments.length ? this.duration(e) : this._totalDuration
                }, e.time = function(e, t) {
                    return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(e > this._duration ? this._duration : e, t)) : this._time
                }, e.totalTime = function(t, a, n) {
                    if (s || r.wake(), !arguments.length) return this._totalTime;
                    if (this._timeline) {
                        if (0 > t && !n && (t += this.totalDuration()), this._timeline.smoothChildTiming) {
                            this._dirty && this.totalDuration();
                            var i = this._totalDuration,
                                e = this._timeline;
                            if (t > i && !n && (t = i), this._startTime = (this._paused ? this._pauseTime : e._time) - (this._reversed ? i - t : t) / this._timeScale, e._dirty || this._uncache(!1), e._timeline)
                                for (; e._timeline;) e._timeline._time !== (e._startTime + e._totalTime) / e._timeScale && e.totalTime(e._totalTime, !0), e = e._timeline
                        }
                        this._gc && this._enabled(!0, !1), (this._totalTime !== t || 0 === this._duration) && (this.render(t, a, !1), _.length && w())
                    }
                    return this
                }, e.progress = e.totalProgress = function(e, t) {
                    return arguments.length ? this.totalTime(this.duration() * e, t) : this._time / this.duration()
                }, e.startTime = function(e) {
                    return arguments.length ? (e !== this._startTime && (this._startTime = e, this.timeline && this.timeline._sortChildren && this.timeline.add(this, e - this._delay)), this) : this._startTime
                }, e.timeScale = function(e) {
                    if (!arguments.length) return this._timeScale;
                    if (e = e || o, this._timeline && this._timeline.smoothChildTiming) {
                        var t = this._pauseTime,
                            i = t || 0 === t ? t : this._timeline.totalTime();
                        this._startTime = i - (i - this._startTime) * this._timeScale / e
                    }
                    return this._timeScale = e, this._uncache(!1)
                }, e.reversed = function(e) {
                    return arguments.length ? (e != this._reversed && (this._reversed = e, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed
                }, e.paused = function(e) {
                    if (!arguments.length) return this._paused;
                    if (e != this._paused && this._timeline) {
                        s || e || r.wake();
                        var t = this._timeline,
                            i = t.rawTime(),
                            n = i - this._pauseTime;
                        !e && t.smoothChildTiming && (this._startTime += n, this._uncache(!1)), this._pauseTime = e ? i : null, this._paused = e, this._active = this.isActive(), !e && 0 !== n && this._initted && this.duration() && this.render(t.smoothChildTiming ? this._totalTime : (i - this._startTime) / this._timeScale, !0, !0)
                    }
                    return this._gc && !e && this._enabled(!0, !1), this
                };
                var A = u("core.SimpleTimeline", function(e) {
                    l.call(this, 0, e), this.autoRemoveChildren = this.smoothChildTiming = !0
                });
                e = A.prototype = new l, e.constructor = A, e.kill()._gc = !1, e._first = e._last = null, e._sortChildren = !1, e.add = e.insert = function(e, r) {
                    var t, i;
                    if (e._startTime = Number(r || 0) + e._delay, e._paused && this !== e._timeline && (e._pauseTime = e._startTime + (this.rawTime() - e._startTime) / e._timeScale), e.timeline && e.timeline._remove(e, !0), e.timeline = e._timeline = this, e._gc && e._enabled(!0, !0), t = this._last, this._sortChildren)
                        for (i = e._startTime; t && t._startTime > i;) t = t._prev;
                    return t ? (e._next = t._next, t._next = e) : (e._next = this._first, this._first = e), e._next ? e._next._prev = e : this._last = e, e._prev = t, this._timeline && this._uncache(!0), this
                }, e._remove = function(e, t) {
                    return e.timeline === this && (t || e._enabled(!1, !0), e._prev ? e._prev._next = e._next : this._first === e && (this._first = e._next), e._next ? e._next._prev = e._prev : this._last === e && (this._last = e._prev), e._next = e._prev = e.timeline = null, this._timeline && this._uncache(!0)), this
                }, e.render = function(t, i, r) {
                    var n, e = this._first;
                    for (this._totalTime = this._time = this._rawPrevTime = t; e;) n = e._next, (e._active || t >= e._startTime && !e._paused) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (t - e._startTime) * e._timeScale, i, r) : e.render((t - e._startTime) * e._timeScale, i, r)), e = n
                }, e.rawTime = function() {
                    return s || r.wake(), this._totalTime
                };
                var t = u("TweenLite", function(e, c, h) {
                        if (l.call(this, c, h), this.render = t.prototype.render, null == e) throw "Cannot tween a null target.";
                        this.target = e = "string" != typeof e ? e : t.selector(e) || e;
                        var n, r, a, u = e.jquery || e.length && e !== i && e[0] && (e[0] === i || e[0].nodeType && e[0].style && !e.nodeType),
                            s = this.vars.overwrite;
                        if (this._overwrite = s = null == s ? G[t.defaultOverwrite] : "number" == typeof s ? s >> 0 : G[s], (u || e instanceof Array || e.push && y(e)) && "number" != typeof e[0])
                            for (this._targets = a = W(e), this._propLookup = [], this._siblings = [], n = 0; a.length > n; n++) r = a[n], r ? "string" != typeof r ? r.length && r !== i && r[0] && (r[0] === i || r[0].nodeType && r[0].style && !r.nodeType) ? (a.splice(n--, 1), this._targets = a = a.concat(W(r))) : (this._siblings[n] = x(r, this, !1), 1 === s && this._siblings[n].length > 1 && R(r, this, null, 1, this._siblings[n])) : (r = a[n--] = t.selector(r), "string" == typeof r && a.splice(n + 1, 1)) : a.splice(n--, 1);
                        else this._propLookup = {}, this._siblings = x(e, this, !1), 1 === s && this._siblings.length > 1 && R(e, this, null, 1, this._siblings);
                        (this.vars.immediateRender || 0 === c && 0 === this._delay && this.vars.immediateRender !== !1) && (this._time = -o, this.render(-this._delay))
                    }, !0),
                    L = function(e) {
                        return e.length && e !== i && e[0] && (e[0] === i || e[0].nodeType && e[0].style && !e.nodeType)
                    },
                    V = function(t, r) {
                        var e, i = {};
                        for (e in t) O[e] || e in r && "transform" !== e && "x" !== e && "y" !== e && "width" !== e && "height" !== e && "className" !== e && "border" !== e || !(!g[e] || g[e] && g[e]._autoCSS) || (i[e] = t[e], delete t[e]);
                        t.css = i
                    };
                e = t.prototype = new l, e.constructor = t, e.kill()._gc = !1, e.ratio = 0, e._firstPT = e._targets = e._overwrittenProps = e._startAt = null, e._notifyPluginsOfEnabled = e._lazy = !1, t.version = "1.13.1", t.defaultEase = e._ease = new c(null, null, 1, 1), t.defaultOverwrite = "auto", t.ticker = r, t.autoSleep = !0, t.lagSmoothing = function(e, t) {
                    r.lagSmoothing(e, t)
                }, t.selector = i.$ || i.jQuery || function(e) {
                    var r = i.$ || i.jQuery;
                    return r ? (t.selector = r, r(e)) : "undefined" == typeof document ? e : document.querySelectorAll ? document.querySelectorAll(e) : document.getElementById("#" === e.charAt(0) ? e.substr(1) : e)
                };
                var _ = [],
                    P = {},
                    j = t._internals = {
                        isArray: y,
                        isSelector: L,
                        lazyTweens: _
                    },
                    g = t._plugins = {},
                    m = j.tweenLookup = {},
                    Y = 0,
                    O = j.reservedProps = {
                        ease: 1,
                        delay: 1,
                        overwrite: 1,
                        onComplete: 1,
                        onCompleteParams: 1,
                        onCompleteScope: 1,
                        useFrames: 1,
                        runBackwards: 1,
                        startAt: 1,
                        onUpdate: 1,
                        onUpdateParams: 1,
                        onUpdateScope: 1,
                        onStart: 1,
                        onStartParams: 1,
                        onStartScope: 1,
                        onReverseComplete: 1,
                        onReverseCompleteParams: 1,
                        onReverseCompleteScope: 1,
                        onRepeat: 1,
                        onRepeatParams: 1,
                        onRepeatScope: 1,
                        easeParams: 1,
                        yoyo: 1,
                        immediateRender: 1,
                        repeat: 1,
                        repeatDelay: 1,
                        data: 1,
                        paused: 1,
                        reversed: 1,
                        autoCSS: 1,
                        lazy: 1
                    },
                    G = {
                        none: 0,
                        all: 1,
                        auto: 2,
                        concurrent: 3,
                        allOnStart: 4,
                        preexisting: 5,
                        "true": 1,
                        "false": 0
                    },
                    f = l._rootFramesTimeline = new A,
                    p = l._rootTimeline = new A,
                    w = j.lazyRender = function() {
                        var e = _.length;
                        for (P = {}; --e > -1;) n = _[e], n && n._lazy !== !1 && (n.render(n._lazy, !1, !0), n._lazy = !1);
                        _.length = 0
                    };
                p._startTime = r.time, f._startTime = r.frame, p._active = f._active = !0, setTimeout(w, 1), l._updateRoot = t.render = function() {
                    var n, i, e;
                    if (_.length && w(), p.render((r.time - p._startTime) * p._timeScale, !1, !1), f.render((r.frame - f._startTime) * f._timeScale, !1, !1), _.length && w(), !(r.frame % 120)) {
                        for (e in m) {
                            for (i = m[e].tweens, n = i.length; --n > -1;) i[n]._gc && i.splice(n, 1);
                            0 === i.length && delete m[e]
                        }
                        if (e = p._first, (!e || e._paused) && t.autoSleep && !f._first && 1 === r._listeners.tick.length) {
                            for (; e && e._paused;) e = e._next;
                            e || r.sleep()
                        }
                    }
                }, r.addEventListener("tick", l._updateRoot);
                var x = function(r, n, a) {
                        var e, i, t = r._gsTweenID;
                        if (m[t || (r._gsTweenID = t = "t" + Y++)] || (m[t] = {
                                target: r,
                                tweens: []
                            }), n && (e = m[t].tweens, e[i = e.length] = n, a))
                            for (; --i > -1;) e[i] === n && e.splice(i, 1);
                        return m[t].tweens
                    },
                    R = function(_, i, p, r, a) {
                        var t, n, e, d;
                        if (1 === r || r >= 4) {
                            for (d = a.length, t = 0; d > t; t++)
                                if ((e = a[t]) !== i) e._gc || e._enabled(!1, !1) && (n = !0);
                                else if (5 === r) break;
                            return n
                        }
                        var h, u = i._startTime + o,
                            c = [],
                            s = 0,
                            l = 0 === i._duration;
                        for (t = a.length; --t > -1;)(e = a[t]) === i || e._gc || e._paused || (e._timeline !== i._timeline ? (h = h || H(i, 0, l), 0 === H(e, h, l) && (c[s++] = e)) : u >= e._startTime && e._startTime + e.totalDuration() / e._timeScale > u && ((l || !e._initted) && 2e-10 >= u - e._startTime || (c[s++] = e)));
                        for (t = s; --t > -1;) e = c[t], 2 === r && e._kill(p, _) && (n = !0), (2 !== r || !e._firstPT && e._initted) && e._enabled(!1, !1) && (n = !0);
                        return n
                    },
                    H = function(r, i, a) {
                        for (var t = r._timeline, n = t._timeScale, e = r._startTime; t._timeline;) {
                            if (e += t._startTime, n *= t._timeScale, t._paused) return -100;
                            t = t._timeline
                        }
                        return e /= n, e > i ? e - i : a && e === i || !r._initted && 2 * o > e - i ? o : (e += r.totalDuration() / r._timeScale / n) > i + o ? 0 : e - i - o
                    };
                e._init = function() {
                    var o, h, e, n, a, i = this.vars,
                        l = this._overwrittenProps,
                        u = this._duration,
                        s = !!i.immediateRender,
                        r = i.ease;
                    if (i.startAt) {
                        this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), a = {};
                        for (n in i.startAt) a[n] = i.startAt[n];
                        if (a.overwrite = !1, a.immediateRender = !0, a.lazy = s && i.lazy !== !1, a.startAt = a.delay = null, this._startAt = t.to(this.target, 0, a), s)
                            if (this._time > 0) this._startAt = null;
                            else if (0 !== u) return
                    } else if (i.runBackwards && 0 !== u)
                        if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null;
                        else {
                            e = {};
                            for (n in i) O[n] && "autoCSS" !== n || (e[n] = i[n]);
                            if (e.overwrite = 0, e.data = "isFromStart", e.lazy = s && i.lazy !== !1, e.immediateRender = s, this._startAt = t.to(this.target, 0, e), s) {
                                if (0 === this._time) return
                            } else this._startAt._init(), this._startAt._enabled(!1)
                        }
                    if (this._ease = r = r ? r instanceof c ? r : "function" == typeof r ? new c(r, i.easeParams) : b[r] || t.defaultEase : t.defaultEase, i.easeParams instanceof Array && r.config && (this._ease = r.config.apply(r, i.easeParams)), this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)
                        for (o = this._targets.length; --o > -1;) this._initProps(this._targets[o], this._propLookup[o] = {}, this._siblings[o], l ? l[o] : null) && (h = !0);
                    else h = this._initProps(this.target, this._propLookup, this._siblings, l);
                    if (h && t._onPluginEvent("_onInitAllProps", this), l && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), i.runBackwards)
                        for (e = this._firstPT; e;) e.s += e.c, e.c = -e.c, e = e._next;
                    this._onUpdate = i.onUpdate, this._initted = !0
                }, e._initProps = function(e, o, s, l) {
                    var t, c, h, a, n, r;
                    if (null == e) return !1;
                    P[e._gsTweenID] && w(), this.vars.css || e.style && e !== i && e.nodeType && g.css && this.vars.autoCSS !== !1 && V(this.vars, e);
                    for (t in this.vars) {
                        if (r = this.vars[t], O[t]) r && (r instanceof Array || r.push && y(r)) && -1 !== r.join("").indexOf("{self}") && (this.vars[t] = r = this._swapSelfInParams(r, this));
                        else if (g[t] && (a = new g[t])._onInitTween(e, this.vars[t], this)) {
                            for (this._firstPT = n = {
                                    _next: this._firstPT,
                                    t: a,
                                    p: "setRatio",
                                    s: 0,
                                    c: 1,
                                    f: !0,
                                    n: t,
                                    pg: !0,
                                    pr: a._priority
                                }, c = a._overwriteProps.length; --c > -1;) o[a._overwriteProps[c]] = this._firstPT;
                            (a._priority || a._onInitAllProps) && (h = !0), (a._onDisable || a._onEnable) && (this._notifyPluginsOfEnabled = !0)
                        } else this._firstPT = o[t] = n = {
                            _next: this._firstPT,
                            t: e,
                            p: t,
                            f: "function" == typeof e[t],
                            n: t,
                            pg: !1,
                            pr: 0
                        }, n.s = n.f ? e[t.indexOf("set") || "function" != typeof e["get" + t.substr(3)] ? t : "get" + t.substr(3)]() : parseFloat(e[t]), n.c = "string" == typeof r && "=" === r.charAt(1) ? parseInt(r.charAt(0) + "1", 10) * Number(r.substr(2)) : Number(r) - n.s || 0;
                        n && n._next && (n._next._prev = n)
                    }
                    return l && this._kill(l, e) ? this._initProps(e, o, s, l) : this._overwrite > 1 && this._firstPT && s.length > 1 && R(e, this, o, this._overwrite, s) ? (this._kill(o, e), this._initProps(e, o, s, l)) : (this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration) && (P[e._gsTweenID] = !0), h)
                }, e.render = function(e, l, r) {
                    var h, a, i, p, c = this._time,
                        n = this._duration,
                        s = this._rawPrevTime;
                    if (e >= n) this._totalTime = this._time = n, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (h = !0, a = "onComplete"), 0 === n && (this._initted || !this.vars.lazy || r) && (this._startTime === this._timeline._duration && (e = 0), (0 === e || 0 > s || s === o) && s !== e && (r = !0, s > o && (a = "onReverseComplete")), this._rawPrevTime = p = !l || e || s === e ? e : o);
                    else if (1e-7 > e) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== c || 0 === n && s > 0 && s !== o) && (a = "onReverseComplete", h = this._reversed), 0 > e ? (this._active = !1, 0 === n && (this._initted || !this.vars.lazy || r) && (s >= 0 && (r = !0), this._rawPrevTime = p = !l || e || s === e ? e : o)) : this._initted || (r = !0);
                    else if (this._totalTime = this._time = e, this._easeType) {
                        var t = e / n,
                            u = this._easeType,
                            d = this._easePower;
                        (1 === u || 3 === u && t >= .5) && (t = 1 - t), 3 === u && (t *= 2), 1 === d ? t *= t : 2 === d ? t *= t * t : 3 === d ? t *= t * t * t : 4 === d && (t *= t * t * t * t), this.ratio = 1 === u ? 1 - t : 2 === u ? t : .5 > e / n ? t / 2 : 1 - t / 2
                    } else this.ratio = this._ease.getRatio(e / n);
                    if (this._time !== c || r) {
                        if (!this._initted) {
                            if (this._init(), !this._initted || this._gc) return;
                            if (!r && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = c, this._rawPrevTime = s, _.push(this), void(this._lazy = e);
                            this._time && !h ? this.ratio = this._ease.getRatio(this._time / n) : h && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                        }
                        for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== c && e >= 0 && (this._active = !0), 0 === c && (this._startAt && (e >= 0 ? this._startAt.render(e, l, r) : a || (a = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === n) && (l || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || k))), i = this._firstPT; i;) i.f ? i.t[i.p](i.c * this.ratio + i.s) : i.t[i.p] = i.c * this.ratio + i.s, i = i._next;
                        this._onUpdate && (0 > e && this._startAt && this._startTime && this._startAt.render(e, l, r), l || (this._time !== c || h) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || k)), a && (!this._gc || r) && (0 > e && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(e, l, r), h && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !l && this.vars[a] && this.vars[a].apply(this.vars[a + "Scope"] || this, this.vars[a + "Params"] || k), 0 === n && this._rawPrevTime === o && p !== o && (this._rawPrevTime = 0))
                    }
                }, e._kill = function(r, i) {
                    if ("all" === r && (r = null), null == r && (null == i || i === this.target)) return this._lazy = !1, this._enabled(!1, !1);
                    i = "string" != typeof i ? i || this._targets || this.target : t.selector(i) || i;
                    var n, o, s, e, a, l, c, h;
                    if ((y(i) || L(i)) && "number" != typeof i[0])
                        for (n = i.length; --n > -1;) this._kill(r, i[n]) && (l = !0);
                    else {
                        if (this._targets) {
                            for (n = this._targets.length; --n > -1;)
                                if (i === this._targets[n]) {
                                    a = this._propLookup[n] || {}, this._overwrittenProps = this._overwrittenProps || [], o = this._overwrittenProps[n] = r ? this._overwrittenProps[n] || {} : "all";
                                    break
                                }
                        } else {
                            if (i !== this.target) return !1;
                            a = this._propLookup, o = this._overwrittenProps = r ? this._overwrittenProps || {} : "all"
                        }
                        if (a) {
                            c = r || a, h = r !== o && "all" !== o && r !== a && ("object" != typeof r || !r._tempKill);
                            for (s in c)(e = a[s]) && (e.pg && e.t._kill(c) && (l = !0), e.pg && 0 !== e.t._overwriteProps.length || (e._prev ? e._prev._next = e._next : e === this._firstPT && (this._firstPT = e._next), e._next && (e._next._prev = e._prev), e._next = e._prev = null), delete a[s]), h && (o[s] = 1);
                            !this._firstPT && this._initted && this._enabled(!1, !1)
                        }
                    }
                    return l
                }, e.invalidate = function() {
                    return this._notifyPluginsOfEnabled && t._onPluginEvent("_onDisable", this), this._firstPT = null, this._overwrittenProps = null, this._onUpdate = null, this._startAt = null, this._initted = this._active = this._notifyPluginsOfEnabled = this._lazy = !1, this._propLookup = this._targets ? {} : [], this
                }, e._enabled = function(i, a) {
                    if (s || r.wake(), i && this._gc) {
                        var e, n = this._targets;
                        if (n)
                            for (e = n.length; --e > -1;) this._siblings[e] = x(n[e], this, !0);
                        else this._siblings = x(this.target, this, !0)
                    }
                    return l.prototype._enabled.call(this, i, a), this._notifyPluginsOfEnabled && this._firstPT ? t._onPluginEvent(i ? "_onEnable" : "_onDisable", this) : !1
                }, t.to = function(e, i, r) {
                    return new t(e, i, r)
                }, t.from = function(i, r, e) {
                    return e.runBackwards = !0, e.immediateRender = 0 != e.immediateRender, new t(i, r, e)
                }, t.fromTo = function(r, n, i, e) {
                    return e.startAt = i, e.immediateRender = 0 != e.immediateRender && 0 != i.immediateRender, new t(r, n, e)
                }, t.delayedCall = function(n, e, i, r, a) {
                    return new t(e, 0, {
                        delay: n,
                        onComplete: e,
                        onCompleteParams: i,
                        onCompleteScope: r,
                        onReverseComplete: e,
                        onReverseCompleteParams: i,
                        onReverseCompleteScope: r,
                        immediateRender: !1,
                        useFrames: a,
                        overwrite: 0
                    })
                }, t.set = function(e, i) {
                    return new t(e, 0, i)
                }, t.getTweensOf = function(r, a) {
                    if (null == r) return [];
                    r = "string" != typeof r ? r : t.selector(r) || r;
                    var e, i, n, o;
                    if ((y(r) || L(r)) && "number" != typeof r[0]) {
                        for (e = r.length, i = []; --e > -1;) i = i.concat(t.getTweensOf(r[e], a));
                        for (e = i.length; --e > -1;)
                            for (o = i[e], n = e; --n > -1;) o === i[n] && i.splice(e, 1)
                    } else
                        for (i = x(r).concat(), e = i.length; --e > -1;)(i[e]._gc || a && !i[e].isActive()) && i.splice(e, 1);
                    return i
                }, t.killTweensOf = t.killDelayedCallsTo = function(i, e, r) {
                    "object" == typeof e && (r = e, e = !1);
                    for (var n = t.getTweensOf(i, e), a = n.length; --a > -1;) n[a]._kill(r, i)
                };
                var h = u("plugins.TweenPlugin", function(e, t) {
                    this._overwriteProps = (e || "").split(","), this._propName = this._overwriteProps[0], this._priority = t || 0, this._super = h.prototype
                }, !0);
                if (e = h.prototype, h.version = "1.10.1", h.API = 2, e._firstPT = null, e._addTween = function(r, i, n, e, o, s) {
                        var a, t;
                        return null != e && (a = "number" == typeof e || "=" !== e.charAt(1) ? Number(e) - n : parseInt(e.charAt(0) + "1", 10) * Number(e.substr(2))) ? (this._firstPT = t = {
                            _next: this._firstPT,
                            t: r,
                            p: i,
                            s: n,
                            c: a,
                            f: "function" == typeof r[i],
                            n: o || i,
                            r: s
                        }, t._next && (t._next._prev = t), t) : void 0
                    }, e.setRatio = function(r) {
                        for (var t, e = this._firstPT, i = 1e-6; e;) t = e.c * r + e.s, e.r ? t = Math.round(t) : i > t && t > -i && (t = 0), e.f ? e.t[e.p](t) : e.t[e.p] = t, e = e._next
                    }, e._kill = function(i) {
                        var t, r = this._overwriteProps,
                            e = this._firstPT;
                        if (null != i[this._propName]) this._overwriteProps = [];
                        else
                            for (t = r.length; --t > -1;) null != i[r[t]] && r.splice(t, 1);
                        for (; e;) null != i[e.n] && (e._next && (e._next._prev = e._prev), e._prev ? (e._prev._next = e._next, e._prev = null) : this._firstPT === e && (this._firstPT = e._next)), e = e._next;
                        return !1
                    }, e._roundProps = function(t, i) {
                        for (var e = this._firstPT; e;)(t[this._propName] || null != e.n && t[e.n.split(this._propName + "_").join("")]) && (e.r = i), e = e._next
                    }, t._onPluginEvent = function(i, n) {
                        var a, t, r, o, s, e = n._firstPT;
                        if ("_onInitAllProps" === i) {
                            for (; e;) {
                                for (s = e._next, t = r; t && t.pr > e.pr;) t = t._next;
                                (e._prev = t ? t._prev : o) ? e._prev._next = e: r = e, (e._next = t) ? t._prev = e : o = e, e = s
                            }
                            e = n._firstPT = r
                        }
                        for (; e;) e.pg && "function" == typeof e.t[i] && e.t[i]() && (a = !0), e = e._next;
                        return a
                    }, h.activate = function(e) {
                        for (var t = e.length; --t > -1;) e[t].API === h.API && (g[(new e[t])._propName] = e[t]);
                        return !0
                    }, I.plugin = function(e) {
                        if (!(e && e.propName && e.init && e.API)) throw "illegal plugin definition.";
                        var i, r = e.propName,
                            o = e.priority || 0,
                            s = e.overwriteProps,
                            n = {
                                init: "_onInitTween",
                                set: "setRatio",
                                kill: "_kill",
                                round: "_roundProps",
                                initAll: "_onInitAllProps"
                            },
                            t = u("plugins." + r.charAt(0).toUpperCase() + r.substr(1) + "Plugin", function() {
                                h.call(this, r, o), this._overwriteProps = s || []
                            }, e.global === !0),
                            a = t.prototype = new h(r);
                        a.constructor = t, t.API = e.API;
                        for (i in n) "function" == typeof e[i] && (a[n[i]] = e[i]);
                        return t.version = e.version, h.activate([t]), t
                    }, n = i._gsQueue) {
                    for (a = 0; n.length > a; a++) n[a]();
                    for (e in v) v[e].func || i.console.log("GSAP encountered missing dependency: com.greensock." + e)
                }
                s = !1
            }
        }("undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window, "TweenMax"), void
        function(t) {
            "use strict";
            var l = t.GreenSockGlobals || t,
                _ = function(r) {
                    for (var i = r.split("."), e = l, t = 0; t < i.length; t++) e[i[t]] || (e[i[t]] = {}), e = e[i[t]];
                    return e
                },
                p = _("com.greensock.utils"),
                r = function(e) {
                    var t = e.nodeType,
                        i = "";
                    if (3 == t || 4 == t) return e.nodeValue;
                    if (1 == t || 9 == t || 11 == b) {
                        if ("string" == typeof e.textContent) return e.textContent;
                        for (e = e.firstChild; e; e = e.nextSibling) i += r(e)
                    }
                    return i
                },
                e = function(r, n, e, a) {
                    if (e || (e = t.getComputedStyle(r, null)), e) {
                        var i = e.getPropertyValue(n.replace(/([A-Z])/g, "-$1").toLowerCase());
                        return i || e.length ? i : e[n]
                    }
                    var i = void 0;
                    if (r.currentStyle) {
                        e = r.currentStyle;
                        var i = e[n]
                    }
                    return a ? i : parseInt(i, 10) || 0
                },
                o = function(e) {
                    return e.length && e[0] && (e[0].nodeType && e[0].style && !e.nodeType || e[0].length && e[0][0]) ? !0 : !1
                },
                h = function(n) {
                    var i, e, t, r = [],
                        a = n.length;
                    for (i = 0; a > i; i++)
                        if (e = n[i], o(e))
                            for (t = e.length, t = 0; t < e.length; t++) r.push(e[t]);
                        else r.push(e);
                    return r
                },
                c = ")eefec303079ad17405c",
                s = /(?:<br>|<br\/>|<br \/>)/gi,
                u = document.all && !document.addEventListener,
                d = "<div style='position:relative;display:inline-block;" + (u ? "*display:inline;*zoom:1;'" : "'"),
                a = function(e) {
                    e = e || "";
                    var t = -1 !== e.indexOf("++"),
                        i = 1;
                    return function() {
                        return d + (e ? " class='" + e + (t ? i++ : "") + "'>" : ">")
                    }
                },
                i = p.SplitText = l.SplitText = function(e, t) {
                    if ("string" == typeof e && (e = i.selector(e)), !e) throw "cannot split a null element.";
                    this.elements = o(e) ? h(e) : [e], this.chars = [], this.words = [], this.lines = [], this._originals = [], this.vars = t || {}, this.split(t)
                },
                f = function(i, v, I, Y, D) {
                    s.test(i.innerHTML) && (i.innerHTML = i.innerHTML.replace(s, c));
                    var w, p, x, o, f, C, b, n, _, l, m, O, z, k = r(i),
                        M = v.type || v.split || "chars,words,lines",
                        g = -1 !== M.indexOf("lines") ? [] : null,
                        y = -1 !== M.indexOf("words"),
                        T = -1 !== M.indexOf("chars"),
                        h = "absolute" === v.position || v.absolute === !0,
                        X = h ? "&#173; " : " ",
                        P = -999,
                        d = t.getComputedStyle(i),
                        j = e(i, "paddingLeft", d),
                        N = e(i, "borderBottomWidth", d) + e(i, "borderTopWidth", d),
                        G = e(i, "borderLeftWidth", d) + e(i, "borderRightWidth", d),
                        U = e(i, "paddingTop", d) + e(i, "paddingBottom", d),
                        W = e(i, "paddingLeft", d) + e(i, "paddingRight", d),
                        B = e(i, "textAlign", d, !0),
                        A = i.clientHeight,
                        E = i.clientWidth,
                        u = k.length,
                        L = "</div>",
                        R = a(v.wordsClass),
                        H = a(v.charsClass),
                        F = -1 !== (v.linesClass || "").indexOf("++"),
                        S = v.linesClass;
                    for (F && (S = S.split("++").join("")), x = R(), o = 0; u > o; o++) C = k.charAt(o), ")" === C && k.substr(o, 20) === c ? (x += L + "<BR/>", o !== u - 1 && (x += " " + R()), o += 19) : " " === C && " " !== k.charAt(o - 1) && o !== u - 1 ? (x += L, o !== u - 1 && (x += X + R())) : x += T && " " !== C ? H() + C + "</div>" : C;
                    for (i.innerHTML = x + L, f = i.getElementsByTagName("*"), u = f.length, b = [], o = 0; u > o; o++) b[o] = f[o];
                    if (g || h)
                        for (o = 0; u > o; o++) n = b[o], p = n.parentNode === i, (p || h || T && !y) && (_ = n.offsetTop, g && p && _ !== P && "BR" !== n.nodeName && (w = [], g.push(w), P = _), h && (n._x = n.offsetLeft, n._y = _, n._w = n.offsetWidth, n._h = n.offsetHeight), g && (y !== p && (T || (w.push(n), n._x -= j)), p && o && (b[o - 1]._wordEnd = !0)));
                    for (o = 0; u > o; o++) n = b[o], p = n.parentNode === i, "BR" !== n.nodeName ? (h && (m = n.style, y || p || (n._x += n.parentNode._x, n._y += n.parentNode._y), m.left = n._x + "px", m.top = n._y + "px", m.position = "absolute", m.display = "block", m.width = n._w + 1 + "px", m.height = n._h + "px"), y ? p ? Y.push(n) : T && I.push(n) : p ? (i.removeChild(n), b.splice(o--, 1), u--) : !p && T && (_ = !g && !h && n.nextSibling, i.appendChild(n), _ || i.appendChild(document.createTextNode(" ")), I.push(n))) : g || h ? (i.removeChild(n), b.splice(o--, 1), u--) : y || i.appendChild(n);
                    if (g) {
                        for (h && (l = document.createElement("div"), i.appendChild(l), O = l.offsetWidth + "px", _ = l.offsetParent === i ? 0 : i.offsetLeft, i.removeChild(l)), m = i.style.cssText, i.style.cssText = "display:none;"; i.firstChild;) i.removeChild(i.firstChild);
                        for (z = !h || !y && !T, o = 0; o < g.length; o++) {
                            for (w = g[o], l = document.createElement("div"), l.style.cssText = "display:block;text-align:" + B + ";position:" + (h ? "absolute;" : "relative;"), S && (l.className = S + (F ? o + 1 : "")), D.push(l), u = w.length, f = 0; u > f; f++) "BR" !== w[f].nodeName && (n = w[f], l.appendChild(n), z && (n._wordEnd || y) && l.appendChild(document.createTextNode(" ")), h && (0 === f && (l.style.top = n._y + "px", l.style.left = j + _ + "px"), n.style.top = "0px", _ && (n.style.left = n._x - _ + "px")));
                            y || T || (l.innerHTML = r(l).split(String.fromCharCode(160)).join(" ")), h && (l.style.width = O, l.style.height = n._h + "px"), i.appendChild(l)
                        }
                        i.style.cssText = m
                    }
                    h && (A > i.clientHeight && (i.style.height = A - U + "px", A > i.clientHeight && (i.style.height = A + N + "px")), E > i.clientWidth && (i.style.width = E - W + "px", E > i.clientWidth && (i.style.width = E + G + "px")))
                },
                n = i.prototype;
            n.split = function(t) {
                this.isSplit && this.revert(), this.vars = t || this.vars, this._originals.length = this.chars.length = this.words.length = this.lines.length = 0;
                for (var e = 0; e < this.elements.length; e++) this._originals[e] = this.elements[e].innerHTML, f(this.elements[e], this.vars, this.chars, this.words, this.lines);
                return this.isSplit = !0, this
            }, n.revert = function() {
                if (!this._originals) throw "revert() call wasn't scoped properly.";
                for (var e = this._originals.length; --e > -1;) this.elements[e].innerHTML = this._originals[e];
                return this.chars = [], this.words = [], this.lines = [], this.isSplit = !1, this
            }, i.selector = t.$ || t.jQuery || function() {
                return t.$ ? (i.selector = t.$, t.$("")) : document ? document.getElementById("#" === "".charAt(0) ? "".substr(1) : "") : ""
            }
        }(window), void
        function() {
            function t(e, t) {
                (!e || "keyup" != e.type || "undefined" == typeof e.keyCode || 0 != e.keyCode && 13 == e.keyCode) && (t.destroy_listeners(), t.parentNode.removeChild(t), t.callback_ok())
            }

            function r(e, t) {
                (!e || "keyup" != e.type || "undefined" == typeof e.keyCode || 0 != e.keyCode && 27 == e.keyCode) && (t.destroy_listeners(), t.parentNode.removeChild(t), t.callback_cancel())
            }

            function n(i, e) {
                if ("undefined" == typeof i) var e = e.primary,
                    i = e.secondary;
                var r = {};
                for (var t in i) r[t] = i[t];
                for (var t in e) r[t] = e[t];
                return r
            }
            var e = {};
            e.ok = "Ok", e.cancel = "Cancel", e.point_event = "click", e.parent = document.body, e.zindex = 1e4, e.reverse_buttons = !1, e.autofocus = !0, e.autoexit = !0, e.custom_css = {}, e.css_prefix = "smoke", e.value = void 0, e.callback = void 0, e.observe_mutation = !0, e.window_opened = void 0, e.window_closed = void 0, e.build = function(c, t) {
                ("undefined" == typeof e.parent || null == e.parent) && (e.parent = document.body);
                var E = "undefined" != typeof t.ok ? t.ok : e.ok,
                    S = "undefined" != typeof t.cancel ? t.cancel : e.cancel,
                    v = "undefined" != typeof t.point_event ? t.point_event : e.point_event,
                    p = "undefined" != typeof t.parent ? t.parent : e.parent,
                    C = "undefined" != typeof t.zindex ? t.zindex : e.zindex,
                    w = ("undefined" != typeof t.reverse_buttons ? t.reverse_buttons : e.reverse_buttons, "undefined" != typeof t.autoexit ? t.autoexit : e.autoexit),
                    x = "undefined" != typeof t.autofocus ? t.autofocus : e.autofocus,
                    g = "undefined" != typeof t.custom_css ? t.custom_css : e.custom_css,
                    n = "undefined" != typeof t.css_prefix ? t.css_prefix : e.css_prefix,
                    y = "undefined" != typeof t.value ? t.value : e.value,
                    b = "undefined" != typeof t.callback ? t.callback : e.callback,
                    A = "undefined" != typeof t.observe_mutation ? t.observe_mutation : e.observe_mutation,
                    l = ("undefined" != typeof t.window_opened ? t.window_opened : e.window_opened, "undefined" != typeof t.window_closed ? t.window_closed : e.window_closed, !1);
                t.point_event = v, t.callback = b;
                var i = document.createElement("div");
                i.className = n + "-base", i.style.zIndex = C, p.appendChild(i);
                var h = i.dialog_wrapper = document.createElement("div");
                h.className = n + "-dialog_wrapper", i.appendChild(h), w && h.addEventListener(v, function(r) {
                    "undefined" != typeof r.changedTouches && (r = r.changedTouches[0]), r.currentTarget == r.target && (i.parentNode.removeChild(i), t.callback(!1, r), !l && e.window_closed && (e.window_closed(i, c, t), l = !0))
                });
                var o = i.dialog = document.createElement("div");
                o.className = n + "-dialog", h.appendChild(o);
                var d = i.text = i.dialog.text = document.createElement("div");
                if (d.className = n + "-dialog-text", d.innerHTML = c, o.appendChild(d), "prompt" == t.type) {
                    var a = i.prompt = i.dialog.prompt = document.createElement("div");
                    a.className = n + "-prompt", a.input = document.createElement("input"), a.input.type = "text", a.input.className = n + "-prompt-input", "undefined" != typeof y && (a.input.value = y), a.appendChild(a.input), o.appendChild(a)
                }
                var r = i.buttons = i.dialog.buttons = document.createElement("div");
                r.className = n + "-dialog-buttons", r.ok = document.createElement("button"), r.ok.className = n + "-dialog-buttons-ok", r.ok.innerHTML = E, "alert" == t.type && r.appendChild(r.ok), ("prompt" == t.type || "confirm" == t.type) && (r.cancel = document.createElement("button"), r.cancel.className = n + "-dialog-buttons-cancel", r.cancel.innerHTML = S, t.reverse_buttons ? (r.appendChild(r.cancel), r.appendChild(r.ok)) : (r.appendChild(r.ok), r.appendChild(r.cancel))), o.appendChild(r);
                for (var f in g) {
                    var T = f.split("."),
                        u = i;
                    T.forEach(function(e) {
                        u = u[e]
                    });
                    var s = g[f];
                    "string" == typeof s && (s = [s]), s.forEach(function(e) {
                        u.classList.add(e)
                    })
                }
                if ("function" != typeof t.callback && (t.callback = function() {}), i.params = t, e["finishbuilding_" + t.type](i, t), "undefined" != typeof i.prompt && 0 != x && i.prompt.input.focus(), A) {
                    var _ = window.MutationObserver || window.WebkitMutationObserver;
                    if ("undefined" != typeof _) {
                        var m = new _(function(o) {
                            for (var r = 0, s = o.length; s > r; r++) {
                                var n = o[r];
                                if ("childList" != n.type) return;
                                for (var a = 0, h = n.removedNodes.length; h > a; a++)
                                    if (n.removedNodes[a] == i) return !l && e.window_closed && (e.window_closed(i, c, t), l = !0), void i.destroy_listeners(m)
                            }
                        });
                        m.observe(p, {
                            attributes: !1,
                            childList: !0,
                            subtree: !1
                        })
                    }
                }
                return e.window_opened && e.window_opened(i, c, t), i
            }, e.finishbuilding_alert = function(e) {
                e.callback_ok = function() {
                    e.params.callback()
                }, e.destroy_listeners = function(e) {
                    e && e.disconnect(), document.removeEventListener("keyup", i)
                };
                var i = e.ok = function(i) {
                    t(i, e)
                };
                document.addEventListener("keyup", i), e.buttons.ok.addEventListener(e.params.point_event, i), e.buttons.ok.smoke_pure_obj = e
            }, e.finishbuilding_confirm = function(e) {
                e.callback_ok = function() {
                    e.params.callback(!0)
                }, e.callback_cancel = function() {
                    e.params.callback(!1)
                }, e.destroy_listeners = function(e) {
                    e && e.disconnect(), document.removeEventListener("keyup", i), document.removeEventListener("keyup", n)
                };
                var i = e.ok = function(i) {
                        t(i, e)
                    },
                    n = e.cancel = function(t) {
                        r(t, e)
                    };
                document.addEventListener("keyup", i), e.buttons.ok.addEventListener(e.params.point_event, i), document.addEventListener("keyup", n), e.buttons.cancel.addEventListener(e.params.point_event, n), e.buttons.ok.smoke_pure_obj = e, e.buttons.cancel.smoke_pure_obj = e
            }, e.finishbuilding_prompt = function(e) {
                e.callback_ok = function() {
                    e.params.callback(e.prompt.input.value)
                }, e.callback_cancel = function() {
                    e.params.callback(!1)
                }, e.destroy_listeners = function(e) {
                    e && e.disconnect(), document.removeEventListener("keyup", i), document.removeEventListener("keyup", n)
                };
                var i = e.ok = function(i) {
                        t(i, e)
                    },
                    n = e.cancel = function(t) {
                        r(t, e)
                    };
                document.addEventListener("keyup", i), e.buttons.ok.addEventListener(e.params.point_event, i), document.addEventListener("keyup", n), e.buttons.cancel.addEventListener(e.params.point_event, n), e.buttons.ok.smoke_pure_obj = e, e.buttons.cancel.smoke_pure_obj = e
            }, e.action_list = [{
                name: "alert"
            }, {
                name: "confirm"
            }, {
                name: "prompt"
            }];
            for (var i = 0; i < e.action_list.length; i++) void
            function(t) {
                e[t] = function(i, r, a) {
                    return e.build(i, n({
                        callback: r,
                        type: t
                    }, a))
                }
            }(e.action_list[i].name);
            "undefined" != typeof module && module.exports ? module.exports = e : "function" == typeof define && define.amd ? define("smoke", [], function() {
                return e
            }) : this.smoke = e
        }(), /(msie|trident)/i.test(navigator.userAgent)) {
        var bt = Object.getOwnPropertyDescriptor(HTMLElement.prototype, "innerHTML").get,
            xt = Object.getOwnPropertyDescriptor(HTMLElement.prototype, "innerHTML").set;
        Object.defineProperty(HTMLElement.prototype, "innerHTML", {
            get: function() {
                return bt.call(this)
            },
            set: function(i) {
                for (var e = this.childNodes, r = e.length, t = r; t > 0; t--) this.removeChild(e[0]);
                xt.call(this, i)
            }
        })
    }["forEach"].forEach(function(e) {
        NodeList.prototype[e] = HTMLCollection.prototype[e] = function(t, i) {
            return Array.prototype.slice.call(this)[e](t, i)
        }
    }), /(msie|trident)/i.test(navigator.userAgent) && Object.defineProperty(HTMLImageElement.prototype, "start", {
        writable: !0
    }), HTMLElement.prototype.isAttached = function() {
        for (var e = this;;) {
            if (e = e.parentNode, e == document.documentElement) return !0;
            if (null == e) return !1
        }
    }, HTMLElement.prototype.setTimeout = function(e, t) {
        function i(e) {
            for (;;) {
                if (e = e.parentNode, e == document.documentElement) return !0;
                if (null == e) return !1
            }
        }

        function r() {
            var t = Array.prototype.slice.call(arguments);
            i(n) && e.apply(null, t)
        }
        var n = this,
            a = window.setTimeout(r, t);
        return a
    }, HTMLElement.prototype.setInterval = function(e, t) {}, Math.randInt = function(e, t) {
        return e + Math.floor(Math.random() * (t - e + 1))
    }, Math.randBMT = function() {
        var t, r, e = 0,
            i = 0;
        do e = 2 * Math.random() - 1, i = 2 * Math.random() - 1, t = e * e + i * i; while (0 == t || t > 1);
        r = Math.sqrt(-2 * Math.log(t) / t);
        var e = (e * r + 1) / 2;
        return e > 1 ? e = 1 : 0 > e && (e = 0), e
    }, Math.weightedSample = function(e) {
        var t = 0;
        for (var i in e) t += e[i];
        t *= Math.random();
        for (var i in e)
            if (t -= e[i], 0 > t) return i
    }, String.prototype.capitalize = function() {
        function e() {
            return arguments[0].toUpperCase()
        }
        return this.toLowerCase().replace(/^[a-z]|\s[a-z]/g, e)
    }, String.prototype.capitalizeFirstLetter = function() {
        return this.charAt(0).toUpperCase() + this.slice(1)
    }, HTMLElement.prototype.playAudio = function() {
        function i(e) {
            for (;;) {
                if (e = e.parentNode, e == document.documentElement) return !0;
                if (null == e) return !1
            }
        }

        function t() {
            return i(r) ? void setTimeout(t, 50) : (e.stop(), void("undefined" != typeof e.release && e.release()))
        }
        var r = this;
        t();
        var n = Array.prototype.slice.call(arguments),
            e = m.apply(null, n);
        return e
    }, ! function(n, a, i, e, u, g, o, s, l) {
        function v(a) {
            var l, o = a.length,
                i = this,
                r = 0,
                s = i.i = i.j = 0,
                n = i.S = [];
            for (o || (a = [o++]); e > r;) n[r] = r++;
            for (r = 0; e > r; r++) n[r] = n[s = t & s + a[r % o] + (l = n[r])], n[s] = l;
            (i.g = function(l) {
                for (var o, s = 0, n = i.i, a = i.j, r = i.S; l--;) o = r[n = t & n + 1], s = s * e + r[t & (r[n] = r[a = t & a + o]) + (r[a] = o)];
                return i.i = n, i.j = a, s
            })(e)
        }

        function h(e, i) {
            var r, t = [],
                n = typeof e;
            if (i && "object" == n)
                for (r in e) try {
                    t.push(h(e[r], i - 1))
                } catch (a) {}
            return t.length ? t : "string" == n ? e : e + "\x00"
        }

        function c(a, i) {
            for (var o, n = a + "", e = 0; e < n.length;) i[t & e] = t & (o ^= 19 * i[t & e]) + n.charCodeAt(e++);
            return r(i)
        }

        function f(t) {
            try {
                return n.crypto.getRandomValues(t = new Uint8Array(e)), r(t)
            } catch (i) {
                return [+new Date, n, (t = n.navigator) && t.plugins, n.screen, r(a)]
            }
        }

        function r(e) {
            return String.fromCharCode.apply(0, e)
        }
        var _ = i.pow(e, u),
            d = i.pow(2, g),
            m = 2 * d,
            t = e - 1,
            p = i["seed" + l] = function(n, t, p) {
                var s = [];
                t = 1 == t ? {
                    entropy: !0
                } : t || {};
                var g = c(h(t.entropy ? [n, r(a)] : null == n ? f() : n, 3), s),
                    o = new v(s);
                return c(r(o.S), a), (t.pass || p || function(e, t, r) {
                    return r ? (i[l] = e, t) : e
                })(function() {
                    for (var t = o.g(u), r = _, i = 0; d > t;) t = (t + i) * e, r *= e, i = o.g(1);
                    for (; t >= m;) t /= 2, r /= 2, i >>>= 1;
                    return (t + i) / r
                }, g, "global" in t ? t.global : this == i)
            };
        c(i[l](), a), o && o.exports ? o.exports = p : s && s.amd && s(function() {
            return p
        })
    }(this, [], Math, 256, 6, 52, "object" == typeof module && module, "function" == typeof define && define, "random");
    var p = function() {
        if (typeof this == window) return new p;
        var e = this,
            t = void 0;
        return e.ad_type = "admob", e.init = function() {
            "mopub" == e.ad_type && (t = window.plugins.MoPub, e.onPresentInterstitialAd = "onInterstitialPresent", e.onReceiveInterstitialAd = "onInterstitialReceive", e.onDismissInterstitialAd = "onInterstitialDismiss"), "admob" == e.ad_type && (t = window.plugins.AdMob, e.onPresentInterstitialAd = "onPresentInterstitialAd", e.onReceiveInterstitialAd = "onReceiveInterstitialAd", e.onDismissInterstitialAd = "onDismissInterstitialAd"), "flurry" == e.ad_type && (t = window.plugins.Flurry, e.onPresentInterstitialAd = "onPresentAd", e.onReceiveInterstitialAd = "onReceiveAd", e.onDismissInterstitialAd = "onDismissAd"), e.get_interstitial_options = function() {
                if ("mopub" == e.ad_type && (e.ad_id = "e92b233b5d55427ab4a760a0eb027cd2"), "admob" == e.ad_type) {
                    var t = "ca-app-pub-5419784921619686/9765547854",
                        i = "ca-app-pub-5419784921619686/5195747455";
                    e.ad_id = Math.random() > .5 ? i : t
                }
                return "flurry" == e.ad_type && (e.ad_id = "Q2HW4NQTG4S9R5FNXF25"), {
                    adId: e.ad_id,
                    isTesting: !1,
                    autoShow: !1
                }
            }, e.create_interstitial(), document.addEventListener(e.onPresentInterstitialAd, e.on_present_interstitial_ad), document.addEventListener(e.onReceiveInterstitialAd, e.on_receive_interstitial_ad), document.addEventListener(e.onDismissInterstitialAd, e.on_dismiss_interstitial_ad), window.addEventListener("orientationchange", e.orientationchange), window.addEventListener("beforeunload", function() {
                "undefined" != typeof e && e.destroy()
            })
        }, e.on_present_interstitial_ad = function() {
            e.displayed = !0, e.ondisplay && e.ondisplay()
        }, e.on_receive_interstitial_ad = function() {
            e.loaded = !0
        }, e.on_dismiss_interstitial_ad = function() {
            e.displayed = !1, e.loaded = !1, e.callback()
        }, e.orientationchange = function() {
            function t() {
                return e.displayed ? void setTimeout(t, 50) : (e.loaded = !1, void e.create_interstitial())
            }
            t()
        }, e.destroy = function() {
            document.removeEventListener(e.onPresentInterstitialAd, e.on_present_interstitial_ad), document.removeEventListener(e.onReceiveInterstitialAd, e.on_receive_interstitial_ad), document.removeEventListener(e.onDismissInterstitialAd, e.on_dismiss_interstitial_ad), window.removeEventListener("orientationchange", e.orientationchange), t && t.destroyInterstitialView && t.destroyInterstitialView()
        }, e.run = function() {
            e.running = !0, e.callback = function() {
                e.create_interstitial(), e.running = !1
            }, e.loaded ? (a && i({
                file: "http://www.flyingsoftgames.com/mr_jigtato/check-in_new" + (e.gs.DEBUG ? "-beta" : "") + ".php?action=log_ad_show&screen_name=interstitial_ad&device_uuid=" + device.uuid + "&ad_id=" + e.ad_id,
                request_method: "POST",
                async: !0
            }), t && t.showInterstitialAd()) : t && e.callback(), e.onrun && e.onrun()
        }, e.create_interstitial = function() {
            t && t.createInterstitialView(e.get_interstitial_options(), function() {}, function() {})
        }, e
    };
    "undefined" != typeof a && 1 == a && window.screen.lockOrientation && window.screen.lockOrientation("landscape");
    var x;
    1 == !!window.IS_READY ? x = y() : window.addEventListener("load", function() {
        return window.IS_READY = !0, "undefined" != typeof a && 1 == a ? void document.addEventListener("deviceready", function() {
            x = y()
        }) : void(x = y())
    }), Array.prototype.findIndex || (Array.prototype.findIndex = function(t) {
        if (null == this) throw new TypeError("Array.prototype.findIndex called on null or undefined.");
        if ("function" != typeof t || "[object Function]" !== Object.prototype.toString.call(t)) throw new TypeError("Array#findIndex: predicate must be a function.");
        for (var i = Object(this), r = i.length >>> 0, n = arguments[1], e = 0; r > e; e++) {
            var a = i[e];
            if (t.call(n, a, e, i)) return e
        }
        return -1
    }), Array.prototype.find || (Array.prototype.find = function(e) {
        if ("function" != typeof e) throw new TypeError("Predicate must be a function.");
        var t = Object(this),
            r = t.length < 0 ? 0 : t.length >>> 0;
        if (0 === r) return void 0;
        if ("function" != typeof e || "[object Function]" !== Object.prototype.toString.call(e)) throw new TypeError("Array#find: predicate must be a function.");
        for (var a = arguments[1], i = 0; r > i; i++) {
            var n = t[i];
            if (e.call(a, n, i, t)) return n
        }
        return void 0
    })
}();